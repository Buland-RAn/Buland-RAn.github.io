<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>AYu</title>
  
  
  <link href="https://www.fvolcano.red/atom.xml" rel="self"/>
  
  <link href="https://www.fvolcano.red/"/>
  <updated>2021-07-10T06:29:29.000Z</updated>
  <id>https://www.fvolcano.red/</id>
  
  <author>
    <name>AYu</name>
    
  </author>
  
  <generator uri="https://hexo.io/">Hexo</generator>
  
  <entry>
    <title>è·Ÿç€åšä¸€ä¸ªJSONè§£æå™¨ï¼ˆä¸€ï¼‰</title>
    <link href="https://www.fvolcano.red/2021/Make-a-JSON-parser-1/"/>
    <id>https://www.fvolcano.red/2021/Make-a-JSON-parser-1/</id>
    <published>2021-07-10T06:29:29.000Z</published>
    <updated>2021-07-10T06:29:29.000Z</updated>
    
    <content type="html"><![CDATA[<p>è·Ÿç€githubä¸Šçš„é¡¹ç›®json-tutorialå®Œæˆä¸€ä¸ªjsonè§£æå™¨ã€‚æœ¬æ–‡å¯¹åº”è¯¥é¡¹ç›®çš„ç¬¬ä¸€å•å…ƒã€‚<a id="more"></a></p><p>ğŸ‘‰<a href="https://github.com/miloyip/json-tutorial">é¡¹ç›®åœ°å€</a></p><h1 id="JSONæ˜¯ä»€ä¹ˆ"><a href="#JSONæ˜¯ä»€ä¹ˆ" class="headerlink" title="JSONæ˜¯ä»€ä¹ˆ"></a>JSONæ˜¯ä»€ä¹ˆ</h1><p>JSONï¼ˆJavaScript Object Notationï¼‰æ˜¯ä¸€ä¸ªç”¨äºæ•°æ®äº¤æ¢çš„æ–‡æœ¬æ ¼å¼ï¼Œç°æ—¶çš„æ ‡å‡†ä¸º<a href="https://www.ecma-international.org/publications/files/ECMA-ST/ECMA-404.pdf">ECMA-404</a>ã€‚</p><p>è™½ç„¶ JSON æºè‡³äº JavaScript è¯­è¨€ï¼Œä½†å®ƒåªæ˜¯ä¸€ç§æ•°æ®æ ¼å¼ï¼Œå¯ç”¨äºä»»ä½•ç¼–ç¨‹è¯­è¨€ã€‚ç°æ—¶å…·ç±»ä¼¼åŠŸèƒ½çš„æ ¼å¼æœ‰ XMLã€YAMLï¼Œå½“ä¸­ä»¥ JSON çš„è¯­æ³•æœ€ä¸ºç®€å•ã€‚</p><p>ä¾‹å¦‚ï¼Œä¸€ä¸ªåŠ¨æ€ç½‘é¡µæƒ³ä»æœåŠ¡å™¨è·å¾—æ•°æ®æ—¶ï¼ŒæœåŠ¡å™¨ä»æ•°æ®åº“æŸ¥æ‰¾æ•°æ®ï¼Œç„¶åæŠŠæ•°æ®è½¬æ¢æˆ JSON æ–‡æœ¬æ ¼å¼ï¼š</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    <span class="attr">&quot;title&quot;</span>: <span class="string">&quot;Design Patterns&quot;</span>,</span><br><span class="line">    <span class="attr">&quot;subtitle&quot;</span>: <span class="string">&quot;Elements of Reusable Object-Oriented Software&quot;</span>,</span><br><span class="line">    <span class="attr">&quot;author&quot;</span>: [</span><br><span class="line">        <span class="string">&quot;Erich Gamma&quot;</span>,</span><br><span class="line">        <span class="string">&quot;Richard Helm&quot;</span>,</span><br><span class="line">        <span class="string">&quot;Ralph Johnson&quot;</span>,</span><br><span class="line">        <span class="string">&quot;John Vlissides&quot;</span></span><br><span class="line">    ],</span><br><span class="line">    <span class="attr">&quot;year&quot;</span>: <span class="number">2009</span>,</span><br><span class="line">    <span class="attr">&quot;weight&quot;</span>: <span class="number">1.8</span>,</span><br><span class="line">    <span class="attr">&quot;hardcover&quot;</span>: <span class="literal">true</span>,</span><br><span class="line">    <span class="attr">&quot;publisher&quot;</span>: &#123;</span><br><span class="line">        <span class="attr">&quot;Company&quot;</span>: <span class="string">&quot;Pearson Education&quot;</span>,</span><br><span class="line">        <span class="attr">&quot;Country&quot;</span>: <span class="string">&quot;India&quot;</span></span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="attr">&quot;website&quot;</span>: <span class="literal">null</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ç½‘é¡µçš„è„šæœ¬ä»£ç å°±å¯ä»¥æŠŠæ­¤ JSON æ–‡æœ¬è§£æä¸ºå†…éƒ¨çš„æ•°æ®ç»“æ„å»ä½¿ç”¨ã€‚</p><p>ä»æ­¤ä¾‹å­å¯çœ‹å‡ºï¼ŒJSON æ˜¯æ ‘çŠ¶ç»“æ„ï¼Œè€Œ JSON åªåŒ…å« 6 ç§æ•°æ®ç±»å‹ï¼š</p><ul><li>null: è¡¨ç¤ºä¸º null</li><li>boolean: è¡¨ç¤ºä¸º true æˆ– false</li><li>number: ä¸€èˆ¬çš„æµ®ç‚¹æ•°è¡¨ç¤ºæ–¹å¼ï¼Œåœ¨ä¸‹ä¸€å•å…ƒè¯¦ç»†è¯´æ˜</li><li>string: è¡¨ç¤ºä¸º â€œâ€¦â€</li><li>array: è¡¨ç¤ºä¸º [ â€¦ ]</li><li>object: è¡¨ç¤ºä¸º { â€¦ }</li></ul><h1 id="ç›®æ ‡ï¼šç®€å•è€ŒåŸºæœ¬"><a href="#ç›®æ ‡ï¼šç®€å•è€ŒåŸºæœ¬" class="headerlink" title="ç›®æ ‡ï¼šç®€å•è€ŒåŸºæœ¬"></a>ç›®æ ‡ï¼šç®€å•è€ŒåŸºæœ¬</h1><p>æˆ‘ä»¬è¦å®ç°çš„ JSON åº“ï¼Œä¸»è¦æ˜¯å®Œæˆ 3 ä¸ªéœ€æ±‚ï¼š</p><ol><li>æŠŠ JSON æ–‡æœ¬è§£æä¸ºä¸€ä¸ªæ ‘çŠ¶æ•°æ®ç»“æ„ï¼ˆparseï¼‰ã€‚</li><li>æä¾›æ¥å£è®¿é—®è¯¥æ•°æ®ç»“æ„ï¼ˆaccessï¼‰ã€‚</li><li>æŠŠæ•°æ®ç»“æ„è½¬æ¢æˆ JSON æ–‡æœ¬ï¼ˆstringifyï¼‰ã€‚</li></ol><p><a href="https://github.com/Buland-RAn/json-tutorial/blob/master/tutorial01/images/requirement.png"><img src="https://github.com/Buland-RAn/json-tutorial/raw/master/tutorial01/images/requirement.png" alt="requirement"></a></p><h1 id="å¼€å§‹ï¼šforké¡¹ç›®è‡ªå·±åš"><a href="#å¼€å§‹ï¼šforké¡¹ç›®è‡ªå·±åš" class="headerlink" title="å¼€å§‹ï¼šforké¡¹ç›®è‡ªå·±åš"></a>å¼€å§‹ï¼šforké¡¹ç›®è‡ªå·±åš</h1><p>ç‚¹å‡»json-tutorialé¡¹ç›®çš„forkåï¼Œåœ¨æœ¬åœ°cloneï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git <span class="built_in">clone</span> git@github.com:yourname/json-tutorial.git</span><br></pre></td></tr></table></figure><p><img src="/2021/Make-a-JSON-parser-1/image-20210710143417392.png" alt="image-20210710143417392"></p><p><code>cd</code> è¿›å…¥ä½ çš„å·¥ä½œç›®å½•ï¼Œå¯ä»¥çœ‹å¾…git bashå‘½ä»¤æç¤ºç¬¦åé¢æœ‰(master)æ ‡è¯†ï¼Œè¯´æ˜æ­¤æ—¶æˆ‘ä»¬å¤„åœ¨masteråˆ†æ”¯ä¸Šã€‚</p><p>ç”¨git remote -vå‘½ä»¤å¯ä»¥æŸ¥çœ‹è¯¥æœ¬åœ°ä»“åº“å…³è”çš„è¿œç¨‹ä»“åº“ï¼š</p><p><img src="/2021/Make-a-JSON-parser-1/image-20210710143652754.png" alt="image-20210710143652754"></p><p>å…¶ä¸­ï¼Œ<strong>origin</strong> ä¸ºè¿œç¨‹åœ°å€çš„åˆ«åï¼Œåé¢ä¸ºè¿œç¨‹ä»“åº“çš„urlã€‚</p><p>æˆ‘ä»¬çš„ JSON åº“åä¸º leptjsonï¼Œä»£ç æ–‡ä»¶åªæœ‰ 3 ä¸ªï¼š</p><ol><li><code>leptjson.h</code>ï¼šleptjson çš„å¤´æ–‡ä»¶ï¼ˆheader fileï¼‰ï¼Œå«æœ‰å¯¹å¤–çš„ç±»å‹å’Œ API å‡½æ•°å£°æ˜ã€‚</li><li><code>leptjson.c</code>ï¼šleptjson çš„å®ç°æ–‡ä»¶ï¼ˆimplementation fileï¼‰ï¼Œå«æœ‰å†…éƒ¨çš„ç±»å‹å£°æ˜å’Œå‡½æ•°å®ç°ã€‚æ­¤æ–‡ä»¶ä¼šç¼–è¯‘æˆåº“ã€‚</li><li><code>test.c</code>ï¼šæˆ‘ä»¬ä½¿ç”¨æµ‹è¯•é©±åŠ¨å¼€å‘ï¼ˆtest driven development, TDDï¼‰ã€‚æ­¤æ–‡ä»¶åŒ…å«æµ‹è¯•ç¨‹åºï¼Œéœ€è¦é“¾æ¥ leptjson åº“ã€‚</li></ol><h1 id="ä¸€ã€ç¼–è¯‘ç¯å¢ƒæ­å»º"><a href="#ä¸€ã€ç¼–è¯‘ç¯å¢ƒæ­å»º" class="headerlink" title="ä¸€ã€ç¼–è¯‘ç¯å¢ƒæ­å»º"></a>ä¸€ã€ç¼–è¯‘ç¯å¢ƒæ­å»º</h1><p>å®‰è£…CMakeåï¼Œä½¿ç”¨å…¶cmake-guiç¨‹åºï¼š</p><p><img src="/2021/Make-a-JSON-parser-1/image-20210710145207755.png" alt="image-20210710145207755"></p><p>å…ˆåœ¨ â€œWhere is the source codeâ€ é€‰æ‹© json-tutorial/tutorial01ï¼Œå†åœ¨ â€œWhere to build the binaryâ€ é”®å…¥ä¸Šä¸€ä¸ªç›®å½•åŠ ä¸Š /buildï¼š</p><p><img src="/2021/Make-a-JSON-parser-1/image-20210710150346431.png" alt="image-20210710150346431"></p><p>åœ¨é€‰æ‹©generatorçš„åœ°æ–¹è¦é€‰æ‹©ä½ ç”µè„‘ä¸­å®‰è£…çš„vsç‰ˆæœ¬ï¼Œå¦åˆ™ä¼šå¤±è´¥ï¼Œè‹¥é€‰æ‹©é”™è¯¯ï¼Œå¯ä»¥åœ¨file-&gt;delete cacheä¸­é‡ç½®ï¼š</p><p><img src="/2021/Make-a-JSON-parser-1/image-20210710150217094.png" alt="image-20210710150217094"></p><p>é…ç½®å®Œæˆï¼š</p><p><img src="/2021/Make-a-JSON-parser-1/image-20210710150413104.png" alt="image-20210710150413104"></p><p>ç¼–è¯‘è¿è¡Œleptjson_teståè‹¥å‡ºç°ä¸‹é¢ç»“æœè¯´æ˜å·²ç»æˆåŠŸæ­å»ºå¥½ç¼–è¯‘ç¯å¢ƒï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">/è·¯å¾„/json-tutorial/tutorial01/test.c:56: expect: 3 actual: 0</span><br><span class="line">11/12 (91.67%) passed</span><br></pre></td></tr></table></figure><h1 id="äºŒã€å¤´æ–‡ä»¶ä¸APIè®¾è®¡"><a href="#äºŒã€å¤´æ–‡ä»¶ä¸APIè®¾è®¡" class="headerlink" title="äºŒã€å¤´æ–‡ä»¶ä¸APIè®¾è®¡"></a>äºŒã€å¤´æ–‡ä»¶ä¸APIè®¾è®¡</h1><p>ç”±äºå¤´æ–‡ä»¶ä¹Ÿå¯ä»¥ <code>#include</code> å…¶ä»–å¤´æ–‡ä»¶ï¼Œä¸ºé¿å…é‡å¤å£°æ˜ï¼Œé€šå¸¸ä¼šåˆ©ç”¨å®åŠ å…¥ include é˜²èŒƒï¼ˆinclude guardï¼‰ï¼š</p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">ifndef</span> LEPTJSON_H__</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> LEPTJSON_H__</span></span><br><span class="line"></span><br><span class="line"><span class="comment">/* ... */</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="meta-keyword">endif</span> <span class="comment">/* LEPTJSON_H__ */</span></span></span><br></pre></td></tr></table></figure><p>å¦‚å‰æ‰€è¿°ï¼ŒJSON ä¸­æœ‰ 6 ç§æ•°æ®ç±»å‹ï¼Œå¦‚æœæŠŠ true å’Œ false å½“ä½œä¸¤ä¸ªç±»å‹å°±æ˜¯ 7 ç§ï¼Œæˆ‘ä»¬ä¸ºæ­¤å£°æ˜ä¸€ä¸ªæšä¸¾ç±»å‹ï¼ˆenumeration typeï¼‰ï¼š</p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">typedef</span> <span class="keyword">enum</span> &#123; </span><br><span class="line">    LEPT_NULL, </span><br><span class="line">    LEPT_FALSE, </span><br><span class="line">    LEPT_TRUE, </span><br><span class="line">    LEPT_NUMBER, </span><br><span class="line">    LEPT_STRING, </span><br><span class="line">    LEPT_ARRAY, </span><br><span class="line">    LEPT_OBJECT </span><br><span class="line">&#125; lept_type;</span><br></pre></td></tr></table></figure><p>æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬å£°æ˜ JSON çš„æ•°æ®ç»“æ„ã€‚JSON æ˜¯ä¸€ä¸ªæ ‘å½¢ç»“æ„ï¼Œæˆ‘ä»¬æœ€ç»ˆéœ€è¦å®ç°ä¸€ä¸ªæ ‘çš„æ•°æ®ç»“æ„ï¼Œæ¯ä¸ªèŠ‚ç‚¹ä½¿ç”¨ <code>lept_value</code> ç»“æ„ä½“è¡¨ç¤ºï¼Œæˆ‘ä»¬ä¼šç§°å®ƒä¸ºä¸€ä¸ª JSON å€¼ï¼ˆJSON valueï¼‰ã€‚ åœ¨æ­¤å•å…ƒä¸­ï¼Œæˆ‘ä»¬åªéœ€è¦å®ç° null, true å’Œ false çš„è§£æï¼Œå› æ­¤è¯¥ç»“æ„ä½“åªéœ€è¦å­˜å‚¨ä¸€ä¸ª lept_typeã€‚ä¹‹åçš„å•å…ƒä¼šé€æ­¥åŠ å…¥å…¶ä»–æ•°æ®ã€‚</p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">typedef</span> <span class="class"><span class="keyword">struct</span> &#123;</span></span><br><span class="line">    lept_type type;</span><br><span class="line">&#125;lept_value;</span><br></pre></td></tr></table></figure><p>å…ˆå®šä¹‰ä¸¤ä¸ªAPIï¼š</p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">lept_parse</span><span class="params">(lept_value* v, <span class="keyword">const</span> <span class="keyword">char</span>* json)</span></span>;</span><br><span class="line"><span class="function">lept_type <span class="title">lept_get_type</span><span class="params">(<span class="keyword">const</span> lept_value* v)</span></span>;</span><br></pre></td></tr></table></figure><p>å‰ä¸€ä¸ªç”¨æ¥è§£æjsonï¼Œå‚æ•°jsonæ˜¯ä¸åº”è¯¥è¢«æ”¹åŠ¨çš„ï¼Œæ‰€ä»¥ä½¿ç”¨<code>const char*</code> ç±»å‹ã€‚</p><p>è¿”å›å€¼æ˜¯ä»¥ä¸‹è¿™äº›æšä¸¾å€¼ï¼Œæ— é”™è¯¯ä¼šè¿”å› <code>LEPT_PARSE_OK</code>ï¼Œå…¶ä»–å€¼åœ¨åé¢è§£é‡Šã€‚</p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">enum</span> &#123;</span><br><span class="line">    LEPT_PARSE_OK = <span class="number">0</span>,</span><br><span class="line">    LEPT_PARSE_EXPECT_VALUE,</span><br><span class="line">    LEPT_PARSE_INVALID_VALUE,</span><br><span class="line">    LEPT_PARSE_ROOT_NOT_SINGULAR</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><p>åä¸€ä¸ªå‡½æ•°ç”¨æ¥è·å–è¯¥<code>lept_value</code>èŠ‚ç‚¹çš„æ•°æ®ç±»å‹ã€‚</p><h1 id="ä¸‰ã€JSON-è¯­æ³•å­é›†"><a href="#ä¸‰ã€JSON-è¯­æ³•å­é›†" class="headerlink" title="ä¸‰ã€JSON è¯­æ³•å­é›†"></a>ä¸‰ã€JSON è¯­æ³•å­é›†</h1><p>ä¸‹é¢æ˜¯æ­¤å•å…ƒçš„ JSON è¯­æ³•å­é›†ï¼Œä½¿ç”¨ <a href="https://tools.ietf.org/html/rfc7159">RFC7159</a> ä¸­çš„ <a href="https://tools.ietf.org/html/rfc5234">ABNF</a> è¡¨ç¤ºï¼š</p><figure class="highlight ini"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">JSON-text</span> = ws value ws</span><br><span class="line"><span class="attr">ws</span> = *(%x20 / %x09 / %x0A / %x0D)</span><br><span class="line"><span class="attr">value</span> = null / <span class="literal">false</span> / <span class="literal">true</span> </span><br><span class="line"><span class="attr">null</span>  = <span class="string">&quot;null&quot;</span></span><br><span class="line"><span class="attr">false</span> = <span class="string">&quot;false&quot;</span></span><br><span class="line"><span class="attr">true</span>  = <span class="string">&quot;true&quot;</span></span><br></pre></td></tr></table></figure><p>å½“ä¸­ <code>%xhh</code> è¡¨ç¤ºä»¥ 16 è¿›åˆ¶è¡¨ç¤ºçš„å­—ç¬¦ï¼Œ<code>/</code> æ˜¯å¤šé€‰ä¸€ï¼Œ<code>*</code> æ˜¯é›¶æˆ–å¤šä¸ªï¼Œ<code>()</code> ç”¨äºåˆ†ç»„ã€‚</p><p>é‚£ä¹ˆç¬¬ä¸€è¡Œçš„æ„æ€æ˜¯ï¼ŒJSON æ–‡æœ¬ç”± 3 éƒ¨åˆ†ç»„æˆï¼Œé¦–å…ˆæ˜¯ç©ºç™½ï¼ˆwhitespaceï¼‰ï¼Œæ¥ç€æ˜¯ä¸€ä¸ªå€¼ï¼Œæœ€åæ˜¯ç©ºç™½ã€‚</p><p>ç¬¬äºŒè¡Œå‘Šè¯‰æˆ‘ä»¬ï¼Œæ‰€è°“ç©ºç™½ï¼Œæ˜¯ç”±é›¶æˆ–å¤šä¸ªç©ºæ ¼ç¬¦ï¼ˆspace U+0020ï¼‰ã€åˆ¶è¡¨ç¬¦ï¼ˆtab U+0009ï¼‰ã€æ¢è¡Œç¬¦ï¼ˆLF U+000Aï¼‰ã€å›è½¦ç¬¦ï¼ˆCR U+000Dï¼‰æ‰€ç»„æˆã€‚</p><p>ç¬¬ä¸‰è¡Œæ˜¯è¯´ï¼Œæˆ‘ä»¬ç°æ—¶çš„å€¼åªå¯ä»¥æ˜¯ nullã€false æˆ– trueï¼Œå®ƒä»¬åˆ†åˆ«æœ‰å¯¹åº”çš„å­—é¢å€¼ï¼ˆliteralï¼‰ã€‚</p><p>æˆ‘ä»¬çš„è§£æå™¨åº”èƒ½åˆ¤æ–­è¾“å…¥æ˜¯å¦ä¸€ä¸ªåˆæ³•çš„ JSONã€‚å¦‚æœè¾“å…¥çš„ JSON ä¸åˆç¬¦è¿™ä¸ªè¯­æ³•ï¼Œæˆ‘ä»¬è¦äº§ç”Ÿå¯¹åº”çš„é”™è¯¯ç ï¼Œæ–¹ä¾¿ä½¿ç”¨è€…è¿½æŸ¥é—®é¢˜ã€‚</p><p>åœ¨è¿™ä¸ª JSON è¯­æ³•å­é›†ä¸‹ï¼Œæˆ‘ä»¬å®šä¹‰ 3 ç§é”™è¯¯ç ï¼š</p><ul><li>è‹¥ä¸€ä¸ª JSON åªå«æœ‰ç©ºç™½ï¼Œä¼ å› <code>LEPT_PARSE_EXPECT_VALUE</code>ã€‚</li><li>è‹¥ä¸€ä¸ªå€¼ä¹‹åï¼Œåœ¨ç©ºç™½ä¹‹åè¿˜æœ‰å…¶ä»–å­—ç¬¦ï¼Œä¼ å› <code>LEPT_PARSE_ROOT_NOT_SINGULAR</code>ã€‚</li><li>è‹¥å€¼ä¸æ˜¯é‚£ä¸‰ç§å­—é¢å€¼ï¼Œä¼ å› <code>LEPT_PARSE_INVALID_VALUE</code>ã€‚</li></ul><h1 id="å››ã€å•å…ƒæµ‹è¯•"><a href="#å››ã€å•å…ƒæµ‹è¯•" class="headerlink" title="å››ã€å•å…ƒæµ‹è¯•"></a>å››ã€å•å…ƒæµ‹è¯•</h1><p>ä¸ºäº†ç®€å•èµ·è§ï¼Œç¼–å†™ä¸€ä¸ªæç®€å•çš„å•å…ƒæµ‹è¯•æ–¹å¼ã€‚æ— è®ºæˆ‘ä»¬æ˜¯é‡‡ç”¨ TDDï¼ˆtest-driven developmentï¼‰ï¼Œæˆ–æ˜¯å…ˆå®ç°åæµ‹è¯•ï¼Œéƒ½åº”å°½é‡åŠ å…¥è¶³å¤Ÿè¦†ç›–ç‡çš„å•å…ƒæµ‹è¯•ã€‚</p><p>å›åˆ° leptjson é¡¹ç›®ï¼Œ<code>test.c</code> åŒ…å«äº†ä¸€ä¸ªæç®€çš„å•å…ƒæµ‹è¯•æ¡†æ¶ï¼š</p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;stdlib.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;string.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&quot;leptjson.h&quot;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">static</span> <span class="keyword">int</span> main_ret = <span class="number">0</span>;</span><br><span class="line"><span class="keyword">static</span> <span class="keyword">int</span> test_count = <span class="number">0</span>;</span><br><span class="line"><span class="keyword">static</span> <span class="keyword">int</span> test_pass = <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> EXPECT_EQ_BASE(equality, expect, actual, format) \</span></span><br><span class="line">    <span class="keyword">do</span> &#123;\</span><br><span class="line">        test_count++;\</span><br><span class="line">        <span class="keyword">if</span> (equality)\</span><br><span class="line">            test_pass++;\</span><br><span class="line">        <span class="keyword">else</span> &#123;\</span><br><span class="line">            <span class="built_in">fprintf</span>(<span class="built_in">stderr</span>, <span class="string">&quot;%s:%d: expect: &quot;</span> format <span class="string">&quot; actual: &quot;</span> format <span class="string">&quot;\n&quot;</span>, __FILE__, __LINE__, expect, actual);\</span><br><span class="line">            main_ret = <span class="number">1</span>;\</span><br><span class="line">        &#125;\</span><br><span class="line">    &#125; <span class="keyword">while</span>(<span class="number">0</span>)</span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> EXPECT_EQ_INT(expect, actual) EXPECT_EQ_BASE((expect) == (actual), expect, actual, <span class="meta-string">&quot;%d&quot;</span>)</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">static</span> <span class="keyword">void</span> <span class="title">test_parse_null</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    lept_value v;</span><br><span class="line">    v.type = LEPT_TRUE;</span><br><span class="line">    EXPECT_EQ_INT(LEPT_PARSE_OK, lept_parse(&amp;v, <span class="string">&quot;null&quot;</span>));</span><br><span class="line">    EXPECT_EQ_INT(LEPT_NULL, lept_get_type(&amp;v));</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* ... */</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">static</span> <span class="keyword">void</span> <span class="title">test_parse</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    test_parse_null();</span><br><span class="line">    <span class="comment">/* ... */</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    test_parse();</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;%d/%d (%3.2f%%) passed\n&quot;</span>, test_pass, test_count, test_pass * <span class="number">100.0</span> / test_count);</span><br><span class="line">    <span class="keyword">return</span> main_ret;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ç°æ—¶åªæä¾›äº†ä¸€ä¸ª <code>EXPECT_EQ_INT(expect, actual)</code> çš„å®ï¼Œæ¯æ¬¡ä½¿ç”¨è¿™ä¸ªå®æ—¶ï¼Œå¦‚æœ expect != actualï¼ˆé¢„æœŸå€¼ä¸ç­‰äºå®é™…å€¼ï¼‰ï¼Œä¾¿ä¼šè¾“å‡ºé”™è¯¯ä¿¡æ¯ã€‚ è‹¥æŒ‰ç…§ TDD çš„æ­¥éª¤ï¼Œæˆ‘ä»¬å…ˆå†™ä¸€ä¸ªæµ‹è¯•ï¼Œå¦‚ä¸Šé¢çš„ <code>test_parse_null()</code>ï¼Œè€Œ <code>lept_parse()</code> åªè¿”å› <code>LEPT_PARSE_OK</code>ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">/è·¯å¾„/json-tutorial/tutorial01/test.c:27: expect: 0 actual: 1</span><br><span class="line">1/2 (50.00%) passed</span><br></pre></td></tr></table></figure><p>ç¬¬ä¸€ä¸ªè¿”å› <code>LEPT_PARSE_OK</code>ï¼Œæ‰€ä»¥æ˜¯é€šè¿‡çš„ã€‚ç¬¬äºŒä¸ªæµ‹è¯•å› ä¸º <code>lept_parse()</code> æ²¡æœ‰æŠŠ <code>v.type</code> æ”¹æˆ <code>LEPT_NULL</code>ï¼Œé€ æˆå¤±è´¥ã€‚æˆ‘ä»¬å†å®ç° <code>lept_parse()</code> ä»¤åˆ°å®ƒèƒ½é€šè¿‡æµ‹è¯•ã€‚</p><h2 id="å®çš„ç¼–å†™æŠ€å·§-EXPECT-EQ-BASEè§£æ"><a href="#å®çš„ç¼–å†™æŠ€å·§-EXPECT-EQ-BASEè§£æ" class="headerlink" title="å®çš„ç¼–å†™æŠ€å·§: EXPECT_EQ_BASEè§£æ"></a>å®çš„ç¼–å†™æŠ€å·§: EXPECT_EQ_BASEè§£æ</h2><p>åæ–œçº¿ä»£è¡¨è¯¥è¡Œæœªç»“æŸï¼Œä¼šä¸²æ¥ä¸‹ä¸€è¡Œã€‚è€Œå¦‚æœå®é‡Œæœ‰å¤šè¿‡ä¸€ä¸ªè¯­å¥ï¼ˆstatementï¼‰ï¼Œå°±éœ€è¦ç”¨ <code>do &#123; /*...*/ &#125; while(0)</code> åŒ…è£¹æˆå•ä¸ªè¯­å¥ï¼Œå¦åˆ™ä¼šæœ‰å¦‚ä¸‹çš„é—®é¢˜ï¼š</p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">define</span> M() a(); b()</span></span><br><span class="line"><span class="keyword">if</span> (cond)</span><br><span class="line">    M();</span><br><span class="line"><span class="keyword">else</span></span><br><span class="line">    c();</span><br><span class="line"></span><br><span class="line"><span class="comment">/* é¢„å¤„ç†å */</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> (cond)</span><br><span class="line">    a(); b(); <span class="comment">/* b(); åœ¨ if ä¹‹å¤–     */</span></span><br><span class="line"><span class="keyword">else</span>          <span class="comment">/* &lt;- else ç¼ºä¹å¯¹åº” if */</span></span><br><span class="line">    c();</span><br></pre></td></tr></table></figure><p>åªç”¨ <code>&#123; &#125;</code> ä¹Ÿä¸è¡Œï¼š</p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">define</span> M() &#123; a(); b(); &#125;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">/* é¢„å¤„ç†å */</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> (cond)</span><br><span class="line">    &#123; a(); b(); &#125;; <span class="comment">/* æœ€åçš„åˆ†å·ä»£è¡¨ if è¯­å¥ç»“æŸ */</span></span><br><span class="line"><span class="keyword">else</span>               <span class="comment">/* else ç¼ºä¹å¯¹åº” if */</span></span><br><span class="line">    c();</span><br></pre></td></tr></table></figure><p>ç”¨ do while å°±è¡Œäº†ï¼š</p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">define</span> M() do &#123; a(); b(); &#125; while(0)</span></span><br><span class="line"></span><br><span class="line"><span class="comment">/* é¢„å¤„ç†å */</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> (cond)</span><br><span class="line">    <span class="keyword">do</span> &#123; a(); b(); &#125; <span class="keyword">while</span>(<span class="number">0</span>);</span><br><span class="line"><span class="keyword">else</span></span><br><span class="line">    c();</span><br></pre></td></tr></table></figure><h1 id="äº”ã€å®ç°è§£æå™¨"><a href="#äº”ã€å®ç°è§£æå™¨" class="headerlink" title="äº”ã€å®ç°è§£æå™¨"></a>äº”ã€å®ç°è§£æå™¨</h1><p>é¦–å…ˆä¸ºäº†å‡å°‘è§£æå‡½æ•°ä¹‹é—´ä¼ é€’å¤šä¸ªå‚æ•°ï¼Œæˆ‘ä»¬æŠŠè¿™äº›æ•°æ®éƒ½æ”¾è¿›ä¸€ä¸ª <code>lept_context</code> ç»“æ„ä½“ï¼š</p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">typedef</span> <span class="class"><span class="keyword">struct</span> &#123;</span></span><br><span class="line">    <span class="keyword">const</span> <span class="keyword">char</span>* json;</span><br><span class="line">&#125;lept_context;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* ... */</span></span><br><span class="line"></span><br><span class="line"><span class="comment">/* æç¤ºï¼šè¿™é‡Œåº”è¯¥æ˜¯ JSON-text = ws value ws */</span></span><br><span class="line"><span class="comment">/* ä»¥ä¸‹å®ç°æ²¡å¤„ç†æœ€åçš„ ws å’Œ LEPT_PARSE_ROOT_NOT_SINGULAR */</span></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">lept_parse</span><span class="params">(lept_value* v, <span class="keyword">const</span> <span class="keyword">char</span>* json)</span> </span>&#123;</span><br><span class="line">    lept_context c;</span><br><span class="line">    assert(v != <span class="literal">NULL</span>);</span><br><span class="line">    c.json = json;</span><br><span class="line">    v-&gt;type = LEPT_NULL;</span><br><span class="line">    lept_parse_whitespace(&amp;c);</span><br><span class="line">    <span class="keyword">return</span> lept_parse_value(&amp;c, v);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æš‚æ—¶æˆ‘ä»¬åªå‚¨å­˜ json å­—ç¬¦ä¸²å½“å‰ä½ç½®ï¼Œä¹‹åçš„å•å…ƒæˆ‘ä»¬éœ€è¦åŠ å…¥æ›´å¤šå†…å®¹ã€‚</p><p>è‹¥ <code>lept_parse()</code> å¤±è´¥ï¼Œä¼šæŠŠ <code>v</code> è®¾ä¸º <code>null</code> ç±»å‹ï¼Œæ‰€ä»¥è¿™é‡Œå…ˆæŠŠå®ƒè®¾ä¸º <code>null</code>ï¼Œè®© <code>lept_parse_value()</code> å†™å…¥è§£æå‡ºæ¥çš„æ ¹å€¼ã€‚</p><p>ç»™ä¸‹é¢å†…å®¹åšçš„åè¯è§£é‡Šï¼š</p><ol><li><p><a href="https://www.wikiwand.com/zh-hans/%E9%80%92%E5%BD%92%E4%B8%8B%E9%99%8D%E8%A7%A3%E6%9E%90%E5%99%A8">é€’å½’ä¸‹é™è§£æå™¨</a>ï¼ˆrecursive descent parserï¼‰</p><p>ä¸€ç§è‡ªä¸Šè€Œä¸‹çš„è§£æå™¨ï¼ˆ<a href="https://www.wikiwand.com/en/Top-down_parsing">Top-down parsing</a>ï¼‰ï¼Œç”±ä¸€ç»„<a href="https://www.wikiwand.com/zh-hans/%E4%BA%92%E9%80%92%E5%BD%92">ç›¸äº’é€’å½’</a>çš„ç¨‹åºï¼ˆæˆ–ç­‰ä»·çš„éé€’å½’ç¨‹åºï¼‰æ„å»ºè€Œæˆï¼Œå…¶ä¸­æ¯ä¸ªç¨‹åºéƒ½å®ç°äº†æ–‡æ³•ä¸­çš„ä¸€ä¸ª<a href="https://www.wikiwand.com/zh-hans/%E7%B5%82%E7%B5%90%E7%AC%A6%E8%88%87%E9%9D%9E%E7%B5%82%E7%B5%90%E7%AC%A6">éç»ˆç»“ç¬¦</a>ã€‚</p></li><li><p><a href>åˆ†è¯å™¨</a>ï¼ˆtokenizerï¼‰</p><p>æŒ‰ç…§è§„åˆ™å°†æ–‡æœ¬åˆ‡åˆ†ä¸ºå•è¯çš„å·¥å…·ã€‚</p><p><img src="/2021/Make-a-JSON-parser-1/1438655-20180728162354187-296980561.jpg" alt="åˆ†è¯å™¨æµç¨‹å›¾"></p></li></ol><p>leptjson æ˜¯ä¸€ä¸ªæ‰‹å†™çš„<strong>é€’å½’ä¸‹é™è§£æå™¨</strong>ã€‚ç”±äº JSON è¯­æ³•ç‰¹åˆ«ç®€å•ï¼Œæˆ‘ä»¬ä¸éœ€è¦å†™<strong>åˆ†è¯å™¨</strong>ï¼Œåªéœ€æ£€æµ‹ä¸‹ä¸€ä¸ªå­—ç¬¦ï¼Œä¾¿å¯ä»¥çŸ¥é“å®ƒæ˜¯å“ªç§ç±»å‹çš„å€¼ï¼Œç„¶åè°ƒç”¨ç›¸å…³çš„åˆ†æå‡½æ•°ã€‚å¯¹äºå®Œæ•´çš„ JSON è¯­æ³•ï¼Œè·³è¿‡ç©ºç™½åï¼Œåªéœ€æ£€æµ‹å½“å‰å­—ç¬¦ï¼š</p><ul><li>n â” null</li><li>t â” true</li><li>f â” false</li><li>â€œ â” string</li><li>0-9/- â” number</li><li>[ â” array</li><li>{ â” object</li></ul><p>æ‰€ä»¥ï¼Œæˆ‘ä»¬å¯ä»¥æŒ‰ç…§ JSON è¯­æ³•ä¸€èŠ‚çš„ EBNF ç®€å•ç¿»è¯‘æˆè§£æå‡½æ•°ï¼š</p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">define</span> EXPECT(c, ch) do &#123; assert(*c-&gt;json == (ch)); c-&gt;json++; &#125; while(0)</span></span><br><span class="line"></span><br><span class="line"><span class="comment">/* ws = *(%x20 / %x09 / %x0A / %x0D) */</span></span><br><span class="line"><span class="function"><span class="keyword">static</span> <span class="keyword">void</span> <span class="title">lept_parse_whitespace</span><span class="params">(lept_context* c)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">const</span> <span class="keyword">char</span> *p = c-&gt;json;</span><br><span class="line">    <span class="keyword">while</span> (*p == <span class="string">&#x27; &#x27;</span> || *p == <span class="string">&#x27;\t&#x27;</span> || *p == <span class="string">&#x27;\n&#x27;</span> || *p == <span class="string">&#x27;\r&#x27;</span>)</span><br><span class="line">        p++;</span><br><span class="line">    c-&gt;json = p;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* null  = &quot;null&quot; */</span></span><br><span class="line"><span class="function"><span class="keyword">static</span> <span class="keyword">int</span> <span class="title">lept_parse_null</span><span class="params">(lept_context* c, lept_value* v)</span> </span>&#123;</span><br><span class="line">    EXPECT(c, <span class="string">&#x27;n&#x27;</span>);</span><br><span class="line">    <span class="keyword">if</span> (c-&gt;json[<span class="number">0</span>] != <span class="string">&#x27;u&#x27;</span> || c-&gt;json[<span class="number">1</span>] != <span class="string">&#x27;l&#x27;</span> || c-&gt;json[<span class="number">2</span>] != <span class="string">&#x27;l&#x27;</span>)</span><br><span class="line">        <span class="keyword">return</span> LEPT_PARSE_INVALID_VALUE;</span><br><span class="line">    c-&gt;json += <span class="number">3</span>;</span><br><span class="line">    v-&gt;type = LEPT_NULL;</span><br><span class="line">    <span class="keyword">return</span> LEPT_PARSE_OK;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* value = null / false / true */</span></span><br><span class="line"><span class="comment">/* æç¤ºï¼šä¸‹é¢ä»£ç æ²¡å¤„ç† false / trueï¼Œå°†ä¼šæ˜¯ç»ƒä¹ ä¹‹ä¸€ */</span></span><br><span class="line"><span class="function"><span class="keyword">static</span> <span class="keyword">int</span> <span class="title">lept_parse_value</span><span class="params">(lept_context* c, lept_value* v)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">switch</span> (*c-&gt;json) &#123;</span><br><span class="line">        <span class="keyword">case</span> <span class="string">&#x27;n&#x27;</span>:  <span class="keyword">return</span> lept_parse_null(c, v);</span><br><span class="line">        <span class="keyword">case</span> <span class="string">&#x27;\0&#x27;</span>: <span class="keyword">return</span> LEPT_PARSE_EXPECT_VALUE;</span><br><span class="line">        <span class="keyword">default</span>:   <span class="keyword">return</span> LEPT_PARSE_INVALID_VALUE;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ç”±äº <code>lept_parse_whitespace()</code> æ˜¯ä¸ä¼šå‡ºç°é”™è¯¯çš„ï¼Œè¿”å›ç±»å‹ä¸º <code>void</code>ã€‚å…¶å®ƒçš„è§£æå‡½æ•°ä¼šè¿”å›é”™è¯¯ç ï¼Œä¼ é€’è‡³é¡¶å±‚ã€‚</p><h1 id="å…­ã€æœ¬å•å…ƒæ–‡ä»¶å®Œæ•´å†…å®¹"><a href="#å…­ã€æœ¬å•å…ƒæ–‡ä»¶å®Œæ•´å†…å®¹" class="headerlink" title="å…­ã€æœ¬å•å…ƒæ–‡ä»¶å®Œæ•´å†…å®¹"></a>å…­ã€æœ¬å•å…ƒæ–‡ä»¶å®Œæ•´å†…å®¹</h1><p>æœ¬å•å…ƒç»“æŸé¡¹ç›®ä¸‰ä¸ªæ–‡ä»¶çš„å†…å®¹ï¼š</p><p>leptjson.h</p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">ifndef</span> LEPTJSON_H__</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> LEPTJSON_H__</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">typedef</span> <span class="keyword">enum</span> &#123; LEPT_NULL, LEPT_FALSE, LEPT_TRUE, LEPT_NUMBER, LEPT_STRING, LEPT_ARRAY, LEPT_OBJECT &#125; lept_type;</span><br><span class="line"></span><br><span class="line"><span class="keyword">typedef</span> <span class="class"><span class="keyword">struct</span> &#123;</span></span><br><span class="line">    lept_type type;</span><br><span class="line">&#125;lept_value;</span><br><span class="line"></span><br><span class="line"><span class="keyword">enum</span> &#123;</span><br><span class="line">    LEPT_PARSE_OK = <span class="number">0</span>,</span><br><span class="line">    LEPT_PARSE_EXPECT_VALUE,</span><br><span class="line">    LEPT_PARSE_INVALID_VALUE,</span><br><span class="line">    LEPT_PARSE_ROOT_NOT_SINGULAR</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">lept_parse</span><span class="params">(lept_value* v, <span class="keyword">const</span> <span class="keyword">char</span>* json)</span></span>;</span><br><span class="line"></span><br><span class="line"><span class="function">lept_type <span class="title">lept_get_type</span><span class="params">(<span class="keyword">const</span> lept_value* v)</span></span>;</span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="meta-keyword">endif</span> <span class="comment">/* LEPTJSON_H__ */</span></span></span><br></pre></td></tr></table></figure><p>leptjson.c</p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&quot;leptjson.h&quot;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;assert.h&gt;  /* assert() */</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;stdlib.h&gt;  /* NULL */</span></span></span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> EXPECT(c, ch)       do &#123; assert(*c-&gt;json == (ch)); c-&gt;json++; &#125; while(0)</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">typedef</span> <span class="class"><span class="keyword">struct</span> &#123;</span></span><br><span class="line">    <span class="keyword">const</span> <span class="keyword">char</span>* json;</span><br><span class="line">&#125;lept_context;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">static</span> <span class="keyword">void</span> <span class="title">lept_parse_whitespace</span><span class="params">(lept_context* c)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">const</span> <span class="keyword">char</span> *p = c-&gt;json;</span><br><span class="line">    <span class="keyword">while</span> (*p == <span class="string">&#x27; &#x27;</span> || *p == <span class="string">&#x27;\t&#x27;</span> || *p == <span class="string">&#x27;\n&#x27;</span> || *p == <span class="string">&#x27;\r&#x27;</span>)</span><br><span class="line">        p++;</span><br><span class="line">    c-&gt;json = p;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">static</span> <span class="keyword">int</span> <span class="title">lept_parse_null</span><span class="params">(lept_context* c, lept_value* v)</span> </span>&#123;</span><br><span class="line">    EXPECT(c, <span class="string">&#x27;n&#x27;</span>);</span><br><span class="line">    <span class="keyword">if</span> (c-&gt;json[<span class="number">0</span>] != <span class="string">&#x27;u&#x27;</span> || c-&gt;json[<span class="number">1</span>] != <span class="string">&#x27;l&#x27;</span> || c-&gt;json[<span class="number">2</span>] != <span class="string">&#x27;l&#x27;</span>)</span><br><span class="line">        <span class="keyword">return</span> LEPT_PARSE_INVALID_VALUE;</span><br><span class="line">    c-&gt;json += <span class="number">3</span>;</span><br><span class="line">    v-&gt;type = LEPT_NULL;</span><br><span class="line">    <span class="keyword">return</span> LEPT_PARSE_OK;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">static</span> <span class="keyword">int</span> <span class="title">lept_parse_value</span><span class="params">(lept_context* c, lept_value* v)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">switch</span> (*c-&gt;json) &#123;</span><br><span class="line">        <span class="keyword">case</span> <span class="string">&#x27;n&#x27;</span>:  <span class="keyword">return</span> lept_parse_null(c, v);</span><br><span class="line">        <span class="keyword">case</span> <span class="string">&#x27;\0&#x27;</span>: <span class="keyword">return</span> LEPT_PARSE_EXPECT_VALUE;</span><br><span class="line">        <span class="keyword">default</span>:   <span class="keyword">return</span> LEPT_PARSE_INVALID_VALUE;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">lept_parse</span><span class="params">(lept_value* v, <span class="keyword">const</span> <span class="keyword">char</span>* json)</span> </span>&#123;</span><br><span class="line">    lept_context c;</span><br><span class="line">    assert(v != <span class="literal">NULL</span>);</span><br><span class="line">    c.json = json;</span><br><span class="line">    v-&gt;type = LEPT_NULL;</span><br><span class="line">    lept_parse_whitespace(&amp;c);</span><br><span class="line">    <span class="keyword">return</span> lept_parse_value(&amp;c, v);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function">lept_type <span class="title">lept_get_type</span><span class="params">(<span class="keyword">const</span> lept_value* v)</span> </span>&#123;</span><br><span class="line">    assert(v != <span class="literal">NULL</span>);</span><br><span class="line">    <span class="keyword">return</span> v-&gt;type;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>test.c</p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;stdlib.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;string.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&quot;leptjson.h&quot;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">static</span> <span class="keyword">int</span> main_ret = <span class="number">0</span>;</span><br><span class="line"><span class="keyword">static</span> <span class="keyword">int</span> test_count = <span class="number">0</span>;</span><br><span class="line"><span class="keyword">static</span> <span class="keyword">int</span> test_pass = <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> EXPECT_EQ_BASE(equality, expect, actual, format) \</span></span><br><span class="line">    <span class="keyword">do</span> &#123;\</span><br><span class="line">        test_count++;\</span><br><span class="line">        <span class="keyword">if</span> (equality)\</span><br><span class="line">            test_pass++;\</span><br><span class="line">        <span class="keyword">else</span> &#123;\</span><br><span class="line">            <span class="built_in">fprintf</span>(<span class="built_in">stderr</span>, <span class="string">&quot;%s:%d: expect: &quot;</span> format <span class="string">&quot; actual: &quot;</span> format <span class="string">&quot;\n&quot;</span>, __FILE__, __LINE__, expect, actual);\</span><br><span class="line">            main_ret = <span class="number">1</span>;\</span><br><span class="line">        &#125;\</span><br><span class="line">    &#125; <span class="keyword">while</span>(<span class="number">0</span>)</span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> EXPECT_EQ_INT(expect, actual) EXPECT_EQ_BASE((expect) == (actual), expect, actual, <span class="meta-string">&quot;%d&quot;</span>)</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">static</span> <span class="keyword">void</span> <span class="title">test_parse_null</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    lept_value v;</span><br><span class="line">    v.type = LEPT_FALSE;</span><br><span class="line">    EXPECT_EQ_INT(LEPT_PARSE_OK, lept_parse(&amp;v, <span class="string">&quot;null&quot;</span>));</span><br><span class="line">    EXPECT_EQ_INT(LEPT_NULL, lept_get_type(&amp;v));</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">static</span> <span class="keyword">void</span> <span class="title">test_parse_expect_value</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    lept_value v;</span><br><span class="line"></span><br><span class="line">    v.type = LEPT_FALSE;</span><br><span class="line">    EXPECT_EQ_INT(LEPT_PARSE_EXPECT_VALUE, lept_parse(&amp;v, <span class="string">&quot;&quot;</span>));</span><br><span class="line">    EXPECT_EQ_INT(LEPT_NULL, lept_get_type(&amp;v));</span><br><span class="line"></span><br><span class="line">    v.type = LEPT_FALSE;</span><br><span class="line">    EXPECT_EQ_INT(LEPT_PARSE_EXPECT_VALUE, lept_parse(&amp;v, <span class="string">&quot; &quot;</span>));</span><br><span class="line">    EXPECT_EQ_INT(LEPT_NULL, lept_get_type(&amp;v));</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">static</span> <span class="keyword">void</span> <span class="title">test_parse_invalid_value</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    lept_value v;</span><br><span class="line">    v.type = LEPT_FALSE;</span><br><span class="line">    EXPECT_EQ_INT(LEPT_PARSE_INVALID_VALUE, lept_parse(&amp;v, <span class="string">&quot;nul&quot;</span>));</span><br><span class="line">    EXPECT_EQ_INT(LEPT_NULL, lept_get_type(&amp;v));</span><br><span class="line"></span><br><span class="line">    v.type = LEPT_FALSE;</span><br><span class="line">    EXPECT_EQ_INT(LEPT_PARSE_INVALID_VALUE, lept_parse(&amp;v, <span class="string">&quot;?&quot;</span>));</span><br><span class="line">    EXPECT_EQ_INT(LEPT_NULL, lept_get_type(&amp;v));</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">static</span> <span class="keyword">void</span> <span class="title">test_parse_root_not_singular</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    lept_value v;</span><br><span class="line">    v.type = LEPT_FALSE;</span><br><span class="line">    EXPECT_EQ_INT(LEPT_PARSE_ROOT_NOT_SINGULAR, lept_parse(&amp;v, <span class="string">&quot;null x&quot;</span>));</span><br><span class="line">    EXPECT_EQ_INT(LEPT_NULL, lept_get_type(&amp;v));</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">static</span> <span class="keyword">void</span> <span class="title">test_parse</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    test_parse_null();</span><br><span class="line">    test_parse_expect_value();</span><br><span class="line">    test_parse_invalid_value();</span><br><span class="line">    test_parse_root_not_singular();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    test_parse();</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;%d/%d (%3.2f%%) passed\n&quot;</span>, test_pass, test_count, test_pass * <span class="number">100.0</span> / test_count);</span><br><span class="line">    <span class="keyword">return</span> main_ret;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1 id="ä¸ƒã€æ€»ç»“ä¸ç»ƒä¹ ç­”æ¡ˆ"><a href="#ä¸ƒã€æ€»ç»“ä¸ç»ƒä¹ ç­”æ¡ˆ" class="headerlink" title="ä¸ƒã€æ€»ç»“ä¸ç»ƒä¹ ç­”æ¡ˆ"></a>ä¸ƒã€æ€»ç»“ä¸ç»ƒä¹ ç­”æ¡ˆ</h1><p>æœ¬æ–‡ä»‹ç»äº†å¦‚ä½•é…ç½®ä¸€ä¸ªç¼–ç¨‹ç¯å¢ƒï¼Œå•å…ƒæµ‹è¯•çš„é‡è¦æ€§ï¼Œå’Œä¸€ä¸ª JSON è§£æå™¨çš„å­é›†å®ç°ã€‚</p><ol><li>è¡¥å……leptjson.cçš„å†…å®¹ï¼Œä½¿å…³äº <code>LEPT_PARSE_ROOT_NOT_SINGULAR</code> çš„å•å…ƒæµ‹è¯•æˆåŠŸï¼Œè‹¥ json åœ¨ä¸€ä¸ªå€¼ä¹‹åï¼Œç©ºç™½ä¹‹åè¿˜æœ‰å…¶å®ƒå­—ç¬¦ï¼Œåˆ™è¦è¿”å› <code>LEPT_PARSE_ROOT_NOT_SINGULAR</code>ã€‚</li></ol><p>å•å…ƒæµ‹è¯•å¤±è´¥çš„æ˜¯è¿™ä¸€è¡Œï¼š</p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">EXPECT_EQ_INT(LEPT_PARSE_ROOT_NOT_SINGULAR, lept_parse(&amp;v, <span class="string">&quot;null x&quot;</span>));</span><br></pre></td></tr></table></figure><p>æˆ‘ä»¬ä» JSON è¯­æ³•å‘ç°ï¼ŒJSON æ–‡æœ¬åº”è¯¥æœ‰ 3 éƒ¨åˆ†ï¼š</p><figure class="highlight pgsql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">JSON</span>-<span class="type">text</span> = ws <span class="keyword">value</span> ws</span><br></pre></td></tr></table></figure><p>ä½†åŸæ¥çš„ <code>lept_parse()</code> åªå¤„ç†äº†å‰ä¸¤éƒ¨åˆ†ã€‚æˆ‘ä»¬åªéœ€è¦åŠ å…¥ç¬¬ä¸‰éƒ¨åˆ†ï¼Œè§£æç©ºç™½ï¼Œç„¶åæ£€æŸ¥ JSON æ–‡æœ¬æ˜¯å¦å®Œç»“ï¼š</p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">lept_parse</span><span class="params">(lept_value* v, <span class="keyword">const</span> <span class="keyword">char</span>* json)</span> </span>&#123;</span><br><span class="line">    lept_context c;</span><br><span class="line">    <span class="keyword">int</span> ret;</span><br><span class="line">    assert(v != <span class="literal">NULL</span>);</span><br><span class="line">    c.json = json;</span><br><span class="line">    v-&gt;type = LEPT_NULL;</span><br><span class="line">    lept_parse_whitespace(&amp;c);</span><br><span class="line">    <span class="keyword">if</span> ((ret = lept_parse_value(&amp;c, v)) == LEPT_PARSE_OK) &#123;</span><br><span class="line">        lept_parse_whitespace(&amp;c);</span><br><span class="line">        <span class="keyword">if</span> (*c.json != <span class="string">&#x27;\0&#x27;</span>)</span><br><span class="line">            ret = LEPT_PARSE_ROOT_NOT_SINGULAR;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> ret;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ol start="2"><li>å‚è€ƒ <code>test_parse_null()</code>ï¼ŒåŠ å…¥ <code>test_parse_true()</code>ã€<code>test_parse_false()</code> å•å…ƒæµ‹è¯•ã€‚å‚è€ƒ <code>lept_parse_null()</code> çš„å®ç°å’Œè°ƒç”¨æ–¹ï¼Œè§£æ true å’Œ false å€¼ã€‚</li></ol><p>åªéœ€å‚è€ƒ <code>test_parse_null()</code> åŠ å…¥ä¸¤ä¸ªæµ‹è¯•å‡½æ•°ï¼š</p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">static</span> <span class="keyword">void</span> <span class="title">test_parse_true</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    lept_value v;</span><br><span class="line">    v.type = LEPT_FALSE;</span><br><span class="line">    EXPECT_EQ_INT(LEPT_PARSE_OK, lept_parse(&amp;v, <span class="string">&quot;true&quot;</span>));</span><br><span class="line">    EXPECT_EQ_INT(LEPT_TRUE, lept_get_type(&amp;v));</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">static</span> <span class="keyword">void</span> <span class="title">test_parse_false</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    lept_value v;</span><br><span class="line">    v.type = LEPT_TRUE;</span><br><span class="line">    EXPECT_EQ_INT(LEPT_PARSE_OK, lept_parse(&amp;v, <span class="string">&quot;false&quot;</span>));</span><br><span class="line">    EXPECT_EQ_INT(LEPT_FALSE, lept_get_type(&amp;v));</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">static</span> <span class="keyword">void</span> <span class="title">test_parse</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    test_parse_null();</span><br><span class="line">    test_parse_true();</span><br><span class="line">    test_parse_false();</span><br><span class="line">    test_parse_expect_value();</span><br><span class="line">    test_parse_invalid_value();</span><br><span class="line">    test_parse_root_not_singular();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ä½†è¦è®°å¾—åœ¨ä¸Šä¸€çº§çš„æµ‹è¯•å‡½æ•° <code>test_parse()</code> è°ƒç”¨è¿™å‡½æ•°ï¼Œå¦åˆ™ä¼šä¸èµ·ä½œç”¨ã€‚è¿˜å¥½å¦‚æœæˆ‘ä»¬è®°å¾—ç”¨ <code>static</code> ä¿®é¥°è¿™ä¸¤ä¸ªå‡½æ•°ï¼Œç¼–è¯‘å™¨ä¼šå‘å‡ºè­¦å‘Šï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">test.c:30:13: warning: unused <span class="keyword">function</span> <span class="string">&#x27;test_parse_true&#x27;</span> [-Wunused-function]</span><br><span class="line">static void <span class="function"><span class="title">test_parse_true</span></span>() &#123;</span><br><span class="line">            ^</span><br></pre></td></tr></table></figure><p>å‚è€ƒ <code>lept_parse_null()</code>ï¼Œå†å†™ä¸¤ä¸ªå‡½æ•°ï¼Œç„¶ååœ¨ <code>lept_parse_value</code> æŒ‰é¦–å­—ç¬¦åˆ†æ´¾ã€‚</p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">static</span> <span class="keyword">int</span> <span class="title">lept_parse_true</span><span class="params">(lept_context* c, lept_value* v)</span> </span>&#123;</span><br><span class="line">    EXPECT(c, <span class="string">&#x27;t&#x27;</span>);</span><br><span class="line">    <span class="keyword">if</span> (c-&gt;json[<span class="number">0</span>] != <span class="string">&#x27;r&#x27;</span> || c-&gt;json[<span class="number">1</span>] != <span class="string">&#x27;u&#x27;</span> || c-&gt;json[<span class="number">2</span>] != <span class="string">&#x27;e&#x27;</span>)</span><br><span class="line">        <span class="keyword">return</span> LEPT_PARSE_INVALID_VALUE;</span><br><span class="line">    c-&gt;json += <span class="number">3</span>;</span><br><span class="line">    v-&gt;type = LEPT_TRUE;</span><br><span class="line">    <span class="keyword">return</span> LEPT_PARSE_OK;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">static</span> <span class="keyword">int</span> <span class="title">lept_parse_false</span><span class="params">(lept_context* c, lept_value* v)</span> </span>&#123;</span><br><span class="line">    EXPECT(c, <span class="string">&#x27;f&#x27;</span>);</span><br><span class="line">    <span class="keyword">if</span> (c-&gt;json[<span class="number">0</span>] != <span class="string">&#x27;a&#x27;</span> || c-&gt;json[<span class="number">1</span>] != <span class="string">&#x27;l&#x27;</span> || c-&gt;json[<span class="number">2</span>] != <span class="string">&#x27;s&#x27;</span> || c-&gt;json[<span class="number">3</span>] != <span class="string">&#x27;e&#x27;</span>)</span><br><span class="line">        <span class="keyword">return</span> LEPT_PARSE_INVALID_VALUE;</span><br><span class="line">    c-&gt;json += <span class="number">4</span>;</span><br><span class="line">    v-&gt;type = LEPT_FALSE;</span><br><span class="line">    <span class="keyword">return</span> LEPT_PARSE_OK;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">static</span> <span class="keyword">int</span> <span class="title">lept_parse_value</span><span class="params">(lept_context* c, lept_value* v)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">switch</span> (*c-&gt;json) &#123;</span><br><span class="line">        <span class="keyword">case</span> <span class="string">&#x27;t&#x27;</span>:  <span class="keyword">return</span> lept_parse_true(c, v);</span><br><span class="line">        <span class="keyword">case</span> <span class="string">&#x27;f&#x27;</span>:  <span class="keyword">return</span> lept_parse_false(c, v);</span><br><span class="line">        <span class="keyword">case</span> <span class="string">&#x27;n&#x27;</span>:  <span class="keyword">return</span> lept_parse_null(c, v);</span><br><span class="line">        <span class="keyword">case</span> <span class="string">&#x27;\0&#x27;</span>: <span class="keyword">return</span> LEPT_PARSE_EXPECT_VALUE;</span><br><span class="line">        <span class="keyword">default</span>:   <span class="keyword">return</span> LEPT_PARSE_INVALID_VALUE;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>å…¶å®è¿™ 3 ç§ç±»å‹éƒ½æ˜¯è§£æå­—é¢é‡ï¼Œå¯ä»¥ä½¿ç”¨å•ä¸€ä¸ªå‡½æ•°å®ç°ï¼Œä¾‹å¦‚ç”¨è¿™ç§æ–¹å¼è°ƒç”¨ï¼š</p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">case</span> <span class="string">&#x27;n&#x27;</span>: <span class="keyword">return</span> lept_parse_literal(c, v, <span class="string">&quot;null&quot;</span>, LEPT_NULL);</span><br></pre></td></tr></table></figure><p>è¿™æ ·å¯ä»¥å‡å°‘ä¸€äº›é‡å¤ä»£ç ï¼Œä¸è¿‡å¯èƒ½æœ‰å°‘è®¸é¢å¤–æ€§èƒ½å¼€é”€ã€‚</p>]]></content>
    
    
    <summary type="html">&lt;p&gt;è·Ÿç€githubä¸Šçš„é¡¹ç›®json-tutorialå®Œæˆä¸€ä¸ªjsonè§£æå™¨ã€‚æœ¬æ–‡å¯¹åº”è¯¥é¡¹ç›®çš„ç¬¬ä¸€å•å…ƒã€‚&lt;/p&gt;</summary>
    
    
    
    <category term="é¡¹ç›®" scheme="https://www.fvolcano.red/categories/%E9%A1%B9%E7%9B%AE/"/>
    
    
    <category term="json" scheme="https://www.fvolcano.red/tags/json/"/>
    
  </entry>
  
  <entry>
    <title>è½¯ä»¶æ„é€ specï¼šRIã€AFä¸safety from rep exposure</title>
    <link href="https://www.fvolcano.red/2021/how-to-write-specification/"/>
    <id>https://www.fvolcano.red/2021/how-to-write-specification/</id>
    <published>2021-07-08T11:34:48.000Z</published>
    <updated>2021-07-08T11:34:48.000Z</updated>
    
    <content type="html"><![CDATA[<p>æœ¬æ–‡ä»‹ç»äº†specã€AFã€RIå’Œsafety from rep exposureçš„å«ä¹‰å’Œå†™æ³•ã€‚<a id="more"></a></p><p>å‚è€ƒèµ„æ–™ï¼š</p><ol><li><a href="https://www.pianshen.com/article/78341578333/">Specã€AFã€RIä»¥åŠSafety from rep exposureçš„ä¸€äº›ä½“ä¼š - ç¨‹åºå‘˜å¤§æœ¬è¥ (pianshen.com)</a></li><li><a href="https://blog.csdn.net/weixin_44513527/article/details/105102644">Safety from Rep Exposure</a></li><li><a href="https://blog.csdn.net/djd566/article/details/79749757">Javaå¦‚ä½•åšåˆ°å…¨é¢çš„Safety from rep exposure</a></li><li><a href="https://blog.csdn.net/qq_44013163/article/details/106600240">å¯¹äºAFã€RIã€Safety from rep exposureçš„ç†è§£</a></li></ol><h1 id="Spec"><a href="#Spec" class="headerlink" title="Spec"></a>Spec</h1><p>Specï¼Œæ—¢æ–¹æ³•çš„è®¾è®¡è§„çº¦ï¼ˆSpecificationï¼‰ã€‚</p><p>(1)ä¸ºä»€ä¹ˆè¦è®¾è®¡è§„çº¦ï¼Ÿ<br>1.æ²¡æœ‰è§„çº¦ï¼Œåœ¨å›¢é˜Ÿåˆä½œæ—¶æ— æ³•åˆ†é…ä»»åŠ¡ï¼Œæ— æ³•å†™ç¨‹åºï¼Œå³ä½¿å†™å‡ºæ¥ï¼Œä¹Ÿä¸çŸ¥é“å¯¹é”™<br>2.å¯ä»¥ä½¿ç¨‹åºä¸å®¢æˆ·ç«¯ä¹‹é—´è¾¾æˆä¸€è‡´ï¼Œæ˜ç¡®åŒæ–¹çš„è´£ä»»ï¼Œå¹¶ä¸”å¯¹æ­£ç¡®å®ç°è¿›è¡Œå®šä¹‰ã€‚<br>3.è§„çº¦ç»™ä¾›éœ€åŒæ–¹éƒ½ç¡®å®šäº†è´£ä»»ï¼Œåœ¨è°ƒç”¨æ—¶ï¼ŒåŒæ–¹éƒ½è¦éµå®ˆ</p><p>(2)è§„çº¦çš„ä½œç”¨ï¼š<br>1.ç²¾ç¡®çš„è§„çº¦ï¼Œæœ‰åŠ©äºåŒºåˆ†è´£ä»»<br>2.å®¢æˆ·ç«¯æ— éœ€é˜…è¯»è°ƒç”¨å‡½æ•°çš„ä»£ç ï¼Œåªéœ€ç†è§£specå³å¯<br>3.è§„çº¦å¯ä»¥éš”ç¦»â€œå˜åŒ–â€ï¼Œæ— éœ€é€šçŸ¥å®¢æˆ·ç«¯<br>4.è§„çº¦ä¹Ÿå¯ä»¥æé«˜ä»£ç æ•ˆç‡<br>è§„çº¦ç›¸å½“äºåœ¨è°ƒç”¨è€…ä¸å®ç°è€…ä¹‹é—´å»ºç«‹ä¸€é“é˜²ç«å¢™ï¼Œè°ƒç”¨è€…æ— éœ€çŸ¥é“æ–¹æ³•å†…éƒ¨å®ç°ï¼Œäº†è§£è§„çº¦è¿›è¡Œè°ƒç”¨å³å¯ã€‚<br>ä¹Ÿå°±æ˜¯è¯´ï¼Œåªè¦æ»¡è¶³è§„çº¦ï¼Œå®ç°è€…ä¾¿å¯ä»¥å¯¹ä»£ç è¿›è¡Œä¿®æ”¹ï¼Œå¦‚æœä¸¤ä¸ªæ–¹æ³•å†…åœ¨å®ç°ä¸åŒï¼Œä½†æ˜¯å¯ä»¥æ»¡è¶³ç›¸åŒçš„è§„çº¦ï¼Œé‚£ä¹ˆå°±å¯ä»¥ç§°è¿™ä¸¤ä¸ªæ–¹æ³•å…·æœ‰è¡Œä¸ºç­‰ä»·æ€§ã€‚</p><p>(3)è¡Œä¸ºç­‰ä»·æ€§ï¼š<br>æ˜¯ç«™åœ¨å®¢æˆ·ç«¯è§†è§’çœ‹è¡Œä¸ºç­‰ä»·æ€§çš„ã€‚<br>å¯ä»¥æ ¹æ®è§„çº¦åˆ¤å®šæ˜¯å¦è¡Œä¸ºç­‰ä»·ï¼Œè€Œä¸å…¶å…·ä½“å®ç°æ— å…³ã€‚</p><p>(4)è§„çº¦çš„ç»“æ„ï¼šå‰ç½®æ¡ä»¶å’Œåç½®æ¡ä»¶<br>1.å‰ç½®æ¡ä»¶ï¼šå¯¹å®¢æˆ·ç«¯çš„çº¦æŸï¼Œåœ¨ä½¿ç”¨æ–¹æ³•æ—¶å¿…é¡»æ»¡è¶³çš„æ¡ä»¶<br>2.åç½®æ¡ä»¶ï¼šå¯¹å¼€å‘è€…çš„çº¦æŸï¼Œæ–¹æ³•ç»“æŸæ—¶å¿…é¡»æ»¡è¶³çš„æ¡ä»¶<br>3.å¥‘çº¦ï¼šå¦‚æœå‰ç½®æ¡ä»¶æ»¡è¶³äº†ï¼Œåç½®æ¡ä»¶å¿…é¡»æ»¡è¶³<br>æ³¨æ„ï¼šå¦‚æœå‰ç½®æ¡ä»¶ä¸æ»¡è¶³ï¼Œåˆ™æ–¹æ³•å¯åšä»»ä½•äº‹æƒ…ã€‚</p><p>(5)Javaä¸­çš„è§„çº¦ï¼š<br>é™æ€ç±»å‹å£°æ˜æ˜¯ä¸€ç§è§„çº¦ï¼Œé™åˆ¶å‰ç½®æ¡ä»¶å’Œåç½®æ¡ä»¶ï¼Œå¯æ®æ­¤è¿›è¡Œé™æ€ç±»å‹æ£€æŸ¥static checkingã€‚<br>æ–¹æ³•å‰çš„æ³¨é‡Šä¹Ÿæ˜¯ä¸€ç§è§„çº¦ï¼Œä½†éœ€äººå·¥åˆ¤å®šå…¶æ˜¯å¦æ»¡è¶³ã€‚<br>å‰ç½®æ¡ä»¶ï¼š@param<br>åç½®æ¡ä»¶ï¼š@return å’Œ@throws</p><h1 id="AFä¸RI"><a href="#AFä¸RI" class="headerlink" title="AFä¸RI"></a>AFä¸RI</h1><p>åœ¨æˆ‘ä»¬äº†è§£AFä¸RIä¹‹å‰ï¼Œæˆ‘ä»¬éœ€è¦äº†è§£ä¸€äº›åŸºç¡€çŸ¥è¯†ã€‚<br>åœ¨å®ç°ADTæ—¶ï¼Œæˆ‘ä»¬ä¼šä½¿ç”¨å¦‚ä¸‹ä¸¤ä¸ªç©ºé—´ï¼š<br>Rï¼šè¡¨ç¤ºç©ºé—´ï¼ˆrep valuesï¼‰ï¼Œå³å®ç°è€…çœ‹åˆ°å’Œä½¿ç”¨çš„ç©ºé—´<br>Aï¼šæŠ½è±¡ç©ºé—´ï¼ˆabstract valuesï¼‰ï¼Œå³å®¢æˆ·ç«¯çœ‹åˆ°å’Œä½¿ç”¨çš„ç©ºé—´<br>Råˆ°Aï¼šä¸€å®šæ»¡å°„ï¼Œä¸ä¸€å®šå•å°„</p><h2 id="AF"><a href="#AF" class="headerlink" title="AF"></a>AF</h2><p>AFï¼Œæ—¢æŠ½è±¡å‡½æ•°ï¼ˆAbstraction functionï¼‰ï¼ŒR-&gt;A<br>AFæè¿°å†…å­˜åˆ°å®é™…çš„æ˜ å°„ï¼Œæ‰€ä»¥AFä¸€å®šæ˜¯æ»¡å°„ï¼Œä½†ä¸ä¸€å®šæ˜¯å•å°„ï¼Œä¹Ÿå°±ä¸ä¸€å®šæ˜¯åŒå°„ã€‚</p><h2 id="RI"><a href="#RI" class="headerlink" title="RI"></a>RI</h2><p>RIï¼Œå³è¡¨ç¤ºä¸å˜é‡ï¼ˆRepresentation invariantï¼‰ï¼ŒR â†’ boolean<br>RIå‘Šè¯‰æˆ‘ä»¬ç©ºé—´Rä¸­çš„ræ˜¯å¦è¢«AFæ˜ å°„åˆ°äº†ç©ºé—´Aä¸­çš„æŸä¸ªå€¼ï¼Œå¦‚æœæŠŠRä¸­æ»¡è¶³RIçš„å…ƒç´ å½¢æˆä¸€ä¸ªå­é›†ï¼Œé‚£ä¹ˆè¿™ä¸ªå­é›†ä¸­æ‰€æœ‰å…ƒç´ å‡è¢«AFæ˜ å°„åˆ°äº†ç©ºé—´Aä¸­<br>åœ¨ä¸Šå›¾ä¸­ï¼ŒRIå¯è§£é‡Šä¸ºâ€œå­—ç¬¦ä¸²ä¸­æ²¡æœ‰é‡å¤çš„å­—æ¯â€</p><p>AFå’ŒRIä¸å†…éƒ¨è¡¨ç¤ºçš„è®¾è®¡æ¯æ¯ç›¸å…³ï¼Œä¸åŒçš„å†…éƒ¨æ ‡è¯†ï¼Œéœ€è¦è®¾è®¡ä¸åŒçš„AFå’ŒRIï¼›åŒä¸€ç§è¡¨ç¤ºå¯èƒ½æœ‰ä¸åŒçš„RIï¼Œè¿›è€Œæœ‰ä¸åŒçš„AFï¼›å³ä½¿åŒä¸€ç§Rï¼ŒåŒæ ·çš„RIï¼Œä¹Ÿå¯èƒ½æœ‰ä¸åŒçš„AFï¼Œå³â€œè§£é‡Šä¸åŒâ€</p><h1 id="Safety-from-rep-exposure"><a href="#Safety-from-rep-exposure" class="headerlink" title="Safety from rep exposure"></a>Safety from rep exposure</h1><p>é¦–å…ˆæˆ‘ä»¬è¦çŸ¥é“ä¸€ä¸ªåè¯,è¡¨ç¤ºæ³„éœ²ï¼ˆrepresentation exposureï¼‰ï¼šæŒ‡ç±»å¤–çš„æŸä¸ªä»£ç å¯ä»¥ç›´æ¥ä¿®æ”¹è¡¨ç¤ºå½¢å¼<br>è€ŒSafety from rep exposureï¼Œå³è¡¨ç¤ºæ³„æ¼çš„å®‰å…¨å£°æ˜ï¼Œå°±æ˜¯å¯¹è¡¨ç¤ºæ³„éœ²å®‰å…¨ç›¸å…³çš„å‚æ•°ï¼Œç‰¹åˆ«æ˜¯è¾“å…¥å‚æ•°å’Œè¿”å›å€¼ï¼Œç»™å‡ºä¿è¯ä¸æ³„éœ²å†…éƒ¨è¡¨ç¤ºçš„ç­–ç•¥</p><p>1.All fields are private( final)â€”â€”å³å°†ç±»ä¸­æ‰€æœ‰çš„å±æ€§ï¼ˆå˜é‡ï¼‰å®šä¹‰ä¸ºprivateç±»å‹ï¼Œç›®çš„æ˜¯ä¸è®©ç”¨æˆ·å¾—åˆ°ä½ çš„å†…éƒ¨å±æ€§</p><p>2.å°½é‡ä½¿ç”¨immutableæ•°æ®ç±»å‹ï¼Œæ¯”å¦‚èƒ½ä½¿ç”¨Stringå°±ä¸ä½¿ç”¨StringBuilderï¼Œèƒ½ä½¿ç”¨Instanceæˆ–LocalDateTimeå°±ä¸ä½¿ç”¨Data</p><p>3.å¦‚æœæˆ‘ä»¬ä½¿ç”¨äº†mutableç±»å‹çš„æ•°æ®ï¼Œä¸ºäº†é˜²æ­¢å¯¹å¤–æ³„éœ²å…¶å†…éƒ¨è¡¨ç¤ºï¼Œéœ€è¦ä½¿ç”¨defensive copyï¼Œå³é˜²å¾¡å¼æ‹·è´ã€‚å¦‚æœæ˜¯Setã€Mapç­‰æ•°æ®ç±»å‹ï¼Œè¿˜å¯ä»¥ä½¿ç”¨Collections.unmodifiableSetï¼ŒCollections.unmodifiableMapç­‰æ–¹æ³•ã€‚</p><p>4.éšæ—¶æ£€æŸ¥RIæ˜¯å¦æ»¡è¶³ï¼Œè‡ªå†™checkRepï¼ˆï¼‰æ–¹æ³•ï¼ˆé€šå¸¸åœ¨å…¶ä¸­ä½¿ç”¨assertæ¥è¿›è¡Œåˆ¤æ–­ï¼‰ï¼Œåœ¨åˆ›é€ å’Œæ”¹å˜è¡¨ç¤ºçš„æ–¹æ³•ä¸­ï¼ˆcreatorsï¼Œproducersï¼Œmutatorsï¼‰ï¼Œè¿›è¡Œè°ƒç”¨ï¼Œæ¥ç¡®ä¿ä¸å˜æ€§ã€‚</p>]]></content>
    
    
    <summary type="html">&lt;p&gt;æœ¬æ–‡ä»‹ç»äº†specã€AFã€RIå’Œsafety from rep exposureçš„å«ä¹‰å’Œå†™æ³•ã€‚&lt;/p&gt;</summary>
    
    
    
    <category term="SoftwareConstruction" scheme="https://www.fvolcano.red/categories/SoftwareConstruction/"/>
    
    
  </entry>
  
  <entry>
    <title>å¼‚å¸¸æ ˆä¿¡æ¯stack traceåº”è¯¥æ€ä¹ˆç”¨</title>
    <link href="https://www.fvolcano.red/2021/how-to-read-and-use-stack-trace/"/>
    <id>https://www.fvolcano.red/2021/how-to-read-and-use-stack-trace/</id>
    <published>2021-07-07T13:51:48.000Z</published>
    <updated>2021-07-07T13:51:48.000Z</updated>
    
    <content type="html"><![CDATA[<p>æœ¬æ–‡è¯¦ç»†æ€»ç»“äº†stack traceçš„å„ä¸ªéƒ¨åˆ†çš„å«ä¹‰å’Œä½¿ç”¨æ–¹æ³•ï¼ŒåŒæ—¶æ·±å…¥ä»‹ç»äº†ä¸€äº›ä¸å¼‚å¸¸ç›¸å…³çš„å‡½æ•°å’Œæœ€ä½³å®è·µã€‚<a id="more"></a></p><h2 id="å‚è€ƒèµ„æ–™"><a href="#å‚è€ƒèµ„æ–™" class="headerlink" title="å‚è€ƒèµ„æ–™"></a>å‚è€ƒèµ„æ–™</h2><ol><li><a href="https://www.scalyr.com/blog/java-stack-trace-understanding/">Whatâ€™s a Java Stack Trace?</a></li><li><a href="https://stackify.com/java-stack-trace/">Understanding and Leveraging the Java Stack Trace</a></li><li><a href="https://www.cnblogs.com/ismallboy/p/12779200.html">å¦‚ä½•çœ‹å¼‚å¸¸å †æ ˆä¿¡æ¯</a></li><li><a href="https://www.twilio.com/blog/how-to-read-and-understand-a-java-stacktrace">Java Stack Trace: How to Read and Understand to Debug Code</a></li><li><a href="https://riptutorial.com/java/example/1815/creating-and-reading-stacktraces">Creating and reading stacktraces</a></li><li><a href="https://www.codejava.net/java-core/exception/understanding-exception-stack-trace-in-java-with-code-examples">Understanding Exception Stack Trace in Java with Code Examples</a></li></ol><h1 id="Call-Stack-å‡½æ•°è°ƒç”¨æ ˆ-ä¸-stack-trace"><a href="#Call-Stack-å‡½æ•°è°ƒç”¨æ ˆ-ä¸-stack-trace" class="headerlink" title="Call Stack å‡½æ•°è°ƒç”¨æ ˆ ä¸ stack trace"></a>Call Stack å‡½æ•°è°ƒç”¨æ ˆ ä¸ stack trace</h1><blockquote><p>The Stack, more accurately called the runtime or call stack, is a set of stack frames a program creates as it executes, organized in a stack data structure.</p></blockquote><p>å‡½æ•°è°ƒç”¨æ ˆæ˜¯ä¸€ä¸ªä»¥æ ˆçš„å½¢å¼ä¿å­˜ä»ç¨‹åºå¼€å§‹åˆ°è¿è¡Œå½“æ—¶è°ƒç”¨çš„æ‰€æœ‰å‡½æ•°æ ˆçš„ç»“æ„ã€‚</p><blockquote><p>Simply put, a stack trace is a representation of a call stack at a certain point in time, with each element representing a method invocation. The stack trace contains all invocations from the start of a thread until the point itâ€™s generated. This is usually a position at which an exception takes place.</p></blockquote><p>Stack trace åˆ™æ˜¯call stackçš„ä¸€ç§å±•ç¤ºå½¢å¼ï¼Œæ‰“å°å‡ºå‡½æ•°çš„åå­—ä¸ç›¸å…³ä»£ç è¡Œã€‚</p><p>ç¤ºä¾‹ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">StackTrace</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">    a();</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="keyword">static</span> <span class="keyword">void</span> <span class="title">a</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    b();</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="keyword">static</span> <span class="keyword">void</span> <span class="title">b</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    c();</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="keyword">static</span> <span class="keyword">void</span> <span class="title">c</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    d();</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="keyword">static</span> <span class="keyword">void</span> <span class="title">d</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    Thread.dumpStack();</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">java.lang.Exception: Stack trace</span><br><span class="line">at java.base/java.lang.Thread.dumpStack(Thread.java:<span class="number">1383</span>)</span><br><span class="line">at com.ericgoebelbecker.stacktraces.StackTrace.d(StackTrace.java:<span class="number">23</span>)</span><br><span class="line">at com.ericgoebelbecker.stacktraces.StackTrace.c(StackTrace.java:<span class="number">19</span>)</span><br><span class="line">at com.ericgoebelbecker.stacktraces.StackTrace.b(StackTrace.java:<span class="number">15</span>)</span><br><span class="line">at com.ericgoebelbecker.stacktraces.StackTrace.a(StackTrace.java:<span class="number">11</span>)</span><br><span class="line">at com.ericgoebelbecker.stacktraces.StackTrace.main(StackTrace.java:<span class="number">7</span>)</span><br></pre></td></tr></table></figure><p>æ ˆä¿¡æ¯ä»ä¸Šå¾€ä¸‹è¯»ï¼Œæœ€ä¸Šé¢çš„æ˜¯æœ€åè°ƒç”¨çš„å‡½æ•°ï¼Œmainè°ƒç”¨aï¼Œaè°ƒç”¨bï¼Œbè°ƒç”¨cï¼Œcè°ƒç”¨dï¼Œdè°ƒç”¨dumpStackï¼Œè¿™ä¸ªå‡½æ•°è¾“å‡ºä»¥ä¸Šä¿¡æ¯ã€‚</p><blockquote><p>A Java stack trace is a snapshot of a moment in time. You can see where your application was and how it got there. Thatâ€™s valuable insight that you can use a few different ways.</p></blockquote><h1 id="Java-Exception"><a href="#Java-Exception" class="headerlink" title="Java Exception"></a>Java Exception</h1><blockquote><p>Stack traces and exceptions are often associated with each other. When you see a Java application throw an exception, you usually see a stack trace logged with it. This is because of how exceptions work.</p><p>When Java code throws an exception, the runtime looks up the stack for a method that has a handler that can process it. If it finds one, it passes the exception to it. If it doesnâ€™t, the program exits. So exceptions and the call stack are linked directly. Understanding this relationship will help you figure out why your code threw an exception.</p></blockquote><p>Java Exceptionæœºåˆ¶é€šå¸¸æ˜¯å’Œcall stackå‡½æ•°è°ƒç”¨æ ˆè”ç³»åœ¨ä¸€èµ·çš„ã€‚å½“æŸä¸ªå‡½æ•°æŠ›å‡ºäº†ä¸€ä¸ªå¼‚å¸¸ï¼ŒJVMä¼šæŸ¥çœ‹è°ƒç”¨æ ˆï¼Œçœ‹å“ªä¸ªå‡½æ•°å¯ä»¥å¤„ç†è¿™ä¸ªå¼‚å¸¸ï¼ˆæœ‰catchï¼‰ï¼Œè‹¥æ‰¾åˆ°åˆ™æŠŠå¼‚å¸¸ä¼ è¿‡å»ï¼Œè‹¥æ²¡æœ‰åˆ™ç»ˆæ­¢ç¨‹åºã€‚</p><p>æ•æ‰åˆ°å¼‚å¸¸åå¯ä»¥æ‰§è¡Œä¸åŒçš„æ“ä½œï¼Œä¸€ä¸ªç®€å•çš„é€‰æ‹©æ˜¯ç›´æ¥è¾“å‡ºè¿™ä¸ªå¼‚å¸¸çš„ä¿¡æ¯ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">try</span> &#123;</span><br><span class="line">    <span class="comment">// ...</span></span><br><span class="line">&#125; <span class="keyword">catch</span> (NullPointerException e) &#123;</span><br><span class="line">    System.err.println(e.getMessage());</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>è‹¥æ²¡æœ‰èƒ½å¤Ÿå¤„ç†è¿™ä¸ªå¼‚å¸¸çš„å‡½æ•°ï¼Œå¼‚å¸¸ä¼šè¢«JVMæ¥ç®¡ï¼ŒJVMä¼šè¾“å‡ºå®ƒæŠ›å‡ºåœ°çš„å‡½æ•°è°ƒç”¨æ ˆä¿¡æ¯ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">Exception in thread <span class="string">&quot;main&quot;</span> java.lang.NullPointerException</span><br><span class="line">at com.ericgoebelbecker.stacktraces.StackTrace.d(StackTrace.java:<span class="number">29</span>)</span><br><span class="line">at com.ericgoebelbecker.stacktraces.StackTrace.c(StackTrace.java:<span class="number">24</span>)</span><br><span class="line">at com.ericgoebelbecker.stacktraces.StackTrace.b(StackTrace.java:<span class="number">20</span>)</span><br><span class="line">at com.ericgoebelbecker.stacktraces.StackTrace.a(StackTrace.java:<span class="number">16</span>)</span><br><span class="line">at com.ericgoebelbecker.stacktraces.StackTrace.main(StackTrace.java:<span class="number">9</span>)</span><br></pre></td></tr></table></figure><p>BUT è¾“å‡ºäº†è¿™ä¸ªä¿¡æ¯ä¸ä»£è¡¨è¿™ä¸ªå¼‚å¸¸å°±ä¸€å®šæ²¡æœ‰è¢«å¤„ç†catchï¼Œ<strong>ä¸€ç§æƒ…å†µ</strong>æ˜¯catchäº†ä»¥ååˆæŠ›å‡ºäº†ï¼š</p><p><img src="/2021/how-to-read-and-use-stack-trace/image-20210709122348187.png" alt="image-20210709122348187"></p><p><strong>å¦ä¸€ç§æƒ…å†µ</strong>æ˜¯æˆ‘ä»¬è‡ªå·±å¤„ç†çš„æ—¶å€™è¾“å‡ºäº†è¿™ä¸ªä¿¡æ¯ï¼Œåªéœ€è¦è°ƒç”¨å¼‚å¸¸çš„printStackTrace()æ–¹æ³•å³å¯ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">try</span> &#123;</span><br><span class="line">    <span class="comment">// ...</span></span><br><span class="line">&#125; <span class="keyword">catch</span> (NullPointerException e) &#123;</span><br><span class="line">    e.printStackTrace();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><img src="/2021/how-to-read-and-use-stack-trace/image-20210709122607629.png" alt="image-20210709122607629"></p><p>å³ä½¿æ•æ‰å¼‚å¸¸çš„æ“ä½œæ˜¯åœ¨mainä¸­æ‰§è¡Œçš„ï¼Œå®ƒä»ä¼šæ‰“å°å‡ºæŠ›å‡ºåœ°çš„è°ƒç”¨æ ˆä¿¡æ¯ï¼Œè¿™æœ‰åˆ©äºæˆ‘ä»¬æ‰¾åˆ°å¼‚å¸¸çš„æºå¤´ã€‚</p><p>è¿™ä¸¤ç§æƒ…å†µæ‰“å°çš„å†…å®¹æœ‰äº›ä¸åŒï¼šæ²¡æœ‰å¤„ç†è€Œç»ˆæ­¢çš„å¼‚å¸¸æ‰“å°æ—¶å¼€å¤´å¤šäº†ä¸€è¡Œå†…å®¹ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Exception in thread <span class="string">&quot;main&quot;</span></span><br></pre></td></tr></table></figure><h1 id="stack-traceå„éƒ¨åˆ†å…·ä½“ä»‹ç»"><a href="#stack-traceå„éƒ¨åˆ†å…·ä½“ä»‹ç»" class="headerlink" title="stack traceå„éƒ¨åˆ†å…·ä½“ä»‹ç»"></a>stack traceå„éƒ¨åˆ†å…·ä½“ä»‹ç»</h1><p>åŸæ–‡ï¼šå‚è€ƒèµ„æ–™4</p><p>The first line tells us the details of the Exception:</p><p><img src="/2021/how-to-read-and-use-stack-trace/9oHmXuXT7nRpdSueZHD8I3sK2yLPdkPLBv6Kj8kjzfkELh.width-500.png" alt="Example java stack trace"></p><p>This is a good start. Line 2 shows what code was running when that happened:</p><p><img src="/2021/how-to-read-and-use-stack-trace/Hrwf15FHX0DEpuBEw73N5Xy_7icjNt1TLXRaNiu_D82aHY.width-500.png" alt="how to read stack trace"></p><p>That helps us narrow down the problem, but what part of the code called <code>badMethod</code>? The answer is on the next line down, which can be read in the exact same way. And how did we get there? Look on the next line. And so on, until you get to the last line, which is the <code>main</code> method of the application. Reading the stack trace from bottom to top you can trace the exact path from the beginning of your code, right to the Exception.</p><h2 id="å°†stack-traceè®°å½•åœ¨logä¸­è€Œä¸æ˜¯æ‰“å°åœ¨æ§åˆ¶å°"><a href="#å°†stack-traceè®°å½•åœ¨logä¸­è€Œä¸æ˜¯æ‰“å°åœ¨æ§åˆ¶å°" class="headerlink" title="å°†stack traceè®°å½•åœ¨logä¸­è€Œä¸æ˜¯æ‰“å°åœ¨æ§åˆ¶å°"></a>å°†stack traceè®°å½•åœ¨logä¸­è€Œä¸æ˜¯æ‰“å°åœ¨æ§åˆ¶å°</h2><p>ä½¿ç”¨Log4jæˆ–è€…Logbackæ—¶ï¼Œå¯ä»¥é€šè¿‡errorå‡½æ•°ä¿å­˜å¼‚å¸¸çš„è°ƒç”¨æ ˆä¿¡æ¯ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">logger.error(â€œSomething bad happened:â€, e);</span><br></pre></td></tr></table></figure><p>æ—¥å¿—ä¸­çš„å†…å®¹å°†ä¼šæ˜¯ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">Something bad happened:</span><br><span class="line">java.lang.NullPointerException: Oops!</span><br><span class="line">at com.ericgoebelbecker.stacktraces.StackTrace.d(StackTrace.java:<span class="number">28</span>)</span><br><span class="line">at com.ericgoebelbecker.stacktraces.StackTrace.c(StackTrace.java:<span class="number">24</span>)</span><br><span class="line">at com.ericgoebelbecker.stacktraces.StackTrace.b(StackTrace.java:<span class="number">20</span>)</span><br><span class="line">at com.ericgoebelbecker.stacktraces.StackTrace.a(StackTrace.java:<span class="number">16</span>)</span><br><span class="line">at com.ericgoebelbecker.stacktraces.StackTrace.main(StackTrace.java:<span class="number">9</span>)</span><br></pre></td></tr></table></figure><h1 id="æ·±å…¥stack-trace"><a href="#æ·±å…¥stack-trace" class="headerlink" title="æ·±å…¥stack trace"></a>æ·±å…¥stack trace</h1><h2 id="StackTraceElement-class"><a href="#StackTraceElement-class" class="headerlink" title="StackTraceElement class"></a>StackTraceElement class</h2><p>è¿™ä¸ªç±»çš„æ¯ä¸€ä¸ªå®ä¾‹ä»£è¡¨äº†stack traceä¸­çš„ä¸€ä¸ªå…ƒç´ ã€‚</p><p>APIï¼š</p><ul><li><em>getClassName</em> â€“ returns the fully qualified name of the class containing the method invocation</li><li><em>getMethodName</em> â€“ returns the name of the method containing the method invocation</li><li><em>getFileName</em> â€“ returns the name of the source file associated with the class containing the method invocation</li><li><em>getLineNumber</em> â€“ returns the line number of the source line containing the execution point</li></ul><p>æ›´å¤šæŸ¥çœ‹ <a href="https://docs.oracle.com/javase/10/docs/api/java/lang/StackTraceElement.html">Java API documentation</a></p><h2 id="Thread-class"><a href="#Thread-class" class="headerlink" title="Thread class"></a>Thread class</h2><p>æˆ‘ä»¬è¿˜å¯ä»¥é€šè¿‡è°ƒç”¨Threadå®ä¾‹çš„getStackTrace()æ–¹æ³•ä»çº¿ç¨‹å¾—åˆ°äº†å…¶stack traceã€‚è¿™ä¸ªæ–¹æ³•è¿”å›ä¸€ä¸ªåŒ…å«StackTraceElementå®ä¾‹çš„æ•°ç»„ã€‚</p><p>ç¤ºä¾‹ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> StackTraceElement[] methodA() &#123;</span><br><span class="line">    <span class="keyword">return</span> methodB();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> StackTraceElement[] methodB() &#123;</span><br><span class="line">    Thread thread = Thread.currentThread();</span><br><span class="line">    <span class="keyword">return</span> thread.getStackTrace();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">whenElementOneIsReadUsingThread_thenMethodUnderTestIsObtained</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    StackTraceElement[] stackTrace = <span class="keyword">new</span> StackElementExample().methodA();</span><br><span class="line">    StackTraceElement elementOne = stackTrace[<span class="number">1</span>];</span><br><span class="line">    assertEquals(<span class="string">&quot;com.stackify.stacktrace.StackElementExample&quot;</span>, elementOne.getClassName());</span><br><span class="line">    assertEquals(<span class="string">&quot;methodB&quot;</span>, elementOne.getMethodName());</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>stackTrace[0]æ˜¯getStackTraceè¿™ä¸ªæ–¹æ³•æœ¬èº«çš„è°ƒç”¨ã€‚</p><h2 id="Throwable-class"><a href="#Throwable-class" class="headerlink" title="Throwable class"></a>Throwable class</h2><p>é™¤äº†å¯ä»¥å¯¹Exception eè¿›è¡Œæ‰“å°stack traceçš„æ“ä½œï¼ˆprintStackTraceå‡½æ•°ï¼‰ï¼Œæˆ‘ä»¬è¿˜å¯ä»¥é€šè¿‡getStackTraceå‡½æ•°è·å¾—ä¸Threadä¸­ç›¸åŒçš„ä¸€ä¸ªStackTraceElementæ•°ç»„ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> StackTraceElement[] methodC() &#123;</span><br><span class="line">    <span class="keyword">try</span> &#123;</span><br><span class="line">        methodD();</span><br><span class="line">    &#125; <span class="keyword">catch</span> (Throwable t) &#123;</span><br><span class="line">        <span class="keyword">return</span> t.getStackTrace();</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">null</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">methodD</span><span class="params">()</span> <span class="keyword">throws</span> Throwable </span>&#123;</span><br><span class="line">    <span class="keyword">throw</span> <span class="keyword">new</span> Throwable(<span class="string">&quot;A test exception&quot;</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">whenElementZeroIsReadUsingThrowable_thenMethodThrowingThrowableIsObtained</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    StackTraceElement[] stackTrace = <span class="keyword">new</span> StackElementExample().methodC();</span><br><span class="line">    StackTraceElement elementZero = stackTrace[<span class="number">0</span>];</span><br><span class="line">    assertEquals(<span class="string">&quot;com.stackify.stacktrace.StackElementExample&quot;</span>, elementZero.getClassName());</span><br><span class="line">    assertEquals(<span class="string">&quot;methodD&quot;</span>, elementZero.getMethodName());</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="æ‰“å°å¼‚å¸¸å †æ ˆä¿¡æ¯çš„å‡½æ•°-printStackTrace"><a href="#æ‰“å°å¼‚å¸¸å †æ ˆä¿¡æ¯çš„å‡½æ•°-printStackTrace" class="headerlink" title="æ‰“å°å¼‚å¸¸å †æ ˆä¿¡æ¯çš„å‡½æ•° printStackTrace"></a>æ‰“å°å¼‚å¸¸å †æ ˆä¿¡æ¯çš„å‡½æ•° printStackTrace</h2><p>printStackTraceï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">printStackTrace</span><span class="params">(PrintStreamOrWriter s)</span> </span>&#123;</span><br><span class="line">    <span class="comment">// Guard against malicious overrides of Throwable.equals by</span></span><br><span class="line">    <span class="comment">// using a Set with identity equality semantics.</span></span><br><span class="line">    Set&lt;Throwable&gt; dejaVu =</span><br><span class="line">        Collections.newSetFromMap(<span class="keyword">new</span> IdentityHashMap&lt;Throwable, Boolean&gt;());</span><br><span class="line">    dejaVu.add(<span class="keyword">this</span>);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">synchronized</span> (s.lock()) &#123;</span><br><span class="line">        <span class="comment">// Print our stack trace</span></span><br><span class="line">        s.println(<span class="keyword">this</span>);</span><br><span class="line">        StackTraceElement[] trace = getOurStackTrace();</span><br><span class="line">        <span class="keyword">for</span> (StackTraceElement traceElement : trace)</span><br><span class="line">            s.println(<span class="string">&quot;\tat &quot;</span> + traceElement);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// Print suppressed exceptions, if any</span></span><br><span class="line">        <span class="keyword">for</span> (Throwable se : getSuppressed())</span><br><span class="line">            se.printEnclosedStackTrace(s, trace, SUPPRESSED_CAPTION, <span class="string">&quot;\t&quot;</span>, dejaVu);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// Print cause, if any</span></span><br><span class="line">        Throwable ourCause = getCause();</span><br><span class="line">        <span class="keyword">if</span> (ourCause != <span class="keyword">null</span>)</span><br><span class="line">            ourCause.printEnclosedStackTrace(s, trace, CAUSE_CAPTION, <span class="string">&quot;&quot;</span>, dejaVu);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>printStackTraceå†…éƒ¨è°ƒç”¨printEnclosedStackTraceï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">     * Print our stack trace as an enclosed exception for the specified</span></span><br><span class="line"><span class="comment">     * stack trace.</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line"><span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">printEnclosedStackTrace</span><span class="params">(PrintStreamOrWriter s,</span></span></span><br><span class="line"><span class="function"><span class="params">                                     StackTraceElement[] enclosingTrace,</span></span></span><br><span class="line"><span class="function"><span class="params">                                     String caption,</span></span></span><br><span class="line"><span class="function"><span class="params">                                     String prefix,</span></span></span><br><span class="line"><span class="function"><span class="params">                                     Set&lt;Throwable&gt; dejaVu)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">assert</span> Thread.holdsLock(s.lock());</span><br><span class="line">    <span class="keyword">if</span> (dejaVu.contains(<span class="keyword">this</span>)) &#123;</span><br><span class="line">        s.println(<span class="string">&quot;\t[CIRCULAR REFERENCE:&quot;</span> + <span class="keyword">this</span> + <span class="string">&quot;]&quot;</span>);</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        dejaVu.add(<span class="keyword">this</span>);</span><br><span class="line">        <span class="comment">// Compute number of frames in common between this and enclosing trace</span></span><br><span class="line">        StackTraceElement[] trace = getOurStackTrace();</span><br><span class="line">        <span class="keyword">int</span> m = trace.length - <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">int</span> n = enclosingTrace.length - <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">while</span> (m &gt;= <span class="number">0</span> &amp;&amp; n &gt;=<span class="number">0</span> &amp;&amp; trace[m].equals(enclosingTrace[n])) &#123;</span><br><span class="line">            m--; n--;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">int</span> framesInCommon = trace.length - <span class="number">1</span> - m;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// Print our stack trace</span></span><br><span class="line">        s.println(prefix + caption + <span class="keyword">this</span>);</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt;= m; i++)</span><br><span class="line">            s.println(prefix + <span class="string">&quot;\tat &quot;</span> + trace[i]);</span><br><span class="line">        <span class="keyword">if</span> (framesInCommon != <span class="number">0</span>)</span><br><span class="line">            s.println(prefix + <span class="string">&quot;\t... &quot;</span> + framesInCommon + <span class="string">&quot; more&quot;</span>);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// Print suppressed exceptions, if any</span></span><br><span class="line">        <span class="keyword">for</span> (Throwable se : getSuppressed())</span><br><span class="line">            se.printEnclosedStackTrace(s, trace, SUPPRESSED_CAPTION,</span><br><span class="line">                                       prefix +<span class="string">&quot;\t&quot;</span>, dejaVu);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// Print cause, if any</span></span><br><span class="line">        Throwable ourCause = getCause();</span><br><span class="line">        <span class="keyword">if</span> (ourCause != <span class="keyword">null</span>)</span><br><span class="line">            ourCause.printEnclosedStackTrace(s, trace, CAUSE_CAPTION, prefix, dejaVu);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="ä¿¡æ¯ä¸­çš„â€¦-n-moreæ˜¯æ€ä¹ˆæ¥çš„"><a href="#ä¿¡æ¯ä¸­çš„â€¦-n-moreæ˜¯æ€ä¹ˆæ¥çš„" class="headerlink" title="ä¿¡æ¯ä¸­çš„â€¦ n moreæ˜¯æ€ä¹ˆæ¥çš„"></a>ä¿¡æ¯ä¸­çš„â€¦ n moreæ˜¯æ€ä¹ˆæ¥çš„</h2><p>åŸæ–‡ï¼šå‚è€ƒèµ„æ–™3</p><p>ç¤ºä¾‹ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">TestEx</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">fun1</span><span class="params">()</span> <span class="keyword">throws</span> IOException </span>&#123;</span><br><span class="line">        <span class="keyword">throw</span> <span class="keyword">new</span> IOException(<span class="string">&quot;level 1 exception&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">fun2</span><span class="params">()</span> <span class="keyword">throws</span> IOException </span>&#123;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            fun1();</span><br><span class="line">            System.out.println(<span class="string">&quot;2&quot;</span>);</span><br><span class="line">        &#125; <span class="keyword">catch</span> (IOException e) &#123;</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> IOException(<span class="string">&quot;level 2 exception&quot;</span>, e);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">fun3</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            fun2();</span><br><span class="line">            System.out.println(<span class="string">&quot;3&quot;</span>);</span><br><span class="line">        &#125; <span class="keyword">catch</span> (IOException e) &#123;</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> RuntimeException(<span class="string">&quot;level 3 exception&quot;</span>, e);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="keyword">new</span> TestEx().fun3();</span><br><span class="line">            System.out.println(<span class="string">&quot;0&quot;</span>);</span><br><span class="line">        &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>è°ƒè¯•è¾“å‡ºï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">Connected to the target VM, address: &#x27;127.0.0.1:57353&#x27;, transport: &#x27;socket&#x27;</span><br><span class="line">java.lang.RuntimeException: level 3 exception</span><br><span class="line">  at person.ismallboy.console.TestEx.fun3(TestEx.java:24)</span><br><span class="line">  at person.ismallboy.console.TestEx.main(TestEx.java:30)</span><br><span class="line">Caused by: java.io.IOException: level 2 exception</span><br><span class="line">  at person.ismallboy.console.TestEx.fun2(TestEx.java:15)</span><br><span class="line">  at person.ismallboy.console.TestEx.fun3(TestEx.java:21)</span><br><span class="line">  ... 1 more</span><br><span class="line">Caused by: java.io.IOException: level 1 exception</span><br><span class="line">  at person.ismallboy.console.TestEx.fun1(TestEx.java:7)</span><br><span class="line">  at person.ismallboy.console.TestEx.fun2(TestEx.java:12)</span><br><span class="line">  ... 2 more</span><br><span class="line">Disconnected from the target VM, address: &#x27;127.0.0.1:57353&#x27;, transport: &#x27;socket&#x27;</span><br></pre></td></tr></table></figure><p>printEnclosedStackTraceå‡½æ•°å…¶å®æ˜¯ä¸€ä¸ªå›è°ƒè¾“å‡ºå †æ ˆçš„è¿‡ç¨‹ã€‚éšè—éƒ¨åˆ†å †æ ˆï¼Œæ˜¯ä¸ºäº†æé«˜æ€§èƒ½ï¼Œçœç•¥ä¸€äº›ä¸å¿…è¦çš„è¾“å‡ºï¼Œè¾“å‡ºçš„å†…å®¹è¶Šå¤šï¼Œioè€—æ—¶è¶Šæ…¢ã€‚</p><blockquote><p>The trace ends with an â€œâ€¦ N moreâ€ which indicates that the last N frames are the same as for the previous exception.</p></blockquote><p>å…¶å®â€œâ€¦ n moreâ€çš„éƒ¨åˆ†æ˜¯é‡å¤çš„å †æ ˆéƒ¨åˆ†ã€‚æˆ‘ä»¬åˆ†æä¸€ä¸‹ä¸Šé¢è¿™ä¸ªå‡½æ•°â€œprintEnclosedStackTraceâ€ï¼Œç¿»è¯‘ä¸ºâ€œæ‰“å°å°é—­å †æ ˆè·Ÿè¸ªä¿¡æ¯â€ï¼Œâ€œå°é—­â€æš‚ä¸”å¯ä»¥ç†è§£ä¸ºâ€œå®Œæ•´çš„â€ï¼Œè¿™ä¸ªå‡½æ•°æœ‰ä¸¤ä¸ªæ¯”è¾ƒé‡è¦çš„å˜é‡ï¼Œåˆ†åˆ«æ˜¯â€œenclosingTraceâ€å’Œâ€œtrace â€ï¼Œè¿™ä¸¤ä¸ªå‚æ•°æ˜¯ä»€ä¹ˆå…³ç³»å‘¢ï¼Ÿå…¶å®å¯ä»¥ç®€å•ç†è§£ä¸ºâ€œenclosingTraceâ€æ˜¯â€œtrace â€çš„çˆ¶çº§å †æ ˆï¼Œå‡½æ•°printEnclosedStackTraceä¸­çš„whileå¾ªç¯ï¼Œå°±æ˜¯ä¸ºå€’åºæ‰¾å‡ºâ€œenclosingTraceâ€å’Œâ€œtrace â€ä¸­ä»å“ªä¸€ä¸ªæ ˆå¸§å¼€å§‹å°±ä¸ä¸€æ ·äº†ï¼Œå³â€œenclosingTraceâ€å’Œâ€œtrace â€æ˜¯æœ‰ä¸€éƒ¨åˆ†æ˜¯ä¸€æ ·çš„ï¼ˆä»æ•°ç»„åé¢å€’å›æ¥ï¼‰ï¼Œå°±æ˜¯ä¸ºäº†ç®—å‡ºæœ‰å¤šå°‘ä¸ªæ ˆå¸§ä¿¡æ¯æ˜¯é‡å¤å¯ä»¥éšè—çš„ï¼Œç›¸åŒçš„æ ˆå¸§å°±ä¸ç”¨é‡å¤è¾“å‡ºäº†ã€‚</p><p>æ¯ä¸ªå¼‚å¸¸éƒ½è¾“å‡ºä¸€ä¸ªå®Œæ•´çš„å †æ ˆä¿¡æ¯çš„è¯ï¼Œéƒ½æ˜¯ä»mainå‡½æ•°å¼€å§‹ï¼Œåˆ°å½“å‰çš„å‡½æ•°çš„æ‰€æœ‰å‡½æ•°è°ƒç”¨çš„æ ˆå¸§ä¿¡æ¯ï¼Œé‡Œé¢å‡½æ•°çš„è°ƒç”¨æ ˆå¸§ä¿¡æ¯éƒ½ä¼šåŒ…æ‹¬å¤–å±‚çš„å‡½æ•°è°ƒç”¨æ ˆå¸§ä¿¡æ¯ï¼Œæ‰€ä»¥éƒ½è¾“å‡ºçš„è¯ï¼Œå¾ˆå¤šéƒ½æ˜¯é‡å¤çš„ï¼Œä¸ºäº†æé«˜æ•ˆç‡ï¼Œå‡å°‘ioä»¥åŠè¾“å‡ºçš„å†…å®¹å¤ªå¤šåˆæ‚ä¹±ï¼Œæ‰€ä»¥jvmä»¥â€œâ€¦ n moreâ€çš„æ–¹å¼éšè—äº†é‡å¤çš„éƒ¨åˆ†ã€‚</p><p>å½“ç„¶ï¼Œå¦‚æœæƒ³ä¸éšè—ï¼Œå¯ä»¥é‡å†™java.lang.Throwable#printEnclosedStackTraceï¼Œå»æ‰whileéƒ¨åˆ†ï¼Œå°±å¯ä»¥çœ‹åˆ°æ¯ä¸ªå¼‚å¸¸çš„å®Œæ•´å †æ ˆä¿¡æ¯äº†ï¼Œå¯ä»¥å‚è€ƒ<a href="https://blog.csdn.net/michaelehome/article/details/79484722%E6%9D%A5%E9%AA%8C%E8%AF%81%E3%80%82">https://blog.csdn.net/michaelehome/article/details/79484722æ¥éªŒè¯ã€‚</a></p><h1 id="Exception-chainingï¼šcause"><a href="#Exception-chainingï¼šcause" class="headerlink" title="Exception chainingï¼šcause"></a>Exception chainingï¼šcause</h1><h2 id="å·¥ç¨‹ä¸­çš„æœ€ä½³å®è·µï¼šæ•æ‰å¹¶æŠ›å‡ºä¸€ä¸ªæ›´åŠ è´´åˆå®é™…çš„Exception"><a href="#å·¥ç¨‹ä¸­çš„æœ€ä½³å®è·µï¼šæ•æ‰å¹¶æŠ›å‡ºä¸€ä¸ªæ›´åŠ è´´åˆå®é™…çš„Exception" class="headerlink" title="å·¥ç¨‹ä¸­çš„æœ€ä½³å®è·µï¼šæ•æ‰å¹¶æŠ›å‡ºä¸€ä¸ªæ›´åŠ è´´åˆå®é™…çš„Exception"></a>å·¥ç¨‹ä¸­çš„æœ€ä½³å®è·µï¼šæ•æ‰å¹¶æŠ›å‡ºä¸€ä¸ªæ›´åŠ è´´åˆå®é™…çš„Exception</h2><p>åŸæ–‡ï¼šå‚è€ƒèµ„æ–™4ã€6</p><p>Letâ€™s say we are working on a big project that deals with fictional <code>FooBars</code>, and our code is going to be used by others. We might decide to catch the ArithmeticException from <code>Fraction</code> and re-throw it as something project-specific, which looks like this:</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">try</span> &#123;</span><br><span class="line">         ....</span><br><span class="line">        Fraction.getFraction(x,y);</span><br><span class="line">         ....</span><br><span class="line">&#125; <span class="keyword">catch</span> ( ArithmeticException e )&#123;</span><br><span class="line">        <span class="keyword">throw</span> <span class="keyword">new</span> MyProjectFooBarException(<span class="string">&quot;The number of FooBars cannot be zero&quot;</span>, e);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>Catching the <code>ArithmeticException</code> and rethrowing it has a few benefits:</p><ul><li>Our users are shielded from having to care about the <code>ArithmeticException</code> - giving us flexibility to change how commons-lang is used.</li><li>More context can be added, eg stating that itâ€™s <em>the number of FooBars</em> that is causing the problem.</li><li>It can make stack traces easier to read, too, as weâ€™ll see below.</li></ul><p>It isnâ€™t necessary to catch-and-rethrow on <em>every</em> Exception, but where there seems to be a jump in the layers of your code, like calling into a library, it often makes sense.</p><p>æ³¨æ„åˆ°MyProjectFooBarExceptionçš„æ„é€ å™¨æœ‰ä¸¤ä¸ªå‚æ•°ï¼Œç¬¬äºŒä¸ªå°±æ˜¯causeï¼Œç”¨æ¥æŒ‡æ˜äº§ç”Ÿæ­¤å¼‚å¸¸çš„æ ¹å¼‚å¸¸ã€‚</p><p>Every Exception in Java has a <code>cause</code> field, and when doing a <em>catch-and-rethrow</em> like this then you should <em>always</em> set that to help people debug errors.</p><p>è®¾ç½®äº†causeåstack traceå˜æˆäº†è¿™æ ·ï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">Exception in thread &quot;main&quot; com.myproject.module.MyProjectFooBarException: The number of FooBars cannot be zero</span><br><span class="line">    at com.myproject.module.MyProject.anotherMethod(MyProject.java:19)</span><br><span class="line">    at com.myproject.module.MyProject.someMethod(MyProject.java:12)</span><br><span class="line">    at com.myproject.module.MyProject.main(MyProject.java:8)</span><br><span class="line">Caused by: java.lang.ArithmeticException: The denominator must not be zero</span><br><span class="line">    at org.apache.commons.lang3.math.Fraction.getFraction(Fraction.java:143)</span><br><span class="line">    at com.myproject.module.MyProject.anotherMethod(MyProject.java:17)</span><br><span class="line">    ... 2 more</span><br></pre></td></tr></table></figure><p>å¤šäº†ä¸€è¡Œ<code>Caused byï¼š</code>å’Œcauseçš„æ ˆä¿¡æ¯ã€‚éœ€è¦æ³¨æ„çš„æ˜¯æ­¤æ—¶è‹¥è¦æŸ¥çœ‹å¼‚å¸¸æ ¹æºï¼Œéœ€è¦æ‰¾åˆ°æœ€åçš„caused byåé¢çš„å¼‚å¸¸çš„ç¬¬ä¸€ä¸ªæ–¹æ³•ã€‚</p><blockquote><p>The â€œCaused by:â€ is only included in the output when the primary exceptionâ€™s <code>cause</code> is not <code>null</code>). Exceptions can be chained indefinitely, and in that case the stacktrace can have multiple â€œCaused by:â€ traces.</p></blockquote><p>SO, donâ€™t handle exceptions in the intermediate layers, because code in the middle layers is often used by code in the higher layers. Itâ€™s responsibility of the code in the top-most layer to handle the exceptions. The top-most layer is typically the user interface such as command-line console, window or webpage. And typically we handle exceptions by showing a warning/error message to the user.</p><p>This good practice is illustrated by the following picture:</p><p><img src="/2021/how-to-read-and-use-stack-trace/exception_chaining_rule.png" alt="exception chaining rule"></p><p><img src="https://www.codejava.net/images/articles/javacore/exception/stacktrace/exception_chaining_rule.png" alt="exception chaining rule"></p><h1 id="stack-traceä¸­ç±»ã€æ–¹æ³•åçš„è¡¨ç¤ºçš„ç‰¹æ®Šæƒ…å†µ"><a href="#stack-traceä¸­ç±»ã€æ–¹æ³•åçš„è¡¨ç¤ºçš„ç‰¹æ®Šæƒ…å†µ" class="headerlink" title="stack traceä¸­ç±»ã€æ–¹æ³•åçš„è¡¨ç¤ºçš„ç‰¹æ®Šæƒ…å†µ"></a>stack traceä¸­ç±»ã€æ–¹æ³•åçš„è¡¨ç¤ºçš„ç‰¹æ®Šæƒ…å†µ</h1><p>The class and method names in the stack frames are the internal names for the classes and methods. You will need to recognize the following unusual cases:</p><ul><li>A nested or inner class will look like â€œOuterClass$InnerClassâ€.</li><li>An anonymous inner class will look like â€œOuterClass$1â€, â€œOuterClass$2â€, etcetera.</li><li>When code in a constructor, instance field initializer or an instance initializer block is being executed, the method name will be â€œâ€.</li><li>When code in a static field initializer or static initializer block is being executed, the method name will be â€œâ€.</li></ul><h1 id="å°†-stack-trace-è½¬ä¸ºString"><a href="#å°†-stack-trace-è½¬ä¸ºString" class="headerlink" title="å°† stack trace è½¬ä¸ºString"></a>å°† stack trace è½¬ä¸ºString</h1><p>æœ‰æ—¶å€™æˆ‘ä»¬éœ€è¦å°†æ ˆä¿¡æ¯è½¬æ¢ä¸ºStringä»¥ä¾¿åé¢çš„æ“ä½œï¼Œé€šå¸¸çš„åšæ³•æ˜¯ create a temporary <code>OutputStream</code> or <code>Writer</code> that writes to an in-memory buffer and pass that to the <code>printStackTrace(...)</code>.</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">     * Returns the string representation of the stack trace.</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> throwable the throwable</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> the string.</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> String <span class="title">stackTraceToString</span><span class="params">(Throwable throwable)</span> </span>&#123;</span><br><span class="line">    StringWriter stringWriter = <span class="keyword">new</span> StringWriter();</span><br><span class="line">    throwable.printStackTrace(<span class="keyword">new</span> PrintWriter(stringWriter));</span><br><span class="line">    <span class="keyword">return</span> stringWriter.toString();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p> <a href="http://commons.apache.org/proper/commons-lang/javadocs/api-2.6/org/apache/commons/lang/exception/ExceptionUtils.html#getStackTrace(java.lang.Throwable)">Apache Commons</a> å’Œ <a href="http://google.github.io/guava/releases/snapshot/api/docs/com/google/common/base/Throwables.html#getStackTraceAsString(java.lang.Throwable)">Guava</a> éƒ½æä¾›æœ‰è¿›è¡Œè¿™ä¸ªæ“ä½œçš„å·¥å…·æ–¹æ³•ã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">org.apache.commons.lang.exception.ExceptionUtils.getStackTrace(Throwable)</span><br><span class="line">com.google.common.base.Throwables.getStackTraceAsString(Throwable)</span><br></pre></td></tr></table></figure>]]></content>
    
    
    <summary type="html">&lt;p&gt;æœ¬æ–‡è¯¦ç»†æ€»ç»“äº†stack traceçš„å„ä¸ªéƒ¨åˆ†çš„å«ä¹‰å’Œä½¿ç”¨æ–¹æ³•ï¼ŒåŒæ—¶æ·±å…¥ä»‹ç»äº†ä¸€äº›ä¸å¼‚å¸¸ç›¸å…³çš„å‡½æ•°å’Œæœ€ä½³å®è·µã€‚&lt;/p&gt;</summary>
    
    
    
    <category term="SoftwareConstruction" scheme="https://www.fvolcano.red/categories/SoftwareConstruction/"/>
    
    
  </entry>
  
  <entry>
    <title>é€šè¿‡snapshotå›¾ç†è§£å€¼ä¸å¼•ç”¨</title>
    <link href="https://www.fvolcano.red/2021/how-to-use-snapshot/"/>
    <id>https://www.fvolcano.red/2021/how-to-use-snapshot/</id>
    <published>2021-07-07T12:23:08.000Z</published>
    <updated>2021-07-07T12:23:08.000Z</updated>
    
    <content type="html"><![CDATA[<p>Javaä¸­çš„å€¼ä¸å¼•ç”¨çš„æ¦‚å¿µæ˜¯åˆå­¦æ—¶çš„ä¸€ä¸ªæ˜“é”™ç‚¹ï¼Œæœ¬æ–‡æ€»ç»“äº†äºŒè€…çš„æ¦‚å¿µå‡ºç°åœºæ™¯ï¼Œå¹¶ä½¿ç”¨snapshotå›¾æ¥å¸®åŠ©åŠ æ·±ç†è§£ã€‚<a id="more"></a></p><h2 id="å‚è€ƒèµ„æ–™"><a href="#å‚è€ƒèµ„æ–™" class="headerlink" title="å‚è€ƒèµ„æ–™"></a>å‚è€ƒèµ„æ–™</h2><ol><li><a href="https://www.cnblogs.com/weidagang2046/archive/2010/07/24/value-vs-ref.html">ç†è§£å€¼ä¸å¼•ç”¨</a></li><li><a href="https://www.cnblogs.com/PasserByOne/p/12296649.html">å€¼å’Œå¼•ç”¨</a></li><li><a href="https://blog.csdn.net/zzp_403184692/article/details/8184751#">Javaï¼šæŒ‰å€¼ä¼ é€’è¿˜æ˜¯æŒ‰å¼•ç”¨ä¼ é€’è¯¦ç»†è§£è¯´</a></li><li><a href="https://blog.csdn.net/xx123698/article/details/99683909">è®©ä½ å½»åº•ç†è§£Javaçš„å€¼ä¼ é€’å’Œå¼•ç”¨ä¼ é€’</a></li><li><a href="https://blog.csdn.net/qq_28849009/article/details/107155420">è½¯ä»¶æ„é€ ï¼ˆå››ç‚¹äº”ï¼‰Snapshotå›¾çš„æœ€å…¨ç”»æ³•ã€ç¬¦å·åŸç†è¯¦è§£ï¼ˆå†…é™„çº¯æ‰‹ç»˜å›¾ç‰‡ä»¥åŠè¯¦ç»†ä»£ç ã€ä¾‹å­ï¼‰</a></li><li><a href="https://blog.csdn.net/wxc1172300310/article/details/92849187">Snapshot Diagramç”»æ³•å°ç»“</a></li></ol><h1 id="å€¼ä¸å¼•ç”¨"><a href="#å€¼ä¸å¼•ç”¨" class="headerlink" title="å€¼ä¸å¼•ç”¨"></a>å€¼ä¸å¼•ç”¨</h1><h2 id="æ¦‚å¿µ"><a href="#æ¦‚å¿µ" class="headerlink" title="æ¦‚å¿µ"></a>æ¦‚å¿µ</h2><p>â€œé¢å‘å¯¹è±¡åˆ†æå’Œè®¾è®¡éœ€è¦åŒºåˆ†å¯¹è±¡çš„å€¼è¯­ä¹‰ä¸å¼•ç”¨è¯­ä¹‰ã€‚æˆ‘çš„ä¸€å—é’±å’Œä½ çš„ä¸€å—é’±ç›¸ç­‰ï¼Œè¿™æ˜¯å€¼è¯­ä¹‰ï¼›20å²çš„æˆ‘å’Œ30å²çš„æˆ‘æ˜¯åŒä¸€ä¸ªäººï¼Œè¿™æ˜¯å¼•ç”¨è¯­ä¹‰ã€‚å€¼å¯¹è±¡åŒ…æ‹¬2å¤§ç‰¹å¾ï¼šå†…å®¹å’Œè¿ç®—ï¼Œæ¯”å¦‚ï¼š3è¿™ä¸ªæ•´æ•°åœ¨è®¡ç®—æœºå†…éƒ¨ç”¨äºŒè¿›åˆ¶11è¡¨ç¤ºï¼Œå¯ä»¥å‚ä¸+,-,*,/ç­‰è¿ç®—ï¼›å¼•ç”¨å¯¹è±¡åŒ…æ‹¬3å¤§ç‰¹å¾ï¼šæ ‡è¯†ã€çŠ¶æ€å’Œè¡Œä¸ºï¼Œæ¯”å¦‚ï¼šPersonå¯¹è±¡æ‹¥æœ‰ä¸å˜çš„æ ‡è¯†ï¼Œå¹¶å¯é€šè¿‡è¡Œä¸ºæ”¹å˜çŠ¶æ€ã€‚å€¼å¯¹è±¡çš„åŒä¸€æ€§å»ºç«‹åœ¨å†…å®¹çš„åŸºç¡€ä¸Šï¼Œè€Œå¼•ç”¨å¯¹è±¡çš„åŒä¸€æ€§å»ºç«‹åœ¨æ ‡è¯†çš„åŸºç¡€ä¸Šã€‚</p><p>structå’Œclassæ˜¯OOPè¯­è¨€ä¸ºåˆ†åˆ«è¡¨è¾¾å€¼è¯­ä¹‰å’Œå¼•ç”¨è¯­ä¹‰æ‰€æä¾›çš„è¯­æ³•æœºåˆ¶ã€‚å€¼å¯¹è±¡åªèƒ½è¢«åŠ¨åœ°å‚ä¸è¿ç®—ï¼Œå¼•ç”¨å¯¹è±¡æ‹¥æœ‰ä¸»åŠ¨çš„è¡Œä¸ºã€‚â€</p><p>ç®€è€Œè¨€ä¹‹ï¼Œåœ¨ç±»å’Œå¯¹è±¡çš„å±‚é¢ï¼Œå¼•ç”¨å¯ä»¥çœ‹æˆæ˜¯åœ°å€ï¼Œè€Œå€¼å°±æ˜¯è¿™ä¸ªåœ°å€ä¸Šçš„å†…å®¹ã€‚</p><h2 id="Javaä¸­çš„å€¼ä¼ é€’ä¸å¼•ç”¨ä¼ é€’"><a href="#Javaä¸­çš„å€¼ä¼ é€’ä¸å¼•ç”¨ä¼ é€’" class="headerlink" title="Javaä¸­çš„å€¼ä¼ é€’ä¸å¼•ç”¨ä¼ é€’"></a>Javaä¸­çš„å€¼ä¼ é€’ä¸å¼•ç”¨ä¼ é€’</h2><p>èµ‹å€¼å’Œå‚æ•°ä¼ é€’å¯ä»¥é€šè¿‡å€¼å¤åˆ¶(value-copy)æˆ–è€…å¼•ç”¨å¤åˆ¶ (reference-copy)æ¥å®Œæˆï¼Œåœ¨ä¸åŒçš„ç¼–ç¨‹è¯­è¨€ä¸­æœ‰ä¸åŒçš„å®ç°æ–¹æ³•ã€‚</p><p>ä¾‹å¦‚ï¼Œåœ¨Cä¸­è‹¥è¦ä¼ é€’ä¸€ä¸ªå˜é‡ç»™ä¸€ä¸ªå‡½æ•°å¹¶åœ¨å‡½æ•°ä¸­ä¿®æ”¹ï¼Œå¯ä»¥ä¼ é€’è¿™ä¸ªå˜é‡çš„åœ°å€ï¼Œå³ä¸€ä¸ªæŒ‡å‘å®ƒçš„æŒ‡é’ˆï¼›åœ¨ C++ ä¸­ï¼Œå°±å¯ä»¥è¿™æ ·æ¥å£°æ˜å‚æ•°int&amp; myNumï¼Œå³å¦‚æœä¼ é€’çš„å˜é‡æ˜¯xï¼ŒmyNumå°±æ˜¯æŒ‡å‘xçš„å¼•ç”¨ï¼Œå¼•ç”¨å°±åƒä¸€ç§ç‰¹æ®Šçš„æŒ‡é’ˆã€‚</p><p>Java ä¸­æ²¡æœ‰æŒ‡é’ˆï¼Œæœ‰æŒ‰å€¼ä¼ é€’å’ŒæŒ‰å¼•ç”¨ä¼ é€’ã€‚</p><p>é¦–å…ˆæœ€å¥½ç†è§£Javaçš„å†…å­˜åˆ†é…æ¨¡å‹ï¼Œå‚è€ƒå¦ä¸€ç¯‡ï¼š<a href="https://blog.csdn.net/xx123698/article/details/99683909">https://blog.csdn.net/xx123698/article/details/99683909</a></p><h2 id="æŒ‰å€¼ä¼ é€’"><a href="#æŒ‰å€¼ä¼ é€’" class="headerlink" title="æŒ‰å€¼ä¼ é€’"></a>æŒ‰å€¼ä¼ é€’</h2><p>å½“ä¼ é€’çš„å†…å®¹æ˜¯åŸºæœ¬ç±»å‹æ—¶ï¼ŒJavaä¼ é€’çš„æ˜¯è¯¥å˜é‡å€¼çš„å‰¯æœ¬ï¼Œå¯ä»¥ç†è§£ä¸ºæ˜¯é‡æ–°åˆ›å»ºäº†ä¸€ä¸ªç›¸åŒç±»å‹çš„å˜é‡ï¼Œå°†ä¼ è¿‡å»çš„å‚æ•°çš„å€¼èµ‹ç»™è¿™ä¸ªæ–°çš„å˜é‡ï¼Œå‡½æ•°å†…éƒ¨ä½¿ç”¨çš„æ˜¯è¿™ä¸ªæ–°çš„å±€éƒ¨å˜é‡ã€‚</p><p>æè¿°çš„å°±æ˜¯ä¸‹é¢è¿™ä¸¤ä¸ªæ¦‚å¿µï¼š</p><ol><li>å½¢å‚ï¼šæ–¹æ³•è¢«è°ƒç”¨æ—¶éœ€è¦ä¼ é€’è¿›æ¥çš„å‚æ•°ï¼Œå¦‚ï¼šfunc(int a)ä¸­çš„aï¼Œå®ƒåªæœ‰åœ¨funcè¢«è°ƒç”¨æœŸé—´aæ‰æœ‰æ„ä¹‰ï¼Œä¹Ÿå°±æ˜¯ä¼šè¢«åˆ†é…å†…å­˜ç©ºé—´ï¼Œåœ¨æ–¹æ³•funcæ‰§è¡Œå®Œæˆåï¼Œaå°±ä¼šè¢«é”€æ¯é‡Šæ”¾ç©ºé—´ï¼Œä¹Ÿå°±æ˜¯ä¸å­˜åœ¨äº†ã€‚</li><li>å®å‚ï¼šæ–¹æ³•è¢«è°ƒç”¨æ—¶æ˜¯ä¼ å…¥çš„å®é™…å€¼ï¼Œå®ƒåœ¨æ–¹æ³•è¢«è°ƒç”¨å‰å°±å·²ç»è¢«åˆå§‹åŒ–å¹¶ä¸”åœ¨æ–¹æ³•è¢«è°ƒç”¨æ—¶ä¼ å…¥ã€‚</li></ol><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">PassTest</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">test</span><span class="params">(<span class="keyword">int</span> a)</span></span>&#123;   <span class="comment">// è¿™ä¸ªaä¸å¤–é¢çš„aä¸æ˜¯åŒä¸€ä¸ªäº†ï¼Œå¯ä»¥æ”¹åï¼šint b</span></span><br><span class="line">        a = <span class="number">5</span>;       <span class="comment">// ä¿®æ”¹çš„æ˜¯å‡½æ•°å†…éƒ¨å±€éƒ¨å˜é‡açš„å€¼ï¼Œä¸mainä¸­çš„aæ— å…³</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        PassTest t = <span class="keyword">new</span> PassTest();</span><br><span class="line">        <span class="keyword">int</span> a = <span class="number">3</span>;</span><br><span class="line">        t.test(a);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="æŒ‰å¼•ç”¨ä¼ é€’"><a href="#æŒ‰å¼•ç”¨ä¼ é€’" class="headerlink" title="æŒ‰å¼•ç”¨ä¼ é€’"></a>æŒ‰å¼•ç”¨ä¼ é€’</h2><p>å½“ä¼ é€’å¯¹è±¡ã€æ•°ç»„æ—¶ï¼ŒJavaåŒæ ·ä¼ é€’çš„æ˜¯å‰¯æœ¬ï¼Œä¸åŒçš„æ˜¯ï¼Œæ˜¯å¼•ç”¨çš„å‰¯æœ¬ï¼Œå³åˆ›å»ºäº†ä¸€ä¸ªæ–°çš„å±€éƒ¨å˜é‡ï¼Œå°†åŸæ¥çš„å¼•ç”¨çš„å†…å®¹å¤åˆ¶åˆ°äº†è¿™ä¸ªå˜é‡å†…ï¼Œå¯ä»¥ç†è§£ä¸ºæŠŠåŸæ¥å¼•ç”¨ä»£è¡¨çš„åœ°å€å€¼èµ‹ç»™è¿™ä¸ªæ–°çš„å˜é‡ï¼Œå¯ä»¥é€šè¿‡è¿™ä¸ªåœ°å€æ”¹å˜åœ°å€ä¸Šçš„å†…å®¹ï¼Œä½†è‹¥æ”¹å˜è¿™ä¸ªå±€éƒ¨å˜é‡çš„å†…å®¹ï¼Œè®©å®ƒâ€œå¼•ç”¨â€å…¶ä»–çš„ä¸œè¥¿ï¼ŒåŸæ¥å¤–éƒ¨çš„å¼•ç”¨ä¸ä¼šæ”¹å˜ã€‚</p><p>å…¶å®ä¸Cä¸­çš„ä¼ é€’æŒ‡é’ˆç±»ä¼¼ï¼š</p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">func</span><span class="params">(struct student *s)</span> </span>&#123;</span><br><span class="line">    s-&gt;age = <span class="number">18</span>;    <span class="comment">// å®å‚ä¹Ÿæ”¹å˜</span></span><br><span class="line">    s = &#123;<span class="number">20</span>,...&#125;    <span class="comment">// å®å‚ä¸å˜</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">TempTest</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">test1</span><span class="params">(A a)</span></span>&#123;</span><br><span class="line">        a.age = <span class="number">20</span>;          <span class="comment">// ä¿®æ”¹äº†å¤–é¢açš„å†…å®¹</span></span><br><span class="line">        a = <span class="keyword">new</span> A();         <span class="comment">// å·²ç»æŒ‡å‘ä¸åŒå†…å®¹äº†</span></span><br><span class="line">        a.age = <span class="number">18</span>;          <span class="comment">// æ²¡æœ‰ä¿®æ”¹å¤–éƒ¨å†…å®¹</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        TempTest t = <span class="keyword">new</span> TempTest();</span><br><span class="line">        A a = <span class="keyword">new</span> A();</span><br><span class="line">        a.age = <span class="number">10</span>;</span><br><span class="line">        t.test1(a);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">A</span></span>&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">int</span> age = <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><blockquote><p>è¯´æ³•ï¼šâ€œåœ¨Javaé‡Œé¢å‚æ•°ä¼ é€’éƒ½æ˜¯æŒ‰å€¼ä¼ é€’â€</p><p>è¿™å¥è¯çš„æ„æ€æ˜¯ï¼šæŒ‰å€¼ä¼ é€’æ˜¯ä¼ é€’çš„å€¼çš„æ‹·è´ï¼ŒæŒ‰å¼•ç”¨ä¼ é€’å…¶å®ä¼ é€’çš„æ˜¯å¼•ç”¨çš„æ‹·è´ï¼Œæ‰€ä»¥ç»Ÿç§°æŒ‰å€¼ä¼ é€’ã€‚</p></blockquote><h1 id="Snapshot-diagram"><a href="#Snapshot-diagram" class="headerlink" title="Snapshot diagram"></a>Snapshot diagram</h1><p>ç†è§£å†…å­˜æ˜¯å¦‚ä½•åˆ†é…çš„èƒ½å¤Ÿå¸®åŠ©ç†è§£ç¨‹åºä¸­çš„å€¼å’Œå¼•ç”¨ã€‚åœ¨snapshotå›¾ä¸­ï¼Œç®­å¤´ä»£è¡¨çš„æ˜¯å¼•ç”¨ï¼Œåœ†åœˆ/ç®­å¤´æŒ‡å‘çš„å†…å®¹ä»£è¡¨çš„æ˜¯å€¼ã€‚</p><h2 id="ç”»æ³•"><a href="#ç”»æ³•" class="headerlink" title="ç”»æ³•"></a>ç”»æ³•</h2><p>åŸæ–‡ï¼šå‚è€ƒèµ„æ–™6</p><p>å¯¹äºåŸºæœ¬ç±»å‹çš„å€¼ï¼Œä½¿ç”¨å•çº¿ç®­å¤´æŒ‡å‘å®é™…å€¼ï¼Œä¸éœ€è¦è¡¨æ˜æ•°æ®ç±»å‹ã€‚</p><img src="/2021/how-to-use-snapshot/20190619221541539.png" style="zoom:75%;"><p>å¯¹äºå¯¹è±¡çš„å€¼ï¼Œå¦‚æœæ˜¯å¯å˜å¯¹è±¡ï¼Œä½¿ç”¨å•çº¿æ¤­åœ†ï¼Œæ¤­åœ†å†…å†™æ˜å¯¹è±¡çš„ç±»å‹åŠå¯¹è±¡å†…çš„å€¼ã€‚</p><p><img src="/2021/how-to-use-snapshot/20190619221635544.png"></p><p>å¦‚æœæ˜¯ä¸å¯å˜å¯¹è±¡ï¼Œä½¿ç”¨åŒçº¿æ¤­åœ†ï¼Œæ¤­åœ†å†…å†™æ˜å¯¹è±¡çš„ç±»å‹åŠå¯¹è±¡å†…çš„å€¼ã€‚</p><p><img src="/2021/how-to-use-snapshot/20190619221821332.png"></p><p>å¦‚æœæ˜¯å¯¹è±¡çš„ä¸å¯å˜å¼•ç”¨ï¼ˆfinalæ ‡è®°ï¼‰ï¼Œä½¿ç”¨åŒçº¿ç®­å¤´ã€‚egï¼šid<br>å¦‚æœæ˜¯å¯¹è±¡çš„å¯å˜å¼•ç”¨ï¼Œä½¿ç”¨å•çº¿ç®­å¤´ã€‚egï¼šage</p><p><img src="/2021/how-to-use-snapshot/image-20210707212724115.png"></p><h2 id="ç›¸å…³é¢è¯•é¢˜"><a href="#ç›¸å…³é¢è¯•é¢˜" class="headerlink" title="ç›¸å…³é¢è¯•é¢˜"></a>ç›¸å…³é¢è¯•é¢˜</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">HelloWorld</span></span></span><br><span class="line"><span class="class"></span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">operate</span><span class="params">(StringBuffer x, StringBuffer y)</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        x.append(y);</span><br><span class="line">        y = x;</span><br><span class="line">        System.out.println(x + <span class="string">&quot;,&quot;</span> + y);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        StringBuffer a = <span class="keyword">new</span> StringBuffer(<span class="string">&quot;A&quot;</span>);</span><br><span class="line">        StringBuffer b = <span class="keyword">new</span> StringBuffer(<span class="string">&quot;B&quot;</span>);</span><br><span class="line">        operate(a, b);</span><br><span class="line">        System.out.println(a + <span class="string">&quot;,&quot;</span> + b);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">ç»“æœï¼š</span><br><span class="line">AB,AB</span><br><span class="line">AB,B</span><br></pre></td></tr></table></figure>]]></content>
    
    
    <summary type="html">&lt;p&gt;Javaä¸­çš„å€¼ä¸å¼•ç”¨çš„æ¦‚å¿µæ˜¯åˆå­¦æ—¶çš„ä¸€ä¸ªæ˜“é”™ç‚¹ï¼Œæœ¬æ–‡æ€»ç»“äº†äºŒè€…çš„æ¦‚å¿µå‡ºç°åœºæ™¯ï¼Œå¹¶ä½¿ç”¨snapshotå›¾æ¥å¸®åŠ©åŠ æ·±ç†è§£ã€‚&lt;/p&gt;</summary>
    
    
    
    <category term="SoftwareConstruction" scheme="https://www.fvolcano.red/categories/SoftwareConstruction/"/>
    
    
  </entry>
  
  <entry>
    <title>ConcurrentModifyExceptionå¹¶å‘ä¿®æ”¹å¼‚å¸¸æ˜¯æ€ä¹ˆå›äº‹ï¼Ÿ</title>
    <link href="https://www.fvolcano.red/2021/What-caused-ConcurrentModifyException/"/>
    <id>https://www.fvolcano.red/2021/What-caused-ConcurrentModifyException/</id>
    <published>2021-07-07T06:35:53.000Z</published>
    <updated>2021-07-07T06:35:53.000Z</updated>
    
    <content type="html"><![CDATA[<p>åœ¨éå†é›†åˆç±»çš„å…ƒç´ æ—¶ï¼Œè‹¥è¯•å›¾ä¿®æ”¹è¯¥é›†åˆåˆ™ä¼šæŠ¥ConcurrentModifyExceptionå¼‚å¸¸ï¼Œæœ¬æ–‡ä»‹ç»äº†è¯¥å¼‚å¸¸äº§ç”Ÿçš„å„ç§æƒ…å†µã€åŸå› å’Œè§£å†³æ–¹æ¡ˆã€‚<img src="/2021/What-caused-ConcurrentModifyException/image-20210707144719236-1625640442274.png" alt="image-20210707144719236"><a id="more"></a></p><h2 id="å‚è€ƒèµ„æ–™"><a href="#å‚è€ƒèµ„æ–™" class="headerlink" title="å‚è€ƒèµ„æ–™"></a>å‚è€ƒèµ„æ–™</h2><ol><li><a href="https://www.cnblogs.com/bsjl/p/7676209.html">Javaå¹¶å‘â€“ConcurrentModificationExceptionï¼ˆå¹¶å‘ä¿®æ”¹å¼‚å¸¸ï¼‰å¼‚å¸¸åŸå› å’Œè§£å†³æ–¹æ³•</a></li><li><a href="https://blog.csdn.net/sinbadfreedom/article/details/80467328">ConcurrentModifyExceptionçš„äº§ç”ŸåŸå› åŠå¦‚ä½•é¿å…</a></li><li><a href="https://zhuanlan.zhihu.com/p/38823394">å¹¶å‘è¿›é˜¶ï¼ˆå››ï¼‰å¹¶å‘ä¿®æ”¹å¼‚å¸¸</a></li></ol><h1 id="ConcurrentModifyExceptionæ˜¯ä»€ä¹ˆ"><a href="#ConcurrentModifyExceptionæ˜¯ä»€ä¹ˆ" class="headerlink" title="ConcurrentModifyExceptionæ˜¯ä»€ä¹ˆ"></a>ConcurrentModifyExceptionæ˜¯ä»€ä¹ˆ</h1><p>åŸæ–‡ï¼šå‚è€ƒèµ„æ–™2</p><p>ConcurrentModificationExceptionè¿™ä¸ªå¼‚å¸¸æ˜¯ä»JDK1.2æ—¶å°±å­˜åœ¨ã€‚å½“æ–¹æ³•æ£€æµ‹åˆ°å¯¹è±¡çš„å¹¶å‘ä¿®æ”¹ï¼Œä½†ä¸å…è®¸è¿™ç§ä¿®æ”¹æ—¶ï¼ŒæŠ›å‡ºæ­¤å¼‚å¸¸ã€‚è¿™ä¸ªå¼‚å¸¸åœ¨å•çº¿ç¨‹å’Œå¤šçº¿ç¨‹è¿è¡Œç¯å¢ƒéƒ½å¯ä»¥äº§ç”Ÿã€‚</p><p>æŸä¸ªçº¿ç¨‹åœ¨ Collection ä¸Šè¿›è¡Œè¿­ä»£æ—¶ï¼Œé€šå¸¸ä¸å…è®¸å¦ä¸€ä¸ªçº¿æ€§ä¿®æ”¹è¯¥Collectionã€‚é€šå¸¸åœ¨è¿™äº›æƒ…å†µä¸‹ï¼Œè¿­ä»£çš„ç»“æœæ˜¯ä¸ç¡®å®šçš„ã€‚å¦‚æœæ£€æµ‹åˆ°è¿™ç§è¡Œä¸ºï¼Œä¸€äº›è¿­ä»£å™¨å®ç°ï¼ˆåŒ…æ‹¬JREæä¾›çš„æ‰€æœ‰é€šç”¨collectionå®ç°ï¼‰å¯èƒ½é€‰æ‹©æŠ›å‡ºæ­¤å¼‚å¸¸ã€‚</p><p>æ‰§è¡Œè¯¥æ“ä½œçš„è¿­ä»£å™¨ç§°ä¸ºå¿«é€Ÿå¤±è´¥è¿­ä»£å™¨ï¼Œå› ä¸ºè¿­ä»£å™¨å¾ˆå¿«å°±å®Œå…¨å¤±è´¥ï¼Œè€Œä¸ä¼šå†’ç€åœ¨å°†æ¥æŸä¸ªæ—¶é—´ä»»æ„å‘ç”Ÿä¸ç¡®å®šè¡Œä¸ºçš„é£é™©ã€‚è¿­ä»£å™¨çš„å¿«é€Ÿå¤±è´¥è¡Œä¸ºæ— æ³•å¾—åˆ°ä¿è¯ï¼Œå› ä¸ºä¸€èˆ¬æ¥è¯´ï¼Œä¸å¯èƒ½å¯¹æ˜¯å¦å‡ºç°ä¸åŒæ­¥å¹¶å‘ä¿®æ”¹åšå‡ºä»»ä½•ç¡¬æ€§ä¿è¯ã€‚å¿«é€Ÿå¤±è´¥æ“ä½œä¼šå°½æœ€å¤§åŠªåŠ›æŠ›å‡ºConcurrentModificationExceptionã€‚</p><p>å› æ­¤ï¼Œä¸ºæé«˜æ­¤ç±»æ“ä½œçš„æ­£ç¡®æ€§è€Œç¼–å†™ä¸€ä¸ªä¾èµ–äºæ­¤å¼‚å¸¸çš„ç¨‹åºæ˜¯é”™è¯¯çš„åšæ³•ï¼Œæ­£ç¡®åšæ³•æ˜¯ï¼šConcurrentModificationException åº”è¯¥ä»…ç”¨äºæ£€æµ‹ bugã€‚</p><h1 id="1-ä½¿ç”¨è¿­ä»£å™¨éå†æ—¶ä¿®æ”¹"><a href="#1-ä½¿ç”¨è¿­ä»£å™¨éå†æ—¶ä¿®æ”¹" class="headerlink" title="1 ä½¿ç”¨è¿­ä»£å™¨éå†æ—¶ä¿®æ”¹"></a>1 ä½¿ç”¨è¿­ä»£å™¨éå†æ—¶ä¿®æ”¹</h1><h2 id="åœºæ™¯"><a href="#åœºæ™¯" class="headerlink" title="åœºæ™¯"></a>åœºæ™¯</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">ArrayList&lt;Integer&gt; list = <span class="keyword">new</span> ArrayList&lt;Integer&gt;();</span><br><span class="line"><span class="comment">// ...(å‘listè¿›è¡Œæ·»åŠ ç­‰ç›¸å…³æ“ä½œ)</span></span><br><span class="line"><span class="comment">// éœ€æ±‚ï¼šåˆ é™¤listä¸­çš„2</span></span><br><span class="line">Iterator&lt;Integer&gt; iterator = list.iterator();</span><br><span class="line"><span class="keyword">while</span>(iterator.hasNext())&#123;</span><br><span class="line">    Integer integer = iterator.next();</span><br><span class="line">    <span class="keyword">if</span>(integer==<span class="number">2</span>)</span><br><span class="line">        list.remove(integer);  <span class="comment">// æŠ¥é”™</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="åŸå› "><a href="#åŸå› " class="headerlink" title="åŸå› "></a>åŸå› </h2><p>æŸ¥çœ‹ArrayListçš„æºç ï¼Œå‘ç°å¹¶æ²¡æœ‰iterator()æ–¹æ³•çš„å®ç°ï¼Œé‚£ä¹ˆè¯´æ˜å®ƒç»§æ‰¿äº†å…¶çˆ¶ç±»AbstractListçš„è¯¥æ–¹æ³•ã€‚æŸ¥çœ‹ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> Iterator&lt;E&gt; <span class="title">iterator</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">new</span> Itr();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>è¿”å›ä¸€ä¸ªItrç±»å‹çš„å¯¹è±¡ï¼Œç»§ç»­æŸ¥çœ‹è¯¥ç±»çš„å®ç°,æ˜¯ä¸€ä¸ªç§æœ‰çš„å†…éƒ¨ç±»ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">private</span> <span class="class"><span class="keyword">class</span> <span class="title">Itr</span> <span class="keyword">implements</span> <span class="title">Iterator</span>&lt;<span class="title">E</span>&gt; </span>&#123;</span><br><span class="line">    <span class="keyword">int</span> cursor = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">int</span> lastRet = -<span class="number">1</span>;</span><br><span class="line">    <span class="keyword">int</span> expectedModCount = modCount;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">hasNext</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> cursor != size();</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> E <span class="title">next</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        checkForComodification();</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            E next = get(cursor);</span><br><span class="line">            lastRet = cursor++;</span><br><span class="line">            <span class="keyword">return</span> next;</span><br><span class="line">        &#125; <span class="keyword">catch</span> (IndexOutOfBoundsException e) &#123;</span><br><span class="line">            checkForComodification();</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> NoSuchElementException();           <span class="comment">// â‘ </span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">remove</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (lastRet == -<span class="number">1</span>)</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> IllegalStateException();</span><br><span class="line">        checkForComodification();</span><br><span class="line"></span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            AbstractList.<span class="keyword">this</span>.remove(lastRet);</span><br><span class="line">            <span class="keyword">if</span> (lastRet &lt; cursor)</span><br><span class="line">                cursor--;</span><br><span class="line">            lastRet = -<span class="number">1</span>;</span><br><span class="line">            expectedModCount = modCount;</span><br><span class="line">        &#125; <span class="keyword">catch</span> (IndexOutOfBoundsException e) &#123;</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> ConcurrentModificationException();  <span class="comment">// â‘¡</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">final</span> <span class="keyword">void</span> <span class="title">checkForComodification</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (modCount != expectedModCount)</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> ConcurrentModificationException();  <span class="comment">// â‘¢</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>è¿™ä¸ªAbstractListçš„è¿­ä»£å™¨æ€»å…±æœ‰ä¸‰å¤„ä¼šæŠ›å‡ºConcurrentModificationExceptionã€‚</p><p>å…ˆç†è§£å®ƒæ˜¯å¦‚ä½•å®ç°çš„ï¼šé€šè¿‡å˜é‡åå­—å¯ä»¥çŸ¥é“cursorä»£è¡¨å½“å‰æŒ‡å‘çš„é›†åˆå†…å…ƒç´ ï¼Œæ˜¯ä¸‹ä¸€æ¬¡è°ƒç”¨next()æ–¹æ³•æ—¶ä¼šè¿”å›çš„å…ƒç´ ã€‚lastRetä»£è¡¨çš„æ˜¯ä¸Šä¸€æ¬¡è¿”å›çš„å…ƒç´ ï¼Œç”¨äºåˆ é™¤æ–¹æ³•ã€‚</p><p>å‰©ä¸‹çš„expectedModCountå°±æ˜¯äº§ç”Ÿè¿™ä¸ªå¼‚å¸¸çš„åŸå› ï¼šå®ƒè¡¨ç¤ºå¯¹Listå¯¹è±¡ä¿®æ”¹æ¬¡æ•°çš„æœŸæœ›å€¼ï¼Œåˆå§‹å€¼ä¸ºmodCountï¼Œè€ŒmodCountæ˜¯AbstractListç±»ä¸­çš„ä¸€ä¸ªæˆå‘˜å˜é‡ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">protected</span> <span class="keyword">transient</span> <span class="keyword">int</span> modCount = <span class="number">0</span>;</span><br></pre></td></tr></table></figure><p>è¿™ä¸ªå˜é‡è¡¨ç¤ºå¯¹Listçš„ä¿®æ”¹æ¬¡æ•°ï¼ŒæŸ¥çœ‹ArrayListçš„add()å’Œremove()æ–¹æ³•å°±å¯ä»¥å‘ç°ï¼Œæ¯æ¬¡è°ƒç”¨add()æ–¹æ³•æˆ–è€…remove()æ–¹æ³•å°±ä¼šå¯¹modCountè¿›è¡ŒåŠ 1æ“ä½œã€‚</p><p>é‚£ä¹ˆï¼Œéå†åœºæ™¯ä¸­æŠ›å‡ºConcurrentModificationExceptionå¼‚å¸¸çš„åŸå› å°±æ¸…æ™°äº†ï¼šç”±äºåœ¨ä½¿ç”¨è¿­ä»£å™¨çš„è¿‡ç¨‹ä¸­è°ƒç”¨äº†ArrayListæœ¬èº«çš„removeæ–¹æ³•ï¼Œä½¿modCount++ï¼Œå†è°ƒç”¨è¿­ä»£å™¨çš„next()æ–¹æ³•æ—¶é€šè¿‡checkForComodification()æŠ›å‡ºäº†è¯¥å¼‚å¸¸ï¼Œå³ä»£ç â‘¢å¤„ã€‚</p><h2 id="å•çº¿ç¨‹è§£å†³æ–¹æ³•-1"><a href="#å•çº¿ç¨‹è§£å†³æ–¹æ³•-1" class="headerlink" title="å•çº¿ç¨‹è§£å†³æ–¹æ³• 1"></a>å•çº¿ç¨‹è§£å†³æ–¹æ³• 1</h2><p>åŸæ–‡ï¼šå‚å¼€èµ„æ–™1</p><p>è‹¥æ˜¯å•çº¿ç¨‹ï¼Œç®€å•æ˜äº†ï¼Œè°ƒç”¨è¿­ä»£å™¨é‡æ–°å®ç°çš„removeå°±å¥½å•¦ï¼Œåœ¨é‡Œé¢è¿­ä»£å™¨æ›´æ–°äº†expectedModCountã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">Iterator&lt;Integer&gt; iterator = list.iterator();</span><br><span class="line"><span class="keyword">while</span>(iterator.hasNext())&#123;</span><br><span class="line">    Integer integer = iterator.next();</span><br><span class="line">    <span class="keyword">if</span>(integer==<span class="number">2</span>)</span><br><span class="line">        iterator.remove();   <span class="comment">// å‘</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æˆ–è€…ç›´æ¥å°±ä¸ç”¨è¿­ä»£å™¨ï¼Œç”¨for+å±€éƒ¨å˜é‡içš„å½¢å¼éå†é›†åˆå…ƒç´ ï¼Œç”¨å¢å¼ºforå¾ªç¯ä¸è¡Œï¼Œå› ä¸ºåº•å±‚ä¹Ÿæ˜¯ä½¿ç”¨è¿­ä»£å™¨ã€‚</p><h2 id="å•çº¿ç¨‹è§£å†³æ–¹æ³•2"><a href="#å•çº¿ç¨‹è§£å†³æ–¹æ³•2" class="headerlink" title="å•çº¿ç¨‹è§£å†³æ–¹æ³•2"></a>å•çº¿ç¨‹è§£å†³æ–¹æ³•2</h2><p>åŸæ–‡ï¼šå‚è€ƒèµ„æ–™2</p><p>å°†ArrayListé›†åˆæ”¹ä¸ºCopyOnWriteArrayListï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.util.concurrent.CopyOnWriteArrayList;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Demo2</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        <span class="comment">/** åˆå§‹åŒ–é›†åˆç±»*/</span></span><br><span class="line">        CopyOnWriteArrayList&lt;TestObj&gt; list = <span class="keyword">new</span> CopyOnWriteArrayList&lt;&gt;();</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; <span class="number">100</span>; i++) &#123;</span><br><span class="line">            list.add(<span class="keyword">new</span> TestObj(i));</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="comment">/** éå†æ—¶åˆ é™¤å…ƒç´ */</span></span><br><span class="line">        <span class="keyword">for</span> (TestObj obj : list) &#123;</span><br><span class="line">            <span class="keyword">if</span> (obj.getValue() &lt; <span class="number">10</span>) &#123;</span><br><span class="line">                <span class="comment">/** è¿™é‡Œä¸ä¼šæŠ›å‡ºConcurrentModificationException*/</span></span><br><span class="line">                list.remove(obj);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        System.out.println();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="å•çº¿ç¨‹ä¸¤ç§æ–¹æ¡ˆæ¯”è¾ƒ"><a href="#å•çº¿ç¨‹ä¸¤ç§æ–¹æ¡ˆæ¯”è¾ƒ" class="headerlink" title="å•çº¿ç¨‹ä¸¤ç§æ–¹æ¡ˆæ¯”è¾ƒ"></a>å•çº¿ç¨‹ä¸¤ç§æ–¹æ¡ˆæ¯”è¾ƒ</h2><p>æ¯ä¸€ä¸ªæ–¹æ¡ˆéƒ½æŠŠä¸Šè¿°æ“ä½œæ‰§è¡Œä¸€ç™¾ä¸‡æ¬¡ï¼Œå¯ä»¥å¾—åˆ°ï¼š</p><table><thead><tr><th>ä½¿ç”¨è¿­ä»£å™¨è‡ªå¸¦çš„removeæ–¹æ³•</th><th>1919</th></tr></thead><tbody><tr><td>ç”¨CopyOnWriteArrayListæ›¿ä»£</td><td>7013</td></tr></tbody></table><p>å› æ­¤ï¼Œå•çº¿ç¨‹ç¯å¢ƒä¸­æ¨èä½¿ç”¨è¿­ä»£å™¨è‡ªå¸¦çš„removeæ–¹æ³•æ¥åˆ é™¤å…ƒç´ ã€‚</p><h2 id="å¤šçº¿ç¨‹è§£å†³æ–¹æ¡ˆ"><a href="#å¤šçº¿ç¨‹è§£å†³æ–¹æ¡ˆ" class="headerlink" title="å¤šçº¿ç¨‹è§£å†³æ–¹æ¡ˆ"></a>å¤šçº¿ç¨‹è§£å†³æ–¹æ¡ˆ</h2><p>è‹¥æ˜¯å¤šçº¿ç¨‹ï¼Œè¿™æ ·å†™å°±ä¸è¡Œäº†ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Test</span> </span>&#123;</span><br><span class="line">    <span class="keyword">static</span> ArrayList&lt;Integer&gt; list = <span class="keyword">new</span> ArrayList&lt;Integer&gt;();</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span>  </span>&#123;</span><br><span class="line">        list.add(<span class="number">1</span>);</span><br><span class="line">        list.add(<span class="number">2</span>);</span><br><span class="line">        list.add(<span class="number">3</span>);</span><br><span class="line">        list.add(<span class="number">4</span>);</span><br><span class="line">        list.add(<span class="number">5</span>);</span><br><span class="line">        Thread thread1 = <span class="keyword">new</span> Thread()&#123;</span><br><span class="line">            <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">run</span><span class="params">()</span> </span>&#123;</span><br><span class="line">                Iterator&lt;Integer&gt; iterator = list.iterator();</span><br><span class="line">                <span class="keyword">while</span>(iterator.hasNext())&#123;</span><br><span class="line">                    Integer integer = iterator.next();</span><br><span class="line">                    System.out.println(integer);</span><br><span class="line">                    <span class="keyword">try</span> &#123;</span><br><span class="line">                        Thread.sleep(<span class="number">100</span>);</span><br><span class="line">                    &#125; <span class="keyword">catch</span> (InterruptedException e) &#123;</span><br><span class="line">                        e.printStackTrace();</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;;</span><br><span class="line">        &#125;;</span><br><span class="line">        Thread thread2 = <span class="keyword">new</span> Thread()&#123;</span><br><span class="line">            <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">run</span><span class="params">()</span> </span>&#123;</span><br><span class="line">                Iterator&lt;Integer&gt; iterator = list.iterator();</span><br><span class="line">                <span class="keyword">while</span>(iterator.hasNext())&#123;</span><br><span class="line">                    Integer integer = iterator.next();</span><br><span class="line">                    <span class="keyword">if</span>(integer==<span class="number">2</span>)</span><br><span class="line">                        iterator.remove();</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;;</span><br><span class="line">        &#125;;</span><br><span class="line">        thread1.start();</span><br><span class="line">        thread2.start();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>è¿™æ ·å†™è¿˜æ˜¯ä¼šæŠ¥ConcurrentModificationExceptionå¼‚å¸¸ï¼Œ</p><p>æœ‰å¯èƒ½æœ‰æœ‹å‹è¯´ArrayListæ˜¯éçº¿ç¨‹å®‰å…¨çš„å®¹å™¨ï¼Œæ¢æˆVectorå°±æ²¡é—®é¢˜äº†ï¼Œå®é™…ä¸Šæ¢æˆVectorè¿˜æ˜¯ä¼šå‡ºç°è¿™ç§é”™è¯¯ã€‚</p><p>åŸå› åœ¨äºï¼Œè™½ç„¶Vectorçš„æ–¹æ³•é‡‡ç”¨äº†synchronizedè¿›è¡Œäº†åŒæ­¥ï¼Œä½†æ˜¯ç”±äºVectoræ˜¯ç»§æ‰¿çš„AbstarctListï¼Œå› æ­¤é€šè¿‡Iteratoræ¥è®¿é—®å®¹å™¨çš„è¯ï¼Œäº‹å®ä¸Šæ˜¯ä¸éœ€è¦è·å–é”å°±å¯ä»¥è®¿é—®ã€‚é‚£ä¹ˆæ˜¾ç„¶ï¼Œç”±äºä½¿ç”¨iteratorå¯¹å®¹å™¨è¿›è¡Œè®¿é—®ä¸éœ€è¦è·å–é”ï¼Œåœ¨å¤šçº¿ç¨‹ä¸­å°±ä¼šé€ æˆå½“ä¸€ä¸ªçº¿ç¨‹åˆ é™¤äº†å…ƒç´ ï¼Œç”±äºmodCountæ˜¯AbstarctListçš„æˆå‘˜å˜é‡ï¼Œå› æ­¤å¯èƒ½ä¼šå¯¼è‡´åœ¨å…¶ä»–çº¿ç¨‹ä¸­modCountå’ŒexpectedModCountå€¼ä¸ç­‰ã€‚</p><p>å°±æ¯”å¦‚ä¸Šé¢çš„ä»£ç ä¸­ï¼Œå¾ˆæ˜¾ç„¶iteratoræ˜¯çº¿ç¨‹ç§æœ‰çš„ï¼Œ</p><p>åˆå§‹æ—¶ï¼Œçº¿ç¨‹1å’Œçº¿ç¨‹2ä¸­çš„modCountã€expectedModCountéƒ½ä¸º0ï¼Œ</p><p>å½“çº¿ç¨‹2é€šè¿‡iterator.remove()åˆ é™¤å…ƒç´ æ—¶ï¼Œä¼šä¿®æ”¹modCountå€¼ä¸º1ï¼Œå¹¶ä¸”ä¼šä¿®æ”¹çº¿ç¨‹2ä¸­çš„expectedModCountçš„å€¼ä¸º1ï¼Œ</p><p>è€Œæ­¤æ—¶çº¿ç¨‹1ä¸­çš„expectedModCountå€¼ä¸º0ï¼Œè™½ç„¶modCountä¸æ˜¯volatileå˜é‡ï¼Œä¸ä¿è¯çº¿ç¨‹1ä¸€å®šçœ‹å¾—åˆ°çº¿ç¨‹2ä¿®æ”¹åçš„modCountçš„å€¼ï¼Œä½†æ˜¯ä¹Ÿæœ‰å¯èƒ½çœ‹å¾—åˆ°çº¿ç¨‹2å¯¹modCountçš„ä¿®æ”¹ï¼Œè¿™æ ·å°±æœ‰å¯èƒ½å¯¼è‡´çº¿ç¨‹1ä¸­æ¯”è¾ƒexpectedModCountå’ŒmodCountä¸ç­‰ï¼Œè€ŒæŠ›å‡ºå¼‚å¸¸ã€‚</p><p>å› æ­¤ä¸€èˆ¬æœ‰2ç§è§£å†³åŠæ³•ï¼š</p><p>1ï¼‰åœ¨ä½¿ç”¨iteratorè¿­ä»£çš„æ—¶å€™ä½¿ç”¨synchronizedæˆ–è€…Lockè¿›è¡ŒåŒæ­¥ï¼›</p><p>2ï¼‰ä¸å•çº¿ç¨‹ä¸€æ ·ï¼Œå¯ä»¥ä½¿ç”¨å¹¶å‘å®¹å™¨<strong>CopyOnWriteArrayList</strong>ä»£æ›¿ArrayListå’ŒVectorï¼›ä½¿ç”¨<strong>ConcurrentHashMap</strong>æ›¿æ¢HashMapã€‚</p><h1 id="2-é›†åˆç±»çš„toString-æ–¹æ³•"><a href="#2-é›†åˆç±»çš„toString-æ–¹æ³•" class="headerlink" title="2 é›†åˆç±»çš„toString()æ–¹æ³•"></a>2 é›†åˆç±»çš„toString()æ–¹æ³•</h1><p>åŸæ–‡ï¼šå‚è€ƒèµ„æ–™3</p><p>Vectorçš„toString()æ–¹æ³•ä¸­éšå¼åœ°ä½¿ç”¨äº†è¿­ä»£å™¨ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">synchronized</span> String <span class="title">toString</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">super</span>.toString();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>AbstractCollection.toString()</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> String <span class="title">toString</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    Iterator&lt;E&gt; it = iterator();</span><br><span class="line">    <span class="keyword">if</span> (! it.hasNext())</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;[]&quot;</span>;</span><br><span class="line"></span><br><span class="line">    StringBuilder sb = <span class="keyword">new</span> StringBuilder();</span><br><span class="line">    sb.append(<span class="string">&#x27;[&#x27;</span>);</span><br><span class="line">    <span class="keyword">for</span> (;;) &#123;</span><br><span class="line">        E e = it.next();</span><br><span class="line">        sb.append(e == <span class="keyword">this</span> ? <span class="string">&quot;(this Collection)&quot;</span> : e);</span><br><span class="line">        <span class="keyword">if</span> (! it.hasNext())</span><br><span class="line">            <span class="keyword">return</span> sb.append(<span class="string">&#x27;]&#x27;</span>).toString();</span><br><span class="line">        sb.append(<span class="string">&#x27;,&#x27;</span>).append(<span class="string">&#x27; &#x27;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ä»ä¸Šé¢çš„ä»£ç ä¸­å¯ä»¥çœ‹å‡ºVectorè°ƒç”¨äº†AbstractCollection.toString()æ–¹æ³•ï¼Œè€ŒAbstractCollection.toString()æ–¹æ³•ä½¿ç”¨äº†è¿­ä»£å™¨éå†æ•´ä¸ªå®¹å™¨ã€‚</p><p>ä½¿ç”¨è°ƒç”¨Vector.toString()æ–¹æ³•æ—¶ä¸ä¼šå‡ºç°å¹¶å‘è®¿é—®å¼‚å¸¸ï¼Œå› ä¸ºVector.toString()æ–¹æ³•åŠ é”äº†ï¼Œå½“è°ƒç”¨toString()æ–¹æ³•æ—¶å…¶å®ƒçº¿ç¨‹ä¸èƒ½ä¿®æ”¹å®¹å™¨ï¼Œå› æ­¤ä¸ä¼šæŠ›å‡ºå¹¶å‘è®¿é—®å¼‚å¸¸ã€‚ä½†æ˜¯ArrayListã€LinkedListè¿™äº›éçº¿ç¨‹å®‰å…¨çš„å®¹å™¨ç±»å°±ä¸èƒ½ä¿è¯è°ƒç”¨toString()æ–¹æ³•çš„æ—¶å€™æ²¡æœ‰å…¶å®ƒçº¿ç¨‹ä¿®æ”¹å®¹å™¨äº†ï¼Œå› æ­¤è°ƒç”¨è¿™äº›ç±»çš„toString()æ–¹æ³•æœ‰å¯èƒ½å¯¼è‡´å¹¶å‘è®¿é—®å¼‚å¸¸ã€‚</p><h2 id="é¿å…å¼‚å¸¸çš„æ–¹æ³•"><a href="#é¿å…å¼‚å¸¸çš„æ–¹æ³•" class="headerlink" title="é¿å…å¼‚å¸¸çš„æ–¹æ³•"></a><strong>é¿å…å¼‚å¸¸çš„æ–¹æ³•</strong></h2><p><strong>åŠ é”</strong></p><p>é¿å…å¼‚å¸¸çš„æ–¹æ³•ä¹Ÿä¸éš¾ï¼Œæœ€ç®€å•çš„æ–¹å¼å°±æ˜¯å’ŒVector.toString()ä¸€æ ·ï¼Œæˆ‘ä»¬æ¯æ¬¡è°ƒç”¨è¿­ä»£å™¨çš„æ—¶å€™éƒ½å¯¹Vectorçš„å¯¹è±¡åŠ é”å³å¯ã€‚æ¯”å¦‚ä¸‹é¢çš„ä»£ç ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">synchronized</span>(vct) &#123;</span><br><span class="line">true<span class="keyword">for</span>(String str : vct) &#123;</span><br><span class="line">truetrueSystem.out.println(str);</span><br><span class="line">true&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>è¿™æ ·å°±å¯ä»¥é¿å…åœ¨éå†çš„æ—¶å€™å…¶å®ƒçº¿ç¨‹å¯¹å®¹å™¨ä¿®æ”¹ï¼Œä½†æ˜¯å¦‚æœå®¹å™¨ç‰¹åˆ«å¤§çš„æ—¶å€™ä¼šå¯¼è‡´éå†å®¹å™¨éœ€è¦ç­‰å¾ˆä¹…ï¼Œè€Œå…¶å®ƒçº¿ç¨‹å¿…é¡»ç­‰å¾…ï¼Œè¿™æ ·å°±é™ä½äº†ç³»ç»Ÿçš„æ€§èƒ½ï¼Œå› æ­¤è¿™ç§è§£å†³æ–¹æ¡ˆå¹¶ä¸æ˜¯å®Œç¾çš„ã€‚</p><p><strong>åˆ†æ®µéå†</strong></p><p>å¦ä¸€ç§æ–¹å¼å°±æ˜¯åˆ†æ®µéå†å®¹å™¨ï¼Œæ¯”å¦‚å®¹å™¨ä¸­ä¸€å…±æœ‰åä¸‡ä¸ªå…ƒç´ ï¼Œæˆ‘ä»¬é€šè¿‡subList()æ–¹æ³•å…ˆè·å¾—å‰ä¸€åƒä¸ªå…ƒç´ ï¼Œéå†è¿™ä¸ªå­é›†ï¼Œç„¶åå†è·å¾—ä»ä¸€åƒåˆ°ä¸¤åƒçš„å…ƒç´ â€¦â€¦ä»¥æ­¤ç±»æ¨ã€‚ä½†æ˜¯è¿™ç§æ–¹æ¡ˆä¹Ÿæ˜¯æœ‰ç¼ºé™·çš„ï¼Œå› ä¸ºæ¯æ¬¡æ‹¿åˆ°çš„å­é›†éƒ½ç›¸å½“äºä¸€ä¸ªå¿«ç…§ï¼Œåœ¨éå†å­é›†çš„æ—¶å€™åˆ«çš„çº¿ç¨‹å¯èƒ½å·²ç»ä¿®æ”¹äº†è¿™ä¸ªå®¹å™¨ï¼Œå› æ­¤è¿™ç§æ–¹æ³•è¦æ±‚å®¢æˆ·ç«¯ä»£ç å¯¹æ•°æ®ä¸€è‡´çš„æ•æ„Ÿæ€§ä¸é«˜ï¼Œå¯¹æ•æ„Ÿæ€§é«˜å°±åªèƒ½ä½¿ç”¨åŠ é”çš„æ–¹æ³•ã€‚</p>]]></content>
    
    
    <summary type="html">&lt;p&gt;åœ¨éå†é›†åˆç±»çš„å…ƒç´ æ—¶ï¼Œè‹¥è¯•å›¾ä¿®æ”¹è¯¥é›†åˆåˆ™ä¼šæŠ¥ConcurrentModifyExceptionå¼‚å¸¸ï¼Œæœ¬æ–‡ä»‹ç»äº†è¯¥å¼‚å¸¸äº§ç”Ÿçš„å„ç§æƒ…å†µã€åŸå› å’Œè§£å†³æ–¹æ¡ˆã€‚&lt;img src=&quot;/2021/What-caused-ConcurrentModifyException/image-20210707144719236-1625640442274.png&quot; alt=&quot;image-20210707144719236&quot;&gt;&lt;/p&gt;</summary>
    
    
    
    <category term="SoftwareConstruction" scheme="https://www.fvolcano.red/categories/SoftwareConstruction/"/>
    
    
    <category term="å¹¶å‘" scheme="https://www.fvolcano.red/tags/%E5%B9%B6%E5%8F%91/"/>
    
  </entry>
  
  <entry>
    <title>å“ˆå·¥å¤§ä¿¡æ¯å®‰å…¨å¯¼è®ºå¤ä¹ é‡ç‚¹æ•´ç†</title>
    <link href="https://www.fvolcano.red/2021/HIT-Information-Security-Review/"/>
    <id>https://www.fvolcano.red/2021/HIT-Information-Security-Review/</id>
    <published>2021-07-03T23:55:56.000Z</published>
    <updated>2021-07-03T23:55:56.000Z</updated>
    
    <content type="html"><![CDATA[<p>2021å¹´ä¿¡æ¯å®‰å…¨å¯¼è®ºæœŸæœ«å¤ä¹ ä½¿ç”¨ï¼Œæ ¹æ®è€å¸ˆç»™çš„é‡ç‚¹æ•´ç†ã€‚<a id="more"></a></p><p>2021æœŸæœ«ï¼š</p><p>å•é€‰ï¼š10åˆ†ï¼ˆæ¯é¢˜2åˆ†ï¼Œå…±5é¢˜ï¼‰</p><p>å¡«ç©ºï¼š10åˆ†ï¼ˆæ¯é¢˜2åˆ†ï¼Œå…±5é¢˜ï¼‰</p><p>ç®€ç­”é¢˜ï¼š30åˆ†ï¼ˆ6é¢˜ï¼Œæ¯é¢˜5åˆ†ï¼‰</p><p>è®¡ç®—é¢˜ï¼š15åˆ†ï¼ˆ1é¢˜ï¼‰</p><p>è®¾è®¡é¢˜ï¼š15åˆ†ï¼ˆ1é¢˜ï¼‰</p><p>è¾¨æé¢˜ï¼š20åˆ†ï¼Œæ¯é¢˜10åˆ†</p><h1 id="1ã€-ä¿¡æ¯å®‰å…¨ä½“ç³»æ¶æ„"><a href="#1ã€-ä¿¡æ¯å®‰å…¨ä½“ç³»æ¶æ„" class="headerlink" title="1ã€ ä¿¡æ¯å®‰å…¨ä½“ç³»æ¶æ„"></a>1ã€ ä¿¡æ¯å®‰å…¨ä½“ç³»æ¶æ„</h1><h3 id="é¢å‘ç›®æ ‡çš„çŸ¥è¯†ä½“ç³»ç»“æ„"><a href="#é¢å‘ç›®æ ‡çš„çŸ¥è¯†ä½“ç³»ç»“æ„" class="headerlink" title="é¢å‘ç›®æ ‡çš„çŸ¥è¯†ä½“ç³»ç»“æ„"></a>é¢å‘ç›®æ ‡çš„çŸ¥è¯†ä½“ç³»ç»“æ„</h3><p>CIAä¸‰å…ƒç»„ï¼šæœºå¯†æ€§ã€å®Œæ•´æ€§ã€å¯ç”¨æ€§ï¼ˆæ­£å¸¸ä½¿ç”¨ä¸ä¼šè¢«æ‹’ç»ã€å¯é åŠæ—¶ï¼‰</p><p>DADä¸‰å…ƒç»„ï¼šæ³„éœ²ã€ç¯¡æ”¹ã€ç ´å</p><h3 id="é¢å‘åº”ç”¨çš„å±‚æ¬¡å‹æŠ€æœ¯ä½“ç³»æ¶æ„"><a href="#é¢å‘åº”ç”¨çš„å±‚æ¬¡å‹æŠ€æœ¯ä½“ç³»æ¶æ„" class="headerlink" title="é¢å‘åº”ç”¨çš„å±‚æ¬¡å‹æŠ€æœ¯ä½“ç³»æ¶æ„"></a>é¢å‘åº”ç”¨çš„å±‚æ¬¡å‹æŠ€æœ¯ä½“ç³»æ¶æ„</h3><p>ä¿¡æ¯ç³»ç»Ÿçš„åŸºæœ¬è¦ç´ ï¼šäººå‘˜ï¼ˆç®¡ç†å®‰å…¨ï¼‰ã€ä¿¡æ¯ï¼ˆå†…å®¹å®‰å…¨ã€æ•°æ®å®‰å…¨ï¼‰ã€ç³»ç»Ÿï¼ˆè¿è¡Œå®‰å…¨ã€ç‰©ç†å®‰å…¨ï¼‰</p><h3 id="é¢å‘è¿‡ç¨‹çš„ä¿¡æ¯å®‰å…¨ä¿éšœä½“ç³»"><a href="#é¢å‘è¿‡ç¨‹çš„ä¿¡æ¯å®‰å…¨ä¿éšœä½“ç³»" class="headerlink" title="é¢å‘è¿‡ç¨‹çš„ä¿¡æ¯å®‰å…¨ä¿éšœä½“ç³»"></a>é¢å‘è¿‡ç¨‹çš„ä¿¡æ¯å®‰å…¨ä¿éšœä½“ç³»</h3><p>PDRRï¼šä¿æŠ¤ã€æ£€æµ‹ã€ååº”ã€æ¢å¤</p><h3 id="OSIå¼€æ”¾ç³»ç»Ÿäº’è¿å®‰å…¨ä½“ç³»ç»“æ„"><a href="#OSIå¼€æ”¾ç³»ç»Ÿäº’è¿å®‰å…¨ä½“ç³»ç»“æ„" class="headerlink" title="OSIå¼€æ”¾ç³»ç»Ÿäº’è¿å®‰å…¨ä½“ç³»ç»“æ„"></a>OSIå¼€æ”¾ç³»ç»Ÿäº’è¿å®‰å…¨ä½“ç³»ç»“æ„</h3><p>å®‰å…¨æœåŠ¡</p><ul><li>é‰´åˆ«æœåŠ¡</li><li>è®¿é—®æ§åˆ¶</li><li>æ•°æ®æœºå¯†æ€§</li><li>æ•°æ®å®Œæ•´æ€§</li><li>æŠ—æŠµèµ–æ€§</li></ul><p>å®‰å…¨æœºåˆ¶</p><ul><li>åŠ å¯†</li><li>æ•°å­—ç­¾åï¼ˆå®Œæ•´æ€§å’Œä¸å¯å¦è®¤æ€§ï¼‰</li><li>è®¿é—®æ§åˆ¶</li><li>æ•°æ®å®Œæ•´æ€§</li><li>é‰´åˆ«äº¤æ¢ï¼ˆèº«ä»½è®¤è¯ï¼‰</li><li>ä¸šåŠ¡æµå¡«å……</li><li>è·¯ç”±æ§åˆ¶</li><li>å…¬è¯æ§åˆ¶ï¼ˆç¬¬ä¸‰æ–¹ï¼‰</li></ul><h1 id="2ã€-å¯†ç ä½“åˆ¶çš„äº”è¦ç´ "><a href="#2ã€-å¯†ç ä½“åˆ¶çš„äº”è¦ç´ " class="headerlink" title="2ã€ å¯†ç ä½“åˆ¶çš„äº”è¦ç´ "></a>2ã€ å¯†ç ä½“åˆ¶çš„äº”è¦ç´ </h1><p>Mæ˜æ–‡ç©ºé—´ æœ‰é™é›†</p><p>Cå¯†æ–‡ç©ºé—´ æœ‰é™é›†</p><p>Kå¯†é’¥ç©ºé—´ ä¸€åˆ‡å¯èƒ½</p><p>EåŠ å¯†ç®—æ³• ä»»æ„å¯†é’¥æœ‰æ•ˆè®¡ç®—</p><p>Dè§£å¯†ç®—æ³• ä»»æ„</p><h1 id="3ã€-ä»¿å°„å¯†ç "><a href="#3ã€-ä»¿å°„å¯†ç " class="headerlink" title="3ã€ ä»¿å°„å¯†ç "></a>3ã€ ä»¿å°„å¯†ç </h1><p>ç§»ä½å¯†ç +ä¹˜æ•°å¯†ç </p><p>Ek(m) = (k1m+k2)mod q</p><p>Dk(c) = k1^-1(c-k2)mod q</p><p>k1ä¸q=26äº’ç´ ï¼Œk1ã€k2&lt;26</p><p>ä¹˜æ³•é€†å…ƒï¼šk^-1*k mod q = 1</p><h1 id="4ã€-æ•°æ®åŠ å¯†æ ‡å‡†DESçš„ç®—æ³•ç»“æ„å’Œç‰¹ç‚¹"><a href="#4ã€-æ•°æ®åŠ å¯†æ ‡å‡†DESçš„ç®—æ³•ç»“æ„å’Œç‰¹ç‚¹" class="headerlink" title="4ã€ æ•°æ®åŠ å¯†æ ‡å‡†DESçš„ç®—æ³•ç»“æ„å’Œç‰¹ç‚¹"></a>4ã€ æ•°æ®åŠ å¯†æ ‡å‡†DESçš„ç®—æ³•ç»“æ„å’Œç‰¹ç‚¹</h1><p>è¿ç®—ï¼šç½®æ¢IP IP-1ã€å‡½æ•°Fkï¼ˆå¼‚æˆ–ã€E/Pæ‰©å¼ ç½®æ¢ã€Sç›’ã€ç½®æ¢P4ï¼‰ã€å¯†é’¥ç§»ä½ã€SWäº¤æ¢å‡½æ•°ï¼ˆå·¦å››å³å››ï¼‰ã€</p><p>ç‰¹ç‚¹ï¼šåˆ†ç»„åŠ å¯†ï¼ˆå¯†é’¥å¾ªç¯å·¦ç§»æ¥ä½¿ç”¨ï¼‰ã€å¯†é’¥64ï¼ˆ56+8ï¼‰ã€åŠ å¯†è§£å¯†å¯†é’¥ä½¿ç”¨é¡ºåºç›¸åã€å¯†ç ä½“åˆ¶å…¬å¼€ï¼ˆå®‰å…¨æ€§å®Œå…¨ä¾èµ–äºå¯†é’¥çš„ä¿å¯†æ€§ï¼‰ã€æ¯è½®éœ€è¦48ä½çš„å¯†é’¥ï¼ˆ56ä½è®¡ç®—è€Œæ¥ï¼‰ã€è¢«ç ´è§£ï¼ˆå¯†é’¥åªæœ‰56ä½ï¼‰ã€16è½®ç›¸åŒè¿ç®—ï¼ˆfkï¼‰</p><p>åˆ†ç»„çŸ­ã€å¯†é’¥çŸ­ã€å¯†ç ç”Ÿå‘½å‘¨æœŸçŸ­ã€è¿è¡Œé€Ÿåº¦æ…¢</p><h1 id="5ã€-å…¬é’¥å¯†ç çš„æ€æƒ³ï¼ˆæ•°å­¦æè¿°ï¼‰"><a href="#5ã€-å…¬é’¥å¯†ç çš„æ€æƒ³ï¼ˆæ•°å­¦æè¿°ï¼‰" class="headerlink" title="5ã€ å…¬é’¥å¯†ç çš„æ€æƒ³ï¼ˆæ•°å­¦æè¿°ï¼‰"></a>5ã€ å…¬é’¥å¯†ç çš„æ€æƒ³ï¼ˆæ•°å­¦æè¿°ï¼‰</h1><p>åˆ©ç”¨å•å‘é™·é—¨å‡½æ•°ï¼šç»™xè®¡ç®—y=fxå®¹æ˜“ï¼›ç»™yè®¡ç®—xå›°éš¾ï¼›å­˜åœ¨zï¼Œç»™å®šzæ—¶å¯¹äºä»»ä½•yè®¡ç®—xå®¹æ˜“ã€‚</p><p>æ»¡è¶³12ä¸ºå•å‘å‡½æ•°ï¼Œ3ä¸ºé™·é—¨æ€§ï¼Œzé™·é—¨ä¿¡æ¯</p><h1 id="6ã€-ç¦»æ•£å¯¹æ•°é—®é¢˜"><a href="#6ã€-ç¦»æ•£å¯¹æ•°é—®é¢˜" class="headerlink" title="6ã€ ç¦»æ•£å¯¹æ•°é—®é¢˜"></a>6ã€ ç¦»æ•£å¯¹æ•°é—®é¢˜</h1><p>åŸæ ¹ï¼šå¯ä»¥ä»açš„1åˆ°p-1æ¬¡æ–¹ mod på¾—åˆ°1åˆ°p-1çš„ä¸€ä¸ªæ’åˆ—ï¼›b = a^i mod p (1&lt;=i&lt;=p-1)    iä¸ºbçš„ä»¥aä¸ºåŸºæ•°æ¨¡pçš„ç¦»æ•£å¯¹æ•°</p><p>å·²çŸ¥å…¶ä»–è®¡ç®—bå®¹æ˜“ï¼›å·²çŸ¥å…¶ä»–è®¡ç®—iå›°éš¾</p><h1 id="7ã€-Diffie-Hellmanå¯†é’¥äº¤æ¢åè®®"><a href="#7ã€-Diffie-Hellmanå¯†é’¥äº¤æ¢åè®®" class="headerlink" title="7ã€ Diffie-Hellmanå¯†é’¥äº¤æ¢åè®®"></a>7ã€ Diffie-Hellmanå¯†é’¥äº¤æ¢åè®®</h1><p>DHç®—æ³•ï¼šåˆ©ç”¨ç¦»æ•£å¯¹æ•°ï¼Œå„å–å¤§æ•°i1ã€i2ï¼Œåˆ†åˆ«è®¡ç®—bä¼ ç»™å¯¹æ–¹ï¼Œæ‹¿åˆ°å¯¹æ–¹çš„bå†è¿›è¡Œä¸€æ¬¡ï¼Œç»“æœä¸ºå¯†é’¥ã€‚</p><h1 id="8ã€-RSAå…¬é’¥ç®—æ³•"><a href="#8ã€-RSAå…¬é’¥ç®—æ³•" class="headerlink" title="8ã€ RSAå…¬é’¥ç®—æ³•"></a>8ã€ RSAå…¬é’¥ç®—æ³•</h1><p>æ¬§æ‹‰å‡½æ•°ï¼šç”±å°äºnä¸”å’Œnäº’ç´ çš„æ­£æ•´æ•°æ„æˆçš„å…ƒç´ ä¸ªæ•°ã€‚n = pq   f(n) = (p-1)(q-1)</p><p>æ¬§æ‹‰å®šç†ï¼šaä¸näº’ç´ ï¼Œåˆ™a^f(n) = 1 mod n</p><p>å¤§æ•´æ•°å› å­åˆ†è§£ï¼šå°†nåˆ†è§£ä¸ºä¸¤ä¸ªå¤§ç´ æ•°pã€qæ˜¯å›°éš¾çš„</p><p>RSAï¼šåˆ†ç»„å¯†ç ï¼Œæ˜æ–‡å’Œå¯†æ–‡éƒ½æ˜¯0åˆ°nä¹‹é—´çš„æ•´æ•°</p><p>å¯†é’¥ç”Ÿæˆï¼šé€‰æ‹©ç´ æ•°pã€qï¼Œn = pqâ€”é€‰æ‹©æ•´æ•°eä½¿eä¸f(n)äº’ç´ ä¸”å°äºf(n)â€”è®¡ç®—d = æ¨¡f(n)ä¸‹eçš„ä¹˜æ³•é€†å…ƒã€‚å…¬é’¥ï¼šeã€nï¼›ç§é’¥ï¼šdã€nã€pã€q</p><p>åŠ å¯†ï¼šc = m^e mod n</p><p>è§£å¯†ï¼šm = c^d mod n</p><p>ä¹¦æœ¬P36ä¾‹å­</p><h1 id="9ã€-æ•£åˆ—å‡½æ•°çš„ç‰¹ç‚¹å’Œä½œç”¨"><a href="#9ã€-æ•£åˆ—å‡½æ•°çš„ç‰¹ç‚¹å’Œä½œç”¨" class="headerlink" title="9ã€ æ•£åˆ—å‡½æ•°çš„ç‰¹ç‚¹å’Œä½œç”¨"></a>9ã€ æ•£åˆ—å‡½æ•°çš„ç‰¹ç‚¹å’Œä½œç”¨</h1><p>å°†ä»»æ„é•¿ä¿¡æ¯æ˜ å°„æˆå›ºå®šé•¿æ•£åˆ—å€¼ï¼ˆæ¶ˆæ¯æ‘˜è¦ï¼‰</p><p>ç‰¹ç‚¹ï¼šå¼±ï¼ˆç»™å®šxéš¾ä»¥æ‰¾åˆ°xâ€™ hå€¼ç›¸åŒï¼‰ã€å¼ºï¼ˆè‡ªå®šxï¼Œæ— è®ºæ˜¯å¦åœ¨Xä¸­ï¼ŒåŒ…æ‹¬å¼±ï¼‰æ— ç¢°æ’ç‰¹æ€§ã€å•å‘æ€§ï¼ˆé€†å‡½æ•°æ±‚xä¸å¯è¡Œï¼‰</p><p>å®‰å…¨é•¿åº¦ï¼š128</p><p>ä½œç”¨ï¼šä½œä¸ºè®¤è¯ç¬¦ï¼Œå®Œæˆæ¶ˆæ¯è®¤è¯</p><h1 id="10ã€EMIã€EMCã€é˜²ç”µç£æ³„æ¼ä¸»è¦æ–¹æ³•"><a href="#10ã€EMIã€EMCã€é˜²ç”µç£æ³„æ¼ä¸»è¦æ–¹æ³•" class="headerlink" title="10ã€EMIã€EMCã€é˜²ç”µç£æ³„æ¼ä¸»è¦æ–¹æ³•"></a>10ã€EMIã€EMCã€é˜²ç”µç£æ³„æ¼ä¸»è¦æ–¹æ³•</h1><p>EMIï¼šç”µç£å¹²æ‰°ï¼Œæ— å…³çš„ã€ä¸å¸Œæœ›æœ‰çš„ã€ä¸è‰¯å½±å“çš„ç”µç£å‘å°„</p><p>EMCï¼šç”µç£å…¼å®¹æ€§ï¼Œç”µå­è®¾å¤‡æ­£å¸¸å·¥ä½œçš„ç”µç£ç¯å¢ƒä¸ä¸å…¶ä»–ç”µå­è®¾å¤‡ç›¸äº’ä¸å½±å“</p><ul><li>å±è”½æ³•ï¼ˆç©ºåŸŸé˜²æŠ¤ï¼‰</li><li>é¢‘åŸŸæ³•ï¼ˆå¹²æ‰°é¢‘ç‡å‰”é™¤ï¼‰</li><li>æ—¶åŸŸæ³•ï¼ˆæ—¶é—´å›é¿ï¼‰</li></ul><h1 id="11ã€å®¹é”™ä¸å®¹ç¾çš„æ¦‚å¿µåŠä¸»è¦æŠ€æœ¯æ–¹æ³•"><a href="#11ã€å®¹é”™ä¸å®¹ç¾çš„æ¦‚å¿µåŠä¸»è¦æŠ€æœ¯æ–¹æ³•" class="headerlink" title="11ã€å®¹é”™ä¸å®¹ç¾çš„æ¦‚å¿µåŠä¸»è¦æŠ€æœ¯æ–¹æ³•"></a>11ã€å®¹é”™ä¸å®¹ç¾çš„æ¦‚å¿µåŠä¸»è¦æŠ€æœ¯æ–¹æ³•</h1><p>å®¹é”™ï¼šå³ä½¿å‡ºç°é”™è¯¯ï¼Œç³»ç»Ÿä¹Ÿèƒ½æ‰§è¡Œä¸€ç»„è§„å®šçš„ç¨‹åºï¼Œä¸ä¼šä¸­æ–­æˆ–è¢«ä¿®æ”¹ã€‚</p><p>ç©ºé—²è®¾å¤‡ï¼ˆå¤‡ä»½ï¼‰ã€é•œåƒï¼ˆä¸€ä»½å·¥ä½œäº¤ç»™ä¸¤ä¸ªç›¸åŒéƒ¨ä»¶ï¼‰ã€å¤ç°ï¼ˆå»¶è¿Ÿé•œåƒï¼ŒåŸç³»ç»Ÿå’Œè¾…åŠ©ç³»ç»Ÿï¼‰ã€è´Ÿè½½å‡è¡¡ï¼ˆå­ä»»åŠ¡ï¼‰</p><p>å®¹ç¾ï¼šå¯¹å¶ç„¶äº‹æ•…çš„é¢„é˜²å’Œæ¢å¤ã€‚</p><p>å¯¹æœåŠ¡çš„ç»´æŠ¤å’Œæ¢å¤ï¼›ä¿æŠ¤å’Œæ¢å¤ä¿¡æ¯ã€‚</p><p>ç¾éš¾æ¢å¤ç­–ç•¥ï¼šåšæœ€åæ‰“ç®—ã€å……åˆ†åˆ©ç”¨ç°æœ‰èµ„æºã€æ³¨æ„ç¾å‰æªæ–½</p><h1 id="12ã€windowsçš„ç½‘ç»œè®¤è¯"><a href="#12ã€windowsçš„ç½‘ç»œè®¤è¯" class="headerlink" title="12ã€windowsçš„ç½‘ç»œè®¤è¯"></a>12ã€windowsçš„ç½‘ç»œè®¤è¯</h1><p>å¯¹ç§°å¯†é’¥åŠ å¯†ã€æœ‰æ•ˆæ³¨å†Œçš„åˆæ³•ç”¨æˆ·ã€ç”¨æˆ·ä¸ä¸»åŸŸæ§åˆ¶å™¨å…±äº«å£ä»¤ã€åœ¨åŸŸæ§åˆ¶å™¨çš„å®‰å…¨ç”¨æˆ·ç®¡ç†æ•°æ®åº“ä¸­ä¿å­˜ç”¨æˆ·åå’Œå£ä»¤çš„æ•£åˆ—ã€‚</p><p>ç™»å½•è¯·æ±‚-ç”¨æˆ·ç«¯è®¡ç®—å£ä»¤æ•£åˆ—-åŸŸæ§åˆ¶å™¨å‘é€8å­—èŠ‚è´¨è¯¢-ä¸¤æ–¹éƒ½ç”¨å£ä»¤æ•£åˆ—å¯¹è´¨è¯¢è¿›è¡Œæ•£åˆ—è®¡ç®—ï¼ˆåŠ å¯†ï¼‰å¾—åˆ°è´¨è¯¢æ•£åˆ—-åŸŸæ§åˆ¶å™¨å¯¹æ¯”</p><h1 id="13ã€åˆ©ç”¨å…¬å¼€å¯†é’¥å’Œå¯¹ç§°å¯†é’¥è®¾è®¡è®¤è¯åè®®è·å¾—ä¼šè¯å¯†é’¥"><a href="#13ã€åˆ©ç”¨å…¬å¼€å¯†é’¥å’Œå¯¹ç§°å¯†é’¥è®¾è®¡è®¤è¯åè®®è·å¾—ä¼šè¯å¯†é’¥" class="headerlink" title="13ã€åˆ©ç”¨å…¬å¼€å¯†é’¥å’Œå¯¹ç§°å¯†é’¥è®¾è®¡è®¤è¯åè®®è·å¾—ä¼šè¯å¯†é’¥"></a>13ã€åˆ©ç”¨å…¬å¼€å¯†é’¥å’Œå¯¹ç§°å¯†é’¥è®¾è®¡è®¤è¯åè®®è·å¾—ä¼šè¯å¯†é’¥</h1><p>å¯¹ç§°å¯†é’¥</p><p>æŒ‘æˆ˜-åº”ç­”ï¼šå‘é€æŒ‘æˆ˜â€”ç¤ºè¯æ–¹é€šè¿‡å…±äº«å¯†é’¥åŠ å¯†åå‘å›â€”éªŒè¯æ–¹é€šè¿‡å…±äº«å¯†é’¥è§£å¯†</p><p>Needham-Sï¼šåŠ å…¥ç¬¬ä¸‰æ–¹ï¼Œè®¤è¯æœåŠ¡å™¨ASï¼Œå¯†é’¥åˆ†é…ä¸­å¿ƒKDCï¼Œ<strong>å…·ä½“è¿‡ç¨‹</strong>ä¹¦æœ¬P58</p><p>Kerberosï¼šAS+ç¥¨æ®æˆäºˆæœåŠ¡å™¨TGSï¼Œ<strong>å…·ä½“è¿‡ç¨‹</strong>ä¹¦æœ¬P59</p><p>windowsï¼šçŸ¥è¯†ç‚¹12</p><p>å…¬å¼€å¯†é’¥</p><p>Needham-Sï¼šåŒå‘è®¤è¯åè®®ã€‚è¿‡ç¨‹ï¼šAç”¨Bçš„å…¬é’¥åŠ å¯†è‡ªå·±çš„IDå’ŒæŒ‘æˆ˜â€”Bç”¨ç§é’¥è§£å¼€ï¼Œç”¨Açš„å…¬é’¥åŠ å¯†å‘æ¥çš„æŒ‘æˆ˜å’Œè‡ªå·±çš„æŒ‘æˆ˜â€”Aç”¨ç§é’¥è§£å¼€ï¼Œç”¨Bçš„å…¬é’¥åŠ å¯†Bçš„æŒ‘æˆ˜å‘å›</p><p>åŸºäºCAæ•°å­—è¯ä¹¦ï¼šCAè®¤è¯ä¸­å¿ƒï¼Œæ•°å­—è¯ä¹¦ï¼šç»è¿‡CAç­¾åï¼ˆç§é’¥åŠ å¯†ï¼‰çš„åŒ…å«æ‹¥æœ‰è€…ä¿¡æ¯å’Œå…¬é’¥çš„æ–‡ä»¶ã€‚è¿‡ç¨‹ï¼šç”³è¯·é¢å‘â€”ä½¿ç”¨ç§é’¥åŠ å¯†ä¿¡æ¯å‘é€â€”æ¥å—æ–¹è·å¾—CAçš„å…¬é’¥ï¼Œç”¨å…¬é’¥å¯¹æ•°å­—è¯ä¹¦åšåˆæ³•æ€§éªŒè¯â€”è·å–å‘é€æ–¹çš„å…¬é’¥ï¼ŒéªŒè¯ä¿¡æ¯çš„ç­¾åã€‚</p><h1 id="14ã€Kerberoså·¥ä½œåŸç†"><a href="#14ã€Kerberoså·¥ä½œåŸç†" class="headerlink" title="14ã€Kerberoså·¥ä½œåŸç†"></a>14ã€Kerberoså·¥ä½œåŸç†</h1><p>ä¸‰ä¸ªé˜¶æ®µï¼šå®Œæˆèº«ä»½è®¤è¯ï¼Œè·å¾—è®¿é—®TGSçš„ç¥¨æ®â€”è·å¾—è®¿é—®åº”ç”¨æœåŠ¡å™¨çš„ç¥¨æ®â€”å®¢æˆ·ä¸æœåŠ¡å™¨èº«ä»½éªŒè¯äº¤æ¢ï¼Œè·å¾—æœåŠ¡ã€‚</p><p>ä¹¦æœ¬P59</p><h1 id="15ã€PKIçš„ä½“ç³»ç»“æ„åŠå·¥ä½œåŸç†"><a href="#15ã€PKIçš„ä½“ç³»ç»“æ„åŠå·¥ä½œåŸç†" class="headerlink" title="15ã€PKIçš„ä½“ç³»ç»“æ„åŠå·¥ä½œåŸç†"></a>15ã€PKIçš„ä½“ç³»ç»“æ„åŠå·¥ä½œåŸç†</h1><p>ä½“ç³»ç»“æ„ï¼šè®¤è¯æœºæ„CAã€è¯ä¹¦åº“ï¼ˆä¾›æŸ¥è¯¢ã€åˆ†å¸ƒå¼ï¼‰ã€å¯†é’¥å¤‡ä»½åŠæ¢å¤ã€è¯ä¹¦æ’¤é”€å¤„ç†ï¼ˆè¿›å…¥é»‘åå•ï¼‰ã€PKIåº”ç”¨æ¥å£ï¼ˆæŸ¥è¯¢ã€è·¯å¾„å¤„ç†ã€æ—¶é—´æˆ³è¯·æ±‚ï¼‰</p><p>é‡‡ç”¨æ•°å­—è¯ä¹¦æŠ€æœ¯æ¥ç®¡ç†å…¬é’¥ï¼Œé€šè¿‡ç¬¬ä¸‰æ–¹å¯ä¿¡ä»»æœºæ„â€”â€”CAè®¤è¯ä¸­å¿ƒå°†ç”¨æˆ·å…¬é’¥å’Œå…¶ä»–ä¿¡æ¯ç»‘å®šï¼Œç”¨äºéªŒè¯ç”¨æˆ·èº«ä»½ã€‚</p><h1 id="16ã€è®¿é—®æ§åˆ¶çš„æ¦‚å¿µ"><a href="#16ã€è®¿é—®æ§åˆ¶çš„æ¦‚å¿µ" class="headerlink" title="16ã€è®¿é—®æ§åˆ¶çš„æ¦‚å¿µ"></a>16ã€è®¿é—®æ§åˆ¶çš„æ¦‚å¿µ</h1><p>é’ˆå¯¹è¶Šæƒè®¿é—®èµ„æºçš„é˜²å¾¡æªæ–½ï¼Œä»è€Œä½¿ç³»ç»Ÿèµ„æºåœ¨åˆæ³•èŒƒå›´å†…ä½¿ç”¨ã€‚</p><p>åŸºæœ¬ç»„æˆå…ƒç´ ï¼šä¸»ä½“ã€å®¢ä½“ã€è®¿é—®æ§åˆ¶æªæ–½ï¼ˆä¸»ä½“å¯¹å®¢ä½“çš„è®¿é—®è§„åˆ™é›†åˆï¼‰</p><h1 id="17ã€DACã€MACã€RBACçš„å·¥ä½œåŸç†åŠç‰¹ç‚¹"><a href="#17ã€DACã€MACã€RBACçš„å·¥ä½œåŸç†åŠç‰¹ç‚¹" class="headerlink" title="17ã€DACã€MACã€RBACçš„å·¥ä½œåŸç†åŠç‰¹ç‚¹"></a>17ã€DACã€MACã€RBACçš„å·¥ä½œåŸç†åŠç‰¹ç‚¹</h1><p>è‡ªä¸»è®¿é—®æ§åˆ¶ï¼ˆä¸‰ç§å­˜å‚¨æ–¹å¼ï¼Œæˆæƒå…¶ä»–ç”¨æˆ·ï¼‰ã€å¼ºåˆ¶è®¿é—®æ§åˆ¶ï¼ˆåŸºäºå¤šçº§å®‰å…¨éœ€æ±‚ã€å®‰å…¨çº§åˆ«å±æ€§ï¼Œå››ç§å½¢å¼ï¼‰ã€åŸºäºè§’è‰²ï¼ˆéš”ç¦»ç”¨æˆ·å’Œæƒé™ï¼Œå³ä¸»ä½“å’Œå®¢ä½“æ“ä½œï¼Œé€šè¿‡é¥°æ¼”ä¸åŒè§’è‰²æ¥ï¼‰</p><p>åŸºæœ¬åŸåˆ™ï¼šæœ€å°ç‰¹æƒåŸåˆ™ã€æœ€å°æ³„éœ²åŸåˆ™ã€å¤šçº§å®‰å…¨ç­–ç•¥</p><h1 id="18ã€Windowså®‰å…¨ä½“ç³»ç»“æ„ã€æ´»åŠ¨ç›®å½•ä¸ç»„ç­–ç•¥"><a href="#18ã€Windowså®‰å…¨ä½“ç³»ç»“æ„ã€æ´»åŠ¨ç›®å½•ä¸ç»„ç­–ç•¥" class="headerlink" title="18ã€Windowså®‰å…¨ä½“ç³»ç»“æ„ã€æ´»åŠ¨ç›®å½•ä¸ç»„ç­–ç•¥"></a>18ã€Windowså®‰å…¨ä½“ç³»ç»“æ„ã€æ´»åŠ¨ç›®å½•ä¸ç»„ç­–ç•¥</h1><p>å±‚æ¬¡æ€§ï¼Œå¼€å§‹äº<strong>ç”¨æˆ·è®¤è¯</strong>ï¼ˆæœ€å¤–å±‚ï¼‰ï¼Œæ¥ç€<strong>åŠ å¯†å’Œè®¿é—®æ§åˆ¶</strong>ï¼Œç„¶åä¸º<strong>å®¡è®¡å’Œç®¡ç†</strong>ï¼ˆç³»ç»Ÿçš„å®‰å…¨é…ç½®å’Œäº‹æ•…å¤„ç†ï¼‰ï¼Œæ ¸å¿ƒä¸º<strong>å®‰å…¨ç­–ç•¥</strong>ã€‚</p><p>å®‰å…¨ä¸»ä½“ï¼šç”¨æˆ·ã€ç»„ã€è®¡ç®—æœºã€åŸŸ</p><p>å®‰å…¨å­ç³»ç»Ÿæ¥æä¾›å®‰å…¨æ€§ï¼šæœåŠ¡ èº«ä»½è®¤è¯ã€è®¿é—®æ§åˆ¶ã€äº‹ä»¶å®¡è®¡</p><p>å®‰å…¨å‚è€ƒç›‘è§†å™¨ï¼ˆSRMï¼‰ï¼šå†…æ ¸æ¨¡å¼ã€èº«ä»½è®¤è¯ã€æ£€æŸ¥æƒé™</p><p>æœ¬åœ°å®‰å…¨æœºæ„ï¼ˆLSAï¼‰ï¼šç”¨æˆ·æ¨¡å¼ã€ç™»å½•è®¤è¯</p><p>æ´»åŠ¨ç›®å½•ï¼šé¢å‘ç½‘ç»œå¯¹è±¡ï¼ˆç”¨æˆ·ã€ç»„ã€è®¡ç®—æœºã€åŸŸã€ç»„ç»‡å•å…ƒã€å®‰å…¨ç­–ç•¥ã€åº”ç”¨æœåŠ¡å™¨ï¼‰ç®¡ç†çš„ç»¼åˆç›®å½•æœåŠ¡ã€‚æ•°æ®å­˜å‚¨çš„è§†å›¾ã€ç½‘ç»œå¯¹è±¡çš„ç´¢å¼•é›†åˆ</p><p>ç»„ç­–ç•¥ï¼šä¾æ®ç‰¹å®šçš„ç”¨æˆ·æˆ–è®¡ç®—æœºçš„å®‰å…¨éœ€æ±‚å®šåˆ¶çš„å®‰å…¨é…ç½®è§„åˆ™ã€‚</p><p>é’ˆå¯¹æ¯ä¸ªOUæŒ‡å®šä¸åŒçš„GPï¼Œå­˜å‚¨åœ¨ADçš„ç›¸å…³æ•°æ®åº“å†…ï¼Œå¯ä»¥å¼ºåˆ¶æ¨é€å®æ–½ã€‚</p><h1 id="19ã€ä¼ ç»Ÿç—…æ¯’ã€è •è™«ã€æœ¨é©¬çš„ç»“æ„åŸç†"><a href="#19ã€ä¼ ç»Ÿç—…æ¯’ã€è •è™«ã€æœ¨é©¬çš„ç»“æ„åŸç†" class="headerlink" title="19ã€ä¼ ç»Ÿç—…æ¯’ã€è •è™«ã€æœ¨é©¬çš„ç»“æ„åŸç†"></a>19ã€ä¼ ç»Ÿç—…æ¯’ã€è •è™«ã€æœ¨é©¬çš„ç»“æ„åŸç†</h1><p>ä¼ ç»Ÿï¼šå¯åŠ¨æ¨¡å—ã€ä¼ æŸ“ã€ç ´å   æ‰§è¡Œæ„ŸæŸ“ç—…æ¯’çš„æ–‡ä»¶ã€ä¼ æŸ“å…¶ä»–æ–‡ä»¶</p><p>è •è™«ï¼šä¸éœ€è¦å¯„ç”Ÿï¼Œè®¡ç®—æœºä¸ºè½½ä½“ç½‘ç»œä¸ºæ”»å‡»å¯¹è±¡ã€å…±äº«æ–‡ä»¶å¤¹é‚®ä»¶æ¶æ„ç½‘é¡µæœ¬åœ°PEæ ¼å¼æ–‡ä»¶</p><p>æœ¨é©¬ï¼šæ§åˆ¶è®¡ç®—æœºä¸ºç›®çš„ï¼Œä¸‹è½½å®‰è£…ã€ä¿®æ”¹æ³¨å†Œè¡¨ã€é©»ç•™å†…å­˜ã€å®‰è£…åé—¨ç¨‹åºã€è®¾ç½®å¼€æœºåŠ è½½ï¼Œç›—å·ç½‘é¡µç‚¹å‡»ä¸‹è½½ä»£ç†ï¼Œæ§åˆ¶ç«¯ç¨‹åº+æœ¨é©¬ç¨‹åºï¼ˆæœåŠ¡å™¨ç«¯ï¼Œæ½œå…¥ï¼‰+æœ¨é©¬é…ç½®ç¨‹åº</p><h1 id="20ã€æ‹’ç»æœåŠ¡æ”»å‡»ã€ç¼“å†²åŒºæº¢å‡ºï¼šä¸¾ä¾‹"><a href="#20ã€æ‹’ç»æœåŠ¡æ”»å‡»ã€ç¼“å†²åŒºæº¢å‡ºï¼šä¸¾ä¾‹" class="headerlink" title="20ã€æ‹’ç»æœåŠ¡æ”»å‡»ã€ç¼“å†²åŒºæº¢å‡ºï¼šä¸¾ä¾‹"></a>20ã€æ‹’ç»æœåŠ¡æ”»å‡»ã€ç¼“å†²åŒºæº¢å‡ºï¼šä¸¾ä¾‹</h1><p>DoSï¼šç›®æ ‡ç³»ç»ŸæŸç§ç ´åè€Œä¸èƒ½æä¾›æœåŠ¡ã€‚Ping of Deathï¼šåŒ…é•¿åº¦è¶…è¿‡æœ€å¤§65536ï¼ŒTCPIPå †æ ˆå´©æºƒï¼›tear dropï¼šIPåŒ…åç§»é‡é‡å ï¼›Syn Floodï¼šTCPè¿æ¥ä¸å‘é€æœ€åçš„ACKåŒ…ï¼›Smurfæ”»å‡»ï¼šIPåœ°å€æ¬ºéª—å’ŒICMPåè®®ï¼Œæºåœ°å€ä¸ºå—å®³æœºå¹¿æ’­ICMP ECHOåŒ…ï¼Œæºè®¾ä¸ºå¹¿æ’­åœ°å€ç½‘ç»œå µå¡ï¼›ç”µå­é‚®ä»¶ç‚¸å¼¹</p><p>å¡«å……çš„æ•°æ®è¶…è¿‡ç¼“å­˜åŒºå®¹é‡ï¼Œè¦†ç›–å…¶ä»–æ•°æ®ã€‚C strcpy</p><h1 id="21ã€é˜²ç«å¢™ä¸»è¦æŠ€æœ¯æ¦‚è¿°"><a href="#21ã€é˜²ç«å¢™ä¸»è¦æŠ€æœ¯æ¦‚è¿°" class="headerlink" title="21ã€é˜²ç«å¢™ä¸»è¦æŠ€æœ¯æ¦‚è¿°"></a>21ã€é˜²ç«å¢™ä¸»è¦æŠ€æœ¯æ¦‚è¿°</h1><p>åŒ…è¿‡æ»¤é˜²ç«å¢™ï¼šé¢å‘<strong>ç½‘ç»œåº•å±‚æ•°æ®æµ</strong>è¿›è¡Œå®¡è®¡å’Œæ§ç®¡   <strong>ç½‘ç»œå±‚å’Œä¼ è¾“å±‚</strong></p><p>ä»£ç†é˜²ç«å¢™ï¼šåŸºäº<strong>ä»£ç†æŠ€æœ¯</strong>ï¼Œä½¿é˜²ç«å¢™å‚ä¸åˆ°æ¯ä¸€ä¸ªå†…å¤–ç½‘ç»œä¹‹é—´çš„è¿æ¥è¿‡ç¨‹  è¿˜åŸå®¡æŸ¥åè½¬å‘   <strong>åº”ç”¨å±‚</strong></p><p>ä¸ªäººé˜²ç«å¢™ï¼šä¸€ç§èƒ½å¤Ÿä¿æŠ¤ä¸ªäººè®¡ç®—æœºç³»ç»Ÿå®‰å…¨çš„<strong>è½¯ä»¶</strong></p><p>ACLï¼šä¸€ç³»åˆ—å…è®¸å’Œæ‹’ç»åŒ¹é…è§„åˆ™çš„é›†åˆï¼ˆè§„åˆ™çš„é¡ºåº mattersï¼‰</p><p>é™æ€åŒ…è¿‡æ»¤ï¼šæ ¹æ®å®šä¹‰å¥½çš„åŒ…è¿‡æ»¤è§„åˆ™å®¡æŸ¥æ¯ä¸ªæ•°æ®åŒ…   æ ¹æ®æ•°æ®åŒ…çš„åŒ…å¤´ä¿¡æ¯</p><p>åŠ¨æ€åŒ…è¿‡æ»¤ï¼šåŠ¨æ€é…ç½®åŒ…è¿‡æ»¤è§„åˆ™  æ ¹æ®éœ€æ±‚æ·»åŠ æˆ–åˆ é™¤ACL   åŸºäºä¼šè¯</p><p>åº”ç”¨ä»£ç†ç½‘å…³ï¼š<strong>éš”æ–­ç›´æ¥çš„TCPè¿æ¥</strong>   å¿…é¡»ç†è§£æ–°åè®®ã€å·¥ä½œé‡å¤§ï¼ˆ<strong>åº”ç”¨å±‚</strong>ï¼‰</p><p>ç”µè·¯çº§ç½‘å…³ï¼š<strong>ä¼ è¾“å±‚</strong>ä¸Šå®æ–½è®¿é—®æ§åˆ¶ç­–ç•¥ï¼ˆä¸éœ€è¦å®¡è®¡åº”ç”¨å±‚ï¼Œå·¥ä½œé‡å°ï¼‰ï¼Œå†…å¤–ç½‘ç»œå»ºç«‹è™šæ‹Ÿç”µè·¯</p><p>NATï¼šç½‘ç»œåœ°å€ç¿»è¯‘ï¼Œ<strong>å°†ç§æœ‰åœ°å€è½¬æ¢ä¸ºåˆæ³•IP</strong>    è§£å†³IPåœ°å€ä¸è¶³çš„é—®é¢˜   é™æ€åŠ¨æ€NAT</p><p>VPNï¼šè™šæ‹Ÿä¸“ç”¨ç½‘ï¼Œç©¿è¿‡å…¬ç”¨ç½‘ç»œçš„å®‰å…¨ç¨³å®šçš„éš§é“    éš§é“æŠ€æœ¯ï¼šä¸€ç§åè®®å®Œæˆå¦ä¸€ç§åè®®çš„æ•°æ®å°è£…ã€ä¼ è¾“ã€è§£å°</p><h1 id="22ã€Netfilterï¼iptablesçš„å·¥ä½œåŸç†"><a href="#22ã€Netfilterï¼iptablesçš„å·¥ä½œåŸç†" class="headerlink" title="22ã€Netfilterï¼iptablesçš„å·¥ä½œåŸç†"></a>22ã€Netfilterï¼iptablesçš„å·¥ä½œåŸç†</h1><p>ä¸¤å±‚ç»“æ„ï¼šå†…æ ¸å±‚çš„Netfilterç»„ä»¶ï¼š<strong>ä¿¡æ¯åŒ…è¿‡æ»¤è¡¨ç»„æˆ</strong>ã€‚ç”¨æˆ·å±‚çš„IPtablesç»„ä»¶ï¼š<strong>ç®¡ç†åŒ…è¿‡æ»¤è§„åˆ™çš„å·¥å…·</strong>ã€‚</p><p><strong>Netfilter = è¡¨-ã€‹é“¾-ã€‹è§„åˆ™ï¼ˆå­˜åœ¨ä¼˜å…ˆçº§é¡ºåºï¼‰</strong>ã€‚</p><p>ä¸‰ä¸ªåŠŸèƒ½è¡¨ï¼šæ•°æ®åŒ…è¿‡æ»¤è¡¨Filterï¼ˆinputã€forwardã€outputä¸‰æ¡é“¾ï¼‰ã€ç½‘ç»œåœ°å€è½¬æ¢è¡¨Natã€æ•°æ®åŒ…å¤„ç†è¡¨Mangleã€‚å…·ä½“å®ç°ï¼šåœ¨ç½‘ç»œå¤„ç†æµç¨‹çš„è‹¥å¹²ä½ç½®æ”¾ç½®ä¸€äº›é’©å­hook</p><p>åŒ…è¿‡æ»¤è¡¨ä¸­çš„è§„åˆ™æ˜¯é€šè¿‡IPtablesçš„å‘½ä»¤æ¥è¿›è¡Œç®¡ç†çš„ã€‚</p><p><strong>IPtableså‘½ä»¤ = å·¥ä½œè¡¨+ä½¿ç”¨é“¾+è§„åˆ™æ“ä½œ+ç›®æ ‡åŠ¨ä½œ+åŒ¹é…æ¡ä»¶ã€‚</strong></p><p>ä¹¦æœ¬P114</p><h1 id="23ã€åŸºäºç½‘ç»œå’ŒåŸºäºä¸»æœºçš„å…¥ä¾µæ£€æµ‹ç³»ç»Ÿçš„ä¼˜ç¼ºç‚¹"><a href="#23ã€åŸºäºç½‘ç»œå’ŒåŸºäºä¸»æœºçš„å…¥ä¾µæ£€æµ‹ç³»ç»Ÿçš„ä¼˜ç¼ºç‚¹" class="headerlink" title="23ã€åŸºäºç½‘ç»œå’ŒåŸºäºä¸»æœºçš„å…¥ä¾µæ£€æµ‹ç³»ç»Ÿçš„ä¼˜ç¼ºç‚¹"></a>23ã€åŸºäºç½‘ç»œå’ŒåŸºäºä¸»æœºçš„å…¥ä¾µæ£€æµ‹ç³»ç»Ÿçš„ä¼˜ç¼ºç‚¹</h1><p><strong>åŸºäºä¸»æœºï¼šHIDS</strong>ï¼Œåˆ†æç³»ç»Ÿçš„å®¡è®¡æ•°æ®ï¼Œæ•°æ®æ¥æºä¸ºæ—¥å¿—ã€‚</p><p>æ£€æµ‹å‡†ç¡®æ€§é«˜ï¼Œå¯åŠæ—¶é˜»æ­¢å…¥ä¾µï¼Œæ€§ä»·æ¯”é«˜ï¼Œå¯¹ç½‘ç»œæµé‡ä¸æ•æ„Ÿï¼Œé€‚åˆåŠ å¯†ç¯å¢ƒï¼›ä¸å¹³å°ç›¸å…³ï¼Œæ¯ä¸ªä¸»æœºéƒ½è¦å®‰è£…ï¼Œéš¾ä»¥æ£€æµ‹é’ˆå¯¹ç½‘ç»œçš„æ”»å‡»</p><p><strong>åŸºäºç½‘ç»œï¼šNIDS</strong>ï¼Œåœ¨ç½‘ç»œå…³é”®ä½ç½®éƒ¨ç½²æ„Ÿåº”å™¨ã€‚</p><p>å¯¹ç”¨æˆ·é€æ˜ï¼Œéšè”½æ€§å¥½ï¼Œä½¿ç”¨ç®€ä¾¿ï¼Œä¸æ˜“é­å—ç½‘ç»œæ”»å‡»ï¼Œä¸å¹³å°æ— å…³ï¼Œç‹¬ç«‹è®¡ç®—æœºï¼Œä¸ä¼šå¢åŠ è´Ÿè½½ï¼Œæ”»å‡»è€…ä¸æ˜“è½¬ç§»è¯æ®ï¼›æ— æ³•æ£€æµ‹æ¥è‡ªç½‘ç»œå†…éƒ¨çš„æ”»å‡»ï¼Œæ— æ³•åˆ†æåŠ å¯†æ•°æ®ï¼Œåˆ†ææ‰€æœ‰ç½‘ç»œæŠ¥æ–‡ï¼Œä¸»æœºè´Ÿè·å¤§ DoS</p><h1 id="24ã€snortsçš„å·¥ä½œåŸç†"><a href="#24ã€snortsçš„å·¥ä½œåŸç†" class="headerlink" title="24ã€snortsçš„å·¥ä½œåŸç†"></a>24ã€snortsçš„å·¥ä½œåŸç†</h1><p><strong>æ•°æ®åŒ…æ•è·æ¨¡å—</strong>ï¼ˆåŸå§‹çŠ¶æ€æ•è·ï¼‰+<strong>é¢„å¤„ç†æ¨¡å—</strong>ï¼ˆè§£ç æ£€æŸ¥ç›¸å…³å¤„ç†ï¼Œå¯¹åŸºäºç‰¹å¾çš„æ”»å‡»è¿›è¡Œæ£€æµ‹ï¼‰+<strong>æ£€æµ‹å¼•æ“</strong>ï¼ˆè§„åˆ™åˆ†æå’Œç‰¹å¾æ£€æµ‹ï¼Œåˆ†ææ¯ä¸ªåŒ…æ˜¯å¦å­˜åœ¨å…¥ä¾µï¼‰+<strong>è¾“å‡ºæ¨¡å—</strong>ï¼ˆæ ¹æ®æ£€æµ‹çš„ç»“æœè¾“å‡ºæ—¥å¿—æˆ–æŠ¥è­¦ï¼‰</p><p>snortså°†æ‰€æœ‰å·²çŸ¥çš„å…¥ä¾µè¡Œä¸ºä»¥è§„åˆ™çš„å½¢å¼å­˜æ”¾åœ¨è§„åˆ™åº“ä¸­ï¼šä¸‰ä½é“¾è¡¨ç»“æ„ç»„ç»‡  <strong>è§„åˆ™å¤´ï¼ˆ{å‰å†…å®¹ï¼‰+è§„åˆ™é€‰é¡¹</strong></p><p>ä¹¦æœ¬P124</p><h1 id="25ã€IPSECåè®®çš„ä½“ç³»ç»“æ„"><a href="#25ã€IPSECåè®®çš„ä½“ç³»ç»“æ„" class="headerlink" title="25ã€IPSECåè®®çš„ä½“ç³»ç»“æ„"></a>25ã€IPSECåè®®çš„ä½“ç³»ç»“æ„</h1><p><strong>ä¸¤ä¸ªåŸºæœ¬åè®®</strong>ï¼šESPï¼ˆå°è£…å®‰å…¨æœ‰æ•ˆè´Ÿè·ï¼šåŠ å¯†ï¼Œå¯é€‰è®¤è¯-åªæ˜¯æ•°æ®ï¼‰+AHï¼ˆè®¤è¯å¤´ï¼šè®¤è¯-æ•´ä¸ªIPæ•°æ®åŒ…ï¼ŒæŠ—é‡æ”¾ï¼‰</p><p><strong>å››ä¸ªè¦ä»¶</strong>ï¼šåŠ å¯†ç®—æ³•ï¼ˆå¿…é¡»æ”¯æŒDESï¼‰ï¼Œè®¤è¯ç®—æ³•ï¼Œè§£é‡ŠåŸŸDOIï¼ˆå®‰å…¨å‚æ•°å’Œç›¸å…³ä¿¡æ¯çš„é›†åˆï¼‰ï¼Œå¯†é’¥ç®¡ç†ï¼ˆIKEåè®®ï¼‰</p><p><strong>å®‰å…¨å…³è”</strong>ï¼šSAï¼Œæ˜¯å®‰å…¨å‚æ•°å’Œç­–ç•¥çš„é›†åˆï¼Œå®šä¹‰äº†ä¸¤ä¸ªåº”ç”¨å®ä½“é—´çš„ä¸€ä¸ª<strong>å•å‘</strong>è¿æ¥</p><h1 id="26ã€ä¼ è¾“æ–¹å¼å’Œéš§é“æ–¹å¼çš„åŒºåˆ«"><a href="#26ã€ä¼ è¾“æ–¹å¼å’Œéš§é“æ–¹å¼çš„åŒºåˆ«" class="headerlink" title="26ã€ä¼ è¾“æ–¹å¼å’Œéš§é“æ–¹å¼çš„åŒºåˆ«"></a>26ã€ä¼ è¾“æ–¹å¼å’Œéš§é“æ–¹å¼çš„åŒºåˆ«</h1><p>IPSecæ“ä½œçš„ä¸åŒæ¨¡å¼</p><p>ä¼ è¾“ï¼šåœ¨IPå¤´å’Œæ•°æ®ä¹‹é—´æ’å…¥IPSecå¤´</p><p>éš§é“ï¼šç”¨æ–°IPå¤´å’ŒIPSecå¤´å°†æ•´ä¸ªIPæ•°æ®åŒ…å†ä¸€æ¬¡å°è£…</p><h1 id="27ã€SSLæ¡æ‰‹åè®®"><a href="#27ã€SSLæ¡æ‰‹åè®®" class="headerlink" title="27ã€SSLæ¡æ‰‹åè®®"></a>27ã€SSLæ¡æ‰‹åè®®</h1><p>ç”¨äºå»ºç«‹ä¼šè¯ã€åå•†åŠ å¯†æ–¹æ³•ã€é‰´åˆ«æ–¹æ³•ã€å‹ç¼©æ–¹æ³•å’Œåˆå§‹åŒ–æ“ä½œã€‚</p><p>å››ä¸ªé˜¶æ®µï¼š<strong>å»ºç«‹å®‰å…¨èƒ½åŠ›</strong>ï¼ˆclient_helloæ¶ˆæ¯ï¼Œserver_helloï¼Œæ”¯æŒçš„å¯†ç ç®—æ³•ç­‰ï¼‰ã€<strong>æœåŠ¡å™¨è®¤è¯ä¸å¯†é’¥äº¤æ¢</strong>ï¼ˆæœåŠ¡å™¨å‘é€è‡ªå·±çš„è¯ä¹¦ï¼Œkey_exchangeæ¶ˆæ¯ï¼Œå¯ä»¥è¯·æ±‚å®¢æˆ·ç«¯è¯ä¹¦ï¼Œserver_hello_doneï¼‰ã€<strong>å®¢æˆ·ç«¯è®¤è¯ä¸å¯†é’¥äº¤æ¢</strong>ï¼ˆè‹¥è¯·æ±‚åˆ™å‘é€è¯ä¹¦ï¼Œkeyexchangeï¼Œcertificateverifyï¼‰ã€<strong>ç»“æŸ</strong>ï¼ˆchange_cipher_specé€šçŸ¥ä½¿ç”¨åå•†å¥½çš„å¯†ç è§„èŒƒï¼Œfinishedæ£€æŸ¥å¯†é’¥äº¤æ¢å’Œé‰´åˆ«æ˜¯å¦æˆåŠŸï¼Œä¸¤æ–¹éƒ½å‘é€è¿™ä¸¤ä¸ªæ¶ˆæ¯ï¼‰</p><p>ä¹¦æœ¬P148</p><h1 id="28ã€åŒé‡ç­¾åDSæŠ€æœ¯åŸç†"><a href="#28ã€åŒé‡ç­¾åDSæŠ€æœ¯åŸç†" class="headerlink" title="28ã€åŒé‡ç­¾åDSæŠ€æœ¯åŸç†"></a>28ã€åŒé‡ç­¾åDSæŠ€æœ¯åŸç†</h1><p>SETè¿‡ç¨‹ä¸­çš„å®‰å…¨é€šä¿¡ï¼Œè®¢è´­ä¿¡æ¯å’Œæ”¯ä»˜ä¿¡æ¯ã€‚</p><p><strong>DS = EkRc [H(H(PI) || H(OI))]</strong></p><p>ä½¿ç”¨ï¼šå°†<strong>DSã€OIå’ŒPIMD</strong>å‘é€ç»™å•†å®¶ï¼Œå•†å®¶å¯ç”¨é¡¾å®¢çš„å…¬é’¥éªŒè¯DSçš„çœŸå‡ï¼ˆè®¡ç®—ä¸¤ä¸ªPOMDï¼‰ï¼Œé¡¾å®¢ç”Ÿæˆå¯¹ç§°å¯†é’¥ï¼Œç”¨é“¶è¡Œå…¬é’¥åŠ å¯†ï¼Œç„¶åç”¨è¿™ä¸ªå¯†é’¥åŠ å¯†<strong>DSã€PIã€OIMD</strong>ï¼Œå°†äºŒè€…é€šè¿‡å•†å®¶è½¬å‘ç»™é“¶è¡Œï¼Œé“¶è¡ŒåŒæ ·å¯ä»¥éªŒè¯DSçœŸå‡ã€‚å¯ä»¥åšåˆ°éš”ç¦»ä¿¡æ¯ã€‚</p><p>ä¹¦æœ¬P156</p><h1 id="29ã€DRMç»“æ„åŸç†"><a href="#29ã€DRMç»“æ„åŸç†" class="headerlink" title="29ã€DRMç»“æ„åŸç†"></a>29ã€DRMç»“æ„åŸç†</h1><p>æ•°å­—ç‰ˆæƒä¿æŠ¤æŠ€æœ¯ï¼šä»¥ä¸€å®šå®‰å…¨ç®—æ³•å®ç°å¯¹æ•°å­—å†…å®¹çš„ä¿æŠ¤ã€‚ç›®çš„æ˜¯ä½¿éæ³•å¤åˆ¶å˜å¾—å›°éš¾ã€‚åŒ…æ‹¬æ•°å­—è¡¨ç¤ºæŠ€æœ¯ã€å®‰å…¨å’ŒåŠ å¯†æŠ€æœ¯ã€å®‰å…¨å­˜å‚¨æŠ€æœ¯ã€‚æŠ€æœ¯æ–¹æ³•ï¼šæ•°å­—æ°´å°æŠ€æœ¯ã€ä»¥æ•°æ®åŠ å¯†å’Œé˜²å¤åˆ¶ä¸ºæ ¸å¿ƒçš„DRMæŠ€æœ¯ã€‚</p><p>ç»“æ„åˆ†ä¸º<strong>æœåŠ¡å™¨</strong>ï¼ˆç®¡ç†ç‰ˆæƒæ–‡ä»¶çš„åˆ†å‘å’Œæˆæƒï¼Œç”Ÿæˆè¢«åŠ å¯†çš„å—ä¿æŠ¤æ–‡ä»¶å¹¶åˆ†å‘ç»™ç”¨æˆ·ï¼‰å’Œ<strong>å®¢æˆ·ç«¯</strong>ï¼ˆä¾æ®å—ç‰ˆæƒä¿æŠ¤æ–‡ä»¶æä¾›çš„ä¿¡æ¯ç”³è¯·æˆæƒè®¸å¯è¯ï¼Œè§£å¯†å—ä¿æŠ¤æ–‡ä»¶å¹¶æä¾›ç»™ç”¨æˆ·ä½¿ç”¨ï¼‰</p><h1 id="30ã€æ•°å­—æ°´å°çš„å·¥ä½œåŸç†"><a href="#30ã€æ•°å­—æ°´å°çš„å·¥ä½œåŸç†" class="headerlink" title="30ã€æ•°å­—æ°´å°çš„å·¥ä½œåŸç†"></a>30ã€æ•°å­—æ°´å°çš„å·¥ä½œåŸç†</h1><p>æ˜¯é€šè¿‡ä¸€äº›ç®—æ³•åµŒå…¥åˆ°æ•°å­—äº§å“ä¸­çš„æ•°å­—ä¿¡æ¯ã€‚åˆ†ä¸ºå¯è§å’Œä¸å¯è§ã€‚</p><p>ä¸‰ä¸ªåŸºæœ¬æ–¹é¢ï¼š<strong>æ°´å°çš„å½¢æˆ</strong>ï¼Œ<strong>æ°´å°çš„åµŒå…¥</strong>ï¼ˆä¸åŠ å¯†ç±»ä¼¼ï¼Œåˆ†ä¸ºè¾“å…¥ã€åµŒå…¥å¤„ç†å’Œè¾“å‡ºï¼›è¾“å…¥åŸå§‹å®¿ä¸»æ–‡ä»¶ã€æ°´å°ä¿¡æ¯å’Œå¯†ç ï¼ŒåµŒå…¥å¤„ç†ä¸»è¦åˆ†æé€‰æ‹©åµŒå…¥ç‚¹å¹¶åµŒå…¥ï¼‰å’Œ<strong>æ°´å°çš„æ£€æµ‹</strong>ï¼ˆæ£€æµ‹æ°´å°æ˜¯å¦å­˜åœ¨å’Œæå–æ°´å°ä¿¡æ¯ï¼Œåˆ†ä¸ºç›²æ°´å°æ£€æµ‹å’Œéç›²æ°´å°æ£€æµ‹-éœ€ä¸éœ€è¦åŸå§‹æ–‡ä»¶å’Œæ°´å°ä¿¡æ¯ï¼‰</p><h1 id="31ã€-ccä¸bs7799çš„åŒºåˆ«"><a href="#31ã€-ccä¸bs7799çš„åŒºåˆ«" class="headerlink" title="31ã€ ccä¸bs7799çš„åŒºåˆ«"></a>31ã€ ccä¸bs7799çš„åŒºåˆ«</h1><p>ä¿¡æ¯å®‰å…¨æ ‡å‡†   ä¹¦æœ¬P182</p><p>CCï¼š<strong>ä¿¡æ¯æŠ€æœ¯å®‰å…¨æ€§è¯„ä¼°é€šç”¨å‡†åˆ™</strong>ï¼ŒåŸºç¡€å‡†åˆ™ï¼Œè¯„ä¼°ä¿¡æ¯æŠ€æœ¯é“²å¹³å’Œç³»ç»Ÿå®‰å…¨æ€§ï¼Œæå€¡å®‰å…¨å·¥ç¨‹æ€æƒ³</p><p>BS7799ï¼š<strong>ä¿¡æ¯å®‰å…¨ç®¡ç†ä½“ç³»æ ‡å‡†</strong>ï¼Œå»ºç«‹ã€å®æ–½å’Œç»´æŠ¤ä¿¡æ¯å®‰å…¨ç®¡ç†ä½“ç³»çš„è¦æ±‚</p><h1 id="32ã€é£é™©è¯„ä¼°çš„ä¸»è¦æ–¹æ³•"><a href="#32ã€é£é™©è¯„ä¼°çš„ä¸»è¦æ–¹æ³•" class="headerlink" title="32ã€é£é™©è¯„ä¼°çš„ä¸»è¦æ–¹æ³•"></a>32ã€é£é™©è¯„ä¼°çš„ä¸»è¦æ–¹æ³•</h1><p>åŸºçº¿è¯„ä¼°ï¼ˆå®‰å…¨åŸºçº¿æ¯”è¾ƒï¼ŒåŸºçº¿è®¾å®šéš¾ï¼‰ã€è¯¦ç»†è¯„ä¼°ï¼ˆè€—è´¹èµ„æºï¼‰ã€ç»„åˆè¯„ä¼°ï¼ˆä¸€æ¬¡åˆæ­¥è¯„ä¼°åˆ’åˆ†ä¸åŒè¯„ä¼°èŒƒå›´-é€‰æ‹©åŸºçº¿orè¯¦ç»†ï¼‰</p><h1 id="33ã€-ç½‘ç»œå®‰å…¨æ³•ï¼ˆéæ•™æï¼‰"><a href="#33ã€-ç½‘ç»œå®‰å…¨æ³•ï¼ˆéæ•™æï¼‰" class="headerlink" title="33ã€ ç½‘ç»œå®‰å…¨æ³•ï¼ˆéæ•™æï¼‰"></a>33ã€ ç½‘ç»œå®‰å…¨æ³•ï¼ˆéæ•™æï¼‰</h1><p>ã€Šä¸­åäººæ°‘å…±å’Œå›½ç½‘ç»œå®‰å…¨æ³•ã€‹å…±æœ‰7ç« 79æ¡ï¼Œä¸å°‘å†…å®¹é’ˆå¯¹è¿‘å¹´çš„ç½‘ç»œå®‰å…¨éšæ‚£ï¼Œå¦‚ä¸ªäººä¿¡æ¯æ³„éœ²ç­‰ã€‚è¯¥æ³•æ˜ç¡®äº†ç½‘ç»œè¯ˆéª—ç­‰è¡Œä¸ºçš„å®šä¹‰å’Œåˆ‘ç½šï¼Œæ˜ç¡®äº†ç½‘ç»œè¿è¥å•†çš„è´£ä»»ï¼Œè¦æ±‚å…¶å¤„ç½®è¿æ³•ä¿¡æ¯ã€é…åˆä¾¦å¯Ÿæœºå…³å·¥ä½œç­‰ã€‚æ­¤æ³•æ—¨åœ¨é˜²æ­¢ç½‘ç»œææ€–è¢­å‡»ã€ç½‘ç»œè¯ˆéª—ç­‰è¡Œä¸ºï¼Œå¹¶èµ‹äºˆäº†æ”¿åºœåœ¨ç´§æ€¥æƒ…å†µä¸‹æ–­ç½‘ç­‰æƒåŠ›ã€‚</p><p>æ­¤å¤–ï¼Œè¯¥æ³•ä¹Ÿé¦–æ¬¡ä»¥æ³•å¾‹å½¢å¼æ˜ç¡®<a href="https://www.wikiwand.com/zh-hans/%E4%B8%AD%E5%9B%BD%E7%BD%91%E7%BB%9C%E5%AE%9E%E5%90%8D%E5%88%B6">ç½‘ç»œå®ååˆ¶</a>ï¼Œè§„å®šç½‘ç»œè¿è¥è€…ä¸ºç”¨æˆ·åŠç†ç½‘ç»œæ¥å…¥ã€åŸŸåæ³¨å†ŒæœåŠ¡ï¼ŒåŠç†å›ºå®šç”µè¯ã€ç§»åŠ¨ç”µè¯ç­‰å…¥ç½‘æ‰‹ç»­ï¼Œæˆ–è€…ä¸ºç”¨æˆ·æä¾›ä¿¡æ¯å‘å¸ƒã€å³æ—¶é€šè®¯ç­‰æœåŠ¡ï¼Œåº”å½“è¦æ±‚ç”¨æˆ·æä¾›çœŸå®èº«ä»½ä¿¡æ¯ã€‚ç”¨æˆ·ä¸æä¾›çœŸå®èº«ä»½ä¿¡æ¯çš„ï¼Œç½‘ç»œè¿è¥è€…ä¸å¾—ä¸ºå…¶æä¾›ç›¸å…³æœåŠ¡ã€‚åŒæ—¶ä¹Ÿå¯¹å…³é”®ä¿¡æ¯åŸºç¡€è®¾æ–½çš„è¿è¡Œå®‰å…¨ä»¥åŠæƒ©æ²»æ”»å‡»ç ´åä¸­å›½å¢ƒå†…å…³é”®ä¿¡æ¯åŸºç¡€è®¾æ–½çš„å¢ƒå¤–ç»„ç»‡å’Œä¸ªäººè¿›è¡Œæ˜ç¡®è§„å®šã€‚</p><h1 id="34ã€ç­‰çº§ä¿æŠ¤2-0ï¼ˆéæ•™æï¼‰"><a href="#34ã€ç­‰çº§ä¿æŠ¤2-0ï¼ˆéæ•™æï¼‰" class="headerlink" title="34ã€ç­‰çº§ä¿æŠ¤2.0ï¼ˆéæ•™æï¼‰"></a>34ã€ç­‰çº§ä¿æŠ¤2.0ï¼ˆéæ•™æï¼‰</h1><p>ç­‰ä¿2.0äºåœ¨<strong>2019å¹´12æœˆ1æ—¥</strong>å¼€å§‹å®æ–½ã€‚ç­‰ä¿2.0å…¨ç§°ç½‘ç»œå®‰å…¨ç­‰çº§ä¿æŠ¤2.0åˆ¶åº¦ï¼Œæ˜¯æˆ‘å›½ç½‘ç»œå®‰å…¨é¢†åŸŸçš„åŸºæœ¬å›½ç­–ã€åŸºæœ¬åˆ¶åº¦ã€‚ç­‰çº§ä¿æŠ¤æ ‡å‡†åœ¨1.0æ—¶ä»£æ ‡å‡†çš„åŸºç¡€ä¸Šï¼Œæ³¨é‡ä¸»åŠ¨é˜²å¾¡ï¼Œä»è¢«åŠ¨é˜²å¾¡åˆ°äº‹å‰ã€äº‹ä¸­ã€äº‹åå…¨æµç¨‹çš„å®‰å…¨å¯ä¿¡ã€åŠ¨æ€æ„ŸçŸ¥å’Œå…¨é¢å®¡è®¡ï¼Œå®ç°äº†å¯¹ä¼ ç»Ÿä¿¡æ¯ç³»ç»Ÿã€åŸºç¡€ä¿¡æ¯ç½‘ç»œã€äº‘è®¡ç®—ã€å¤§æ•°æ®ã€ç‰©è”ç½‘ã€ç§»åŠ¨äº’è”ç½‘å’Œå·¥ä¸šæ§åˆ¶ä¿¡æ¯ç³»ç»Ÿç­‰çº§ä¿æŠ¤å¯¹è±¡çš„å…¨è¦†ç›–ã€‚</p><p>è¿‘å¹´æ¥ï¼Œéšç€ä¿¡æ¯æŠ€æœ¯çš„å‘å±•å’Œç½‘ç»œå®‰å…¨å½¢åŠ¿çš„å˜åŒ–ï¼Œç­‰ä¿1.0è¦æ±‚å·²æ— æ³•æœ‰æ•ˆåº”å¯¹æ–°çš„å®‰å…¨é£é™©å’Œæ–°æŠ€æœ¯åº”ç”¨æ‰€å¸¦æ¥çš„æ–°å¨èƒï¼Œç­‰ä¿1.0è¢«åŠ¨é˜²å¾¡ä¸ºä¸»çš„é˜²å¾¡æ— æ³•æ»¡è¶³å½“å‰å‘å±•è¦æ±‚ï¼Œå› æ­¤æ€¥éœ€å»ºç«‹ä¸€å¥—ä¸»åŠ¨é˜²å¾¡ä½“ç³»ã€‚</p><p><a href="https://www.zhihu.com/question/51443853">https://www.zhihu.com/question/51443853</a></p><h1 id="35ã€ä¼¦ç†é“å¾·"><a href="#35ã€ä¼¦ç†é“å¾·" class="headerlink" title="35ã€ä¼¦ç†é“å¾·"></a>35ã€ä¼¦ç†é“å¾·</h1><p>æ•´ä½“åŸåˆ™ï¼ˆæœä»æ•´ä½“åˆ©ç›Šï¼‰ã€å…¼å®¹åŸåˆ™ï¼ˆè¢«ç¤¾ä¼šæ¥å—ï¼‰ã€äº’æƒ åŸåˆ™ï¼ˆæƒåˆ©ä¹‰åŠ¡ï¼‰</p><p>ä¼¤å®³ã€å¹²æ‰°ã€çª¥æ¢ã€ä¼ªè¯ã€ç›—ç”¨</p>]]></content>
    
    
    <summary type="html">&lt;p&gt;2021å¹´ä¿¡æ¯å®‰å…¨å¯¼è®ºæœŸæœ«å¤ä¹ ä½¿ç”¨ï¼Œæ ¹æ®è€å¸ˆç»™çš„é‡ç‚¹æ•´ç†ã€‚&lt;/p&gt;</summary>
    
    
    
    <category term="å®‰å…¨" scheme="https://www.fvolcano.red/categories/%E5%AE%89%E5%85%A8/"/>
    
    
    <category term="æ•´ç†" scheme="https://www.fvolcano.red/tags/%E6%95%B4%E7%90%86/"/>
    
  </entry>
  
  <entry>
    <title>gitçš„æ€æƒ³</title>
    <link href="https://www.fvolcano.red/2021/think-like-git/"/>
    <id>https://www.fvolcano.red/2021/think-like-git/</id>
    <published>2021-07-02T13:29:04.000Z</published>
    <updated>2021-07-02T13:29:04.000Z</updated>
    
    <content type="html"><![CDATA[<p>æœ¬æ–‡æ€»ç»“æˆ‘åœ¨å­¦ä¹ gitæ—¶é˜…è¯»çš„ææ–™å’Œæ€è€ƒä»¥åŠä½¿ç”¨çš„èµ„æºã€‚<a id="more"></a></p><h2 id="gitå­¦ä¹ èµ„æ–™"><a href="#gitå­¦ä¹ èµ„æ–™" class="headerlink" title="gitå­¦ä¹ èµ„æ–™"></a>gitå­¦ä¹ èµ„æ–™</h2><ol start="0"><li><p>ç®€æ˜“æŒ‡å—ï¼š<a href="https://www.bootcss.com/p/git-guide/">git - ç®€æ˜“æŒ‡å—:åŠ©ä½ å¼€å§‹ä½¿ç”¨ git çš„ç®€æ˜“æŒ‡å—ï¼Œæœ¨æœ‰é«˜æ·±å†…å®¹</a></p></li><li><p>è¯¦ç»†å‘½ä»¤ï¼š<a href="https://cloud.tencent.com/developer/article/1355182">Gitä½¿ç”¨æ•™ç¨‹ï¼šæœ€è¯¦ç»†ã€æœ€å‚»ç“œã€æœ€æµ…æ˜¾ã€çœŸæ­£æ‰‹æŠŠæ‰‹æ•™ï¼</a></p></li><li><p>å®è·µè¿›é˜¶ï¼š<a href="https://learngitbranching.js.org/?locale=zh_CN">learning git branching</a></p></li><li><p>æ·±å…¥ç†è§£ï¼š<a href="http://think-like-a-git.net/">Think Like (a) Git</a></p></li></ol>]]></content>
    
    
    <summary type="html">&lt;p&gt;æœ¬æ–‡æ€»ç»“æˆ‘åœ¨å­¦ä¹ gitæ—¶é˜…è¯»çš„ææ–™å’Œæ€è€ƒä»¥åŠä½¿ç”¨çš„èµ„æºã€‚&lt;/p&gt;</summary>
    
    
    
    <category term="SoftwareConstruction" scheme="https://www.fvolcano.red/categories/SoftwareConstruction/"/>
    
    
  </entry>
  
  <entry>
    <title>switch-caseçš„åº•å±‚åŸç†</title>
    <link href="https://www.fvolcano.red/2021/somwthing-about-switchcase/"/>
    <id>https://www.fvolcano.red/2021/somwthing-about-switchcase/</id>
    <published>2021-06-10T01:23:15.000Z</published>
    <updated>2021-06-10T01:23:15.000Z</updated>
    
    <content type="html"><![CDATA[<p>switchè¯­å¥æ ¹æ®ä¸€ä¸ªæ•´æ•°ç´¢å¼•å€¼è¿›è¡Œå¤šé‡åˆ†æ”¯ï¼Œåº•å±‚é‡‡ç”¨è·³è½¬è¡¨è¿™ç§æ•°æ®ç»“æ„ã€‚æœ¬æ–‡æ•´ç†äº†switchçš„åº•å±‚åŸç†ä¸åœ¨Cå’ŒJavaä¸­çš„ä½¿ç”¨è§„èŒƒã€‚<a id="more"></a></p><h2 id="å‚è€ƒèµ„æ–™"><a href="#å‚è€ƒèµ„æ–™" class="headerlink" title="å‚è€ƒèµ„æ–™"></a>å‚è€ƒèµ„æ–™</h2><ol><li><a href="https://blog.csdn.net/Abrazen_zz/article/details/79250450">Switchåº•å±‚æ‰§è¡ŒåŸç†</a></li><li><a href="https://www.jb51.net/article/169781.htm">JAVAå­—ç¬¦ä¸²ç±»å‹switchçš„åº•å±‚åŸç†è¯¦æ</a></li><li><a href="https://www.cnblogs.com/jinggod/p/8425260.html">javaåŸºç¡€(å…­) switchè¯­å¥çš„æ·±å…¥è§£æ</a></li></ol><h1 id="ç†è§£"><a href="#ç†è§£" class="headerlink" title="ç†è§£"></a>ç†è§£</h1><p>æ‰§è¡Œswitchæ—¶ç”Ÿæˆä¸€ä¸ªé•¿åº¦æœ€å¤§ä¸ºcaseå¸¸é‡ï¼‹1çš„æ•°ç»„ï¼Œç¨‹åºé¦–å…ˆåˆ¤æ–­switchå˜é‡æ˜¯å¦å¤§äºæœ€å¤§case å¸¸é‡ï¼Œè‹¥å¤§äºï¼Œåˆ™è·³åˆ°defaultåˆ†æ”¯å¤„ç†ï¼›å¦åˆ™å–å¾—æ•°ç»„ç´¢å¼•å·ä¸ºswitchå˜é‡å€¼å¤§å°ï¼Œå–å¾—æ•°ç»„å¯¹åº”å€¼å³ä¸ºç›¸åº”caseä»£ç å—åœ°å€ï¼Œç¨‹åºæ¥ç€è·³åˆ°æ­¤åœ°å€æ‰§è¡Œï¼Œå®Œæˆåˆ†æ”¯çš„è·³è½¬ã€‚</p><h1 id="ç¤ºä¾‹"><a href="#ç¤ºä¾‹" class="headerlink" title="ç¤ºä¾‹"></a>ç¤ºä¾‹</h1><p><img src="/2021/somwthing-about-switchcase/20180204000943759" alt="åŸCä»£ç "></p><p>å¯¹äºfall throughæƒ…å†µï¼ˆå³caseä¸­æ²¡æœ‰breakï¼‰ï¼Œé‡‡ç”¨äº†åˆ†ç¦»çš„æ–¹æ³•ï¼Œå°†å…±åŒçš„éƒ¨åˆ†æ”¾å…¥restä¸­ã€‚</p><p><img src="/2021/somwthing-about-switchcase/20180204002047795" alt="è½¬æ¢æ¼”ç¤ºä»£ç "></p><h1 id="ä¼˜åŒ–"><a href="#ä¼˜åŒ–" class="headerlink" title="ä¼˜åŒ–"></a>ä¼˜åŒ–</h1><p>æ‰§è¡Œif-elseæ˜¯é€ä¸ªæ¡ä»¶è¿›è¡Œåˆ¤æ–­ï¼Œç›´åˆ°å‘½ä¸­ï¼›ä¸if-elseè¯­å¥ç›¸æ¯”ï¼Œä½¿ç”¨è·³è½¬è¡¨çš„ä¼˜ç‚¹æ˜¯æ‰§è¡Œswitchè¯­å¥çš„æ—¶é—´ä¸æ•°é‡æ— å…³ï¼Œä¸”è¯»å–switchå‚æ•°æ—¶åªè¯»å–ä¸€æ¬¡ï¼Œå°±å¯è·³åˆ°å¯¹åº”åˆ†æ”¯ï¼›ç¼ºç‚¹æ˜¯ç»´ç³»äº†ä¸€ä¸ªè¿ç»­çš„æ•°ç»„ï¼Œå®é™…æ—¶ä½¿ç”¨ç©ºé—´æ¢æ—¶é—´ã€‚</p><p>æœ€å¤§å€¼ä¸æœ€å°å€¼è·¨åº¦è¾ƒå¤§ã€ä¸”ä¹‹é—´æ²¡æœ‰æ›´å¤šçš„æ¡ä»¶æƒ…å†µä¸‹ï¼Œå®é™…ç”³è¯·çš„å¾ˆå¤šç©ºé—´æ˜¯æ²¡ç”¨çš„ï¼Œè¿™ç§æƒ…å†µä¸‹ä½¿ç”¨if-elseæ›´å¥½ã€‚å› æ­¤ç¼–è¯‘å™¨ä¼šå¯¹caseçš„é¡ºåºæ‰“ä¹±ï¼Œè‹¥caseçš„å€¼æ¯”è¾ƒè§„å¾‹ï¼ˆæ•°æ®å·®ç›¸åŒï¼‰ï¼Œå°±æ±‡ç¼–æˆæŸ¥è¯¢è¡¨ï¼›è‹¥å„ä¸ªcaseå€¼ä¹‹é—´éå¸¸ç¦»æ•£ï¼Œå³æ— è§„å¾‹å¯è¨€æ—¶ï¼Œç¼–è¯‘å™¨ä¼šé‡‡å–æŸç§ä¼˜åŒ–æªæ–½ã€‚</p><p>æ¯”å¦‚1ï¼Œ2ï¼Œ3ï¼Œ4ï¼Œ5ï¼Œ999è¿™ç§æƒ…å†µä¹Ÿæ˜¯å¾ˆå¸¸è§çš„ï¼Œå¯ä»¥å»æ‰æœ€å¤§å€¼ï¼Œå»æ‰æœ€å°å€¼é‡æ–°æµ‹è¯•ï¼Œæˆ–è€…ç”¨äºŒåˆ†æ³•ï¼Œåˆ†ä¸º2éƒ¨åˆ†é‡æ–°æµ‹è¯•ã€‚</p><h1 id="switchæ”¯æŒçš„ç±»å‹"><a href="#switchæ”¯æŒçš„ç±»å‹" class="headerlink" title="switchæ”¯æŒçš„ç±»å‹"></a>switchæ”¯æŒçš„ç±»å‹</h1><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">switch</span> (è¡¨è¾¾å¼) &#123;</span><br><span class="line">    <span class="keyword">case</span> å¸¸é‡è¡¨è¾¾å¼æˆ–æšä¸¾å¸¸é‡:</span><br><span class="line">        è¯­å¥;</span><br><span class="line">        <span class="keyword">break</span>;</span><br><span class="line">    <span class="keyword">case</span> å¸¸é‡è¡¨è¾¾å¼æˆ–æšä¸¾å¸¸é‡:</span><br><span class="line">        è¯­å¥;</span><br><span class="line">        <span class="keyword">break</span>;</span><br><span class="line">        ......</span><br><span class="line">            <span class="keyword">default</span>: è¯­å¥;</span><br><span class="line">        <span class="keyword">break</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="C"><a href="#C" class="headerlink" title="C"></a>C</h2><p>å› ä¸ºè¦å°†caseå€¼è½¬æ¢ä¸ºè¡¨é¡¹iï¼Œä»¥åŠswitchå€¼è¦æ ¹æ®caseå€¼è½¬æ¢ä¸ºå¯¹åº”æ•°ç»„ç´¢å¼•ï¼Œæ‰€ä»¥switchå…¥å‚æ—¶åªæ”¯æŒæ•´å½¢åŠèƒ½å¤Ÿè½¬ä¸ºæ•´å½¢çš„æ•°æ®ç±»å‹ã€‚</p><h2 id="Java"><a href="#Java" class="headerlink" title="Java"></a>Java</h2><p><strong>switch åŒ¹é…çš„è¡¨è¾¾å¼å¯ä»¥æ˜¯ï¼š</strong></p><ul><li>byteã€shortã€charã€intç±»å‹åŠè¿™4ç§ç±»å‹çš„åŒ…è£…ç±»å‹ï¼›</li><li>æšä¸¾ç±»å‹ï¼›</li><li>String ç±»å‹ï¼›</li></ul><p><strong>case åŒ¹é…çš„è¡¨è¾¾å¼å¯ä»¥æ˜¯ï¼š</strong></p><ul><li>å¸¸é‡è¡¨è¾¾å¼ï¼›</li><li>æšä¸¾å¸¸é‡ï¼›</li></ul><p>switch åº•å±‚æ˜¯ä½¿ç”¨ int å‹ æ¥è¿›è¡Œåˆ¤æ–­çš„ï¼Œå³ä½¿æ˜¯æšä¸¾ã€Stringç±»å‹ï¼Œæœ€ç»ˆä¹Ÿæ˜¯è½¬å˜æˆ int å‹ã€‚ç”±äº long å‹è¡¨ç¤ºèŒƒå›´å¤§äº int å‹ï¼Œå› æ­¤<strong>ä¸æ”¯æŒ long ç±»å‹</strong>ã€‚</p><h1 id="Javaä¸­æ”¯æŒStringç±»å‹çš„åŸç†"><a href="#Javaä¸­æ”¯æŒStringç±»å‹çš„åŸç†" class="headerlink" title="Javaä¸­æ”¯æŒStringç±»å‹çš„åŸç†"></a>Javaä¸­æ”¯æŒStringç±»å‹çš„åŸç†</h1><p>ç°åœ¨ä½¿ç”¨çš„Javaçš„ç‰ˆæœ¬ï¼ŒåŸºæœ¬ä¸Šæ˜¯éƒ½æ”¯æŒStringç±»å‹çš„ã€‚</p><p>ä¾‹ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String [] args)</span></span>&#123;</span><br><span class="line">    String str = <span class="string">&quot;sdf&quot;</span>;</span><br><span class="line">    <span class="keyword">switch</span> (str)&#123;</span><br><span class="line">        <span class="keyword">case</span> <span class="string">&quot;aaa&quot;</span>:</span><br><span class="line">            <span class="keyword">break</span>;</span><br><span class="line">        <span class="keyword">case</span> <span class="string">&quot;ccc&quot;</span>:</span><br><span class="line">            <span class="keyword">break</span>;</span><br><span class="line">        <span class="keyword">case</span> <span class="string">&quot;bbb&quot;</span>:</span><br><span class="line">            <span class="keyword">break</span>;</span><br><span class="line">        <span class="keyword">default</span>:</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>å°†classæ–‡ä»¶åç¼–è¯‘å¾—åˆ°ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] var0)</span> </span>&#123;</span><br><span class="line">    String var1 = <span class="string">&quot;sdf&quot;</span>;</span><br><span class="line">    <span class="keyword">byte</span> var3 = -<span class="number">1</span>;</span><br><span class="line">    <span class="keyword">switch</span>(var1.hashCode()) &#123;</span><br><span class="line">        <span class="keyword">case</span> <span class="number">96321</span>:</span><br><span class="line">            <span class="keyword">if</span> (var1.equals(<span class="string">&quot;aaa&quot;</span>)) &#123;</span><br><span class="line">                var3 = <span class="number">0</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">break</span>;</span><br><span class="line">        <span class="keyword">case</span> <span class="number">97314</span>:</span><br><span class="line">            <span class="keyword">if</span> (var1.equals(<span class="string">&quot;bbb&quot;</span>)) &#123;</span><br><span class="line">                var3 = <span class="number">2</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">break</span>;</span><br><span class="line">        <span class="keyword">case</span> <span class="number">98307</span>:</span><br><span class="line">            <span class="keyword">if</span> (var1.equals(<span class="string">&quot;ccc&quot;</span>)) &#123;</span><br><span class="line">                var3 = <span class="number">1</span>;</span><br><span class="line">            &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">switch</span>(var3) &#123;</span><br><span class="line">        <span class="keyword">case</span> <span class="number">1</span>:</span><br><span class="line">        <span class="keyword">case</span> <span class="number">0</span>:</span><br><span class="line">        <span class="keyword">case</span> <span class="number">2</span>:</span><br><span class="line">        <span class="keyword">default</span>:</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>å¯ä»¥çœ‹åˆ°ï¼ŒStringç±»å‹çš„switchï¼Œè½¬æ¢ä¸ºäº†å­—ç¬¦ä¸²çš„å“ˆå¸Œæ¯”è¾ƒï¼Œè€Œå…¶å“ˆå¸Œè¿”å›çš„æ­£æ˜¯intç±»å‹ã€‚hashç›¸åŒçš„æƒ…å†µå†é€šè¿‡equalsæ–¹æ³•å¯¹æ¯”å­—ç¬¦ä¸²çš„å€¼ï¼ˆå› ä¸ºä¸¤ä¸ªä¸åŒçš„å­—ç¬¦ä¸² hashCode æ˜¯æœ‰å¯èƒ½ç›¸ç­‰çš„ï¼‰ï¼Œæœ€åå¼•è¿›å±€éƒ¨å˜é‡var3å†è¿›è¡Œè·³è½¬ã€‚</p>]]></content>
    
    
    <summary type="html">&lt;p&gt;switchè¯­å¥æ ¹æ®ä¸€ä¸ªæ•´æ•°ç´¢å¼•å€¼è¿›è¡Œå¤šé‡åˆ†æ”¯ï¼Œåº•å±‚é‡‡ç”¨è·³è½¬è¡¨è¿™ç§æ•°æ®ç»“æ„ã€‚æœ¬æ–‡æ•´ç†äº†switchçš„åº•å±‚åŸç†ä¸åœ¨Cå’ŒJavaä¸­çš„ä½¿ç”¨è§„èŒƒã€‚&lt;/p&gt;</summary>
    
    
    
    
  </entry>
  
  <entry>
    <title>ç†è§£äºŒåˆ†æ³•çš„ä¸åŒå®ç°</title>
    <link href="https://www.fvolcano.red/2021/how-to-implement-binary-search/"/>
    <id>https://www.fvolcano.red/2021/how-to-implement-binary-search/</id>
    <published>2021-06-01T12:54:02.000Z</published>
    <updated>2021-06-01T12:54:02.000Z</updated>
    
    <content type="html"><![CDATA[<p>å®ç°äºŒåˆ†çš„ä¸¤ç§ä¸åŒæ–¹å¼ï¼Œé¿å…é™·å…¥æ­»å¾ªç¯ã€‚<a id="more"></a></p><h2 id="å‚è€ƒèµ„æ–™"><a href="#å‚è€ƒèµ„æ–™" class="headerlink" title="å‚è€ƒèµ„æ–™"></a>å‚è€ƒèµ„æ–™</h2><ol><li><a href="https://blog.csdn.net/EbowTang/article/details/50770315">LeetCodeæ€»ç»“ï¼ŒäºŒåˆ†æ³•ä¸€èˆ¬æ€§æ€»ç»“</a>ï¼šè¯æ˜æ­£ç¡®æ€§ä¸åº”ç”¨</li><li><a href="https://www.acwing.com/blog/content/1635/">äºŒåˆ†æ³•å°ç»“</a></li><li><a href="https://www.acwing.com/blog/content/31/">äºŒåˆ†æŸ¥æ‰¾ç®—æ³•æ¨¡æ¿</a></li><li><a href="https://www.zhihu.com/question/36132386">äºŒåˆ†æŸ¥æ‰¾æœ‰å‡ ç§å†™æ³•ï¼Ÿå®ƒä»¬çš„åŒºåˆ«æ˜¯ä»€ä¹ˆï¼Ÿ</a></li><li><a href="https://leetcode-cn.com/problems/search-insert-position/solution/te-bie-hao-yong-de-er-fen-cha-fa-fa-mo-ban-python-/">å†™å¯¹äºŒåˆ†æŸ¥æ‰¾ä¸èƒ½é æ¨¡æ¿ï¼Œéœ€è¦ç†è§£åŠ ç»ƒä¹  ï¼ˆé™„ç»ƒä¹ é¢˜ï¼ŒæŒç»­æ›´æ–°ï¼‰</a></li></ol><h1 id="äºŒåˆ†æ³•ä»‹ç»"><a href="#äºŒåˆ†æ³•ä»‹ç»" class="headerlink" title="äºŒåˆ†æ³•ä»‹ç»"></a>äºŒåˆ†æ³•ä»‹ç»</h1><p><a href="http://en.wikipedia.org/wiki/Binary_search_algorithm">äºŒåˆ†æŸ¥æ‰¾æ³•</a>ä¸»è¦æ˜¯è§£å†³åœ¨â€œä¸€å †æ•°ä¸­æ‰¾å‡ºæŒ‡å®šçš„æ•°â€è¿™ç±»é—®é¢˜ï¼Œè¿™â€œä¸€å †æ•°â€å¿…é¡»æœ‰ä»¥ä¸‹ç‰¹å¾ï¼š</p><ul><li>å­˜å‚¨åœ¨æ•°ç»„ä¸­</li><li>æœ‰åºæ’åˆ—</li></ul><h3 id="æ€æƒ³"><a href="#æ€æƒ³" class="headerlink" title="æ€æƒ³"></a>æ€æƒ³</h3><p>å‡è®¾ç›®æ ‡å€¼åœ¨é—­åŒºé—´[l, r]ä¸­ï¼Œ æ¯æ¬¡å°†åŒºé—´é•¿åº¦ç¼©å°ä¸€åŠï¼Œå½“l = ræ—¶ï¼Œæˆ‘ä»¬å°±æ‰¾åˆ°äº†ç›®æ ‡å€¼ã€‚</p><h3 id="äºŒåˆ†å’Œå•è°ƒæ€§çš„å…³ç³»"><a href="#äºŒåˆ†å’Œå•è°ƒæ€§çš„å…³ç³»" class="headerlink" title="äºŒåˆ†å’Œå•è°ƒæ€§çš„å…³ç³»"></a>äºŒåˆ†å’Œå•è°ƒæ€§çš„å…³ç³»</h3><p>æœ‰å•è°ƒæ€§çš„ä¸€å®šå¯ä»¥äºŒåˆ†ï¼Œä½†å¯ä»¥äºŒåˆ†çš„ä¸ä¸€å®šæœ‰å•è°ƒæ€§ï¼Œå³æ²¡æœ‰å•è°ƒæ€§ä¹Ÿå¯ä»¥äºŒåˆ†ã€‚</p><h1 id="å®ç°"><a href="#å®ç°" class="headerlink" title="å®ç°"></a>å®ç°</h1><h2 id="æ–¹å¼"><a href="#æ–¹å¼" class="headerlink" title="æ–¹å¼"></a>æ–¹å¼</h2><h3 id="é€’å½’"><a href="#é€’å½’" class="headerlink" title="é€’å½’"></a>é€’å½’</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">bsearch</span><span class="params">(<span class="keyword">int</span> array[], <span class="keyword">int</span> low, <span class="keyword">int</span> high, <span class="keyword">int</span> target)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (low &gt; high) <span class="keyword">return</span> -<span class="number">1</span>;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">int</span> mid = (low + high)/<span class="number">2</span>;</span><br><span class="line">    <span class="keyword">if</span> (array[mid]&gt; target)</span><br><span class="line">        <span class="keyword">return</span>    binarysearch(array, low, mid -<span class="number">1</span>, target);</span><br><span class="line">    <span class="keyword">if</span> (array[mid]&lt; target)</span><br><span class="line">        <span class="keyword">return</span>    binarysearch(array, mid+<span class="number">1</span>, high, target);</span><br><span class="line">    </span><br><span class="line">    <span class="comment">//if (midValue == target)</span></span><br><span class="line">        <span class="keyword">return</span> mid;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="stack"><a href="#stack" class="headerlink" title="stack"></a>stack</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">bsearchWithoutRecursion</span><span class="params">(<span class="keyword">int</span> array[], <span class="keyword">int</span> low, <span class="keyword">int</span> high, <span class="keyword">int</span> target)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">while</span>(low &lt;= high)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">int</span> mid = (low + high)/<span class="number">2</span>;</span><br><span class="line">        <span class="keyword">if</span> (array[mid] &gt; target)</span><br><span class="line">            high = mid - <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">else</span> <span class="keyword">if</span> (array[mid] &lt; target)</span><br><span class="line">            low = mid + <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">else</span> <span class="comment">//find the target</span></span><br><span class="line">            <span class="keyword">return</span> mid;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//the array does not contain the target</span></span><br><span class="line">    <span class="keyword">return</span> -<span class="number">1</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="æ•´æ•°äºŒåˆ†å®ç°"><a href="#æ•´æ•°äºŒåˆ†å®ç°" class="headerlink" title="æ•´æ•°äºŒåˆ†å®ç°"></a>æ•´æ•°äºŒåˆ†å®ç°</h2><p>éœ€è¦è€ƒè™‘è¾¹ç•Œé—®é¢˜ï¼Œå¦åˆ™ä¼šé™·å…¥æ­»å¾ªç¯ã€‚</p><h3 id="ç‰ˆæœ¬1"><a href="#ç‰ˆæœ¬1" class="headerlink" title="ç‰ˆæœ¬1"></a>ç‰ˆæœ¬1</h3><p>å½“æˆ‘ä»¬å°†åŒºé—´[l, r]åˆ’åˆ†æˆ[l, mid]å’Œ[mid + 1, r]æ—¶ï¼Œå…¶æ›´æ–°æ“ä½œæ˜¯r = midæˆ–è€…l = mid + 1;ï¼Œè®¡ç®—midæ—¶ä¸éœ€è¦åŠ 1ã€‚</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">bsearch_1</span><span class="params">(<span class="keyword">int</span> l, <span class="keyword">int</span> r)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">while</span> (l &lt; r)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">int</span> mid = l + r &gt;&gt; <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">if</span> (check(mid)) r = mid;</span><br><span class="line">        <span class="keyword">else</span> l = mid + <span class="number">1</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> l;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="ç‰ˆæœ¬2"><a href="#ç‰ˆæœ¬2" class="headerlink" title="ç‰ˆæœ¬2"></a>ç‰ˆæœ¬2</h3><p>å½“æˆ‘ä»¬å°†åŒºé—´[l, r]åˆ’åˆ†æˆ[l, mid - 1]å’Œ[mid, r]æ—¶ï¼Œå…¶æ›´æ–°æ“ä½œæ˜¯r = mid - 1æˆ–è€…l = mid;ï¼Œæ­¤æ—¶ä¸ºäº†é˜²æ­¢æ­»å¾ªç¯ï¼Œè®¡ç®—midæ—¶éœ€è¦åŠ 1ã€‚</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">bsearch_2</span><span class="params">(<span class="keyword">int</span> l, <span class="keyword">int</span> r)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">while</span> (l &lt; r)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">int</span> mid = l + r + <span class="number">1</span> &gt;&gt; <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">if</span> (check(mid)) l = mid;</span><br><span class="line">        <span class="keyword">else</span> r = mid - <span class="number">1</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> l;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1 id="æµ®ç‚¹æ•°äºŒåˆ†å®ç°"><a href="#æµ®ç‚¹æ•°äºŒåˆ†å®ç°" class="headerlink" title="æµ®ç‚¹æ•°äºŒåˆ†å®ç°"></a>æµ®ç‚¹æ•°äºŒåˆ†å®ç°</h1><p>æ— éœ€è€ƒè™‘è¾¹ç•Œé—®é¢˜ã€‚</p><ol><li><p>æ‰¾åˆ°ä¸€ä¸ªåŒºé—´[l, r], ä½¿å¾—ç­”æ¡ˆä¸€å®šåœ¨åŒºé—´ä¸­ã€‚</p></li><li><p>æ‰¾åˆ°ä¸€ä¸ªåˆ¤æ–­æ¡ä»¶ï¼Œä½¿å¾—åˆ¤æ–­æ¡ä»¶å…·æœ‰äºŒæ®µæ€§ï¼Œå¹¶ä¸”ç­”æ¡ˆä¸€å®šæ˜¯è¯¥äºŒæ®µæ€§çš„åˆ†ç•Œç‚¹ã€‚</p></li><li><p>åˆ†æä¸­ç‚¹mid = (l + r) / 2 åœ¨è¯¥åˆ¤æ–­æ¡ä»¶ä¸‹æ˜¯å¦æˆç«‹ã€‚<br>  å¦‚æœæˆç«‹ï¼Œè€ƒè™‘ç­”æ¡ˆåœ¨å“ªä¸ªåŒºé—´ï¼›<br>  å¦‚æœä¸æˆç«‹ï¼Œè€ƒè™‘ç­”æ¡ˆåœ¨å“ªä¸ªåŒºé—´ã€‚</p></li><li><p>ç¡®å®šæ›´æ–°æ–¹å¼r = mid æˆ– l = midã€‚</p></li></ol><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">bool</span> <span class="title">check</span><span class="params">(<span class="keyword">double</span> x)</span> </span>&#123;<span class="comment">/* ... */</span>&#125; <span class="comment">// æ£€æŸ¥xæ˜¯å¦æ»¡è¶³æŸç§æ€§è´¨</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">double</span> <span class="title">bsearch_3</span><span class="params">(<span class="keyword">double</span> l, <span class="keyword">double</span> r)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">const</span> <span class="keyword">double</span> eps = <span class="number">1e-6</span>;   <span class="comment">// eps è¡¨ç¤ºç²¾åº¦ï¼Œå–å†³äºé¢˜ç›®å¯¹ç²¾åº¦çš„è¦æ±‚</span></span><br><span class="line">    <span class="keyword">while</span> (r - l &gt; eps)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">double</span> mid = (l + r) / <span class="number">2</span>;</span><br><span class="line">        <span class="keyword">if</span> (check(mid)) r = mid;</span><br><span class="line">        <span class="keyword">else</span> l = mid;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> l;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>å…³äºæµ®ç‚¹æ•°äºŒåˆ†ä¸­åŒºé—´ç²¾åº¦çš„é€‰å–ï¼š</p><p>ä¸€èˆ¬æ¥è¯´åŒºé—´ç²¾åº¦ä¸º1e-6å°±å¾ˆé«˜äº†ã€‚å¦‚æœè¦æ±‚ç»“æœä¿ç•™4ä½å°æ•°ï¼Œé‚£ä¹ˆç²¾åº¦å¯ä»¥å–1e-6ï¼›å¦‚æœè¦æ±‚ç»“æœä¿ç•™5ä½å°æ•°ï¼Œé‚£ä¹ˆåŒºé—´ç²¾åº¦å¯ä»¥å–1e-7ã€‚ä»¥æ­¤ç±»æ¨â€¦â€¦</p><p>ç®€è¨€ä¹‹ï¼ŒåŒºé—´ç²¾åº¦è‡³å°‘è¦æ¯”è¦ä¿ç•™çš„å°æ•°ä½æ•°é«˜2ä½ã€‚</p><h1 id="å¦‚ä½•ç†è§£"><a href="#å¦‚ä½•ç†è§£" class="headerlink" title="å¦‚ä½•ç†è§£"></a>å¦‚ä½•ç†è§£</h1>]]></content>
    
    
    <summary type="html">&lt;p&gt;å®ç°äºŒåˆ†çš„ä¸¤ç§ä¸åŒæ–¹å¼ï¼Œé¿å…é™·å…¥æ­»å¾ªç¯ã€‚&lt;/p&gt;</summary>
    
    
    
    <category term="ç®—æ³•" scheme="https://www.fvolcano.red/categories/%E7%AE%97%E6%B3%95/"/>
    
    
    <category term="æ•´ç†" scheme="https://www.fvolcano.red/tags/%E6%95%B4%E7%90%86/"/>
    
  </entry>
  
  <entry>
    <title>ç”¨readelfã€objdumpåˆ†æç¨‹åº</title>
    <link href="https://www.fvolcano.red/2021/how-to-use-readelf-and-objdump/"/>
    <id>https://www.fvolcano.red/2021/how-to-use-readelf-and-objdump/</id>
    <published>2021-05-31T13:04:28.000Z</published>
    <updated>2021-05-31T13:04:28.000Z</updated>
    
    <content type="html"><![CDATA[<p>æ•´ç†linuxä¸­readelfã€objdumpå·¥å…·çš„ç”¨æ³•ã€‚</p><a id="more"></a><h2 id="å‚è€ƒèµ„æ–™"><a href="#å‚è€ƒèµ„æ–™" class="headerlink" title="å‚è€ƒèµ„æ–™"></a>å‚è€ƒèµ„æ–™</h2><ol><li><a href="https://linuxtools-rst.readthedocs.io/zh_CN/latest/tool/readelf.html">readelf elfæ–‡ä»¶æ ¼å¼åˆ†æ</a></li><li><a href="https://blog.csdn.net/Roland_Sun/article/details/37581715">ELFæ–‡ä»¶æŸ¥çœ‹åˆ©å™¨ä¹‹readelfç”¨æ³•</a></li><li><a href="https://www.jianshu.com/p/863b279c941e">ä½¿ç”¨readelfå’Œobjdumpè§£æç›®æ ‡æ–‡ä»¶</a></li><li><a href="https://ivanzz1001.github.io/records/post/linux/2018/04/09/linux-objdump">Linuxä¸­objdumpçš„ä½¿ç”¨</a></li></ol><h1 id="ç”¨æ³•"><a href="#ç”¨æ³•" class="headerlink" title="ç”¨æ³•"></a>ç”¨æ³•</h1><h2 id="readelf"><a href="#readelf" class="headerlink" title="readelf"></a>readelf</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> readelf</span></span><br><span class="line">Usage: readelf &lt;option(s)&gt; elf-file(s)</span><br><span class="line"> Display information about the contents of ELF format files</span><br><span class="line"> Options are:</span><br><span class="line">  -a --all               Equivalent to: -h -l -S -s -r -d -V -A -I</span><br><span class="line">  -h --file-header       Display the ELF file header</span><br><span class="line">  -l --program-headers   Display the program headers</span><br><span class="line">     --segments          An alias for --program-headers</span><br><span class="line">  -S --section-headers   Display the sections&#x27; header</span><br><span class="line">     --sections          An alias for --section-headers</span><br><span class="line">  -g --section-groups    Display the section groups</span><br><span class="line">  -t --section-details   Display the section details</span><br><span class="line">  -e --headers           Equivalent to: -h -l -S</span><br><span class="line">  -s --syms              Display the symbol table</span><br><span class="line">     --symbols           An alias for --syms</span><br><span class="line">  --dyn-syms             Display the dynamic symbol table</span><br><span class="line">  -n --notes             Display the core notes (if present)</span><br><span class="line">  -r --relocs            Display the relocations (if present)</span><br><span class="line">  -u --unwind            Display the unwind info (if present)</span><br><span class="line">  -d --dynamic           Display the dynamic section (if present)</span><br><span class="line">  -V --version-info      Display the version sections (if present)</span><br><span class="line">  -A --arch-specific     Display architecture specific information (if any)</span><br><span class="line">  -c --archive-index     Display the symbol/file index in an archive</span><br><span class="line">  -D --use-dynamic       Use the dynamic section info when displaying symbols</span><br><span class="line">  -x --hex-dump=&lt;number|name&gt;</span><br><span class="line">                         Dump the contents of section &lt;number|name&gt; as bytes</span><br><span class="line">  -p --string-dump=&lt;number|name&gt;</span><br><span class="line">                         Dump the contents of section &lt;number|name&gt; as strings</span><br><span class="line">  -R --relocated-dump=&lt;number|name&gt;</span><br><span class="line">                         Dump the contents of section &lt;number|name&gt; as relocated bytes</span><br><span class="line">  -w[lLiaprmfFsoRt] or</span><br><span class="line">  --debug-dump[=rawline,=decodedline,=info,=abbrev,=pubnames,=aranges,=macro,=frames,</span><br><span class="line">               =frames-interp,=str,=loc,=Ranges,=pubtypes,</span><br><span class="line">               =gdb_index,=trace_info,=trace_abbrev,=trace_aranges,</span><br><span class="line">               =addr,=cu_index]</span><br><span class="line">                         Display the contents of DWARF2 debug sections</span><br><span class="line">  --dwarf-depth=N        Do not display DIEs at depth N or greater</span><br><span class="line">  --dwarf-start=N        Display DIEs starting with N, at the same depth</span><br><span class="line">                         or deeper</span><br><span class="line">  -I --histogram         Display histogram of bucket list lengths</span><br><span class="line">  -W --wide              Allow output width to exceed 80 characters</span><br><span class="line">  @&lt;file&gt;                Read options from &lt;file&gt;</span><br><span class="line">  -H --help              Display this information</span><br><span class="line">  -v --version           Display the version number of readelf</span><br></pre></td></tr></table></figure><h2 id="objdump"><a href="#objdump" class="headerlink" title="objdump"></a>objdump</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></td><td class="code"><pre><span class="line">objdump [-a|--archive-headers]</span><br><span class="line">   [-b bfdname|--target=bfdname]</span><br><span class="line">   [-C|--demangle[=style] ]</span><br><span class="line">   [-d|--disassemble]</span><br><span class="line">   [-D|--disassemble-all]</span><br><span class="line">   [-z|--disassemble-zeroes]</span><br><span class="line">   [-EB|-EL|--endian=&#123;big | little &#125;]</span><br><span class="line">   [-f|--file-headers]</span><br><span class="line">   [-F|--file-offsets]</span><br><span class="line">   [--file-start-context]</span><br><span class="line">   [-g|--debugging]</span><br><span class="line">   [-e|--debugging-tags]</span><br><span class="line">   [-h|--section-headers|--headers]</span><br><span class="line">   [-i|--info]</span><br><span class="line">   [-j section|--section=section]</span><br><span class="line">   [-l|--line-numbers]</span><br><span class="line">   [-S|--source]</span><br><span class="line">   [-m machine|--architecture=machine]</span><br><span class="line">   [-M options|--disassembler-options=options]</span><br><span class="line">   [-p|--private-headers]</span><br><span class="line">   [-P options|--private=options]</span><br><span class="line">   [-r|--reloc]</span><br><span class="line">   [-R|--dynamic-reloc]</span><br><span class="line">   [-s|--full-contents]</span><br><span class="line">   [-W[lLiaprmfFsoRt]|</span><br><span class="line">    --dwarf[=rawline,=decodedline,=info,=abbrev,=pubnames]</span><br><span class="line">            [=aranges,=macro,=frames,=frames-interp,=str,=loc]</span><br><span class="line">            [=Ranges,=pubtypes,=trace_info,=trace_abbrev]</span><br><span class="line">            [=trace_aranges,=gdb_index]</span><br><span class="line">   [-G|--stabs]</span><br><span class="line">   [-t|--syms]</span><br><span class="line">   [-T|--dynamic-syms]</span><br><span class="line">   [-x|--all-headers]</span><br><span class="line">   [-w|--wide]</span><br><span class="line">   [--start-address=address]</span><br><span class="line">   [--stop-address=address]</span><br><span class="line">   [--prefix-addresses]</span><br><span class="line">   [--[no-]show-raw-insn]</span><br><span class="line">   [--adjust-vma=offset]</span><br><span class="line">   [--special-syms]</span><br><span class="line">   [--prefix=prefix]</span><br><span class="line">   [--prefix-strip=level]</span><br><span class="line">   [--insn-width=width]</span><br><span class="line">   [-V|--version]</span><br><span class="line">   [-H|--help]</span><br><span class="line">   objfile...</span><br></pre></td></tr></table></figure><figure class="highlight diff"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br></pre></td><td class="code"><pre><span class="line"># https://wangchujiang.com/linux-command/c/objdump.html</span><br><span class="line"></span><br><span class="line"><span class="deletion">-a --archive-headers </span></span><br><span class="line"># æ˜¾ç¤ºæ¡£æ¡ˆåº“çš„æˆå‘˜ä¿¡æ¯,ç±»ä¼¼ls -lå°†lib*.açš„ä¿¡æ¯åˆ—å‡ºã€‚ </span><br><span class="line"></span><br><span class="line"><span class="deletion">-b bfdname --target=bfdname </span></span><br><span class="line"># æŒ‡å®šç›®æ ‡ç æ ¼å¼ã€‚è¿™ä¸æ˜¯å¿…é¡»çš„ï¼Œobjdumpèƒ½è‡ªåŠ¨è¯†åˆ«è®¸å¤šæ ¼å¼ï¼Œæ¯”å¦‚ï¼š </span><br><span class="line"></span><br><span class="line">objdump -b oasys -m vax -h fu.o </span><br><span class="line"># æ˜¾ç¤ºfu.oçš„å¤´éƒ¨æ‘˜è¦ä¿¡æ¯ï¼Œæ˜ç¡®æŒ‡å‡ºè¯¥æ–‡ä»¶æ˜¯Vaxç³»ç»Ÿä¸‹ç”¨Oasysç¼–è¯‘å™¨ç”Ÿæˆçš„ç›®æ ‡æ–‡ä»¶ã€‚objdump -iå°†ç»™å‡ºè¿™é‡Œå¯ä»¥æŒ‡å®šçš„ç›®æ ‡ç æ ¼å¼åˆ—è¡¨ã€‚ </span><br><span class="line"></span><br><span class="line"><span class="deletion">-C --demangle </span></span><br><span class="line"># å°†åº•å±‚çš„ç¬¦å·åè§£ç æˆç”¨æˆ·çº§åå­—ï¼Œé™¤äº†å»æ‰æ‰€å¼€å¤´çš„ä¸‹åˆ’çº¿ä¹‹å¤–ï¼Œè¿˜ä½¿å¾—C++å‡½æ•°åä»¥å¯ç†è§£çš„æ–¹å¼æ˜¾ç¤ºå‡ºæ¥ã€‚ </span><br><span class="line"><span class="deletion">--debugging </span></span><br><span class="line"><span class="deletion">-g </span></span><br><span class="line"># æ˜¾ç¤ºè°ƒè¯•ä¿¡æ¯ã€‚ä¼å›¾è§£æä¿å­˜åœ¨æ–‡ä»¶ä¸­çš„è°ƒè¯•ä¿¡æ¯å¹¶ä»¥Cè¯­è¨€çš„è¯­æ³•æ˜¾ç¤ºå‡ºæ¥ã€‚ä»…ä»…æ”¯æŒæŸäº›ç±»å‹çš„è°ƒè¯•ä¿¡æ¯ã€‚æœ‰äº›å…¶ä»–çš„æ ¼å¼è¢«readelf -wæ”¯æŒã€‚ </span><br><span class="line"></span><br><span class="line"><span class="deletion">-e --debugging-tags </span></span><br><span class="line"># ç±»ä¼¼-gé€‰é¡¹ï¼Œä½†æ˜¯ç”Ÿæˆçš„ä¿¡æ¯æ˜¯å’Œctagså·¥å…·ç›¸å…¼å®¹çš„æ ¼å¼ã€‚ </span><br><span class="line"><span class="deletion">--disassemble </span></span><br><span class="line"><span class="deletion">-d </span></span><br><span class="line"># ä»objfileä¸­åæ±‡ç¼–é‚£äº›ç‰¹å®šæŒ‡ä»¤æœºå™¨ç çš„sectionã€‚ </span><br><span class="line"></span><br><span class="line"><span class="deletion">-D --disassemble-all </span></span><br><span class="line"># ä¸ -d ç±»ä¼¼ï¼Œä½†åæ±‡ç¼–æ‰€æœ‰section. </span><br><span class="line"></span><br><span class="line"><span class="deletion">--prefix-addresses </span></span><br><span class="line"># åæ±‡ç¼–çš„æ—¶å€™ï¼Œæ˜¾ç¤ºæ¯ä¸€è¡Œçš„å®Œæ•´åœ°å€ã€‚è¿™æ˜¯ä¸€ç§æ¯”è¾ƒè€çš„åæ±‡ç¼–æ ¼å¼ã€‚ </span><br><span class="line"></span><br><span class="line"><span class="deletion">-EB </span></span><br><span class="line"><span class="deletion">-EL </span></span><br><span class="line"><span class="deletion">--endian=&#123;big|little&#125; </span></span><br><span class="line"># æŒ‡å®šç›®æ ‡æ–‡ä»¶çš„å°ç«¯ã€‚è¿™ä¸ªé¡¹å°†å½±å“åæ±‡ç¼–å‡ºæ¥çš„æŒ‡ä»¤ã€‚åœ¨åæ±‡ç¼–çš„æ–‡ä»¶æ²¡æè¿°å°ç«¯ä¿¡æ¯çš„æ—¶å€™ç”¨ã€‚ä¾‹å¦‚S-records. </span><br><span class="line"></span><br><span class="line"><span class="deletion">-f </span></span><br><span class="line"><span class="deletion">--file-headers </span></span><br><span class="line">æ˜¾ç¤ºobjfileä¸­æ¯ä¸ªæ–‡ä»¶çš„æ•´ä½“å¤´éƒ¨æ‘˜è¦ä¿¡æ¯ã€‚ </span><br><span class="line"></span><br><span class="line"><span class="deletion">-h </span></span><br><span class="line"><span class="deletion">--section-headers </span></span><br><span class="line"><span class="deletion">--headers </span></span><br><span class="line">æ˜¾ç¤ºç›®æ ‡æ–‡ä»¶å„ä¸ªsectionçš„å¤´éƒ¨æ‘˜è¦ä¿¡æ¯ã€‚ </span><br><span class="line"></span><br><span class="line"><span class="deletion">-H </span></span><br><span class="line"><span class="deletion">--help </span></span><br><span class="line">ç®€çŸ­çš„å¸®åŠ©ä¿¡æ¯ã€‚ </span><br><span class="line"></span><br><span class="line"><span class="deletion">-i </span></span><br><span class="line"><span class="deletion">--info </span></span><br><span class="line">æ˜¾ç¤ºå¯¹äº -b æˆ–è€… -m é€‰é¡¹å¯ç”¨çš„æ¶æ„å’Œç›®æ ‡æ ¼å¼åˆ—è¡¨ã€‚ </span><br><span class="line"></span><br><span class="line"><span class="deletion">-j name</span></span><br><span class="line"><span class="deletion">--section=name </span></span><br><span class="line">ä»…ä»…æ˜¾ç¤ºæŒ‡å®šåç§°ä¸ºnameçš„sectionçš„ä¿¡æ¯ </span><br><span class="line"></span><br><span class="line"><span class="deletion">-l</span></span><br><span class="line"><span class="deletion">--line-numbers </span></span><br><span class="line">ç”¨æ–‡ä»¶åå’Œè¡Œå·æ ‡æ³¨ç›¸åº”çš„ç›®æ ‡ä»£ç ï¼Œä»…ä»…å’Œ-dã€-Dæˆ–è€…-rä¸€èµ·ä½¿ç”¨ä½¿ç”¨-ldå’Œä½¿ç”¨-dçš„åŒºåˆ«ä¸æ˜¯å¾ˆå¤§ï¼Œåœ¨æºç çº§è°ƒè¯•çš„æ—¶å€™æœ‰ç”¨ï¼Œè¦æ±‚ç¼–è¯‘æ—¶ä½¿ç”¨äº†-gä¹‹ç±»çš„è°ƒè¯•ç¼–è¯‘é€‰é¡¹ã€‚ </span><br><span class="line"></span><br><span class="line"><span class="deletion">-m machine </span></span><br><span class="line"><span class="deletion">--architecture=machine </span></span><br><span class="line">æŒ‡å®šåæ±‡ç¼–ç›®æ ‡æ–‡ä»¶æ—¶ä½¿ç”¨çš„æ¶æ„ï¼Œå½“å¾…åæ±‡ç¼–æ–‡ä»¶æœ¬èº«æ²¡æè¿°æ¶æ„ä¿¡æ¯çš„æ—¶å€™(æ¯”å¦‚S-records)ï¼Œè¿™ä¸ªé€‰é¡¹å¾ˆæœ‰ç”¨ã€‚å¯ä»¥ç”¨-ié€‰é¡¹åˆ—å‡ºè¿™é‡Œèƒ½å¤ŸæŒ‡å®šçš„æ¶æ„. </span><br><span class="line"></span><br><span class="line"><span class="deletion">--reloc </span></span><br><span class="line"><span class="deletion">-r </span></span><br><span class="line">æ˜¾ç¤ºæ–‡ä»¶çš„é‡å®šä½å…¥å£ã€‚å¦‚æœå’Œ-dæˆ–è€…-Dä¸€èµ·ä½¿ç”¨ï¼Œé‡å®šä½éƒ¨åˆ†ä»¥åæ±‡ç¼–åçš„æ ¼å¼æ˜¾ç¤ºå‡ºæ¥ã€‚ </span><br><span class="line"></span><br><span class="line"><span class="deletion">--dynamic-reloc </span></span><br><span class="line"><span class="deletion">-R </span></span><br><span class="line">æ˜¾ç¤ºæ–‡ä»¶çš„åŠ¨æ€é‡å®šä½å…¥å£ï¼Œä»…ä»…å¯¹äºåŠ¨æ€ç›®æ ‡æ–‡ä»¶æ„ä¹‰ï¼Œæ¯”å¦‚æŸäº›å…±äº«åº“ã€‚ </span><br><span class="line"></span><br><span class="line"><span class="deletion">-s </span></span><br><span class="line"><span class="deletion">--full-contents </span></span><br><span class="line">æ˜¾ç¤ºæŒ‡å®šsectionçš„å®Œæ•´å†…å®¹ã€‚é»˜è®¤æ‰€æœ‰çš„éç©ºsectionéƒ½ä¼šè¢«æ˜¾ç¤ºã€‚ </span><br><span class="line"></span><br><span class="line"><span class="deletion">-S </span></span><br><span class="line"><span class="deletion">--source </span></span><br><span class="line">å°½å¯èƒ½åæ±‡ç¼–å‡ºæºä»£ç ï¼Œå°¤å…¶å½“ç¼–è¯‘çš„æ—¶å€™æŒ‡å®šäº†-gè¿™ç§è°ƒè¯•å‚æ•°æ—¶ï¼Œæ•ˆæœæ¯”è¾ƒæ˜æ˜¾ã€‚éšå«äº†-då‚æ•°ã€‚ </span><br><span class="line"></span><br><span class="line"><span class="deletion">--show-raw-insn </span></span><br><span class="line">åæ±‡ç¼–çš„æ—¶å€™ï¼Œæ˜¾ç¤ºæ¯æ¡æ±‡ç¼–æŒ‡ä»¤å¯¹åº”çš„æœºå™¨ç ï¼Œå¦‚ä¸æŒ‡å®š--prefix-addressesï¼Œè¿™å°†æ˜¯ç¼ºçœé€‰é¡¹ã€‚ </span><br><span class="line"></span><br><span class="line"><span class="deletion">--no-show-raw-insn </span></span><br><span class="line">åæ±‡ç¼–æ—¶ï¼Œä¸æ˜¾ç¤ºæ±‡ç¼–æŒ‡ä»¤çš„æœºå™¨ç ï¼Œå¦‚ä¸æŒ‡å®š--prefix-addressesï¼Œè¿™å°†æ˜¯ç¼ºçœé€‰é¡¹ã€‚ </span><br><span class="line"></span><br><span class="line"><span class="deletion">--start-address=address </span></span><br><span class="line">ä»æŒ‡å®šåœ°å€å¼€å§‹æ˜¾ç¤ºæ•°æ®ï¼Œè¯¥é€‰é¡¹å½±å“-dã€-rå’Œ-sé€‰é¡¹çš„è¾“å‡ºã€‚ </span><br><span class="line"></span><br><span class="line"><span class="deletion">--stop-address=address </span></span><br><span class="line">æ˜¾ç¤ºæ•°æ®ç›´åˆ°æŒ‡å®šåœ°å€ä¸ºæ­¢ï¼Œè¯¥é¡¹å½±å“-dã€-rå’Œ-sé€‰é¡¹çš„è¾“å‡ºã€‚ </span><br><span class="line"></span><br><span class="line"><span class="deletion">-t </span></span><br><span class="line"><span class="deletion">--syms </span></span><br><span class="line">æ˜¾ç¤ºæ–‡ä»¶çš„ç¬¦å·è¡¨å…¥å£ã€‚ç±»ä¼¼äºnm -sæä¾›çš„ä¿¡æ¯ </span><br><span class="line"></span><br><span class="line"><span class="deletion">-T </span></span><br><span class="line"><span class="deletion">--dynamic-syms </span></span><br><span class="line">æ˜¾ç¤ºæ–‡ä»¶çš„åŠ¨æ€ç¬¦å·è¡¨å…¥å£ï¼Œä»…ä»…å¯¹åŠ¨æ€ç›®æ ‡æ–‡ä»¶æ„ä¹‰ï¼Œæ¯”å¦‚æŸäº›å…±äº«åº“ã€‚å®ƒæ˜¾ç¤ºçš„ä¿¡æ¯ç±»ä¼¼äº nm -D|--dynamic æ˜¾ç¤ºçš„ä¿¡æ¯ã€‚ </span><br><span class="line"></span><br><span class="line"><span class="deletion">-V </span></span><br><span class="line"><span class="deletion">--version </span></span><br><span class="line">ç‰ˆæœ¬ä¿¡æ¯ </span><br><span class="line"></span><br><span class="line"><span class="deletion">--all-headers </span></span><br><span class="line"><span class="deletion">-x </span></span><br><span class="line">æ˜¾ç¤ºæ‰€å¯ç”¨çš„å¤´ä¿¡æ¯ï¼ŒåŒ…æ‹¬ç¬¦å·è¡¨ã€é‡å®šä½å…¥å£ã€‚-x ç­‰ä»·äº-a -f -h -r -t åŒæ—¶æŒ‡å®šã€‚ </span><br><span class="line"></span><br><span class="line"><span class="deletion">-z </span></span><br><span class="line"><span class="deletion">--disassemble-zeroes </span></span><br><span class="line">ä¸€èˆ¬åæ±‡ç¼–è¾“å‡ºå°†çœç•¥å¤§å—çš„é›¶ï¼Œè¯¥é€‰é¡¹ä½¿å¾—è¿™äº›é›¶å—ä¹Ÿè¢«åæ±‡ç¼–ã€‚ </span><br><span class="line"></span><br><span class="line">@file å¯ä»¥å°†é€‰é¡¹é›†ä¸­åˆ°ä¸€ä¸ªæ–‡ä»¶ä¸­ï¼Œç„¶åä½¿ç”¨è¿™ä¸ª@fileé€‰é¡¹è½½å…¥ã€‚</span><br></pre></td></tr></table></figure><h1 id="åˆ†æç¨‹åº"><a href="#åˆ†æç¨‹åº" class="headerlink" title="åˆ†æç¨‹åº"></a>åˆ†æç¨‹åº</h1><h2 id="åº”ç”¨ç¨‹åºçš„å¯è¿è¡Œçš„æ¶æ„å¹³å°"><a href="#åº”ç”¨ç¨‹åºçš„å¯è¿è¡Œçš„æ¶æ„å¹³å°" class="headerlink" title="åº”ç”¨ç¨‹åºçš„å¯è¿è¡Œçš„æ¶æ„å¹³å°"></a>åº”ç”¨ç¨‹åºçš„å¯è¿è¡Œçš„æ¶æ„å¹³å°</h2><figure class="highlight 1c"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ readelf -h main<span class="string">| grep Machine</span></span><br></pre></td></tr></table></figure><p>-hé€‰é¡¹å°†æ˜¾ç¤ºæ–‡ä»¶å¤´çš„æ¦‚è¦ä¿¡æ¯ï¼Œä»é‡Œé¢å¯ä»¥çœ‹åˆ°ï¼Œæœ‰å¾ˆå¤šæœ‰ç”¨çš„ä¿¡æ¯ï¼š</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">$</span> <span class="string">readelf</span> <span class="string">-h</span> <span class="string">main</span></span><br><span class="line"><span class="attr">ELF Header:</span></span><br><span class="line"><span class="attr">Magic:</span>   <span class="string">7f</span> <span class="number">45</span> <span class="string">4c</span> <span class="number">46</span> <span class="number">02</span> <span class="number">01</span> <span class="number">01</span> <span class="number">00</span> <span class="number">00</span> <span class="number">00</span> <span class="number">00</span> <span class="number">00</span> <span class="number">00</span> <span class="number">00</span> <span class="number">00</span> <span class="number">00</span></span><br><span class="line"><span class="attr">Class:</span>                             <span class="string">ELF64</span></span><br><span class="line"><span class="attr">Data:</span>                              <span class="number">2</span> <span class="string">s</span> <span class="string">complement,</span> <span class="string">little</span> <span class="string">endian</span></span><br><span class="line"><span class="attr">Version:</span>                           <span class="number">1</span> <span class="string">(current)</span></span><br><span class="line"><span class="attr">OS/ABI:</span>                            <span class="string">UNIX</span> <span class="bullet">-</span> <span class="string">System</span> <span class="string">V</span></span><br><span class="line"><span class="attr">ABI Version:</span>                       <span class="number">0</span></span><br><span class="line"><span class="attr">Type:</span>                              <span class="string">EXEC</span> <span class="string">(Executable</span> <span class="string">file)</span></span><br><span class="line"><span class="attr">Machine:</span>                           <span class="string">Advanced</span> <span class="string">Micro</span> <span class="string">Devices</span> <span class="string">X86-64</span></span><br><span class="line"><span class="attr">Version:</span>                           <span class="number">0x1</span></span><br><span class="line"><span class="attr">Entry point address:</span>               <span class="number">0x400790</span></span><br><span class="line"><span class="attr">Start of program headers:</span>          <span class="number">64</span> <span class="string">(bytes</span> <span class="string">into</span> <span class="string">file)</span></span><br><span class="line"><span class="attr">Start of section headers:</span>          <span class="number">5224</span> <span class="string">(bytes</span> <span class="string">into</span> <span class="string">file)</span></span><br><span class="line"><span class="attr">Flags:</span>                             <span class="number">0x0</span></span><br><span class="line"><span class="attr">Size of this header:</span>               <span class="number">64</span> <span class="string">(bytes)</span></span><br><span class="line"><span class="attr">Size of program headers:</span>           <span class="number">56</span> <span class="string">(bytes)</span></span><br><span class="line"><span class="attr">Number of program headers:</span>         <span class="number">8</span></span><br><span class="line"><span class="attr">Size of section headers:</span>           <span class="number">64</span> <span class="string">(bytes)</span></span><br><span class="line"><span class="attr">Number of section headers:</span>         <span class="number">29</span></span><br><span class="line"><span class="attr">Section header string table index:</span> <span class="number">26</span></span><br></pre></td></tr></table></figure><h2 id="ç¼–è¯‘æ—¶æ˜¯å¦ä½¿ç”¨äº†-gé€‰é¡¹ï¼ˆåŠ å…¥è°ƒè¯•ä¿¡æ¯ï¼‰"><a href="#ç¼–è¯‘æ—¶æ˜¯å¦ä½¿ç”¨äº†-gé€‰é¡¹ï¼ˆåŠ å…¥è°ƒè¯•ä¿¡æ¯ï¼‰" class="headerlink" title="ç¼–è¯‘æ—¶æ˜¯å¦ä½¿ç”¨äº†-gé€‰é¡¹ï¼ˆåŠ å…¥è°ƒè¯•ä¿¡æ¯ï¼‰"></a>ç¼–è¯‘æ—¶æ˜¯å¦ä½¿ç”¨äº†-gé€‰é¡¹ï¼ˆåŠ å…¥è°ƒè¯•ä¿¡æ¯ï¼‰</h2><figure class="highlight vim"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ readelf -S main | <span class="keyword">grep</span> <span class="keyword">debug</span></span><br><span class="line">$ readelf -S main.<span class="keyword">o</span> | <span class="keyword">grep</span> <span class="keyword">debug</span></span><br></pre></td></tr></table></figure><p>ç”¨-Sé€‰é¡¹æ˜¯æ˜¾ç¤ºæ‰€æœ‰æ®µä¿¡æ¯ï¼›å¦‚æœç¼–è¯‘æ—¶ä½¿ç”¨äº†-gé€‰é¡¹ï¼Œåˆ™ä¼šæœ‰debugæ®µã€‚</p><h2 id="æŸ¥çœ‹æœ¬æœºç›®æ ‡ç»“æ„ï¼ˆä½¿ç”¨å¤§ç«¯è¿˜æ˜¯å°ç«¯å­˜å‚¨ï¼‰"><a href="#æŸ¥çœ‹æœ¬æœºç›®æ ‡ç»“æ„ï¼ˆä½¿ç”¨å¤§ç«¯è¿˜æ˜¯å°ç«¯å­˜å‚¨ï¼‰" class="headerlink" title="æŸ¥çœ‹æœ¬æœºç›®æ ‡ç»“æ„ï¼ˆä½¿ç”¨å¤§ç«¯è¿˜æ˜¯å°ç«¯å­˜å‚¨ï¼‰"></a>æŸ¥çœ‹æœ¬æœºç›®æ ‡ç»“æ„ï¼ˆä½¿ç”¨å¤§ç«¯è¿˜æ˜¯å°ç«¯å­˜å‚¨ï¼‰</h2><figure class="highlight elixir"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable">$ </span>objdump -i</span><br></pre></td></tr></table></figure><h2 id="æ˜¾ç¤ºç¬¦å·è¡¨å…¥å£"><a href="#æ˜¾ç¤ºç¬¦å·è¡¨å…¥å£" class="headerlink" title="æ˜¾ç¤ºç¬¦å·è¡¨å…¥å£"></a>æ˜¾ç¤ºç¬¦å·è¡¨å…¥å£</h2><figure class="highlight elixir"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable">$ </span>objdump  -t main.o</span><br></pre></td></tr></table></figure>]]></content>
    
    
    <summary type="html">&lt;p&gt;æ•´ç†linuxä¸­readelfã€objdumpå·¥å…·çš„ç”¨æ³•ã€‚&lt;/p&gt;</summary>
    
    
    
    <category term="linux" scheme="https://www.fvolcano.red/categories/linux/"/>
    
    
    <category term="æ•´ç†" scheme="https://www.fvolcano.red/tags/%E6%95%B4%E7%90%86/"/>
    
  </entry>
  
  <entry>
    <title>é‡å®šä½ç±»å‹ä»‹ç»</title>
    <link href="https://www.fvolcano.red/2021/different-types-of-relocating/"/>
    <id>https://www.fvolcano.red/2021/different-types-of-relocating/</id>
    <published>2021-05-30T13:30:42.000Z</published>
    <updated>2021-05-30T13:30:42.000Z</updated>
    
    <content type="html"><![CDATA[<p>æ•´ç†32ä½elfæ ¼å¼ä¸­å¸¸è§çš„é‡å®šä½ç±»å‹çš„å«ä¹‰ä¸ç”¨æ³•ã€‚</p><a id="more"></a><h2 id="å‚è€ƒèµ„æ–™"><a href="#å‚è€ƒèµ„æ–™" class="headerlink" title="å‚è€ƒèµ„æ–™"></a>å‚è€ƒèµ„æ–™</h2><ol><li><p><a href="https://bbs.pediy.com/thread-246373.htm">32ä½elfæ ¼å¼ä¸­çš„10ç§é‡å®šä½ç±»å‹</a></p></li><li><p><a href="http://www.360doc.com/content/17/1204/19/7377734_709898612.shtml">é€šè¿‡elfå„ç§é‡å®šä½ç±»å‹ï¼Œç†è§£ä¸åŒåœºåˆçš„é“¾æ¥è¿‡ç¨‹</a></p></li><li><p><a href="https://docs.oracle.com/cd/E19253-01/819-7050/chapter6-26/index.html">è¡¨æ ¼æ•´ç†</a></p></li></ol><p><strong>æå‡ºçš„æ‰€æœ‰å†…å­˜åœ°å€éƒ½æ˜¯åœ¨é“¾æ¥å¥½çš„å¯æ‰§è¡Œæ–‡ä»¶ä¸­çš„å·²åˆ†é…åœ°å€ï¼Œå¦‚addr(.text)</strong></p><h1 id="R-386-32"><a href="#R-386-32" class="headerlink" title="R_386_32"></a>R_386_32</h1><p>å…¬å¼ï¼šS+A</p><p>Sï¼šé‡å®šé¡¹ä¸­VALUEæˆå‘˜æ‰€æŒ‡ç¬¦å·çš„å†…å­˜åœ°å€</p><p>Aï¼šè¢«é‡å®šä½å¤„åŸå€¼ï¼Œè¡¨ç¤ºâ€å¼•ç”¨ç¬¦å·çš„å†…å­˜åœ°å€â€ä¸Sçš„åç§»</p><h1 id="R-386-RELATIVE"><a href="#R-386-RELATIVE" class="headerlink" title="R_386_RELATIVE"></a>R_386_RELATIVE</h1><p>å…¬å¼ï¼šB+A</p><p>Bï¼š.soæ–‡ä»¶åŠ è½½åˆ°å†…å­˜ä¸­çš„åŸºåœ°å€</p><p>Aï¼šè¢«é‡å®šä½å¤„åŸå€¼ï¼Œè¡¨ç¤ºå¼•ç”¨ç¬¦å·åœ¨.soæ–‡ä»¶ä¸­çš„åç§»</p><p><img src="/2021/different-types-of-relocating/v2-f78215bd90ddb90847d2253c2b6a12c5_r.jpg" alt="img"></p><h1 id="R-386-PC32"><a href="#R-386-PC32" class="headerlink" title="R_386_PC32"></a>R_386_PC32</h1><p>å…¬å¼ï¼šS+A-P</p><p>Sï¼šé‡å®šé¡¹ä¸­VALUEæˆå‘˜æ‰€æŒ‡ç¬¦å·çš„å†…å­˜åœ°å€</p><p>Aï¼šè¢«é‡å®šä½å¤„åŸå€¼ï¼Œè¡¨ç¤ºâ€è¢«é‡å®šä½å¤„â€ä¸â€ä¸‹ä¸€æ¡æŒ‡ä»¤â€çš„åç§»</p><p>Pï¼šè¢«é‡å®šä½å¤„çš„å†…å­˜åœ°å€</p><h1 id="R-386-GOTPC"><a href="#R-386-GOTPC" class="headerlink" title="R_386_GOTPC"></a>R_386_GOTPC</h1><p>å…¬å¼ï¼šGOT+A-P</p><p>GOTï¼šè¿è¡Œæ—¶ï¼Œ.gotæ®µçš„ç»“æŸåœ°å€</p><p>Aï¼šè¢«é‡å®šä½å¤„åŸå€¼ï¼Œè¡¨ç¤ºâ€è¢«é‡å®šä½å¤„â€åœ¨æœºå™¨ç ä¸­çš„åç§»</p><p>Pï¼šè¢«é‡å®šä½å¤„çš„å†…å­˜åœ°å€</p><h1 id="R-386-GOT32"><a href="#R-386-GOT32" class="headerlink" title="R_386_GOT32"></a>R_386_GOT32</h1><p>å…¬å¼ï¼šG</p><p>Gï¼šå¼•ç”¨ç¬¦å·çš„åœ°å€æŒ‡é’ˆï¼Œç›¸å¯¹äºGOTçš„åç§»</p><h1 id="R-386-GOLB-DAT"><a href="#R-386-GOLB-DAT" class="headerlink" title="R_386_GOLB_DAT"></a>R_386_GOLB_DAT</h1><p>å…¬å¼ï¼šS</p><p>Sï¼šé‡å®šé¡¹ä¸­VALUEæˆå‘˜æ‰€æŒ‡ç¬¦å·çš„å†…å­˜åœ°å€</p><p><img src="/2021/different-types-of-relocating/v2-376d67a7ee2bb4099394606848a7de08_r.jpg" alt="img"></p><h1 id="R-386-GOTOFF"><a href="#R-386-GOTOFF" class="headerlink" title="R_386_GOTOFF"></a>R_386_GOTOFF</h1><p>å…¬å¼ï¼šS-GOT </p><p>Sï¼šé‡å®šé¡¹ä¸­VALUEæˆå‘˜æ‰€æŒ‡ç¬¦å·çš„å†…å­˜åœ°å€ </p><p>GOTï¼šè¿è¡Œæ—¶ï¼Œ.gotæ®µçš„ç»“æŸåœ°å€</p><h1 id="R-386-PLT32"><a href="#R-386-PLT32" class="headerlink" title="R_386_PLT32"></a>R_386_PLT32</h1><p>å…¬å¼ï¼šL+A-P</p><p>Lï¼š&lt;é‡å®šé¡¹ä¸­VALUEæˆå‘˜æ‰€æŒ‡ç¬¦å·@plt&gt;çš„å†…å­˜åœ°å€</p><p>Aï¼šè¢«é‡å®šä½å¤„åŸå€¼ï¼Œè¡¨ç¤ºâ€è¢«é‡å®šä½å¤„â€ç›¸å¯¹äºâ€ä¸‹ä¸€æ¡æŒ‡ä»¤â€çš„åç§»</p><p>Pï¼šè¢«é‡å®šä½å¤„çš„å†…å­˜åœ°å€</p>]]></content>
    
    
    <summary type="html">&lt;p&gt;æ•´ç†32ä½elfæ ¼å¼ä¸­å¸¸è§çš„é‡å®šä½ç±»å‹çš„å«ä¹‰ä¸ç”¨æ³•ã€‚&lt;/p&gt;</summary>
    
    
    
    <category term="è®¡ç®—æœºç³»ç»Ÿ" scheme="https://www.fvolcano.red/categories/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%B3%BB%E7%BB%9F/"/>
    
    
    <category term="æ•´ç†" scheme="https://www.fvolcano.red/tags/%E6%95%B4%E7%90%86/"/>
    
  </entry>
  
  <entry>
    <title>PICï¼ˆä½ç½®æ— å…³ä»£ç ï¼‰çš„å®ç°</title>
    <link href="https://www.fvolcano.red/2021/why-we-need-PIC/"/>
    <id>https://www.fvolcano.red/2021/why-we-need-PIC/</id>
    <published>2021-05-30T13:27:52.000Z</published>
    <updated>2021-05-30T13:27:52.000Z</updated>
    
    <content type="html"><![CDATA[<p>In <a href="https://www.wikiwand.com/en/Computing">computing</a>, <strong>position-independent code</strong> (<strong>PIC</strong>) or <strong>position-independent executable</strong> (<strong>PIE</strong>) is a body of <a href="https://www.wikiwand.com/en/Machine_code">machine code</a> that, being placed somewhere in the <a href="https://www.wikiwand.com/en/Primary_memory">primary memory</a>, executes properly regardless of its <a href="https://www.wikiwand.com/en/Absolute_address">absolute address</a>.<a id="more"></a></p><h2 id="å‚è€ƒèµ„æ–™"><a href="#å‚è€ƒèµ„æ–™" class="headerlink" title="å‚è€ƒèµ„æ–™"></a>å‚è€ƒèµ„æ–™</h2><ol><li><a href="https://www.wikiwand.com/en/Position-independent_code">Position-independent code-wiki</a></li><li><a href="https://sa.sogou.com/sgsearch/sgs_tc_news.php?req=XJfILdCUU2TuOxZDyaoqZBTGiGQumUZMYP-S-WEG-a0=&user_type=1">æ·±å…¥ç†è§£ Linux ä½ç½®æ— å…³ä»£ç  PIC</a></li><li><a href="https://eli.thegreenplace.net/2011/11/03/position-independent-code-pic-in-shared-libraries">Position Independent Code (PIC) in shared libraries</a></li><li><a href="https://juejin.cn/post/6844903609558106125">ç¨å¾®äº†è§£åœ°å€æ— å…³ä»£ç (Position-Independent Code)</a></li><li><a href="https://www.anquanke.com/post/id/197214">æµ…è°ˆä½ç½®æ— å…³ä»£ç </a></li><li><a href="https://dirtysalt.github.io/html/pic-code.html">ã€Šæ·±å…¥ç†è§£è®¡ç®—æœºç³»ç»Ÿã€‹- PIC(ä½ç½®æ— å…³ä»£ç )</a></li><li><a href="https://www.icourse163.org/course/NJU-1001625001">MOOC-è®¡ç®—æœºç³»ç»ŸåŸºç¡€(ä¸€)ï¼šç¨‹åºçš„è¡¨ç¤ºã€è½¬æ¢ä¸é“¾æ¥</a></li><li><a href="https://www.cnblogs.com/Przz/p/6505917.html">æ·±å…¥ç†è§£-ä½ç½®æ— å…³ä»£ç </a></li></ol><p>æ²¡æœ‰å¼€å¯åœ°å€éšæœºåŒ–(ASLR - Address Space Layout Randomization)æ—¶ï¼Œç³»ç»Ÿä¸ä¼šéšæœºåŒ–åˆ†é…ç¨‹åºçš„è™šæ‹Ÿåœ°å€ç©ºé—´ï¼Œç¨‹åºæ‰€æœ‰çš„åœ°å€éƒ½æ˜¯æŒ‰ç…§å›ºå®šçš„è§„åˆ™æ¥ç”Ÿæˆã€‚é€šè¿‡objdumpå‘½ä»¤åæ±‡ç¼–åå¯ä»¥çœ‹åˆ°ï¼Œå¯¹äºå…¨å±€å˜é‡å’Œå‡½æ•°è°ƒç”¨çš„è®¿é—®ï¼Œæ±‡ç¼–æŒ‡ä»¤è·Ÿçš„åœ°å€éƒ½æ˜¯å›ºå®šçš„ï¼Œè¿™æ ·çš„ä»£ç æˆ‘ä»¬å°±ç§°å®ƒä¸ºä½ç½®ç›¸å…³çš„ã€‚</p><p>å›ºå®šåœ°å€çš„æ–¹å¼è™½ç„¶ç®€å•ï¼Œä½†æ˜¯æ— æ³•å®ç°ä¸€äº›é«˜çº§ç‰¹æ€§æ¯”å¦‚åŠ¨æ€åº“æ”¯æŒã€‚åŠ¨æ€åº“çš„ä»£ç ä¼šé€šè¿‡mmap()ç³»ç»Ÿè°ƒç”¨æ¥æ˜ å°„åˆ°è¿›ç¨‹çš„è™šæ‹Ÿåœ°å€ç©ºé—´ï¼Œä¸åŒçš„è¿›ç¨‹ä¸­ï¼ŒåŒä¸€ä¸ªåŠ¨æ€åº“æ˜ å°„çš„è™šæ‹Ÿåœ°å€æ˜¯ä¸ç¡®å®šçš„ã€‚å¦‚æœåŠ¨æ€åº“çš„å®ç°ä¸Šä½¿ç”¨ä½ç½®ç›¸å…³çš„ä»£ç ï¼Œåˆ™æ— æ³•è¾¾åˆ°å…¶ä»»æ„åœ°å€è¿è¡Œçš„ç›®çš„ï¼Œè¿™ç§æƒ…å†µä¸‹æˆ‘ä»¬å°±éœ€è¦å¼•å…¥ä½ç½®æ— å…³ä»£ç PICçš„æ¦‚å¿µäº†ã€‚</p><p><img src="/2021/why-we-need-PIC/t01b5c7da6c4d3168d7.png" alt="img"></p><p>PICï¼Œå…¨ç§°Position Independent Codeã€‚ä½ç½®æ— å…³ä»£ç æ˜¯æŒ‡ä»£ç æ— è®ºè¢«åŠ è½½åˆ°å“ªä¸ªåœ°å€ä¸Šéƒ½å¯ä»¥æ­£å¸¸æ‰§è¡Œã€‚gccé€‰é¡¹ä¸­æ·»åŠ -fPICä¼šäº§ç”Ÿç›¸å…³ä»£ç ã€‚</p><p>PICçš„åšæ³•æ˜¯è®©æŒ‡ä»¤éƒ¨åˆ†åšåˆ°åœ°å€æ— å…³ï¼Œæ‰€ä»¥å¯ä»¥è®©æ‰€æœ‰è¿›ç¨‹å…±äº«ä¸€ä»½ã€‚ä½†æ˜¯æ•°æ®éƒ¨åˆ†å¹¶ä¸åœ°å€æ— å…³ï¼Œè€Œæ˜¯è®©æ‰€æœ‰è¿›ç¨‹åœ¨åœ°å€ç©ºé—´ä¸­éƒ½äº§ç”Ÿä¸€ä»½å‰¯æœ¬ã€‚</p><p>æ‰€ä»¥ç›®æ ‡å°±æ˜¯å°±æ˜¯å®ç°æŒ‡ä»¤éƒ¨åˆ†çš„æ— å…³ï¼Œè€ŒæŒ‡ä»¤ä¸­å¯èƒ½ä¼šåŒ…å«å¯¹å†…éƒ¨å’Œå¤–éƒ¨çš„å‡½æ•°è°ƒç”¨ï¼Œä»¥åŠå†…éƒ¨å’Œå¤–éƒ¨çš„æ•°æ®è®¿é—®ï¼Œæ‰€ä»¥è¿™æ ·çš„åˆ’åˆ†å°±éœ€è¦è€ƒè™‘å››ç§æƒ…å†µã€‚</p><h2 id="PICçš„å®ç°"><a href="#PICçš„å®ç°" class="headerlink" title="PICçš„å®ç°"></a>PICçš„å®ç°</h2><p>å·²çŸ¥ï¼šå½“é“¾æ¥å™¨å°†å„ä¸ªç›®æ ‡æ–‡ä»¶çš„æ‰€æœ‰sectionç»„åˆåˆ°ä¸€èµ·çš„æ—¶å€™ï¼Œé“¾æ¥å™¨å®Œå…¨çŸ¥é“æ¯ä¸ªsectionçš„å¤§å°å’Œå®ƒä»¬ä¹‹é—´çš„ç›¸å¯¹ä½ç½®ã€‚å› æ­¤å¯ä»¥è®¡ç®—å‡ºåœ¨.TEXTæ®µå†…ä»»æ„ä¸€æ¡æŒ‡ä»¤ç›¸å¯¹äº.DATAæ®µèµ·å§‹åœ°å€çš„ç›¸å¯¹åç§»é‡ã€‚</p><h3 id="å¼•ç”¨æ¨¡å—å†…æ•°æ®"><a href="#å¼•ç”¨æ¨¡å—å†…æ•°æ®" class="headerlink" title="å¼•ç”¨æ¨¡å—å†…æ•°æ®"></a>å¼•ç”¨æ¨¡å—å†…æ•°æ®</h3><p>ç”±â€œå·²çŸ¥â€å¯å¾—ï¼Œå¦‚æœçŸ¥é“äº†å½“å‰æŒ‡ä»¤çš„åœ°å€ï¼Œé‚£ä¹ˆå°±å¯ä»¥è®¡ç®—å‡ºæ•°æ®æ®µçš„åœ°å€ã€‚X86å¹³å°ä¸Šæ²¡æœ‰è·å–å½“å‰æŒ‡ä»¤æŒ‡é’ˆå¯„å­˜å™¨IPçš„å€¼çš„æŒ‡ä»¤ï¼ˆX64ä¸Šå¯ä»¥ç›´æ¥è®¿é—®RIPï¼‰ï¼Œä½†å¯ä»¥é€šè¿‡ä¸€ä¸ªå°æŠ€å·§æ¥è·å–ï¼š</p><p><img src="/2021/why-we-need-PIC/image-20210531201257771.png" alt="image-20210531201257771"></p><p>è¿™æ®µä»£ç åœ¨å®é™…è¿è¡Œæ—¶ï¼Œä¼šæœ‰ä»¥ä¸‹çš„äº‹æƒ…å‘ç”Ÿï¼š</p><ul><li>å½“cpuæ‰§è¡Œ call STUBçš„æ—¶å€™ï¼Œä¼šå°†ä¸‹ä¸€æ¡æŒ‡ä»¤çš„åœ°å€ï¼ˆå³IPä¸­çš„å€¼ï¼‰ä¿å­˜åˆ°stackä¸Šï¼Œç„¶åè·³åˆ°æ ‡ç­¾STUBå¤„æ‰§è¡Œã€‚</li><li>STUBå¤„çš„æŒ‡ä»¤æ˜¯pop ebx,è¿™æ ·å°±å°† â€œpop ebxâ€è¿™æ¡æŒ‡ä»¤æ‰€åœ¨çš„åœ°å€ä»stackå¼¹å‡ºæ”¾åˆ°äº†ebxå¯„å­˜å™¨ä¸­ï¼Œè¿™æ ·å°±å¾—åˆ°äº†IPå¯„å­˜å™¨çš„å€¼ã€‚</li></ul><p>åœ¨çŸ¥é“äº†å½“å‰çš„ç»å¯¹åœ°å€åï¼Œæ ¹æ®å·²çŸ¥çš„åç§»é‡å°±å¯ä»¥å¾—åˆ°æ•°æ®æ®µä¸­æŸä¸ªå˜é‡çš„åœ°å€ã€‚</p><h3 id="å¼•ç”¨æ¨¡å—å†…å‡½æ•°"><a href="#å¼•ç”¨æ¨¡å—å†…å‡½æ•°" class="headerlink" title="å¼•ç”¨æ¨¡å—å†…å‡½æ•°"></a>å¼•ç”¨æ¨¡å—å†…å‡½æ•°</h3><h4 id="static-å‡½æ•°"><a href="#static-å‡½æ•°" class="headerlink" title="static å‡½æ•°"></a>static å‡½æ•°</h4><p>å¯¹è¿™ç§å‡½æ•°çš„è®¿é—®æ˜¯æœ€å®¹æ˜“è§£å†³çš„é—®é¢˜ï¼Œå› ä¸ºä¸€ä¸ªåŠ¨æ€åº“åœ¨ç¼–è¯‘æˆä¸€ä¸ªæ¨¡å—ä¹‹åï¼Œå…¶ä¸­çš„æŒ‡ä»¤ä¹‹é—´çš„ç›¸å¯¹ä½ç½®æ˜¯å›ºå®šçš„ï¼Œæ‰€ä»¥é€šè¿‡ä¸€ä¸ªç›¸å¯¹è·³è½¬æŒ‡ä»¤å³å¯è®¿é—®ã€‚</p><p><img src="/2021/why-we-need-PIC/1638d8862a2ef255" alt="img"></p><h4 id="å…¨å±€å‡½æ•°"><a href="#å…¨å±€å‡½æ•°" class="headerlink" title="å…¨å±€å‡½æ•°"></a>å…¨å±€å‡½æ•°</h4><p>å› ä¸ºä¸ºå…¨å±€å‡½æ•°ï¼Œæ‰€ä»¥è¦è€ƒè™‘ä¸€ä¸ªå«åšå…¨å±€ç¬¦å·ä»‹å…¥çš„é—®é¢˜ï¼Œä»€ä¹ˆæ˜¯å…¨å±€ç¬¦å·ä»‹å…¥å‘¢ï¼Ÿ</p><p>åœ¨Linuxä¸‹ï¼Œå½“åŠ¨æ€é“¾æ¥å™¨åŠ è½½ä¸€ä¸ªæ¨¡å—æ—¶ï¼Œéœ€è¦å°†è¿™ä¸ªæ¨¡å—çš„ç¬¦å·åŠ å…¥åˆ°å…¨å±€ç¬¦å·è¡¨ä¸­ï¼Œå¦‚æœæŸä¸ªè¦åŠ å…¥çš„ç¬¦å·åå·²ç»å­˜åœ¨æ—¶ï¼Œä¹Ÿå°±æ˜¯æ­¤æ—¶é‡å¤äº†ï¼Œè¿™æ—¶å€™ä¼šå¿½ç•¥è¿™æ¬¡çš„æ·»åŠ æ“ä½œï¼Œä»¥ç¬¬ä¸€æ¬¡å†³è®®çš„ç¬¦å·ä¸ºå‡†ï¼Œæœªæ¥è¿è¡ŒæœŸé—´è®¿é—®åˆ°è¿™ä¸ªç¬¦å·çš„æ‰€æœ‰æŒ‡ä»¤ï¼Œéƒ½ä¼šä½¿ç”¨ç¬¬ä¸€æ¬¡å†³è®®çš„ç¬¦å·ï¼Œè¿™æ—¶å€™æƒ…å†µå’Œä¸‹é¢çš„å¤–éƒ¨å‡½æ•°æƒ…å†µç›¸åŒã€‚</p><h3 id="å¼•ç”¨æ¨¡å—å¤–æ•°æ®"><a href="#å¼•ç”¨æ¨¡å—å¤–æ•°æ®" class="headerlink" title="å¼•ç”¨æ¨¡å—å¤–æ•°æ®"></a>å¼•ç”¨æ¨¡å—å¤–æ•°æ®</h3><p>å¯¹äºå¤–éƒ¨æ•°æ®çš„è®¿é—®ï¼Œæ˜¯é€šè¿‡å…¨å±€åç§»è¡¨global offset tableï¼ˆGOTï¼‰æ¥å®ç°çš„ã€‚</p><p>GOTæ˜¯ä¸€å¼ åœ¨data sectionä¸­ä¿å­˜çš„ä¸€å¼ è¡¨ï¼Œé‡Œé¢è®°å½•äº†å¾ˆå¤šåœ°å€å­—æ®µ (entry)ã€‚å‡è®¾ä¸€æ¡æŒ‡ä»¤æƒ³è¦å¼•ç”¨ä¸€ä¸ªå˜é‡ï¼Œå¹¶ä¸æ˜¯ç›´æ¥å»ç”¨ç»å¯¹åœ°å€ï¼Œè€Œæ˜¯å»å¼•ç”¨GOTé‡Œçš„ä¸€ä¸ªentryã€‚GOTè¡¨åœ¨data sectionä¸­çš„åœ°å€æ˜¯æ˜ç¡®çš„ï¼ŒGOTçš„entryåŒ…å«äº†å˜é‡çš„ç»å¯¹åœ°å€ã€‚</p><p><img src="/2021/why-we-need-PIC/image-20210531201310221-1622463190990.png" alt="image-20210531201310221"></p><p>ä½†æ˜¯è¿˜æœ‰ä¸€ä¸ªé—®é¢˜ï¼Œè¿™ä¸ªGOTè¡¨é‡Œå­˜å‚¨çš„entryå€¼åˆæ˜¯æ€ä¹ˆå˜æˆå®é™…çš„ç»å¯¹åœ°å€çš„å‘¢ï¼Ÿ</p><p>åŠ¨æ€åŠ è½½å™¨ä¼šè§£ærel.dynæ®µï¼Œå½“å®ƒçœ‹åˆ°é‡å®šå‘ç±»å‹ä¸ºR_386_GLOB_DATçš„æ—¶å€™ï¼Œä¼šå°†ç¬¦å·varå®é™…çš„åœ°å€å€¼æ›¿æ¢åˆ°è®°å½•çš„åç§»å¤„ã€‚</p><h3 id="å¼•ç”¨æ¨¡å—å¤–å‡½æ•°"><a href="#å¼•ç”¨æ¨¡å—å¤–å‡½æ•°" class="headerlink" title="å¼•ç”¨æ¨¡å—å¤–å‡½æ•°"></a>å¼•ç”¨æ¨¡å—å¤–å‡½æ•°</h3><p>ä¸æ•°æ®ä¸åŒï¼Œå› ä¸ºæœ‰æ–°ç‰¹æ€§ï¼šå»¶è¿Ÿç»‘å®šã€‚</p><p>å¯¹äºåŠ¨æ€åº“çš„å‡½æ•°æ¥è¯´ï¼Œåœ¨æ²¡æœ‰åŠ è½½åˆ°ç¨‹åºçš„åœ°å€ç©ºé—´å‰ï¼Œå‡½æ•°çš„å®é™…åœ°å€éƒ½æ˜¯æœªçŸ¥çš„ï¼ŒåŠ¨æ€åŠ è½½å™¨ä¼šå¤„ç†è¿™äº›é—®é¢˜ï¼Œè§£æå‡ºå®é™…åœ°å€çš„è¿‡ç¨‹,è¿™ä¸ªè¿‡ç¨‹ç§°ä¹‹ä¸ºç»‘å®šã€‚ç»‘å®šçš„åŠ¨ä½œä¼šæ¶ˆè€—ä¸€äº›æ—¶é—´ï¼Œå› ä¸ºåŠ è½½å™¨è¦é€šè¿‡ç‰¹æ®Šçš„æŸ¥è¡¨ã€æ›¿æ¢æ“ä½œã€‚</p><p>å¦‚æœåŠ¨æ€åº“æœ‰æˆç™¾ä¸Šåƒä¸ªå‡½æ•°æ¥å£ï¼Œè€Œå®é™…çš„è¿›ç¨‹åªç”¨åˆ°äº†å…¶ä¸­çš„å‡ åä¸ªæ¥å£ï¼Œå¦‚æœå…¨éƒ¨éƒ½åœ¨åŠ è½½çš„æ—¶å€™è¿›è¡Œç»‘å®šæ“ä½œï¼Œæ²¡æœ‰æ„ä¹‰å¹¶ä¸”éå¸¸è€—æ—¶ã€‚å› æ­¤æå‡ºäº†å»¶è¿Ÿç»‘å®šçš„æ¦‚å¿µï¼Œç¨‹åºåªæœ‰åœ¨ä½¿ç”¨åˆ°å¯¹åº”æ¥å£æ—¶æ‰å®æ—¶åœ°ç»‘å®šæ¥å£åœ°å€ã€‚</p><p>ä¸ºäº†å®ç°å»¶è¿Ÿç»‘å®šï¼Œå°±é¢å¤–å¢åŠ äº†ä¸€ä¸ªé—´æ¥è¡¨PLTï¼ˆè¿‡ç¨‹é“¾æ¥è¡¨ï¼‰ã€‚</p><p>PLTæ­é…GOTå®ç°å»¶è¿Ÿç»‘å®šçš„è¿‡ç¨‹å¦‚ä¸‹ï¼š</p><p><img src="/2021/why-we-need-PIC/image-20210531201757402.png" alt="image-20210531201757402"></p><p>é¦–å…ˆè·³åˆ°PLTè¡¨å¯¹åº”å‡½æ•°åœ°å€PLT[n],ç„¶åå–å‡ºGOTä¸­å¯¹åº”çš„entryã€‚GOT[n]é‡Œä¿å­˜äº†å®é™…è¦è·³è½¬çš„å‡½æ•°çš„åœ°å€ï¼Œé¦–æ¬¡æ‰§è¡Œæ—¶æ­¤å€¼ä¸ºPLT[n]çš„prepare resolverçš„åœ°å€ï¼Œè¿™é‡Œå‡†å¤‡äº†è¦è§£æçš„å‡½æ•°çš„ç›¸å…³å‚æ•°ï¼Œç„¶ååˆ°PLT[0]å¤„è°ƒç”¨resolverè¿›è¡Œè§£æã€‚</p><p>resolverå‡½æ•°ä¼šåšå‡ ä»¶äº‹æƒ…ï¼š</p><p>ï¼ˆ1ï¼‰è§£æå‡ºä»£ç æƒ³è¦è°ƒç”¨çš„funcå‡½æ•°çš„å®é™…åœ°å€A</p><p>ï¼ˆ2ï¼‰ç”¨å®é™…åœ°å€Aè¦†ç›–GOT[n]ä¿å­˜çš„plt_resolve_addrçš„å€¼</p><p>ï¼ˆ3ï¼‰è°ƒç”¨funcå‡½æ•°</p><p>åœ¨ä¹‹åçš„å‡½æ•°è°ƒç”¨ä¸­ï¼Œå°±ä¸éœ€è¦å†èµ°resolverè¿‡ç¨‹äº†ï¼š</p><p><img src="/2021/why-we-need-PIC/image-20210531201922015.png" alt="image-20210531201922015"></p>]]></content>
    
    
    <summary type="html">&lt;p&gt;In &lt;a href=&quot;https://www.wikiwand.com/en/Computing&quot;&gt;computing&lt;/a&gt;, &lt;strong&gt;position-independent code&lt;/strong&gt; (&lt;strong&gt;PIC&lt;/strong&gt;) or &lt;strong&gt;position-independent executable&lt;/strong&gt; (&lt;strong&gt;PIE&lt;/strong&gt;) is a body of &lt;a href=&quot;https://www.wikiwand.com/en/Machine_code&quot;&gt;machine code&lt;/a&gt; that, being placed somewhere in the &lt;a href=&quot;https://www.wikiwand.com/en/Primary_memory&quot;&gt;primary memory&lt;/a&gt;, executes properly regardless of its &lt;a href=&quot;https://www.wikiwand.com/en/Absolute_address&quot;&gt;absolute address&lt;/a&gt;.&lt;/p&gt;</summary>
    
    
    
    <category term="è®¡ç®—æœºç³»ç»Ÿ" scheme="https://www.fvolcano.red/categories/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%B3%BB%E7%BB%9F/"/>
    
    
    <category term="æ•´ç†" scheme="https://www.fvolcano.red/tags/%E6%95%B4%E7%90%86/"/>
    
  </entry>
  
  <entry>
    <title>ç¨‹åºæ€§èƒ½åˆ†æå·¥å…·Valgrindå’Œgprofçš„ä½¿ç”¨</title>
    <link href="https://www.fvolcano.red/2021/how-to-use-valgrind-and-gprof/"/>
    <id>https://www.fvolcano.red/2021/how-to-use-valgrind-and-gprof/</id>
    <published>2021-05-28T12:03:41.000Z</published>
    <updated>2021-05-28T12:03:41.000Z</updated>
    
    <content type="html"><![CDATA[<p>ç¨‹åºçš„æ€§èƒ½åˆ†æåœ¨åˆ¤æ–­é—®é¢˜å’Œæ”¹è¿›ä»£ç ä¸Šä½œç”¨å¾ˆå¤§ï¼ŒValgrindå’Œgprofæ˜¯ä¸¤ä¸ªå¾ˆæœ‰ç”¨çš„åˆ†æå·¥å…·ã€‚</p><a id="more"></a><h2 id="å‚è€ƒèµ„æ–™"><a href="#å‚è€ƒèµ„æ–™" class="headerlink" title="å‚è€ƒèµ„æ–™"></a>å‚è€ƒèµ„æ–™</h2><ol><li><a href="https://www.howtoing.com/how-to-install-and-use-profiling-tool-gprof">å¦‚ä½•åœ¨Linuxä¸Šå®‰è£…å’Œä½¿ç”¨åˆ†æå·¥å…·Gprof</a></li><li><a href="https://www.thegeekstuff.com/2012/08/gprof-tutorial/">GPROF Tutorial â€“ How to use Linux GNU GCC Profiling Tool</a></li><li><a href="https://blog.csdn.net/stanjiang2010/article/details/5655143">Linuxæ€§èƒ½è¯„æµ‹å·¥å…·ä¹‹ä¸€ï¼šgprofç¯‡</a></li><li><a href="https://zhuanlan.zhihu.com/p/149800013">valgrindè¯Šæ–­C/C++å†…å­˜æ³„æ¼</a></li><li><a href="https://blog.csdn.net/tissar/article/details/87194737">Valgrindè¯¦ç»†æ•™ç¨‹ï¼ˆ1ï¼‰ Memcheck</a></li><li><a href="https://www.cprogramming.com/debugging/valgrind.html">Using Valgrind to Find Memory Leaks and Invalid Memory Use</a></li></ol><h1 id="Valgrind"><a href="#Valgrind" class="headerlink" title="Valgrind"></a>Valgrind</h1><p><a href="http://www.it.uc3m.es/pbasanta/asng/course_notes/memory_profiler_en.html#memcheck_tool">å®˜æ–¹æ–‡æ¡£</a></p><h2 id="ç®€ä»‹"><a href="#ç®€ä»‹" class="headerlink" title="ç®€ä»‹"></a>ç®€ä»‹</h2><p>C/C++ä¸­å†…å­˜åˆ†é…ä¸ç®¡ç†æ˜¯ç¨‹åºå‘˜æ¯”è¾ƒå¤´ç–¼çš„äº‹æƒ…ï¼Œå¤§å‹çº¿ä¸Šä¸šåŠ¡ç³»ç»Ÿï¼Œç³»ç»Ÿå†…å­˜æ³„æ¼åˆ°ä¸€å®šç¨‹åºï¼Œå¯èƒ½ä¼šå› ä¸ºåˆ†é…ä¸åˆ°å†…å­˜è€Œå¯¼è‡´å®•æœºï¼Œåæœå¾ˆä¸¥é‡ã€‚</p><p>valgrindå·¥å…·å¤§ä»¶æä¾›äº†è®¸å¤šè°ƒè¯•å’Œæ€§èƒ½åˆ†æå·¥å…·ï¼ŒåŒ…å«åŒ…å«ä¸ƒä¸ªç”Ÿäº§è´¨é‡å·¥å…·ï¼šä¸€ä¸ª<strong>å†…å­˜é”™è¯¯æ£€æµ‹å™¨</strong>ï¼Œä¸¤ä¸ªçº¿ç¨‹é”™è¯¯æ£€æµ‹å™¨ï¼Œä¸€ä¸ªç¼“å­˜å’Œåˆ†æ”¯é¢„æµ‹æ¢æŸ¥å™¨ï¼Œä¸€ä¸ªç”Ÿæˆè°ƒç”¨å›¾çš„ç¼“å­˜å’Œåˆ†æ”¯é¢„æµ‹æ¢æŸ¥å™¨ä»¥åŠä¸¤ä¸ªä¸åŒçš„å †æ¢æŸ¥å™¨ã€‚è¿˜åŒ…æ‹¬ä¸€ä¸ªå®éªŒæ€§çš„SimPointåŸºæœ¬å—çŸ¢é‡ç”Ÿæˆå™¨ã€‚</p><p>è¿™äº›å·¥å…·ä¸­æœ€æµè¡Œçš„ç§°ä¸ºMemcheckã€‚å®ƒå¯ä»¥æ£€æµ‹Cå’ŒC++ç¨‹åºä¸­å¸¸è§çš„è®¸å¤šä¸å†…å­˜ç›¸å…³çš„é”™è¯¯ï¼Œè¿™äº›é”™è¯¯å¯èƒ½å¯¼è‡´å´©æºƒå’Œä¸å¯é¢„æµ‹çš„è¡Œä¸ºã€‚å®é™…ä¸Šmemcheckä½¿ç”¨<strong>å®ƒè‡ªå·±çš„å†…å­˜åˆ†é…ä»£æ›¿æ ‡å‡†</strong>Cä¸­çš„å†…å­˜åˆ†é…ï¼ˆmallocå’Œfreeï¼‰ï¼Œå› æ­¤å¯ä»¥æ£€æµ‹å‡ºä¸€äº›å¼‚å¸¸ä¿¡æ¯ã€‚</p><p>Memcheckæ˜¯Valgrindçš„ç‹ç‰Œï¼Œå®ƒç”¨äºC/C++ç¨‹åºçš„å†…å­˜é”™è¯¯æ£€æµ‹ï¼š</p><ol><li>éæ³•è®¿é—®å†…å­˜ï¼ˆå †ã€æ ˆã€å†…å­˜æ®µé”™è¯¯ï¼‰</li><li>å¼•ç”¨æœªåˆå§‹åŒ–çš„å˜é‡</li><li>éæ³•é‡Šæ”¾å¯¹å†…å­˜ï¼ˆé‡å¤é‡Šæ”¾ã€é‡Šæ”¾ä¸ç”³è¯·ä¸åŒ¹é…ï¼‰</li><li>å†…å­˜é‡å é”™è¯¯</li><li>å†…å­˜æ³„éœ²</li><li>é”™è¯¯åœ°ç”³è¯·å†…å­˜</li><li>å†…å­˜æ ‘çš„åˆ†æ</li></ol><h2 id="ä½¿ç”¨"><a href="#ä½¿ç”¨" class="headerlink" title="ä½¿ç”¨"></a>ä½¿ç”¨</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">gcc -g -o main_c main.c</span><br><span class="line">valgrind --tool=memcheck --leak-check=full ./main_c</span><br></pre></td></tr></table></figure><p>â€“tools=memcheckè¡¨ç¤ºä½¿ç”¨memcheckå·¥å…·ï¼Œvalgrindé»˜è®¤çš„å·¥å…·ä¹Ÿæ˜¯è¿™ä¸ªï¼ŒåŠ ä¸åŠ éƒ½å¯ä»¥ã€‚</p><h2 id="ä¿¡æ¯"><a href="#ä¿¡æ¯" class="headerlink" title="ä¿¡æ¯"></a>ä¿¡æ¯</h2><ul><li><p>HEAP SUMMARYï¼Œå®ƒè¡¨ç¤ºç¨‹åºåœ¨å †ä¸Šåˆ†é…å†…å­˜çš„æƒ…å†µï¼Œ2 allocsè¡¨ç¤ºåˆ†é…äº†2æ¬¡å†…å­˜ï¼Œ0 freesè¡¨ç¤ºé‡Šæ”¾äº†0æ¬¡ï¼Œ72,714 bytes allocatedè¡¨ç¤ºåˆ†é…äº†72,714ä¸ªå­—èŠ‚</p></li><li><p>å¦‚æœæœ‰æ³„æ¼ï¼Œvalgrindä¼šæŠ¥å‘Šæ˜¯å“ªä¸ªä½ç½®å‘ç”Ÿäº†æ³„æ¼ï¼ˆmainä¸­cppç¬¬8è¡Œï¼‰</p></li><li><p>LEAK SUMMARYï¼Œè¡¨ç¤ºä¸åŒçš„å†…å­˜ä¸¢å¤±ç±»å‹</p></li><li><ul><li>definitely loss: ç¡®è®¤ä¸¢å¤±ï¼Œ<strong>éœ€ä¿®å¤</strong>å› ä¸ºåœ¨ç¨‹åºè¿è¡Œå®Œçš„æ—¶å€™ï¼Œæ²¡æœ‰æŒ‡é’ˆæŒ‡å‘å®ƒï¼ŒæŒ‡å‘å®ƒçš„æŒ‡é’ˆåœ¨ç¨‹åºä¸­ä¸¢å¤±äº†ï¼›</li><li>indirectly lost: é—´æ¥ä¸¢å¤±ï¼Œ<strong>æ— é¡»å¤„ç†</strong>ï¼Œå½“ä½¿ç”¨äº†å«æœ‰æŒ‡é’ˆæˆå‘˜çš„ç±»æˆ–ç»“æ„æ—¶å¯èƒ½ä¼šæŠ¥è¿™ä¸ªé”™è¯¯ã€‚è¿™ç±»é”™è¯¯æ— éœ€ç›´æ¥ä¿®å¤ï¼Œä»–ä»¬æ€»æ˜¯ä¸â€definitely lostâ€ä¸€èµ·å‡ºç°ï¼Œåªè¦ä¿®å¤â€definitely lostâ€å³å¯ï¼›</li><li>possibly lost: å¯èƒ½ä¸¢å¤±ï¼Œ<strong>éœ€ä¿®å¤</strong>ï¼Œå‘ç°äº†ä¸€ä¸ªæŒ‡å‘æŸå—å†…å­˜ä¸­éƒ¨çš„æŒ‡é’ˆï¼Œè€Œä¸æ˜¯æŒ‡å‘å†…å­˜å—å¤´éƒ¨ã€‚è¿™ç§æŒ‡é’ˆä¸€èˆ¬æ˜¯åŸå…ˆæŒ‡å‘å†…å­˜å—å¤´éƒ¨ï¼Œåæ¥ç§»åŠ¨åˆ°äº†å†…å­˜å—çš„ä¸­éƒ¨ï¼Œè¿˜æœ‰å¯èƒ½è¯¥æŒ‡é’ˆå’Œè¯¥å†…å­˜æ ¹æœ¬å°±æ²¡æœ‰å…³ç³»ï¼Œæ£€æµ‹å·¥å…·åªæ˜¯æ€€ç–‘æœ‰å†…å­˜æ³„æ¼ã€‚</li><li>still reachable: å¯ä»¥è®¿é—®ï¼Œéœ€ä¿®å¤ï¼Œæœªä¸¢å¤±ä½†ä¹Ÿæœªé‡Šæ”¾ã€‚å¦‚æœç¨‹åºæ˜¯æ­£å¸¸ç»“æŸçš„ï¼Œé‚£ä¹ˆå®ƒå¯èƒ½ä¸ä¼šé€ æˆç¨‹åºå´©æºƒã€‚è¡¨ç¤ºæ³„æ¼çš„å†…å­˜åœ¨ç¨‹åºè¿è¡Œå®Œçš„æ—¶å€™ï¼Œä»æ—§æœ‰æŒ‡é’ˆæŒ‡å‘å®ƒï¼Œå› è€Œï¼Œè¿™ç§å†…å­˜åœ¨ç¨‹åºè¿è¡Œç»“æŸä¹‹å‰å¯ä»¥é‡Šæ”¾ã€‚ä¸€èˆ¬æƒ…å†µä¸‹valgrindä¸ä¼šæŠ¥è¿™ç§æ³„æ¼ï¼Œé™¤éä½¿ç”¨äº†å‚æ•° â€“show-reachable=yesã€‚</li><li>suppressedï¼šå·²è¢«è§£å†³ï¼Œ<strong>æ— é¡»å¤„ç†</strong>ï¼Œå‡ºç°äº†å†…å­˜æ³„éœ²ä½†ç³»ç»Ÿè‡ªåŠ¨å¤„ç†äº†ï¼›å¯ä»¥æ— è§†è¿™ç±»é”™è¯¯ã€‚</li></ul></li></ul><h1 id="gprof"><a href="#gprof" class="headerlink" title="gprof"></a>gprof</h1><p><a href="https://ftp.gnu.org/old-gnu/Manuals/gprof-2.9.1/html_node/gprof_toc.html">å®˜æ–¹æ–‡æ¡£</a></p><h2 id="ç®€ä»‹-1"><a href="#ç®€ä»‹-1" class="headerlink" title="ç®€ä»‹"></a>ç®€ä»‹</h2><p>gprof æ˜¯GNU gnu binutilså·¥å…·ä¹‹ä¸€ï¼Œé»˜è®¤æƒ…å†µä¸‹linuxç³»ç»Ÿå½“ä¸­éƒ½å¸¦æœ‰è¿™ä¸ªå·¥å…·ã€‚</p><p>å®ƒå®é™…ä¸Šåªæ˜¯ä¸€ä¸ªç”¨äºè¯»å–profileç»“æœæ–‡ä»¶çš„å·¥å…·ã€‚å®ƒé‡‡ç”¨æ··åˆæ–¹æ³•æ¥æ”¶é›†ç¨‹åºçš„ç»Ÿè®¡ä¿¡æ¯ï¼Œä½¿ç”¨æ£€æµ‹æ–¹æ³•ï¼Œåœ¨ç¼–è¯‘è¿‡ç¨‹ä¸­åœ¨å‡½æ•°å…¥å£å¤„æ’å…¥è®¡æ•°å™¨ç”¨äºæ”¶é›†æ¯ä¸ªå‡½æ•°çš„è¢«è°ƒç”¨æƒ…å†µå’Œè¢«è°ƒç”¨æ¬¡æ•°ï¼›ä¹Ÿä½¿ç”¨é‡‡æ ·æ–¹æ³•ï¼Œåœ¨è¿è¡Œæ—¶æŒ‰ä¸€å®šé—´éš”å»æ£€æŸ¥ç¨‹åºè®¡æ•°å™¨å¹¶åœ¨åˆ†ææ—¶æ‰¾å‡ºç¨‹åºè®¡æ•°å™¨å¯¹åº”çš„å‡½æ•°æ¥ç»Ÿè®¡å‡½æ•°å ç”¨çš„æ—¶é—´ã€‚</p><h2 id="åŸç†"><a href="#åŸç†" class="headerlink" title="åŸç†"></a>åŸç†</h2><p>é€šè¿‡åœ¨ç¼–è¯‘å’Œé“¾æ¥ç¨‹åºçš„æ—¶å€™ï¼ˆä½¿ç”¨ -pg ç¼–è¯‘å’Œé“¾æ¥é€‰é¡¹ï¼‰ï¼Œgcc åœ¨ä½ åº”ç”¨ç¨‹åºçš„æ¯ä¸ªå‡½æ•°ä¸­éƒ½åŠ å…¥äº†ä¸€ä¸ªåä¸ºmcount ( or  â€œ_mcountâ€  , or  â€œ__mcountâ€ , ä¾èµ–äºç¼–è¯‘å™¨æˆ–æ“ä½œç³»ç»Ÿ)çš„å‡½æ•°ï¼Œä¹Ÿå°±æ˜¯è¯´ä½ çš„åº”ç”¨ç¨‹åºé‡Œçš„æ¯ä¸€ä¸ªå‡½æ•°éƒ½ä¼šè°ƒç”¨mcount, è€Œmcount ä¼šåœ¨å†…å­˜ä¸­ä¿å­˜ä¸€å¼ å‡½æ•°è°ƒç”¨å›¾ï¼Œå¹¶é€šè¿‡å‡½æ•°è°ƒç”¨å †æ ˆçš„å½¢å¼æŸ¥æ‰¾å­å‡½æ•°å’Œçˆ¶å‡½æ•°çš„åœ°å€ã€‚è¿™å¼ è°ƒç”¨å›¾ä¹Ÿä¿å­˜äº†æ‰€æœ‰ä¸å‡½æ•°ç›¸å…³çš„è°ƒç”¨æ—¶é—´ï¼Œè°ƒç”¨æ¬¡æ•°ç­‰ç­‰çš„æ‰€æœ‰ä¿¡æ¯ã€‚</p><h2 id="ä½¿ç”¨æµç¨‹"><a href="#ä½¿ç”¨æµç¨‹" class="headerlink" title="ä½¿ç”¨æµç¨‹"></a>ä½¿ç”¨æµç¨‹</h2><ol><li><p>åœ¨ç¼–è¯‘å’Œé“¾æ¥æ—¶ åŠ ä¸Š-pgé€‰é¡¹ã€‚ä¸€èˆ¬æˆ‘ä»¬å¯ä»¥åŠ åœ¨ makefile ä¸­ã€‚</p></li><li><p>æ‰§è¡Œç¼–è¯‘çš„äºŒè¿›åˆ¶ç¨‹åºã€‚æ‰§è¡Œå‚æ•°å’Œæ–¹å¼åŒä»¥å‰ã€‚</p></li><li><p>åœ¨ç¨‹åºè¿è¡Œç›®å½•ä¸‹ ç”Ÿæˆ gmon.out æ–‡ä»¶ã€‚å¦‚æœåŸæ¥æœ‰gmon.out æ–‡ä»¶ï¼Œå°†ä¼šè¢«é‡å†™ã€‚</p></li><li><p>ç»“æŸè¿›ç¨‹ã€‚è¿™æ—¶ gmon.out ä¼šå†æ¬¡è¢«åˆ·æ–°ã€‚</p></li><li><p>ç”¨ gprof å·¥å…·åˆ†æ gmon.out æ–‡ä»¶ã€‚</p></li></ol><p>ä¸€ç³»åˆ—å®Œæ•´çš„ä½¿ç”¨å‘½ä»¤ï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">gcc -Wall -std=c99 -pg test_gprof.c -o test_gprof</span><br><span class="line">./test_gprof</span><br><span class="line">gprof test_gprof gmon.out &gt; profile-data.txt</span><br></pre></td></tr></table></figure><h2 id="è¾“å‡ºä¿¡æ¯"><a href="#è¾“å‡ºä¿¡æ¯" class="headerlink" title="è¾“å‡ºä¿¡æ¯"></a>è¾“å‡ºä¿¡æ¯</h2><p>Gprofç”Ÿæˆçš„å¯è¯»è¾“å‡ºåˆ†ä¸ºä¸¤éƒ¨åˆ†ï¼šå¹³é¢é…ç½®æ–‡ä»¶å’Œè°ƒç”¨å›¾ã€‚ä»¥ä¸‹æ˜¯Gprofçš„æ‰‹å†Œé¡µé¢å…³äºè¿™ä¸¤ä¸ªéƒ¨åˆ†çš„ä¿¡æ¯ï¼š</p><p>â€œå¹³é¢é…ç½®æ–‡ä»¶æ˜¾ç¤ºäº†æ‚¨çš„ç¨‹åºåœ¨æ¯ä¸ªåŠŸèƒ½ä¸­èŠ±è´¹äº†å¤šå°‘æ—¶é—´ï¼Œä»¥åŠè°ƒç”¨å¤šå°‘æ¬¡åŠŸèƒ½ã€‚å¦‚æœæ‚¨åªæƒ³çŸ¥é“å“ªäº›åŠŸèƒ½å¯ä»¥çƒ§å½•å¤§éƒ¨åˆ†çš„å‘¨æœŸï¼Œé‚£ä¹ˆè¿™é‡Œå°±ç®€æ˜æ‰¼è¦ã€‚â€</p><p>â€œè°ƒç”¨å›¾æ˜¾ç¤ºäº†å¯¹äºæ¯ä¸ªå‡½æ•°ï¼Œè°ƒç”¨å“ªä¸ªå‡½æ•°ï¼Œå®ƒè°ƒç”¨äº†å“ªäº›å…¶ä»–å‡½æ•°ï¼Œä»¥åŠå¤šå°‘æ¬¡ã€‚è¿˜æœ‰ä¸€ä¸ªä¼°è®¡æ˜¯åœ¨æ¯ä¸ªå‡½æ•°çš„å­ä¾‹ç¨‹ä¸­èŠ±è´¹äº†å¤šå°‘æ—¶é—´ï¼Œè¿™å¯ä»¥å»ºè®®ä½ æ‰€åœ¨çš„åœ°æ–¹å¯èƒ½ä¼šå°è¯•æ¶ˆé™¤ä½¿ç”¨å¤§é‡æ—¶é—´çš„å‡½æ•°è°ƒç”¨ã€‚â€</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line">Flat profile:</span><br><span class="line"></span><br><span class="line">Each sample counts as 0.01 seconds.</span><br><span class="line"><span class="meta"> %</span><span class="bash">    cumulative self           self    total </span></span><br><span class="line"> time seconds    seconds calls  ms/call ms/call  name </span><br><span class="line"> 96.43 0.81      0.81      1    810.00  810.00   func3</span><br><span class="line"> 3.57 0.84       0.03      1    30.00   840.00   func1</span><br><span class="line"> 0.00 0.84       0.00      1    0.00    810.00   func2</span><br><span class="line"> 0.00 0.84       0.00      1    0.00    0.00     func4</span><br><span class="line"> </span><br><span class="line"> Call graph (explanation follows)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">granularity: each sample hit covers 4 byte(s) for 1.19% of 0.84 seconds</span><br><span class="line"></span><br><span class="line">index % time self children called name</span><br><span class="line">             0.03 0.81     1/1       main [2]</span><br><span class="line">[1]    100.0 0.03 0.81      1     func1 [1]</span><br><span class="line">             0.00 0.81     1/1       func2 [3]</span><br><span class="line">-----------------------------------------------</span><br><span class="line">                                     &lt;spontaneous&gt;</span><br><span class="line">[2]    100.0 0.00 0.84            main [2]</span><br><span class="line">             0.03 0.81     1/1       func1 [1]</span><br><span class="line">             0.00 0.00     1/1       func4 [5]</span><br><span class="line">-----------------------------------------------</span><br><span class="line">             0.00 0.81     1/1       func1 [1]</span><br><span class="line">[3]    96.4  0.00 0.81      1     func2 [3]</span><br><span class="line">             0.81 0.00     1/1       func3 [4]</span><br><span class="line">-----------------------------------------------</span><br><span class="line">             0.81 0.00     1/1       func2 [3]</span><br><span class="line">[4]    96.4  0.81 0.00      1      func3 [4]</span><br><span class="line">-----------------------------------------------</span><br><span class="line">             0.00 0.00     1/1       main [2]</span><br><span class="line">[5]    0.0   0.00 0.00      1      func4 [5]</span><br></pre></td></tr></table></figure><p><img src="/2021/how-to-use-valgrind-and-gprof/gprof-flat-profile.png" alt="img"></p>]]></content>
    
    
    <summary type="html">&lt;p&gt;ç¨‹åºçš„æ€§èƒ½åˆ†æåœ¨åˆ¤æ–­é—®é¢˜å’Œæ”¹è¿›ä»£ç ä¸Šä½œç”¨å¾ˆå¤§ï¼ŒValgrindå’Œgprofæ˜¯ä¸¤ä¸ªå¾ˆæœ‰ç”¨çš„åˆ†æå·¥å…·ã€‚&lt;/p&gt;</summary>
    
    
    
    <category term="å·¥å…·" scheme="https://www.fvolcano.red/categories/%E5%B7%A5%E5%85%B7/"/>
    
    
    <category term="æ•´ç†" scheme="https://www.fvolcano.red/tags/%E6%95%B4%E7%90%86/"/>
    
  </entry>
  
  <entry>
    <title>defensive copying çš„ä¸ºä»€ä¹ˆå’Œæ€ä¹ˆåš</title>
    <link href="https://www.fvolcano.red/2021/how-to-implement-with-defensive-copying/"/>
    <id>https://www.fvolcano.red/2021/how-to-implement-with-defensive-copying/</id>
    <published>2021-05-27T13:59:57.000Z</published>
    <updated>2021-05-27T13:59:57.000Z</updated>
    
    <content type="html"><![CDATA[<p>defensive copying(ä¿æŠ¤æ€§æ‹·è´)æ˜¯åœ¨è½¯ä»¶å®ç°ä¸­å¸¸ä¼šç”¨åˆ°çš„æ¦‚å¿µï¼Œè¿™ç¯‡åšå®¢ä¸»è¦ä»‹ç»ä¸ºä»€ä¹ˆéœ€è¦ defensive copy å’Œå¦‚ä½•å®ç° defensive copyingã€‚</p><a id="more"></a><h2 id="å‚è€ƒèµ„æ–™ï¼š"><a href="#å‚è€ƒèµ„æ–™ï¼š" class="headerlink" title="å‚è€ƒèµ„æ–™ï¼š"></a>å‚è€ƒèµ„æ–™ï¼š</h2><ol><li><a href="https://www.baeldung.com/autovalue-defensive-copies">Defensive Copies for Collections Using AutoValue</a></li><li><a href="http://www.javapractices.com/topic/TopicAction.do?Id=15">Defensive copying</a></li><li><a href="https://www.wikiwand.com/en/Object_copying">Object copying-wiki</a></li></ol><h1 id="ä¸ºä»€ä¹ˆ"><a href="#ä¸ºä»€ä¹ˆ" class="headerlink" title="ä¸ºä»€ä¹ˆ"></a>ä¸ºä»€ä¹ˆ</h1><p>A class may have a mutable object as a field. There are two possible cases for how the state of a mutable object field can change:</p><ul><li>its state can be changed only by the native class - the native class <em>creates</em> the mutable object field, and is the only class which is directly aware of its existence</li><li>its state can be changed both by the native class and by its callers - the native class simply <em>points</em> to a mutable object which was created elsewhere</li></ul><p>Both cases are valid design choices, but you must be aware of which one is appropriate for each case.</p><p>If the mutable object fieldâ€™s state should be changed only by the native class, then a <em>defensive copy</em> of the mutable object <em>must</em> be made any time itâ€™s passed into (constructors and <code>set</code> methods) or out of (<code>get</code> methods) the class. If this is <em>not</em> done, then itâ€™s simple for the caller to break encapsulation, by changing the state of an object which is simultaneously visible to <em>both</em> the class and its caller.</p><h2 id="å‚æ•°å¼•ç”¨"><a href="#å‚æ•°å¼•ç”¨" class="headerlink" title="å‚æ•°å¼•ç”¨"></a>å‚æ•°å¼•ç”¨</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Person</span> </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">final</span> String name;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">final</span> List&lt;String&gt; favoriteMovies;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// accessors, constructor, toString, equals, hashcode omitted</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> favoriteMovies = <span class="keyword">new</span> ArrayList&lt;String&gt;();</span><br><span class="line">favoriteMovies.add(<span class="string">&quot;Clerks&quot;</span>); <span class="comment">// fine</span></span><br><span class="line"><span class="keyword">var</span> person = <span class="keyword">new</span> Person(<span class="string">&quot;Katy&quot;</span>, favoriteMovies);</span><br><span class="line">favoriteMovies.add(<span class="string">&quot;Dogma&quot;</span>); <span class="comment">// oh, no!</span></span><br></pre></td></tr></table></figure><h2 id="è¿”å›å€¼å¼•ç”¨"><a href="#è¿”å›å€¼å¼•ç”¨" class="headerlink" title="è¿”å›å€¼å¼•ç”¨"></a>è¿”å›å€¼å¼•ç”¨</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">EmailMessage msg = ...</span><br><span class="line">Date d = msg.getDate();</span><br><span class="line">d.setTime(d.getTime()+<span class="number">12345</span>); <span class="comment">// Changes the date inside msg</span></span><br></pre></td></tr></table></figure><h1 id="æ€ä¹ˆåš"><a href="#æ€ä¹ˆåš" class="headerlink" title="æ€ä¹ˆåš"></a>æ€ä¹ˆåš</h1><p>defensive copying æœ‰æ—¶å€™ä¹Ÿè¢«å«åš â€œobject copyingâ€ï¼Œä»è¿™ä¸ªåå­—å¯ä»¥çœ‹å‡ºå®ƒçš„åšæ³•â€”â€”æ‹·è´ä¸€ä¸ªå¯¹è±¡ã€‚</p><h2 id="å‚æ•°ä¿æŠ¤"><a href="#å‚æ•°ä¿æŠ¤" class="headerlink" title="å‚æ•°ä¿æŠ¤"></a>å‚æ•°ä¿æŠ¤</h2><p>Because Javaâ€™s standard collection types may be mutable, the immutable <em>Person</em> type must protect itself from callers who would modify the <em>favoriteMovies</em> list after creating a new <em>Person</em>:</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="title">Person</span><span class="params">(String name, List&lt;String&gt; favoriteMovies)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">this</span>.name = name;</span><br><span class="line">    <span class="keyword">this</span>.favoriteMovies = List.copyOf(favoriteMovies);</span><br><span class="line">    <span class="comment">// or </span></span><br><span class="line">    <span class="comment">// this.favoriteMovies = Collections.unmodifiableList(new ArrayList&lt;&gt;(favoriteMovies));</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>The <em>Person</em> class must make a defensive copy of the <em>favoriteMovies</em> collection. By doing so, the <em>Person</em> class captures the state of the <em>favoriteMovies</em> list as it existed when the <em>Person</em> was created.</p><h2 id="è¿”å›å€¼ä¿æŠ¤"><a href="#è¿”å›å€¼ä¿æŠ¤" class="headerlink" title="è¿”å›å€¼ä¿æŠ¤"></a>è¿”å›å€¼ä¿æŠ¤</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> Date <span class="title">getDate</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">new</span> Date(date.getTime());</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="å®Œæ•´ç¤ºä¾‹ç±»"><a href="#å®Œæ•´ç¤ºä¾‹ç±»" class="headerlink" title="å®Œæ•´ç¤ºä¾‹ç±»"></a>å®Œæ•´ç¤ºä¾‹ç±»</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.util.Date;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">* Planet is an immutable class, since there is no way to change</span></span><br><span class="line"><span class="comment">* its state after construction.</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">final</span> <span class="class"><span class="keyword">class</span> <span class="title">Planet</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="keyword">public</span> <span class="title">Planet</span> <span class="params">(<span class="keyword">double</span> mass, String name, Date dateOfDiscovery)</span> </span>&#123;</span><br><span class="line">     <span class="keyword">this</span>.mass = mass;</span><br><span class="line">     <span class="keyword">this</span>.name = name;</span><br><span class="line">     <span class="comment">//make a private copy of aDateOfDiscovery</span></span><br><span class="line">     <span class="comment">//this is the only way to keep the fDateOfDiscovery</span></span><br><span class="line">     <span class="comment">//field private, and shields this class from any changes that </span></span><br><span class="line">     <span class="comment">//the caller may make to the original aDateOfDiscovery object</span></span><br><span class="line">     <span class="keyword">this</span>.dateOfDiscovery = <span class="keyword">new</span> Date(dateOfDiscovery.getTime());</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">/**</span></span><br><span class="line"><span class="comment">  * Returns a primitive value.</span></span><br><span class="line"><span class="comment">  *</span></span><br><span class="line"><span class="comment">  * The caller can do whatever they want with the return value, without </span></span><br><span class="line"><span class="comment">  * affecting the internals of this class. Why? Because this is a primitive </span></span><br><span class="line"><span class="comment">  * value. The caller sees its &quot;own&quot; double that simply has the</span></span><br><span class="line"><span class="comment">  * same value as fMass.</span></span><br><span class="line"><span class="comment">  */</span></span><br><span class="line">  <span class="function"><span class="keyword">public</span> <span class="keyword">double</span> <span class="title">getMass</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> mass;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">/**</span></span><br><span class="line"><span class="comment">  * Returns an immutable object.</span></span><br><span class="line"><span class="comment">  *</span></span><br><span class="line"><span class="comment">  * The caller gets a direct reference to the internal field. But this is not </span></span><br><span class="line"><span class="comment">  * dangerous, since String is immutable and cannot be changed.</span></span><br><span class="line"><span class="comment">  */</span></span><br><span class="line">  <span class="function"><span class="keyword">public</span> String <span class="title">getName</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> name;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//  /**</span></span><br><span class="line"><span class="comment">//  * Returns a mutable object - likely bad style.</span></span><br><span class="line"><span class="comment">//  *</span></span><br><span class="line"><span class="comment">//  * The caller gets a direct reference to the internal field. This is usually dangerous, </span></span><br><span class="line"><span class="comment">//  * since the Date object state can be changed both by this class and its caller.</span></span><br><span class="line"><span class="comment">//  * That is, this class is no longer in complete control of dateOfDiscovery.</span></span><br><span class="line"><span class="comment">//  */</span></span><br><span class="line"><span class="comment">//  public Date getDateOfDiscovery() &#123;</span></span><br><span class="line"><span class="comment">//    return dateOfDiscovery;</span></span><br><span class="line"><span class="comment">//  &#125;</span></span><br><span class="line"></span><br><span class="line">  <span class="comment">/**</span></span><br><span class="line"><span class="comment">  * Returns a mutable object - good style.</span></span><br><span class="line"><span class="comment">  * </span></span><br><span class="line"><span class="comment">  * Returns a defensive copy of the field.</span></span><br><span class="line"><span class="comment">  * The caller of this method can do anything they want with the</span></span><br><span class="line"><span class="comment">  * returned Date object, without affecting the internals of this</span></span><br><span class="line"><span class="comment">  * class in any way. Why? Because they do not have a reference to </span></span><br><span class="line"><span class="comment">  * fDate. Rather, they are playing with a second Date that initially has the </span></span><br><span class="line"><span class="comment">  * same data as fDate.</span></span><br><span class="line"><span class="comment">  */</span></span><br><span class="line">  <span class="function"><span class="keyword">public</span> Date <span class="title">getDateOfDiscovery</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">new</span> Date(dateOfDiscovery.getTime());</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// PRIVATE</span></span><br><span class="line"></span><br><span class="line">  <span class="comment">/**</span></span><br><span class="line"><span class="comment">  * Final primitive data is always immutable.</span></span><br><span class="line"><span class="comment">  */</span></span><br><span class="line">  <span class="keyword">private</span> <span class="keyword">final</span> <span class="keyword">double</span> mass;</span><br><span class="line"></span><br><span class="line">  <span class="comment">/**</span></span><br><span class="line"><span class="comment">  * An immutable object field. (String objects never change state.)</span></span><br><span class="line"><span class="comment">  */</span></span><br><span class="line">  <span class="keyword">private</span> <span class="keyword">final</span> String name;</span><br><span class="line"></span><br><span class="line">  <span class="comment">/**</span></span><br><span class="line"><span class="comment">  * A mutable object field. In this case, the state of this mutable field</span></span><br><span class="line"><span class="comment">  * is to be changed only by this class. (In other cases, it makes perfect</span></span><br><span class="line"><span class="comment">  * sense to allow the state of a field to be changed outside the native</span></span><br><span class="line"><span class="comment">  * class; this is the case when a field acts as a &quot;pointer&quot; to an object</span></span><br><span class="line"><span class="comment">  * created elsewhere.)</span></span><br><span class="line"><span class="comment">  *</span></span><br><span class="line"><span class="comment">  * java.util.Date is used here only because its convenient for illustrating </span></span><br><span class="line"><span class="comment">  * a point about mutable objects. In new code, you should use </span></span><br><span class="line"><span class="comment">  * java.time classes, not java.util.Date.</span></span><br><span class="line"><span class="comment">  */</span></span><br><span class="line">  <span class="keyword">private</span> <span class="keyword">final</span> Date dateOfDiscovery;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1 id="å…³äºæ·±æµ…æ‹·è´çš„è§£é‡Š"><a href="#å…³äºæ·±æµ…æ‹·è´çš„è§£é‡Š" class="headerlink" title="å…³äºæ·±æµ…æ‹·è´çš„è§£é‡Š"></a>å…³äºæ·±æµ…æ‹·è´çš„è§£é‡Š</h1><h3 id="Shallow-copy"><a href="#Shallow-copy" class="headerlink" title="Shallow copy"></a>Shallow copy</h3><p>One method of copying an object is the <em>shallow copy</em>. In that case a new object B is <a href="https://www.wikiwand.com/en/Object_creation">created</a>, and the fields values of A are copied over to B. This is also known as a <em>field-by-field copy</em>, <em>field-for-field copy</em>, or <em>field copy</em>. If the field value is a reference to an object (e.g., a memory address) it copies the reference, hence referring to the same object as A does, and if the field value is a primitive type it copies the value of the primitive type. In languages without primitive types (where everything is an object), all fields of the copy B are references to the same objects as the fields of original A. The referenced objects are thus <em>shared</em>, so if one of these objects is modified (from A or B), the change is visible in the other. Shallow copies are simple and typically cheap, as they can be usually implemented by simply copying the bits exactly.</p><h3 id="Deep-copy"><a href="#Deep-copy" class="headerlink" title="Deep copy"></a>Deep copy</h3><p>A deep copy in progress.</p><p><img src="/2021/how-to-implement-with-defensive-copying/400px-Deep_copy_in_progress.svg.png" alt="img"></p><p>A deep copy having been completed.</p><p><img src="/2021/how-to-implement-with-defensive-copying/400px-Deep_copy_done.svg.png" alt="img"></p><p>An alternative is a deep copy, meaning that fields are dereferenced: rather than references to objects being copied, new copy objects are created for any referenced objects, and references to these placed in B. The result is different from the result a shallow copy gives in that the objects referenced by the copy B are distinct from those referenced by A, and independent. Deep copies are more expensive, due to needing to create additional objects, and can be substantially more complicated, due to references possibly forming a complicated graph.</p><p>Deep copy is a process in which the copying process occurs recursively. It means first constructing a new collection object and then recursively populating it with copies of the child objects found in the original. In case of deep copy, a copy of object is copied in other object. It means that any changes made to a copy of object do not reflect in the original object. In python, this is implemented using â€œdeep copy()â€ function.</p><h1 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h1><p>ä¼ é€’å¼•ç”¨è¦è°¨æ…ï¼Œè‹¥è¯¥ç±»ä¸­çš„æŸä¸ªå­—æ®µæ˜¯mutableç±»å‹ï¼Œä½†éœ€æ±‚ä¸ºä¸èƒ½æ›´æ”¹ï¼Œé‚£ä¹ˆåº”è¯¥åœ¨å­—æ®µå‰åŠ ä¸Šfinalä¿®é¥°ï¼Œä¸”åœ¨æ„é€ å™¨å’Œgetterã€setterä¸­ä¼ é€çš„åº”è¯¥æ˜¯è¯¥å­—æ®µçš„æ‹·è´ã€‚</p><p>Defensive copying helps encapsulation as it mitigates escape of fields through the getters methods. Defensive copying creates a copy every time and thus you can end up with too many copying of something. This can strain the memory management (the garbage collector) and can have a negative effects on the whole application performance. With that said, it is quite effective and simple to implement. Prevention is better than cure, but in cases where we cannot change the types, defensive copying can step in and save the day.</p>]]></content>
    
    
    <summary type="html">&lt;p&gt;defensive copying(ä¿æŠ¤æ€§æ‹·è´)æ˜¯åœ¨è½¯ä»¶å®ç°ä¸­å¸¸ä¼šç”¨åˆ°çš„æ¦‚å¿µï¼Œè¿™ç¯‡åšå®¢ä¸»è¦ä»‹ç»ä¸ºä»€ä¹ˆéœ€è¦ defensive copy å’Œå¦‚ä½•å®ç° defensive copyingã€‚&lt;/p&gt;</summary>
    
    
    
    <category term="SoftwareConstruction" scheme="https://www.fvolcano.red/categories/SoftwareConstruction/"/>
    
    
    <category term="æ•´ç†" scheme="https://www.fvolcano.red/tags/%E6%95%B4%E7%90%86/"/>
    
  </entry>
  
  <entry>
    <title>how to write Test Strategy document</title>
    <link href="https://www.fvolcano.red/2021/how-to-write-test-strategy-document/"/>
    <id>https://www.fvolcano.red/2021/how-to-write-test-strategy-document/</id>
    <published>2021-05-27T13:59:15.000Z</published>
    <updated>2021-05-27T13:59:15.000Z</updated>
    
    <content type="html"><![CDATA[<p>Test strategy means â€œHow you are going to test the applicationâ€. It deals with test objectives, approach, test environment, automation strategy and tools, and risk analysis with a contingency plan.</p><a id="more"></a><p>å‚è€ƒèµ„æ–™ï¼š</p><ol><li><a href="https://www.softwaretestinghelp.com/writing-test-strategy-document-template/#:~:text=%20Simple%20Tips%20To%20Write%20Test%20Strategy%20Document,project.%20Clearly%2C%20mention%20what%20types%20of...%20More">How To Write Test Strategy Document (With Sample Test Strategy Template)</a></li><li><a href="http://tryqa.com/what-is-test-strategy-types-of-strategies-with-examples/">What is Test Strategy? Types of strategies with examples</a></li><li><a href="https://testfort.com/blog/7-steps-to-develop-good-test-strategy-document">7 Steps to Develop Good Test Strategy Document</a></li><li><a href="https://www.softwaretestinghelp.com/how-to-write-test-plan-document-software-testing-training-day3/">Test Plan Tutorial: A Guide To Write A Software Test Plan Document From Scratch</a></li></ol><h1 id="What"><a href="#What" class="headerlink" title="What"></a>What</h1><p>Test strategy means â€œHow you are going to test the application?â€ You need to mention the exact process/strategy that you are going to follow when you will get the application for testing.</p><p>test strategy defines guidelines for test approach to be followed in order to achieve the test objectives and execution of test types defined in the testing plan. It deals with test objectives, approach, test environment, automation strategy and tools, and risk analysis with a contingency plan.</p><h1 id="How"><a href="#How" class="headerlink" title="How"></a>How</h1><h2 id="Sections-of-test-strategy-document"><a href="#Sections-of-test-strategy-document" class="headerlink" title="Sections of test strategy document"></a>Sections of test strategy document</h2><ol><li><strong>Scope and overview</strong><br>This stage is fundamental as it shapes testing companyâ€™s vision. It includes:<ul><li>dividing roles and responsibilities, deciding who should approve, review and use this document;</li><li>defining phases of each project according to the timelines that are specified in the test plan.</li></ul></li><li><strong>Test Approach</strong><br>This step should be well-thought to avoid further mess in case something goes wrong. The main points to be considered at this stage are:<ul><li>testing process and life cycle;</li><li>distribution of responsibilities among the team of QA engineers;</li><li>defining all testing types that company can provide the client with;</li><li>establishing testing approaches.</li></ul></li><li><strong>Test environment</strong><br>This stage of Test Strategy document has to cover the next aspects regarding test data:<ul><li>requirements â€“ the clear instruction on how to create test data;</li><li>environments and all required setups for each of them;</li><li>backup and restore strategy to make sure you wonâ€™t lose any data due to some unexpected code issues.</li></ul></li><li><strong>Testing tools</strong><br>At this point you need to choose all the tools that will be used for test execution. All commercial, open source, automation and management tools have to be listed here.</li><li><strong>Realese</strong><br>To ensure successful test execution, make sure your release management plan is created thoughtfully. Thus, set a build management process to know where new build should be available, when itâ€™s going to be deployed, who should deploy it, how to stop release in case of issues, etc.</li><li><strong>Industry standards to follow</strong></li><li><strong>Test deliverables</strong></li><li><strong>Testing metrics</strong></li><li><strong>Requirement Traceability Matrix</strong></li><li><strong>Risk and mitigation</strong><br>Try to foresee all possible risks related to your project. Write a clear plan to avoid such risks and a contingency plan in case these risks become a reality.</li><li><strong>Reporting tool</strong></li><li><strong>Test summary</strong><br>The ready plan must be reviewed and approved by managers, technical team leaders, business development, and software development teams. Also Test Strategy document can be updated in case some important changes occur in the course of the testing process.</li></ol><h2 id="Simple-Tips-To-Write-Test-Strategy-Document"><a href="#Simple-Tips-To-Write-Test-Strategy-Document" class="headerlink" title="Simple Tips To Write Test Strategy Document"></a>Simple Tips To Write Test Strategy Document</h2><ol><li>Include product background in the test strategy document. In the first paragraph of your test strategy document answer â€“ Why stakeholders want to develop this project? This will help to understand and prioritize things quickly.</li><li>List all important features you are going to test. If you think some features are not part of this release then mention those features under â€œFeatures not to be testedâ€ label.</li><li>Write down the test approach for your project. Clearly, mention what types of testing you are going to conduct?<br>i.e. Functional testing, UI testing, Integration testing, Load/Stress testing, Security testing, etc.</li><li>Answer questions like how you are going to perform functional testing? Manual or automation testing? Are you going to execute all test cases from your test management tool?</li><li>Which bug tracking tool you are going to use? What will be the process when you will find a new bug?</li><li>What are your test entry and exit criteria?</li><li>How will you track your testing progress? What metrics are you going to use for tracking test completion?</li><li>Task distribution â€“ Define the roles and responsibilities of each team member.</li><li>What documents will you produce during and after the testing phase?</li><li>What risks do you see in Test completion?</li></ol>]]></content>
    
    
    <summary type="html">&lt;p&gt;Test strategy means â€œHow you are going to test the applicationâ€. It deals with test objectives, approach, test environment, automation strategy and tools, and risk analysis with a contingency plan.&lt;/p&gt;</summary>
    
    
    
    <category term="SoftwareConstruction" scheme="https://www.fvolcano.red/categories/SoftwareConstruction/"/>
    
    
    <category term="æ•´ç†" scheme="https://www.fvolcano.red/tags/%E6%95%B4%E7%90%86/"/>
    
  </entry>
  
  <entry>
    <title>å¦‚ä½•buildä¸€ä¸ªJavaé¡¹ç›®ï¼ˆMavenã€Gradleã€JDKã€Antã€Travis-CIï¼‰</title>
    <link href="https://www.fvolcano.red/2021/how-to-build-a-java-project/"/>
    <id>https://www.fvolcano.red/2021/how-to-build-a-java-project/</id>
    <published>2021-05-22T23:38:11.000Z</published>
    <updated>2021-05-22T23:38:11.000Z</updated>
    
    <content type="html"><![CDATA[<p>è„±ç¦»IDEï¼Œæœ¬åœ°ï¼ˆMavenã€Gradleã€JDKã€Antï¼‰/åœ¨çº¿ï¼ˆTravis-CIï¼‰build Javaé¡¹ç›®çš„æ­¥éª¤ã€‚<a id="more"></a></p><h1 id="JDK"><a href="#JDK" class="headerlink" title="JDK"></a>JDK</h1><ol><li><a href="https://www.dummies.com/programming/java/how-to-use-the-javac-command/">How to Use the javac Command</a></li><li><a href="https://www.softwaretestinghelp.com/multiple-ways-to-execute-junit-tests/">Multiple Ways To Execute JUnit Tests</a></li><li><a href="https://www.lambdatest.com/blog/run-junit-from-command-line/">How To Run Junit Tests From The Command Line</a></li></ol><h2 id="ç¼–è¯‘è¿è¡ŒJavaæ–‡ä»¶"><a href="#ç¼–è¯‘è¿è¡ŒJavaæ–‡ä»¶" class="headerlink" title="ç¼–è¯‘è¿è¡ŒJavaæ–‡ä»¶"></a>ç¼–è¯‘è¿è¡ŒJavaæ–‡ä»¶</h2><ul><li><p>If the Java file you specify on the command line contains a reference to another Java class thatâ€™s defined by a java file in the same folder, the Java compiler automatically compiles that class, too.</p></li><li><p>You can list more than one filename in the javac command.</p></li><li><p>You can use a wildcard to compile all the files in a folder, like this:</p><figure class="highlight nginx"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">javac</span> <span class="regexp">*.java</span></span><br></pre></td></tr></table></figure></li></ul><ol><li>javac MagicSquare.java</li></ol><p>é”™è¯¯: æ‰¾ä¸åˆ°æˆ–æ— æ³•åŠ è½½ä¸»ç±» MagicSquare</p><p>åŸå› : java æºæ–‡ä»¶ä¸­å¸¦æœ‰åŒ…åã€‚</p><p>è§£å†³æ–¹æ¡ˆ: javac ååŠ ä¸Šå®Œæ•´åŒ…åï¼Œè¿™éœ€è¦é€€å›åˆ°é€‚å½“çš„ç›®å½•ï¼š</p><figure class="highlight cmd"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">cd</span> ..</span><br><span class="line">javac P1/MagicSquare.java</span><br></pre></td></tr></table></figure><ol start="2"><li>java P1.MagicSquare</li></ol><h2 id="è¿è¡ŒJunit-Test-Case"><a href="#è¿è¡ŒJunit-Test-Case" class="headerlink" title="è¿è¡ŒJunit Test Case"></a>è¿è¡ŒJunit Test Case</h2><ol><li>ç¼–è¯‘ï¼šjavac -cp â€œjunit-4.12.jar;.â€  [P2/][JUnitProgramTest].javaï¼Œè¿˜æœ‰ä¾èµ–çš„å…¶ä»–å¤–éƒ¨åº“ä¹Ÿè¦å¸¦ä¸Šï¼Œç”¨åˆ†å·éš”å¼€ã€‚</li></ol><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">    Result result = JUnitCore.runClasses(JUnitProgramTest.class);</span><br><span class="line">    <span class="keyword">for</span> (Failure fail : result.getFailures()) &#123;</span><br><span class="line">        System.out.println(fail.toString());</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span> (result.wasSuccessful()) &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;All tests finished successfully...&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>The dot implies that:</strong></p><ul><li><p>The classpath already includes the current directory for the Java source files.</p></li><li><p>The JVM (Java Virtual Machine) automatically assumes that the current directory is where the source files are placed.</p></li><li><p>JVM then searches for the mentioned JUnit file name there. The filename is the last parameter given in the compile command.</p></li></ul><ol start="2"><li>è¿è¡Œï¼šjava -cp â€œjunit-4.12.jar;.â€ org.junit.runner.JUnitCore [P2/][JUnitProgramTest]</li></ol><h1 id="Maven"><a href="#Maven" class="headerlink" title="Maven"></a>Maven</h1><p><a href="https://spring.io/guides/gs/maven/">Building Java Projects with Maven</a></p><ol><li>å®‰è£…JDKå’ŒMavenï¼Œéƒ½æ·»åŠ åˆ°ç¯å¢ƒå˜é‡pathã€‚</li><li>åœ¨é¡¹ç›®æ ¹ç›®å½•ä¸­æ·»åŠ pom.xml</li></ol><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">project</span> <span class="attr">xmlns</span>=<span class="string">&quot;http://maven.apache.org/POM/4.0.0&quot;</span> <span class="attr">xmlns:xsi</span>=<span class="string">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span></span></span><br><span class="line"><span class="tag">  <span class="attr">xsi:schemaLocation</span>=<span class="string">&quot;http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">modelVersion</span>&gt;</span>4.0.0<span class="tag">&lt;/<span class="name">modelVersion</span>&gt;</span></span><br><span class="line"> </span><br><span class="line">  <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.mycompany.app<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>my-app<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.0-SNAPSHOT<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"> </span><br><span class="line">  <span class="tag">&lt;<span class="name">properties</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">maven.compiler.source</span>&gt;</span>1.7<span class="tag">&lt;/<span class="name">maven.compiler.source</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">maven.compiler.target</span>&gt;</span>1.7<span class="tag">&lt;/<span class="name">maven.compiler.target</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">properties</span>&gt;</span></span><br><span class="line"> </span><br><span class="line">  <span class="tag">&lt;<span class="name">dependencies</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- å¤–éƒ¨åº“ä¾èµ– --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>junit<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>junit<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">version</span>&gt;</span>4.12<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">scope</span>&gt;</span>test<span class="tag">&lt;/<span class="name">scope</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">dependencies</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">project</span>&gt;</span></span><br></pre></td></tr></table></figure><ol start="3"><li>mvn package</li></ol><p><img src="/2021/how-to-build-a-java-project/image-20210523085814285.png" alt="image-20210523085814285"></p><ol start="4"><li><p>java -cp target/lab1-1.0.jar P1.MagicSquare</p><p><img src="/2021/how-to-build-a-java-project/image-20210523095825922.png" alt="image-20210523095825922"></p></li></ol><p>Standard project structure:</p><figure class="highlight applescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">my</span>-app</span><br><span class="line">|<span class="comment">-- pom.xml</span></span><br><span class="line">`<span class="comment">-- src</span></span><br><span class="line">    |<span class="comment">-- main</span></span><br><span class="line">    |   `<span class="comment">-- java</span></span><br><span class="line">    |       `<span class="comment">-- com</span></span><br><span class="line">    |           `<span class="comment">-- mycompany</span></span><br><span class="line">    |               `<span class="comment">-- app</span></span><br><span class="line">    |                   `<span class="comment">-- App.java</span></span><br><span class="line">    `<span class="comment">-- test</span></span><br><span class="line">        `<span class="comment">-- java</span></span><br><span class="line">            `<span class="comment">-- com</span></span><br><span class="line">                `<span class="comment">-- mycompany</span></span><br><span class="line">                    `<span class="comment">-- app</span></span><br><span class="line">                        `<span class="comment">-- AppTest.java</span></span><br></pre></td></tr></table></figure><p>è‹¥ä¸ä½¿ç”¨è¿™æ ·çš„æ–‡ä»¶ç»“æ„ï¼Œéœ€è¦åœ¨pom.xmlæ–‡ä»¶ä¸­æŒ‡æ˜srcå’Œtestç›®å½•ä½ç½®ï¼š</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">project</span> <span class="attr">xmlns</span>=<span class="string">&quot;http://maven.apache.org/POM/4.0.0&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">xmlns:xsi</span>=<span class="string">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">xsi:schemaLocation</span>=<span class="string">&quot;http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd&quot;</span>&gt;</span></span><br><span class="line">true<span class="tag">&lt;<span class="name">modelVersion</span>&gt;</span>4.0.0<span class="tag">&lt;/<span class="name">modelVersion</span>&gt;</span></span><br><span class="line">true<span class="tag">&lt;<span class="name">groupId</span>&gt;</span>Lab1-1190200215<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">true<span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>Lab1<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">true<span class="tag">&lt;<span class="name">version</span>&gt;</span>1.0<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">true<span class="tag">&lt;<span class="name">name</span>&gt;</span>Lab1<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line">true<span class="tag">&lt;<span class="name">dependencies</span>&gt;</span></span><br><span class="line">truetrue<span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">truetruetrue<span class="tag">&lt;<span class="name">groupId</span>&gt;</span>junit<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">truetruetrue<span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>junit<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">truetruetrue<span class="tag">&lt;<span class="name">version</span>&gt;</span>4.13.1<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">truetruetrue<span class="tag">&lt;<span class="name">scope</span>&gt;</span>compile<span class="tag">&lt;/<span class="name">scope</span>&gt;</span></span><br><span class="line">truetrue<span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">true<span class="tag">&lt;/<span class="name">dependencies</span>&gt;</span></span><br><span class="line">true<span class="tag">&lt;<span class="name">build</span>&gt;</span></span><br><span class="line">truetrue<span class="tag">&lt;<span class="name">sourceDirectory</span>&gt;</span>src<span class="tag">&lt;/<span class="name">sourceDirectory</span>&gt;</span></span><br><span class="line">truetrue<span class="tag">&lt;<span class="name">testSourceDirectory</span>&gt;</span>test<span class="tag">&lt;/<span class="name">testSourceDirectory</span>&gt;</span></span><br><span class="line">truetrue<span class="tag">&lt;<span class="name">resources</span>&gt;</span></span><br><span class="line">truetruetrue<span class="tag">&lt;<span class="name">resource</span>&gt;</span></span><br><span class="line">truetruetruetrue<span class="tag">&lt;<span class="name">directory</span>&gt;</span>src<span class="tag">&lt;/<span class="name">directory</span>&gt;</span></span><br><span class="line">truetruetruetrue<span class="tag">&lt;<span class="name">excludes</span>&gt;</span></span><br><span class="line">truetruetruetruetrue<span class="tag">&lt;<span class="name">exclude</span>&gt;</span>**/*.java<span class="tag">&lt;/<span class="name">exclude</span>&gt;</span></span><br><span class="line">truetruetruetrue<span class="tag">&lt;/<span class="name">excludes</span>&gt;</span></span><br><span class="line">truetruetrue<span class="tag">&lt;/<span class="name">resource</span>&gt;</span></span><br><span class="line">truetrue<span class="tag">&lt;/<span class="name">resources</span>&gt;</span></span><br><span class="line">truetrue<span class="tag">&lt;<span class="name">plugins</span>&gt;</span></span><br><span class="line">truetruetrue<span class="tag">&lt;<span class="name">plugin</span>&gt;</span></span><br><span class="line">truetruetruetrue<span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>maven-compiler-plugin<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">truetruetruetrue<span class="tag">&lt;<span class="name">version</span>&gt;</span>3.7.0<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">truetruetruetrue<span class="tag">&lt;<span class="name">configuration</span>&gt;</span></span><br><span class="line">truetruetruetrue    <span class="tag">&lt;<span class="name">encoding</span>&gt;</span>utf-8<span class="tag">&lt;/<span class="name">encoding</span>&gt;</span></span><br><span class="line">truetruetruetruetrue<span class="tag">&lt;<span class="name">source</span>&gt;</span>1.8<span class="tag">&lt;/<span class="name">source</span>&gt;</span></span><br><span class="line">truetruetruetruetrue<span class="tag">&lt;<span class="name">target</span>&gt;</span>1.8<span class="tag">&lt;/<span class="name">target</span>&gt;</span></span><br><span class="line">truetruetruetrue<span class="tag">&lt;/<span class="name">configuration</span>&gt;</span></span><br><span class="line">truetruetrue<span class="tag">&lt;/<span class="name">plugin</span>&gt;</span></span><br><span class="line">truetrue<span class="tag">&lt;/<span class="name">plugins</span>&gt;</span></span><br><span class="line">true<span class="tag">&lt;/<span class="name">build</span>&gt;</span></span><br><span class="line">true<span class="tag">&lt;<span class="name">properties</span>&gt;</span></span><br><span class="line">         <span class="tag">&lt;<span class="name">project.build.sourceEncoding</span>&gt;</span></span><br><span class="line">             UTF-8</span><br><span class="line">         <span class="tag">&lt;/<span class="name">project.build.sourceEncoding</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">properties</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">project</span>&gt;</span></span><br><span class="line"></span><br></pre></td></tr></table></figure><p>é™„ï¼šPOM æ ‡ç­¾å¤§å…¨è¯¦è§£</p><h1 id="Gradle"><a href="#Gradle" class="headerlink" title="Gradle"></a>Gradle</h1><p><a href="https://docs.gradle.org/current/userguide/userguide.html">Gradle User Manual</a></p><ol><li>å½“ç„¶é¦–å…ˆè¿˜æ˜¯å®‰è£…ã€‚</li><li><code>gradle init</code></li></ol><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> gradle init</span></span><br><span class="line"></span><br><span class="line">Select type of project to generate:</span><br><span class="line">  1: basic</span><br><span class="line">  2: application</span><br><span class="line">  3: library</span><br><span class="line">  4: Gradle plugin</span><br><span class="line">Enter selection (default: basic) [1..4] 2</span><br><span class="line"></span><br><span class="line">Split functionality across multiple subprojects?:</span><br><span class="line">   1: no - only one application project</span><br><span class="line">   2: yes - application and library projects</span><br><span class="line">Enter selection (default: no - only one application project) [1..2] 2</span><br><span class="line"></span><br><span class="line">Select implementation language:</span><br><span class="line">  1: C++</span><br><span class="line">  2: Groovy</span><br><span class="line">  3: Java</span><br><span class="line">  4: Kotlin</span><br><span class="line">  5: Scala</span><br><span class="line">  6: Swift</span><br><span class="line">Enter selection (default: Java) [1..6] 3</span><br><span class="line"></span><br><span class="line">Select build script DSL:</span><br><span class="line">  1: Groovy</span><br><span class="line">  2: Kotlin</span><br><span class="line">Enter selection (default: Groovy) [1..2] 1</span><br><span class="line"></span><br><span class="line">Select test framework:</span><br><span class="line">  1: JUnit 4</span><br><span class="line">  2: TestNG</span><br><span class="line">  3: Spock</span><br><span class="line">  4: JUnit Jupiter</span><br><span class="line">Enter selection (default: JUnit 4) [1..4]</span><br><span class="line"></span><br><span class="line">Project name (default: demo):</span><br><span class="line">Source package (default: demo):</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">BUILD SUCCESSFUL</span><br><span class="line">2 actionable tasks: 2 executed</span><br></pre></td></tr></table></figure><ol start="3"><li>è¿è¡Œæµ‹è¯• <code>./gradlew check</code></li><li>è¿è¡Œ <code>./gradlew run</code></li><li>æ‰“åŒ…ï¼ˆå¯é€‰ï¼‰ <code>./gradlew build</code></li><li>ä¸Šä¼ ï¼ˆå¯é€‰ï¼‰ <code>./gradlew build --scan</code></li></ol><h2 id="Gradle-ä¸-Maven-çš„é€Ÿåº¦å¯¹æ¯”ï¼š"><a href="#Gradle-ä¸-Maven-çš„é€Ÿåº¦å¯¹æ¯”ï¼š" class="headerlink" title="Gradle ä¸ Maven çš„é€Ÿåº¦å¯¹æ¯”ï¼š"></a>Gradle ä¸ Maven çš„é€Ÿåº¦å¯¹æ¯”ï¼š</h2><p><img src="https://gradle.org/images/gradle-vs-maven.gif" alt="img"></p><p><a href="https://docs.gradle.org/current/userguide/migrating_from_maven.html#migrating_from_maven">Migrating Builds From Apache Maven</a></p><p>Here is a list of some of the main Maven phases and the Gradle tasks that they map to:</p><ul><li><p><code>clean</code></p><p>Use the <code>clean</code> task provided by the Base Plugin.</p></li><li><p><code>compile</code></p><p>Use the <code>classes</code> task provided by the <a href="https://docs.gradle.org/current/userguide/java_plugin.html#sec:java_tasks">Java Plugin</a> and other JVM language plugins. This compiles all classes for all source files of all languages and also performs <a href="https://docs.gradle.org/current/userguide/migrating_from_maven.html#migmvn:filtering_resources">resource filtering</a> via the <code>processResources</code> task.</p></li><li><p><code>test</code></p><p>Use the <code>test</code> task provided by the Java Plugin. It runs just the unit tests, or more specifically, the tests that make up the <a href="https://docs.gradle.org/current/userguide/java_plugin.html#source_sets"><code>test</code> source set</a>.</p></li><li><p><code>package</code></p><p>Use the <code>assemble</code> task provided by the Base Plugin. This builds whatever is the appropriate package for the project, for example a JAR for Java libraries or a WAR for traditional Java webapps.</p></li><li><p><code>verify</code></p><p>Use the <code>check</code> task provided by the Base Plugin. This runs all verification tasks that are attached to it, which typically includes the unit tests, any static analysis tasksâ€‰â€”â€‰such as <a href="https://docs.gradle.org/current/userguide/checkstyle_plugin.html#checkstyle_plugin">Checkstyle</a>â€‰â€”â€‰and others. If you want to include integration tests, you will have to <a href="https://docs.gradle.org/current/userguide/migrating_from_maven.html#migmvn:integration_tests">configure these manually</a>, which is a simple process.</p></li><li><p><code>install</code></p><p>Use the <code>publishToMavenLocal</code> task provided by the <a href="https://docs.gradle.org/current/userguide/publishing_maven.html#publishing_maven:tasks">Maven Publish Plugin</a>.Note that Gradle builds donâ€™t require you to â€œinstallâ€ artifacts as you have access to more appropriate features like <a href="https://docs.gradle.org/current/userguide/declaring_dependencies.html#sub:project_dependencies">inter-project dependencies</a> and <a href="https://docs.gradle.org/current/userguide/composite_builds.html#composite_builds">composite builds</a>. You should only use <code>publishToMavenLocal</code> for interoperating with Maven builds.Gradle also allows you to resolve dependencies against the local Maven cache, as described in the <a href="https://docs.gradle.org/current/userguide/migrating_from_maven.html#migmvn:declaring_repos">Declaring repositories</a> section.</p></li><li><p><code>deploy</code></p><p>Use the <code>publish</code> task provided by the <a href="https://docs.gradle.org/current/userguide/publishing_maven.html#publishing_maven:tasks">Maven Publish Plugin</a>â€‰â€”â€‰making sure you switch from the older Maven Plugin (ID: <code>maven</code>) if your build is using that one. This will publish your package to all configured publication repositories. There are also other tasks that allow you to publish to a single repository even when multiple ones are defined.Note that the Maven Publish Plugin does not publish <strong>source and Javadoc JARs</strong> <em>by default</em>, but this can easily be activated as explained in <a href="https://docs.gradle.org/current/userguide/building_java_projects.html#sec:java_packaging">the guide for building java projects</a>.</p></li></ul><h1 id="Ant"><a href="#Ant" class="headerlink" title="Ant"></a>Ant</h1><p><a href="https://ant.apache.org/manual/index.html">Ant Manual</a></p><p>example buildfile:</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">project</span> <span class="attr">name</span>=<span class="string">&quot;MyProject&quot;</span> <span class="attr">default</span>=<span class="string">&quot;dist&quot;</span> <span class="attr">basedir</span>=<span class="string">&quot;.&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">description</span>&gt;</span></span><br><span class="line">    simple example build file</span><br><span class="line">  <span class="tag">&lt;/<span class="name">description</span>&gt;</span></span><br><span class="line">  <span class="comment">&lt;!-- set global properties for this build --&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;src&quot;</span> <span class="attr">location</span>=<span class="string">&quot;src&quot;</span>/&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;build&quot;</span> <span class="attr">location</span>=<span class="string">&quot;build&quot;</span>/&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;dist&quot;</span> <span class="attr">location</span>=<span class="string">&quot;dist&quot;</span>/&gt;</span></span><br><span class="line"></span><br><span class="line">  <span class="tag">&lt;<span class="name">target</span> <span class="attr">name</span>=<span class="string">&quot;init&quot;</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- Create the time stamp --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">tstamp</span>/&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- Create the build directory structure used by compile --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">mkdir</span> <span class="attr">dir</span>=<span class="string">&quot;$&#123;build&#125;&quot;</span>/&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">target</span>&gt;</span></span><br><span class="line"></span><br><span class="line">  <span class="tag">&lt;<span class="name">target</span> <span class="attr">name</span>=<span class="string">&quot;compile&quot;</span> <span class="attr">depends</span>=<span class="string">&quot;init&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">description</span>=<span class="string">&quot;compile the source&quot;</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- Compile the Java code from $&#123;src&#125; into $&#123;build&#125; --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">javac</span> <span class="attr">srcdir</span>=<span class="string">&quot;$&#123;src&#125;&quot;</span> <span class="attr">destdir</span>=<span class="string">&quot;$&#123;build&#125;&quot;</span>/&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">target</span>&gt;</span></span><br><span class="line"></span><br><span class="line">  <span class="tag">&lt;<span class="name">target</span> <span class="attr">name</span>=<span class="string">&quot;dist&quot;</span> <span class="attr">depends</span>=<span class="string">&quot;compile&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">description</span>=<span class="string">&quot;generate the distribution&quot;</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- Create the distribution directory --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">mkdir</span> <span class="attr">dir</span>=<span class="string">&quot;$&#123;dist&#125;/lib&quot;</span>/&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!-- Put everything in $&#123;build&#125; into the MyProject-$&#123;DSTAMP&#125;.jar file --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">jar</span> <span class="attr">jarfile</span>=<span class="string">&quot;$&#123;dist&#125;/lib/MyProject-$&#123;DSTAMP&#125;.jar&quot;</span> <span class="attr">basedir</span>=<span class="string">&quot;$&#123;build&#125;&quot;</span>/&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">target</span>&gt;</span></span><br><span class="line"></span><br><span class="line">  <span class="tag">&lt;<span class="name">target</span> <span class="attr">name</span>=<span class="string">&quot;clean&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">description</span>=<span class="string">&quot;clean up&quot;</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- Delete the $&#123;build&#125; and $&#123;dist&#125; directory trees --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">delete</span> <span class="attr">dir</span>=<span class="string">&quot;$&#123;build&#125;&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">delete</span> <span class="attr">dir</span>=<span class="string">&quot;$&#123;dist&#125;&quot;</span>/&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">target</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">project</span>&gt;</span></span><br></pre></td></tr></table></figure><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line">ant [options] [target [target2 [target3] ...]]</span><br><span class="line">Options:</span><br><span class="line">  -help, -h              print this message and exit</span><br><span class="line">  -projecthelp, -p       print project help information and exit</span><br><span class="line">  -version               print the version information and exit</span><br><span class="line">  -diagnostics           print information that might be helpful to</span><br><span class="line">                         diagnose or report problems and exit</span><br><span class="line">  -quiet, -q             be extra quiet</span><br><span class="line">  -silent, -S            print nothing but task outputs and build failures</span><br><span class="line">  -verbose, -v           be extra verbose</span><br><span class="line">  -debug, -d             print debugging information</span><br><span class="line">  -emacs, -e             produce logging information without adornments</span><br><span class="line">  -lib &lt;path&gt;            specifies a path to search for jars and classes</span><br><span class="line">  -logfile &lt;file&gt;        use given file for log</span><br><span class="line">    -l     &lt;file&gt;                &#x27;&#x27;</span><br><span class="line">  -logger &lt;classname&gt;    the class which is to perform logging</span><br><span class="line">  -listener &lt;classname&gt;  add an instance of class as a project listener</span><br><span class="line">  -noinput               do not allow interactive input</span><br><span class="line">  -buildfile &lt;file&gt;      use given buildfile</span><br><span class="line">    -file    &lt;file&gt;              &#x27;&#x27;</span><br><span class="line">    -f       &lt;file&gt;              &#x27;&#x27;</span><br><span class="line">  -D&lt;property&gt;=&lt;value&gt;   use value for given property</span><br><span class="line">  -keep-going, -k        execute all targets that do not depend</span><br><span class="line">                         on failed target(s)</span><br><span class="line">  -propertyfile &lt;name&gt;   load all properties from file with -D</span><br><span class="line">                         properties taking precedence</span><br><span class="line">  -inputhandler &lt;class&gt;  the class which will handle input requests</span><br><span class="line">  -find &lt;file&gt;           (s)earch for buildfile towards the root of</span><br><span class="line">    -s  &lt;file&gt;           the filesystem and use it</span><br><span class="line">  -nice  number          A niceness value for the main thread:</span><br><span class="line">                         1 (lowest) to 10 (highest); 5 is the default</span><br><span class="line">  -nouserlib             Run ant without using the jar files from $&#123;user.home&#125;/.ant/lib</span><br><span class="line">  -noclasspath           Run ant without using CLASSPATH</span><br><span class="line">  -autoproxy             Java 5+ : use the OS proxies</span><br><span class="line">  -main &lt;class&gt;          override Ant&#x27;s normal entry point</span><br></pre></td></tr></table></figure><h1 id="Travis-CI"><a href="#Travis-CI" class="headerlink" title="Travis-CI"></a>Travis-CI</h1><p><a href="http://www.ruanyifeng.com/blog/2017/12/travis_ci_tutorial.html">æŒç»­é›†æˆæœåŠ¡ Travis CI æ•™ç¨‹</a></p><p><a href="https://docs.travis-ci.com/user/tutorial/">Travis CI Tutorial</a></p><p>é¡¹ç›®æ ¹ç›®å½•æ·»åŠ <code>.travis.yml</code>æ–‡ä»¶</p><p>pythoné¡¹ç›®ç¤ºä¾‹ï¼š</p><figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">language:</span> <span class="string">python</span></span><br><span class="line"><span class="attr">sudo:</span> <span class="string">required</span></span><br><span class="line"><span class="attr">before_install:</span> <span class="string">sudo</span> <span class="string">pip</span> <span class="string">install</span> <span class="string">foo</span></span><br><span class="line"><span class="attr">script:</span> <span class="string">bundle</span> <span class="string">exec</span> <span class="string">thor</span> <span class="string">build</span>  <span class="comment"># æŒ‡å®šæ„å»ºæˆ–æµ‹è¯•è„šæœ¬</span></span><br><span class="line"><span class="attr">install:</span> <span class="string">./install-dependencies.sh</span>  <span class="comment"># å®‰è£…æŒ‡å®šè„šæœ¬</span></span><br></pre></td></tr></table></figure><h1 id="POM-æ ‡ç­¾å¤§å…¨è¯¦è§£"><a href="#POM-æ ‡ç­¾å¤§å…¨è¯¦è§£" class="headerlink" title="POM æ ‡ç­¾å¤§å…¨è¯¦è§£"></a>POM æ ‡ç­¾å¤§å…¨è¯¦è§£</h1><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br><span class="line">244</span><br><span class="line">245</span><br><span class="line">246</span><br><span class="line">247</span><br><span class="line">248</span><br><span class="line">249</span><br><span class="line">250</span><br><span class="line">251</span><br><span class="line">252</span><br><span class="line">253</span><br><span class="line">254</span><br><span class="line">255</span><br><span class="line">256</span><br><span class="line">257</span><br><span class="line">258</span><br><span class="line">259</span><br><span class="line">260</span><br><span class="line">261</span><br><span class="line">262</span><br><span class="line">263</span><br><span class="line">264</span><br><span class="line">265</span><br><span class="line">266</span><br><span class="line">267</span><br><span class="line">268</span><br><span class="line">269</span><br><span class="line">270</span><br><span class="line">271</span><br><span class="line">272</span><br><span class="line">273</span><br><span class="line">274</span><br><span class="line">275</span><br><span class="line">276</span><br><span class="line">277</span><br><span class="line">278</span><br><span class="line">279</span><br><span class="line">280</span><br><span class="line">281</span><br><span class="line">282</span><br><span class="line">283</span><br><span class="line">284</span><br><span class="line">285</span><br><span class="line">286</span><br><span class="line">287</span><br><span class="line">288</span><br><span class="line">289</span><br><span class="line">290</span><br><span class="line">291</span><br><span class="line">292</span><br><span class="line">293</span><br><span class="line">294</span><br><span class="line">295</span><br><span class="line">296</span><br><span class="line">297</span><br><span class="line">298</span><br><span class="line">299</span><br><span class="line">300</span><br><span class="line">301</span><br><span class="line">302</span><br><span class="line">303</span><br><span class="line">304</span><br><span class="line">305</span><br><span class="line">306</span><br><span class="line">307</span><br><span class="line">308</span><br><span class="line">309</span><br><span class="line">310</span><br><span class="line">311</span><br><span class="line">312</span><br><span class="line">313</span><br><span class="line">314</span><br><span class="line">315</span><br><span class="line">316</span><br><span class="line">317</span><br><span class="line">318</span><br><span class="line">319</span><br><span class="line">320</span><br><span class="line">321</span><br><span class="line">322</span><br><span class="line">323</span><br><span class="line">324</span><br><span class="line">325</span><br><span class="line">326</span><br><span class="line">327</span><br><span class="line">328</span><br><span class="line">329</span><br><span class="line">330</span><br><span class="line">331</span><br><span class="line">332</span><br><span class="line">333</span><br><span class="line">334</span><br><span class="line">335</span><br><span class="line">336</span><br><span class="line">337</span><br><span class="line">338</span><br><span class="line">339</span><br><span class="line">340</span><br><span class="line">341</span><br><span class="line">342</span><br><span class="line">343</span><br><span class="line">344</span><br><span class="line">345</span><br><span class="line">346</span><br><span class="line">347</span><br><span class="line">348</span><br><span class="line">349</span><br><span class="line">350</span><br><span class="line">351</span><br><span class="line">352</span><br><span class="line">353</span><br><span class="line">354</span><br><span class="line">355</span><br><span class="line">356</span><br><span class="line">357</span><br><span class="line">358</span><br><span class="line">359</span><br><span class="line">360</span><br><span class="line">361</span><br><span class="line">362</span><br><span class="line">363</span><br><span class="line">364</span><br><span class="line">365</span><br><span class="line">366</span><br><span class="line">367</span><br><span class="line">368</span><br><span class="line">369</span><br><span class="line">370</span><br><span class="line">371</span><br><span class="line">372</span><br><span class="line">373</span><br><span class="line">374</span><br><span class="line">375</span><br><span class="line">376</span><br><span class="line">377</span><br><span class="line">378</span><br><span class="line">379</span><br><span class="line">380</span><br><span class="line">381</span><br><span class="line">382</span><br><span class="line">383</span><br><span class="line">384</span><br><span class="line">385</span><br><span class="line">386</span><br><span class="line">387</span><br><span class="line">388</span><br><span class="line">389</span><br><span class="line">390</span><br><span class="line">391</span><br><span class="line">392</span><br><span class="line">393</span><br><span class="line">394</span><br><span class="line">395</span><br><span class="line">396</span><br><span class="line">397</span><br><span class="line">398</span><br><span class="line">399</span><br><span class="line">400</span><br><span class="line">401</span><br><span class="line">402</span><br><span class="line">403</span><br><span class="line">404</span><br><span class="line">405</span><br><span class="line">406</span><br><span class="line">407</span><br><span class="line">408</span><br><span class="line">409</span><br><span class="line">410</span><br><span class="line">411</span><br><span class="line">412</span><br><span class="line">413</span><br><span class="line">414</span><br><span class="line">415</span><br><span class="line">416</span><br><span class="line">417</span><br><span class="line">418</span><br><span class="line">419</span><br><span class="line">420</span><br><span class="line">421</span><br><span class="line">422</span><br><span class="line">423</span><br><span class="line">424</span><br><span class="line">425</span><br><span class="line">426</span><br><span class="line">427</span><br><span class="line">428</span><br><span class="line">429</span><br><span class="line">430</span><br><span class="line">431</span><br><span class="line">432</span><br><span class="line">433</span><br><span class="line">434</span><br><span class="line">435</span><br><span class="line">436</span><br><span class="line">437</span><br><span class="line">438</span><br><span class="line">439</span><br><span class="line">440</span><br><span class="line">441</span><br><span class="line">442</span><br><span class="line">443</span><br><span class="line">444</span><br><span class="line">445</span><br><span class="line">446</span><br><span class="line">447</span><br><span class="line">448</span><br><span class="line">449</span><br><span class="line">450</span><br><span class="line">451</span><br><span class="line">452</span><br><span class="line">453</span><br><span class="line">454</span><br><span class="line">455</span><br><span class="line">456</span><br><span class="line">457</span><br><span class="line">458</span><br><span class="line">459</span><br><span class="line">460</span><br><span class="line">461</span><br><span class="line">462</span><br><span class="line">463</span><br><span class="line">464</span><br><span class="line">465</span><br><span class="line">466</span><br><span class="line">467</span><br><span class="line">468</span><br><span class="line">469</span><br><span class="line">470</span><br><span class="line">471</span><br><span class="line">472</span><br><span class="line">473</span><br><span class="line">474</span><br><span class="line">475</span><br><span class="line">476</span><br><span class="line">477</span><br><span class="line">478</span><br><span class="line">479</span><br><span class="line">480</span><br><span class="line">481</span><br><span class="line">482</span><br><span class="line">483</span><br><span class="line">484</span><br><span class="line">485</span><br><span class="line">486</span><br><span class="line">487</span><br><span class="line">488</span><br><span class="line">489</span><br><span class="line">490</span><br><span class="line">491</span><br><span class="line">492</span><br><span class="line">493</span><br><span class="line">494</span><br><span class="line">495</span><br><span class="line">496</span><br><span class="line">497</span><br><span class="line">498</span><br><span class="line">499</span><br><span class="line">500</span><br><span class="line">501</span><br><span class="line">502</span><br><span class="line">503</span><br><span class="line">504</span><br><span class="line">505</span><br><span class="line">506</span><br><span class="line">507</span><br><span class="line">508</span><br><span class="line">509</span><br><span class="line">510</span><br><span class="line">511</span><br><span class="line">512</span><br><span class="line">513</span><br><span class="line">514</span><br><span class="line">515</span><br><span class="line">516</span><br><span class="line">517</span><br><span class="line">518</span><br><span class="line">519</span><br><span class="line">520</span><br><span class="line">521</span><br><span class="line">522</span><br><span class="line">523</span><br><span class="line">524</span><br><span class="line">525</span><br><span class="line">526</span><br><span class="line">527</span><br><span class="line">528</span><br><span class="line">529</span><br><span class="line">530</span><br><span class="line">531</span><br><span class="line">532</span><br><span class="line">533</span><br><span class="line">534</span><br><span class="line">535</span><br><span class="line">536</span><br><span class="line">537</span><br><span class="line">538</span><br><span class="line">539</span><br><span class="line">540</span><br><span class="line">541</span><br><span class="line">542</span><br><span class="line">543</span><br><span class="line">544</span><br><span class="line">545</span><br><span class="line">546</span><br><span class="line">547</span><br><span class="line">548</span><br><span class="line">549</span><br><span class="line">550</span><br><span class="line">551</span><br><span class="line">552</span><br><span class="line">553</span><br><span class="line">554</span><br><span class="line">555</span><br><span class="line">556</span><br><span class="line">557</span><br><span class="line">558</span><br><span class="line">559</span><br><span class="line">560</span><br><span class="line">561</span><br><span class="line">562</span><br><span class="line">563</span><br><span class="line">564</span><br><span class="line">565</span><br><span class="line">566</span><br><span class="line">567</span><br><span class="line">568</span><br><span class="line">569</span><br><span class="line">570</span><br><span class="line">571</span><br><span class="line">572</span><br><span class="line">573</span><br><span class="line">574</span><br><span class="line">575</span><br><span class="line">576</span><br><span class="line">577</span><br><span class="line">578</span><br><span class="line">579</span><br><span class="line">580</span><br><span class="line">581</span><br><span class="line">582</span><br><span class="line">583</span><br><span class="line">584</span><br><span class="line">585</span><br><span class="line">586</span><br><span class="line">587</span><br><span class="line">588</span><br><span class="line">589</span><br><span class="line">590</span><br><span class="line">591</span><br><span class="line">592</span><br><span class="line">593</span><br><span class="line">594</span><br><span class="line">595</span><br><span class="line">596</span><br><span class="line">597</span><br><span class="line">598</span><br><span class="line">599</span><br><span class="line">600</span><br><span class="line">601</span><br><span class="line">602</span><br><span class="line">603</span><br><span class="line">604</span><br><span class="line">605</span><br><span class="line">606</span><br><span class="line">607</span><br><span class="line">608</span><br><span class="line">609</span><br><span class="line">610</span><br><span class="line">611</span><br><span class="line">612</span><br><span class="line">613</span><br><span class="line">614</span><br><span class="line">615</span><br><span class="line">616</span><br><span class="line">617</span><br><span class="line">618</span><br><span class="line">619</span><br><span class="line">620</span><br><span class="line">621</span><br><span class="line">622</span><br><span class="line">623</span><br><span class="line">624</span><br><span class="line">625</span><br><span class="line">626</span><br><span class="line">627</span><br><span class="line">628</span><br><span class="line">629</span><br><span class="line">630</span><br><span class="line">631</span><br><span class="line">632</span><br><span class="line">633</span><br><span class="line">634</span><br><span class="line">635</span><br><span class="line">636</span><br><span class="line">637</span><br><span class="line">638</span><br><span class="line">639</span><br><span class="line">640</span><br><span class="line">641</span><br><span class="line">642</span><br><span class="line">643</span><br><span class="line">644</span><br><span class="line">645</span><br><span class="line">646</span><br><span class="line">647</span><br><span class="line">648</span><br><span class="line">649</span><br><span class="line">650</span><br><span class="line">651</span><br><span class="line">652</span><br><span class="line">653</span><br><span class="line">654</span><br><span class="line">655</span><br><span class="line">656</span><br><span class="line">657</span><br><span class="line">658</span><br><span class="line">659</span><br><span class="line">660</span><br><span class="line">661</span><br><span class="line">662</span><br><span class="line">663</span><br><span class="line">664</span><br><span class="line">665</span><br><span class="line">666</span><br><span class="line">667</span><br><span class="line">668</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">project</span> <span class="attr">xmlns</span>=<span class="string">&quot;http://maven.apache.org/POM/4.0.0&quot;</span> <span class="attr">xmlns:xsi</span>=<span class="string">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">xsi:schemaLocation</span>=<span class="string">&quot;http://maven.apache.org/POM/4.0.0http://maven.apache.org/maven-v4_0_0.xsd&quot;</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--çˆ¶é¡¹ç›®çš„åæ ‡ã€‚å¦‚æœé¡¹ç›®ä¸­æ²¡æœ‰è§„å®šæŸä¸ªå…ƒç´ çš„å€¼ï¼Œé‚£ä¹ˆçˆ¶é¡¹ç›®ä¸­çš„å¯¹åº”å€¼å³ä¸ºé¡¹ç›®çš„é»˜è®¤å€¼ã€‚ åæ ‡åŒ…æ‹¬group IDï¼Œartifact IDå’Œ </span></span><br><span class="line"><span class="comment">        versionã€‚ --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">parent</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--è¢«ç»§æ‰¿çš„çˆ¶é¡¹ç›®çš„æ„ä»¶æ ‡è¯†ç¬¦ --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span> /&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--è¢«ç»§æ‰¿çš„çˆ¶é¡¹ç›®çš„å…¨çƒå”¯ä¸€æ ‡è¯†ç¬¦ --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span> /&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--è¢«ç»§æ‰¿çš„çˆ¶é¡¹ç›®çš„ç‰ˆæœ¬ --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">version</span> /&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- çˆ¶é¡¹ç›®çš„pom.xmlæ–‡ä»¶çš„ç›¸å¯¹è·¯å¾„ã€‚ç›¸å¯¹è·¯å¾„å…è®¸ä½ é€‰æ‹©ä¸€ä¸ªä¸åŒçš„è·¯å¾„ã€‚é»˜è®¤å€¼æ˜¯../pom.xmlã€‚Mavené¦–å…ˆåœ¨æ„å»ºå½“å‰é¡¹ç›®çš„åœ°æ–¹å¯»æ‰¾çˆ¶é¡¹ </span></span><br><span class="line"><span class="comment">            ç›®çš„pomï¼Œå…¶æ¬¡åœ¨æ–‡ä»¶ç³»ç»Ÿçš„è¿™ä¸ªä½ç½®ï¼ˆrelativePathä½ç½®ï¼‰ï¼Œç„¶ååœ¨æœ¬åœ°ä»“åº“ï¼Œæœ€ååœ¨è¿œç¨‹ä»“åº“å¯»æ‰¾çˆ¶é¡¹ç›®çš„pomã€‚ --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">relativePath</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">parent</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--å£°æ˜é¡¹ç›®æè¿°ç¬¦éµå¾ªå“ªä¸€ä¸ªPOMæ¨¡å‹ç‰ˆæœ¬ã€‚æ¨¡å‹æœ¬èº«çš„ç‰ˆæœ¬å¾ˆå°‘æ”¹å˜ï¼Œè™½ç„¶å¦‚æ­¤ï¼Œä½†å®ƒä»ç„¶æ˜¯å¿…ä¸å¯å°‘çš„ï¼Œè¿™æ˜¯ä¸ºäº†å½“Mavenå¼•å…¥äº†æ–°çš„ç‰¹æ€§æˆ–è€…å…¶ä»–æ¨¡å‹å˜æ›´çš„æ—¶å€™ï¼Œç¡®ä¿ç¨³å®šæ€§ã€‚ --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">modelVersion</span>&gt;</span>4.0.0<span class="tag">&lt;/<span class="name">modelVersion</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--é¡¹ç›®çš„å…¨çƒå”¯ä¸€æ ‡è¯†ç¬¦ï¼Œé€šå¸¸ä½¿ç”¨å…¨é™å®šçš„åŒ…ååŒºåˆ†è¯¥é¡¹ç›®å’Œå…¶ä»–é¡¹ç›®ã€‚å¹¶ä¸”æ„å»ºæ—¶ç”Ÿæˆçš„è·¯å¾„ä¹Ÿæ˜¯ç”±æ­¤ç”Ÿæˆï¼Œ å¦‚com.mycompany.appç”Ÿæˆçš„ç›¸å¯¹è·¯å¾„ä¸ºï¼š/com/mycompany/app --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>asia.banseon<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- æ„ä»¶çš„æ ‡è¯†ç¬¦ï¼Œå®ƒå’Œgroup IDä¸€èµ·å”¯ä¸€æ ‡è¯†ä¸€ä¸ªæ„ä»¶ã€‚æ¢å¥è¯è¯´ï¼Œä½ ä¸èƒ½æœ‰ä¸¤ä¸ªä¸åŒçš„é¡¹ç›®æ‹¥æœ‰åŒæ ·çš„artifact IDå’ŒgroupIDï¼›åœ¨æŸä¸ª </span></span><br><span class="line"><span class="comment">        ç‰¹å®šçš„group IDä¸‹ï¼Œartifact IDä¹Ÿå¿…é¡»æ˜¯å”¯ä¸€çš„ã€‚æ„ä»¶æ˜¯é¡¹ç›®äº§ç”Ÿçš„æˆ–ä½¿ç”¨çš„ä¸€ä¸ªä¸œè¥¿ï¼ŒMavenä¸ºé¡¹ç›®äº§ç”Ÿçš„æ„ä»¶åŒ…æ‹¬ï¼šJARsï¼Œæº ç ï¼ŒäºŒè¿›åˆ¶å‘å¸ƒå’ŒWARsç­‰ã€‚ --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>banseon-maven2<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--é¡¹ç›®äº§ç”Ÿçš„æ„ä»¶ç±»å‹ï¼Œä¾‹å¦‚jarã€warã€earã€pomã€‚æ’ä»¶å¯ä»¥åˆ›å»ºä»–ä»¬è‡ªå·±çš„æ„ä»¶ç±»å‹ï¼Œæ‰€ä»¥å‰é¢åˆ—çš„ä¸æ˜¯å…¨éƒ¨æ„ä»¶ç±»å‹ --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">packaging</span>&gt;</span>jar<span class="tag">&lt;/<span class="name">packaging</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--é¡¹ç›®å½“å‰ç‰ˆæœ¬ï¼Œæ ¼å¼ä¸º:ä¸»ç‰ˆæœ¬.æ¬¡ç‰ˆæœ¬.å¢é‡ç‰ˆæœ¬-é™å®šç‰ˆæœ¬å· --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.0-SNAPSHOT<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--é¡¹ç›®çš„åç§°, Mavenäº§ç”Ÿçš„æ–‡æ¡£ç”¨ --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">name</span>&gt;</span>banseon-maven<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--é¡¹ç›®ä¸»é¡µçš„URL, Mavenäº§ç”Ÿçš„æ–‡æ¡£ç”¨ --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">url</span>&gt;</span>http://www.baidu.com/banseon<span class="tag">&lt;/<span class="name">url</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- é¡¹ç›®çš„è¯¦ç»†æè¿°, Maven äº§ç”Ÿçš„æ–‡æ¡£ç”¨ã€‚ å½“è¿™ä¸ªå…ƒç´ èƒ½å¤Ÿç”¨HTMLæ ¼å¼æè¿°æ—¶ï¼ˆä¾‹å¦‚ï¼ŒCDATAä¸­çš„æ–‡æœ¬ä¼šè¢«è§£æå™¨å¿½ç•¥ï¼Œå°±å¯ä»¥åŒ…å«HTMLæ ‡ </span></span><br><span class="line"><span class="comment">        ç­¾ï¼‰ï¼Œ ä¸é¼“åŠ±ä½¿ç”¨çº¯æ–‡æœ¬æè¿°ã€‚å¦‚æœä½ éœ€è¦ä¿®æ”¹äº§ç”Ÿçš„webç«™ç‚¹çš„ç´¢å¼•é¡µé¢ï¼Œä½ åº”è¯¥ä¿®æ”¹ä½ è‡ªå·±çš„ç´¢å¼•é¡µæ–‡ä»¶ï¼Œè€Œä¸æ˜¯è°ƒæ•´è¿™é‡Œçš„æ–‡æ¡£ã€‚ --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">description</span>&gt;</span>A maven project to study maven.<span class="tag">&lt;/<span class="name">description</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--æè¿°äº†è¿™ä¸ªé¡¹ç›®æ„å»ºç¯å¢ƒä¸­çš„å‰ææ¡ä»¶ã€‚ --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">prerequisites</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--æ„å»ºè¯¥é¡¹ç›®æˆ–ä½¿ç”¨è¯¥æ’ä»¶æ‰€éœ€è¦çš„Mavençš„æœ€ä½ç‰ˆæœ¬ --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">maven</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">prerequisites</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--é¡¹ç›®çš„é—®é¢˜ç®¡ç†ç³»ç»Ÿ(Bugzilla, Jira, Scarab,æˆ–ä»»ä½•ä½ å–œæ¬¢çš„é—®é¢˜ç®¡ç†ç³»ç»Ÿ)çš„åç§°å’ŒURLï¼Œæœ¬ä¾‹ä¸º jira --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">issueManagement</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--é—®é¢˜ç®¡ç†ç³»ç»Ÿï¼ˆä¾‹å¦‚jiraï¼‰çš„åå­—ï¼Œ --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">system</span>&gt;</span>jira<span class="tag">&lt;/<span class="name">system</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--è¯¥é¡¹ç›®ä½¿ç”¨çš„é—®é¢˜ç®¡ç†ç³»ç»Ÿçš„URL --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">url</span>&gt;</span>http://jira.baidu.com/banseon<span class="tag">&lt;/<span class="name">url</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">issueManagement</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--é¡¹ç›®æŒç»­é›†æˆä¿¡æ¯ --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">ciManagement</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--æŒç»­é›†æˆç³»ç»Ÿçš„åå­—ï¼Œä¾‹å¦‚continuum --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">system</span> /&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--è¯¥é¡¹ç›®ä½¿ç”¨çš„æŒç»­é›†æˆç³»ç»Ÿçš„URLï¼ˆå¦‚æœæŒç»­é›†æˆç³»ç»Ÿæœ‰webæ¥å£çš„è¯ï¼‰ã€‚ --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">url</span> /&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--æ„å»ºå®Œæˆæ—¶ï¼Œéœ€è¦é€šçŸ¥çš„å¼€å‘è€…/ç”¨æˆ·çš„é…ç½®é¡¹ã€‚åŒ…æ‹¬è¢«é€šçŸ¥è€…ä¿¡æ¯å’Œé€šçŸ¥æ¡ä»¶ï¼ˆé”™è¯¯ï¼Œå¤±è´¥ï¼ŒæˆåŠŸï¼Œè­¦å‘Šï¼‰ --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">notifiers</span>&gt;</span></span><br><span class="line">            <span class="comment">&lt;!--é…ç½®ä¸€ç§æ–¹å¼ï¼Œå½“æ„å»ºä¸­æ–­æ—¶ï¼Œä»¥è¯¥æ–¹å¼é€šçŸ¥ç”¨æˆ·/å¼€å‘è€… --&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">notifier</span>&gt;</span></span><br><span class="line">                <span class="comment">&lt;!--ä¼ é€é€šçŸ¥çš„é€”å¾„ --&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">type</span> /&gt;</span></span><br><span class="line">                <span class="comment">&lt;!--å‘ç”Ÿé”™è¯¯æ—¶æ˜¯å¦é€šçŸ¥ --&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">sendOnError</span> /&gt;</span></span><br><span class="line">                <span class="comment">&lt;!--æ„å»ºå¤±è´¥æ—¶æ˜¯å¦é€šçŸ¥ --&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">sendOnFailure</span> /&gt;</span></span><br><span class="line">                <span class="comment">&lt;!--æ„å»ºæˆåŠŸæ—¶æ˜¯å¦é€šçŸ¥ --&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">sendOnSuccess</span> /&gt;</span></span><br><span class="line">                <span class="comment">&lt;!--å‘ç”Ÿè­¦å‘Šæ—¶æ˜¯å¦é€šçŸ¥ --&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">sendOnWarning</span> /&gt;</span></span><br><span class="line">                <span class="comment">&lt;!--ä¸èµæˆä½¿ç”¨ã€‚é€šçŸ¥å‘é€åˆ°å“ªé‡Œ --&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">address</span> /&gt;</span></span><br><span class="line">                <span class="comment">&lt;!--æ‰©å±•é…ç½®é¡¹ --&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">configuration</span> /&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">notifier</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">notifiers</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">ciManagement</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--é¡¹ç›®åˆ›å»ºå¹´ä»½ï¼Œ4ä½æ•°å­—ã€‚å½“äº§ç”Ÿç‰ˆæƒä¿¡æ¯æ—¶éœ€è¦ä½¿ç”¨è¿™ä¸ªå€¼ã€‚ --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">inceptionYear</span> /&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--é¡¹ç›®ç›¸å…³é‚®ä»¶åˆ—è¡¨ä¿¡æ¯ --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">mailingLists</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--è¯¥å…ƒç´ æè¿°äº†é¡¹ç›®ç›¸å…³çš„æ‰€æœ‰é‚®ä»¶åˆ—è¡¨ã€‚è‡ªåŠ¨äº§ç”Ÿçš„ç½‘ç«™å¼•ç”¨è¿™äº›ä¿¡æ¯ã€‚ --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">mailingList</span>&gt;</span></span><br><span class="line">            <span class="comment">&lt;!--é‚®ä»¶çš„åç§° --&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">name</span>&gt;</span>Demo<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line">            <span class="comment">&lt;!--å‘é€é‚®ä»¶çš„åœ°å€æˆ–é“¾æ¥ï¼Œå¦‚æœæ˜¯é‚®ä»¶åœ°å€ï¼Œåˆ›å»ºæ–‡æ¡£æ—¶ï¼Œmailto: é“¾æ¥ä¼šè¢«è‡ªåŠ¨åˆ›å»º --&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">post</span>&gt;</span>banseon@126.com<span class="tag">&lt;/<span class="name">post</span>&gt;</span></span><br><span class="line">            <span class="comment">&lt;!--è®¢é˜…é‚®ä»¶çš„åœ°å€æˆ–é“¾æ¥ï¼Œå¦‚æœæ˜¯é‚®ä»¶åœ°å€ï¼Œåˆ›å»ºæ–‡æ¡£æ—¶ï¼Œmailto: é“¾æ¥ä¼šè¢«è‡ªåŠ¨åˆ›å»º --&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">subscribe</span>&gt;</span>banseon@126.com<span class="tag">&lt;/<span class="name">subscribe</span>&gt;</span></span><br><span class="line">            <span class="comment">&lt;!--å–æ¶ˆè®¢é˜…é‚®ä»¶çš„åœ°å€æˆ–é“¾æ¥ï¼Œå¦‚æœæ˜¯é‚®ä»¶åœ°å€ï¼Œåˆ›å»ºæ–‡æ¡£æ—¶ï¼Œmailto: é“¾æ¥ä¼šè¢«è‡ªåŠ¨åˆ›å»º --&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">unsubscribe</span>&gt;</span>banseon@126.com<span class="tag">&lt;/<span class="name">unsubscribe</span>&gt;</span></span><br><span class="line">            <span class="comment">&lt;!--ä½ å¯ä»¥æµè§ˆé‚®ä»¶ä¿¡æ¯çš„URL --&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">archive</span>&gt;</span>http:/hi.baidu.com/banseon/demo/dev/<span class="tag">&lt;/<span class="name">archive</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">mailingList</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">mailingLists</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--é¡¹ç›®å¼€å‘è€…åˆ—è¡¨ --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">developers</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--æŸä¸ªé¡¹ç›®å¼€å‘è€…çš„ä¿¡æ¯ --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">developer</span>&gt;</span></span><br><span class="line">            <span class="comment">&lt;!--SCMé‡Œé¡¹ç›®å¼€å‘è€…çš„å”¯ä¸€æ ‡è¯†ç¬¦ --&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">id</span>&gt;</span>HELLO WORLD<span class="tag">&lt;/<span class="name">id</span>&gt;</span></span><br><span class="line">            <span class="comment">&lt;!--é¡¹ç›®å¼€å‘è€…çš„å…¨å --&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">name</span>&gt;</span>banseon<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line">            <span class="comment">&lt;!--é¡¹ç›®å¼€å‘è€…çš„email --&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">email</span>&gt;</span>banseon@126.com<span class="tag">&lt;/<span class="name">email</span>&gt;</span></span><br><span class="line">            <span class="comment">&lt;!--é¡¹ç›®å¼€å‘è€…çš„ä¸»é¡µçš„URL --&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">url</span> /&gt;</span></span><br><span class="line">            <span class="comment">&lt;!--é¡¹ç›®å¼€å‘è€…åœ¨é¡¹ç›®ä¸­æ‰®æ¼”çš„è§’è‰²ï¼Œè§’è‰²å…ƒç´ æè¿°äº†å„ç§è§’è‰² --&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">roles</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">role</span>&gt;</span>Project Manager<span class="tag">&lt;/<span class="name">role</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">role</span>&gt;</span>Architect<span class="tag">&lt;/<span class="name">role</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">roles</span>&gt;</span></span><br><span class="line">            <span class="comment">&lt;!--é¡¹ç›®å¼€å‘è€…æ‰€å±ç»„ç»‡ --&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">organization</span>&gt;</span>demo<span class="tag">&lt;/<span class="name">organization</span>&gt;</span></span><br><span class="line">            <span class="comment">&lt;!--é¡¹ç›®å¼€å‘è€…æ‰€å±ç»„ç»‡çš„URL --&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">organizationUrl</span>&gt;</span>http://hi.baidu.com/banseon<span class="tag">&lt;/<span class="name">organizationUrl</span>&gt;</span></span><br><span class="line">            <span class="comment">&lt;!--é¡¹ç›®å¼€å‘è€…å±æ€§ï¼Œå¦‚å³æ—¶æ¶ˆæ¯å¦‚ä½•å¤„ç†ç­‰ --&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">properties</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">dept</span>&gt;</span>No<span class="tag">&lt;/<span class="name">dept</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">properties</span>&gt;</span></span><br><span class="line">            <span class="comment">&lt;!--é¡¹ç›®å¼€å‘è€…æ‰€åœ¨æ—¶åŒºï¼Œ -11åˆ°12èŒƒå›´å†…çš„æ•´æ•°ã€‚ --&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">timezone</span>&gt;</span>-5<span class="tag">&lt;/<span class="name">timezone</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">developer</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">developers</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--é¡¹ç›®çš„å…¶ä»–è´¡çŒ®è€…åˆ—è¡¨ --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">contributors</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--é¡¹ç›®çš„å…¶ä»–è´¡çŒ®è€…ã€‚å‚è§developers/developerå…ƒç´  --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">contributor</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">name</span> /&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">email</span> /&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">url</span> /&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">organization</span> /&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">organizationUrl</span> /&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">roles</span> /&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">timezone</span> /&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">properties</span> /&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">contributor</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">contributors</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--è¯¥å…ƒç´ æè¿°äº†é¡¹ç›®æ‰€æœ‰Licenseåˆ—è¡¨ã€‚ åº”è¯¥åªåˆ—å‡ºè¯¥é¡¹ç›®çš„licenseåˆ—è¡¨ï¼Œä¸è¦åˆ—å‡ºä¾èµ–é¡¹ç›®çš„ licenseåˆ—è¡¨ã€‚å¦‚æœåˆ—å‡ºå¤šä¸ªlicenseï¼Œç”¨æˆ·å¯ä»¥é€‰æ‹©å®ƒä»¬ä¸­çš„ä¸€ä¸ªè€Œä¸æ˜¯æ¥å—æ‰€æœ‰licenseã€‚ --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">licenses</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--æè¿°äº†é¡¹ç›®çš„licenseï¼Œç”¨äºç”Ÿæˆé¡¹ç›®çš„webç«™ç‚¹çš„licenseé¡µé¢ï¼Œå…¶ä»–ä¸€äº›æŠ¥è¡¨å’Œvalidationä¹Ÿä¼šç”¨åˆ°è¯¥å…ƒç´ ã€‚ --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">license</span>&gt;</span></span><br><span class="line">            <span class="comment">&lt;!--licenseç”¨äºæ³•å¾‹ä¸Šçš„åç§° --&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">name</span>&gt;</span>Apache 2<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line">            <span class="comment">&lt;!--å®˜æ–¹çš„licenseæ­£æ–‡é¡µé¢çš„URL --&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">url</span>&gt;</span>http://www.baidu.com/banseon/LICENSE-2.0.txt<span class="tag">&lt;/<span class="name">url</span>&gt;</span></span><br><span class="line">            <span class="comment">&lt;!--é¡¹ç›®åˆ†å‘çš„ä¸»è¦æ–¹å¼ï¼š repoï¼Œå¯ä»¥ä»Mavenåº“ä¸‹è½½ manualï¼Œ ç”¨æˆ·å¿…é¡»æ‰‹åŠ¨ä¸‹è½½å’Œå®‰è£…ä¾èµ– --&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">distribution</span>&gt;</span>repo<span class="tag">&lt;/<span class="name">distribution</span>&gt;</span></span><br><span class="line">            <span class="comment">&lt;!--å…³äºlicenseçš„è¡¥å……ä¿¡æ¯ --&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">comments</span>&gt;</span>A business-friendly OSS license<span class="tag">&lt;/<span class="name">comments</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">license</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">licenses</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--SCM(Source Control Management)æ ‡ç­¾å…è®¸ä½ é…ç½®ä½ çš„ä»£ç åº“ï¼Œä¾›Maven webç«™ç‚¹å’Œå…¶å®ƒæ’ä»¶ä½¿ç”¨ã€‚ --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">scm</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--SCMçš„URL,è¯¥URLæè¿°äº†ç‰ˆæœ¬åº“å’Œå¦‚ä½•è¿æ¥åˆ°ç‰ˆæœ¬åº“ã€‚æ¬²çŸ¥è¯¦æƒ…ï¼Œè¯·çœ‹SCMsæä¾›çš„URLæ ¼å¼å’Œåˆ—è¡¨ã€‚è¯¥è¿æ¥åªè¯»ã€‚ --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">connection</span>&gt;</span></span><br><span class="line">            scm:svn:http://svn.baidu.com/banseon/maven/banseon/banseon-maven2-trunk(dao-trunk)</span><br><span class="line">        <span class="tag">&lt;/<span class="name">connection</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--ç»™å¼€å‘è€…ä½¿ç”¨çš„ï¼Œç±»ä¼¼connectionå…ƒç´ ã€‚å³è¯¥è¿æ¥ä¸ä»…ä»…åªè¯» --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">developerConnection</span>&gt;</span></span><br><span class="line">            scm:svn:http://svn.baidu.com/banseon/maven/banseon/dao-trunk</span><br><span class="line">        <span class="tag">&lt;/<span class="name">developerConnection</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--å½“å‰ä»£ç çš„æ ‡ç­¾ï¼Œåœ¨å¼€å‘é˜¶æ®µé»˜è®¤ä¸ºHEAD --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">tag</span> /&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--æŒ‡å‘é¡¹ç›®çš„å¯æµè§ˆSCMåº“ï¼ˆä¾‹å¦‚ViewVCæˆ–è€…Fisheyeï¼‰çš„URLã€‚ --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">url</span>&gt;</span>http://svn.baidu.com/banseon<span class="tag">&lt;/<span class="name">url</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">scm</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--æè¿°é¡¹ç›®æ‰€å±ç»„ç»‡çš„å„ç§å±æ€§ã€‚Mavenäº§ç”Ÿçš„æ–‡æ¡£ç”¨ --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">organization</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--ç»„ç»‡çš„å…¨å --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">name</span>&gt;</span>demo<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--ç»„ç»‡ä¸»é¡µçš„URL --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">url</span>&gt;</span>http://www.baidu.com/banseon<span class="tag">&lt;/<span class="name">url</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">organization</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--æ„å»ºé¡¹ç›®éœ€è¦çš„ä¿¡æ¯ --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">build</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--è¯¥å…ƒç´ è®¾ç½®äº†é¡¹ç›®æºç ç›®å½•ï¼Œå½“æ„å»ºé¡¹ç›®çš„æ—¶å€™ï¼Œæ„å»ºç³»ç»Ÿä¼šç¼–è¯‘ç›®å½•é‡Œçš„æºç ã€‚è¯¥è·¯å¾„æ˜¯ç›¸å¯¹äºpom.xmlçš„ç›¸å¯¹è·¯å¾„ã€‚ --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">sourceDirectory</span> /&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--è¯¥å…ƒç´ è®¾ç½®äº†é¡¹ç›®è„šæœ¬æºç ç›®å½•ï¼Œè¯¥ç›®å½•å’Œæºç ç›®å½•ä¸åŒï¼šç»å¤§å¤šæ•°æƒ…å†µä¸‹ï¼Œè¯¥ç›®å½•ä¸‹çš„å†…å®¹ ä¼šè¢«æ‹·è´åˆ°è¾“å‡ºç›®å½•(å› ä¸ºè„šæœ¬æ˜¯è¢«è§£é‡Šçš„ï¼Œè€Œä¸æ˜¯è¢«ç¼–è¯‘çš„)ã€‚ --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">scriptSourceDirectory</span> /&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--è¯¥å…ƒç´ è®¾ç½®äº†é¡¹ç›®å•å…ƒæµ‹è¯•ä½¿ç”¨çš„æºç ç›®å½•ï¼Œå½“æµ‹è¯•é¡¹ç›®çš„æ—¶å€™ï¼Œæ„å»ºç³»ç»Ÿä¼šç¼–è¯‘ç›®å½•é‡Œçš„æºç ã€‚è¯¥è·¯å¾„æ˜¯ç›¸å¯¹äºpom.xmlçš„ç›¸å¯¹è·¯å¾„ã€‚ --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">testSourceDirectory</span> /&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--è¢«ç¼–è¯‘è¿‡çš„åº”ç”¨ç¨‹åºclassæ–‡ä»¶å­˜æ”¾çš„ç›®å½•ã€‚ --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">outputDirectory</span> /&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--è¢«ç¼–è¯‘è¿‡çš„æµ‹è¯•classæ–‡ä»¶å­˜æ”¾çš„ç›®å½•ã€‚ --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">testOutputDirectory</span> /&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--ä½¿ç”¨æ¥è‡ªè¯¥é¡¹ç›®çš„ä¸€ç³»åˆ—æ„å»ºæ‰©å±• --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">extensions</span>&gt;</span></span><br><span class="line">            <span class="comment">&lt;!--æè¿°ä½¿ç”¨åˆ°çš„æ„å»ºæ‰©å±•ã€‚ --&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">extension</span>&gt;</span></span><br><span class="line">                <span class="comment">&lt;!--æ„å»ºæ‰©å±•çš„groupId --&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">groupId</span> /&gt;</span></span><br><span class="line">                <span class="comment">&lt;!--æ„å»ºæ‰©å±•çš„artifactId --&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">artifactId</span> /&gt;</span></span><br><span class="line">                <span class="comment">&lt;!--æ„å»ºæ‰©å±•çš„ç‰ˆæœ¬ --&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">version</span> /&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">extension</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">extensions</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--å½“é¡¹ç›®æ²¡æœ‰è§„å®šç›®æ ‡ï¼ˆMaven2 å«åšé˜¶æ®µï¼‰æ—¶çš„é»˜è®¤å€¼ --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">defaultGoal</span> /&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--è¿™ä¸ªå…ƒç´ æè¿°äº†é¡¹ç›®ç›¸å…³çš„æ‰€æœ‰èµ„æºè·¯å¾„åˆ—è¡¨ï¼Œä¾‹å¦‚å’Œé¡¹ç›®ç›¸å…³çš„å±æ€§æ–‡ä»¶ï¼Œè¿™äº›èµ„æºè¢«åŒ…å«åœ¨æœ€ç»ˆçš„æ‰“åŒ…æ–‡ä»¶é‡Œã€‚ --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">resources</span>&gt;</span></span><br><span class="line">            <span class="comment">&lt;!--è¿™ä¸ªå…ƒç´ æè¿°äº†é¡¹ç›®ç›¸å…³æˆ–æµ‹è¯•ç›¸å…³çš„æ‰€æœ‰èµ„æºè·¯å¾„ --&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">resource</span>&gt;</span></span><br><span class="line">                <span class="comment">&lt;!-- æè¿°äº†èµ„æºçš„ç›®æ ‡è·¯å¾„ã€‚è¯¥è·¯å¾„ç›¸å¯¹target/classesç›®å½•ï¼ˆä¾‹å¦‚$&#123;project.build.outputDirectory&#125;ï¼‰ã€‚ä¸¾ä¸ªä¾‹ </span></span><br><span class="line"><span class="comment">                    å­ï¼Œå¦‚æœä½ æƒ³èµ„æºåœ¨ç‰¹å®šçš„åŒ…é‡Œ(org.apache.maven.messages)ï¼Œä½ å°±å¿…é¡»è¯¥å…ƒç´ è®¾ç½®ä¸ºorg/apache/maven /messagesã€‚ç„¶è€Œï¼Œå¦‚æœä½ åªæ˜¯æƒ³æŠŠèµ„æºæ”¾åˆ°æºç ç›®å½•ç»“æ„é‡Œï¼Œå°±ä¸éœ€è¦è¯¥é…ç½®ã€‚ --&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">targetPath</span> /&gt;</span></span><br><span class="line">                <span class="comment">&lt;!--æ˜¯å¦ä½¿ç”¨å‚æ•°å€¼ä»£æ›¿å‚æ•°åã€‚å‚æ•°å€¼å–è‡ªpropertieså…ƒç´ æˆ–è€…æ–‡ä»¶é‡Œé…ç½®çš„å±æ€§ï¼Œæ–‡ä»¶åœ¨filterså…ƒç´ é‡Œåˆ—å‡ºã€‚ --&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">filtering</span> /&gt;</span></span><br><span class="line">                <span class="comment">&lt;!--æè¿°å­˜æ”¾èµ„æºçš„ç›®å½•ï¼Œè¯¥è·¯å¾„ç›¸å¯¹POMè·¯å¾„ --&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">directory</span> /&gt;</span></span><br><span class="line">                <span class="comment">&lt;!--åŒ…å«çš„æ¨¡å¼åˆ—è¡¨ï¼Œä¾‹å¦‚**/*.xml. --&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">includes</span> /&gt;</span></span><br><span class="line">                <span class="comment">&lt;!--æ’é™¤çš„æ¨¡å¼åˆ—è¡¨ï¼Œä¾‹å¦‚**/*.xml --&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">excludes</span> /&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">resource</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">resources</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--è¿™ä¸ªå…ƒç´ æè¿°äº†å•å…ƒæµ‹è¯•ç›¸å…³çš„æ‰€æœ‰èµ„æºè·¯å¾„ï¼Œä¾‹å¦‚å’Œå•å…ƒæµ‹è¯•ç›¸å…³çš„å±æ€§æ–‡ä»¶ã€‚ --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">testResources</span>&gt;</span></span><br><span class="line">            <span class="comment">&lt;!--è¿™ä¸ªå…ƒç´ æè¿°äº†æµ‹è¯•ç›¸å…³çš„æ‰€æœ‰èµ„æºè·¯å¾„ï¼Œå‚è§build/resources/resourceå…ƒç´ çš„è¯´æ˜ --&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">testResource</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">targetPath</span> /&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">filtering</span> /&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">directory</span> /&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">includes</span> /&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">excludes</span> /&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">testResource</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">testResources</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--æ„å»ºäº§ç”Ÿçš„æ‰€æœ‰æ–‡ä»¶å­˜æ”¾çš„ç›®å½• --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">directory</span> /&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--äº§ç”Ÿçš„æ„ä»¶çš„æ–‡ä»¶åï¼Œé»˜è®¤å€¼æ˜¯$&#123;artifactId&#125;-$&#123;version&#125;ã€‚ --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">finalName</span> /&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--å½“filteringå¼€å…³æ‰“å¼€æ—¶ï¼Œä½¿ç”¨åˆ°çš„è¿‡æ»¤å™¨å±æ€§æ–‡ä»¶åˆ—è¡¨ --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">filters</span> /&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--å­é¡¹ç›®å¯ä»¥å¼•ç”¨çš„é»˜è®¤æ’ä»¶ä¿¡æ¯ã€‚è¯¥æ’ä»¶é…ç½®é¡¹ç›´åˆ°è¢«å¼•ç”¨æ—¶æ‰ä¼šè¢«è§£ææˆ–ç»‘å®šåˆ°ç”Ÿå‘½å‘¨æœŸã€‚ç»™å®šæ’ä»¶çš„ä»»ä½•æœ¬åœ°é…ç½®éƒ½ä¼šè¦†ç›–è¿™é‡Œçš„é…ç½® --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">pluginManagement</span>&gt;</span></span><br><span class="line">            <span class="comment">&lt;!--ä½¿ç”¨çš„æ’ä»¶åˆ—è¡¨ ã€‚ --&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">plugins</span>&gt;</span></span><br><span class="line">                <span class="comment">&lt;!--pluginå…ƒç´ åŒ…å«æè¿°æ’ä»¶æ‰€éœ€è¦çš„ä¿¡æ¯ã€‚ --&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">plugin</span>&gt;</span></span><br><span class="line">                    <span class="comment">&lt;!--æ’ä»¶åœ¨ä»“åº“é‡Œçš„group ID --&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">groupId</span> /&gt;</span></span><br><span class="line">                    <span class="comment">&lt;!--æ’ä»¶åœ¨ä»“åº“é‡Œçš„artifact ID --&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">artifactId</span> /&gt;</span></span><br><span class="line">                    <span class="comment">&lt;!--è¢«ä½¿ç”¨çš„æ’ä»¶çš„ç‰ˆæœ¬ï¼ˆæˆ–ç‰ˆæœ¬èŒƒå›´ï¼‰ --&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">version</span> /&gt;</span></span><br><span class="line">                    <span class="comment">&lt;!--æ˜¯å¦ä»è¯¥æ’ä»¶ä¸‹è½½Mavenæ‰©å±•ï¼ˆä¾‹å¦‚æ‰“åŒ…å’Œç±»å‹å¤„ç†å™¨ï¼‰ï¼Œç”±äºæ€§èƒ½åŸå› ï¼Œåªæœ‰åœ¨çœŸéœ€è¦ä¸‹è½½æ—¶ï¼Œè¯¥å…ƒç´ æ‰è¢«è®¾ç½®æˆenabledã€‚ --&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">extensions</span> /&gt;</span></span><br><span class="line">                    <span class="comment">&lt;!--åœ¨æ„å»ºç”Ÿå‘½å‘¨æœŸä¸­æ‰§è¡Œä¸€ç»„ç›®æ ‡çš„é…ç½®ã€‚æ¯ä¸ªç›®æ ‡å¯èƒ½æœ‰ä¸åŒçš„é…ç½®ã€‚ --&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">executions</span>&gt;</span></span><br><span class="line">                        <span class="comment">&lt;!--executionå…ƒç´ åŒ…å«äº†æ’ä»¶æ‰§è¡Œéœ€è¦çš„ä¿¡æ¯ --&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">execution</span>&gt;</span></span><br><span class="line">                            <span class="comment">&lt;!--æ‰§è¡Œç›®æ ‡çš„æ ‡è¯†ç¬¦ï¼Œç”¨äºæ ‡è¯†æ„å»ºè¿‡ç¨‹ä¸­çš„ç›®æ ‡ï¼Œæˆ–è€…åŒ¹é…ç»§æ‰¿è¿‡ç¨‹ä¸­éœ€è¦åˆå¹¶çš„æ‰§è¡Œç›®æ ‡ --&gt;</span></span><br><span class="line">                            <span class="tag">&lt;<span class="name">id</span> /&gt;</span></span><br><span class="line">                            <span class="comment">&lt;!--ç»‘å®šäº†ç›®æ ‡çš„æ„å»ºç”Ÿå‘½å‘¨æœŸé˜¶æ®µï¼Œå¦‚æœçœç•¥ï¼Œç›®æ ‡ä¼šè¢«ç»‘å®šåˆ°æºæ•°æ®é‡Œé…ç½®çš„é»˜è®¤é˜¶æ®µ --&gt;</span></span><br><span class="line">                            <span class="tag">&lt;<span class="name">phase</span> /&gt;</span></span><br><span class="line">                            <span class="comment">&lt;!--é…ç½®çš„æ‰§è¡Œç›®æ ‡ --&gt;</span></span><br><span class="line">                            <span class="tag">&lt;<span class="name">goals</span> /&gt;</span></span><br><span class="line">                            <span class="comment">&lt;!--é…ç½®æ˜¯å¦è¢«ä¼ æ’­åˆ°å­POM --&gt;</span></span><br><span class="line">                            <span class="tag">&lt;<span class="name">inherited</span> /&gt;</span></span><br><span class="line">                            <span class="comment">&lt;!--ä½œä¸ºDOMå¯¹è±¡çš„é…ç½® --&gt;</span></span><br><span class="line">                            <span class="tag">&lt;<span class="name">configuration</span> /&gt;</span></span><br><span class="line">                        <span class="tag">&lt;/<span class="name">execution</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;/<span class="name">executions</span>&gt;</span></span><br><span class="line">                    <span class="comment">&lt;!--é¡¹ç›®å¼•å…¥æ’ä»¶æ‰€éœ€è¦çš„é¢å¤–ä¾èµ– --&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">dependencies</span>&gt;</span></span><br><span class="line">                        <span class="comment">&lt;!--å‚è§dependencies/dependencyå…ƒç´  --&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">                            ......</span><br><span class="line">                        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;/<span class="name">dependencies</span>&gt;</span></span><br><span class="line">                    <span class="comment">&lt;!--ä»»ä½•é…ç½®æ˜¯å¦è¢«ä¼ æ’­åˆ°å­é¡¹ç›® --&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">inherited</span> /&gt;</span></span><br><span class="line">                    <span class="comment">&lt;!--ä½œä¸ºDOMå¯¹è±¡çš„é…ç½® --&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">configuration</span> /&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">plugin</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">plugins</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">pluginManagement</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--ä½¿ç”¨çš„æ’ä»¶åˆ—è¡¨ --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">plugins</span>&gt;</span></span><br><span class="line">            <span class="comment">&lt;!--å‚è§build/pluginManagement/plugins/pluginå…ƒç´  --&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">plugin</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">groupId</span> /&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">artifactId</span> /&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">version</span> /&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">extensions</span> /&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">executions</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">execution</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">id</span> /&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">phase</span> /&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">goals</span> /&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">inherited</span> /&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">configuration</span> /&gt;</span></span><br><span class="line">                    <span class="tag">&lt;/<span class="name">execution</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">executions</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">dependencies</span>&gt;</span></span><br><span class="line">                    <span class="comment">&lt;!--å‚è§dependencies/dependencyå…ƒç´  --&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">                        ......</span><br><span class="line">                    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">dependencies</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">goals</span> /&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">inherited</span> /&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">configuration</span> /&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">plugin</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">plugins</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">build</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--åœ¨åˆ—çš„é¡¹ç›®æ„å»ºprofileï¼Œå¦‚æœè¢«æ¿€æ´»ï¼Œä¼šä¿®æ”¹æ„å»ºå¤„ç† --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">profiles</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--æ ¹æ®ç¯å¢ƒå‚æ•°æˆ–å‘½ä»¤è¡Œå‚æ•°æ¿€æ´»æŸä¸ªæ„å»ºå¤„ç† --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">profile</span>&gt;</span></span><br><span class="line">            <span class="comment">&lt;!--æ„å»ºé…ç½®çš„å”¯ä¸€æ ‡è¯†ç¬¦ã€‚å³ç”¨äºå‘½ä»¤è¡Œæ¿€æ´»ï¼Œä¹Ÿç”¨äºåœ¨ç»§æ‰¿æ—¶åˆå¹¶å…·æœ‰ç›¸åŒæ ‡è¯†ç¬¦çš„profileã€‚ --&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">id</span> /&gt;</span></span><br><span class="line">            <span class="comment">&lt;!--è‡ªåŠ¨è§¦å‘profileçš„æ¡ä»¶é€»è¾‘ã€‚Activationæ˜¯profileçš„å¼€å¯é’¥åŒ™ã€‚profileçš„åŠ›é‡æ¥è‡ªäºå®ƒ èƒ½å¤Ÿåœ¨æŸäº›ç‰¹å®šçš„ç¯å¢ƒä¸­è‡ªåŠ¨ä½¿ç”¨æŸäº›ç‰¹å®šçš„å€¼ï¼›è¿™äº›ç¯å¢ƒé€šè¿‡activationå…ƒç´ æŒ‡å®šã€‚activationå…ƒç´ å¹¶ä¸æ˜¯æ¿€æ´»profileçš„å”¯ä¸€æ–¹å¼ã€‚ --&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">activation</span>&gt;</span></span><br><span class="line">                <span class="comment">&lt;!--profileé»˜è®¤æ˜¯å¦æ¿€æ´»çš„æ ‡å¿— --&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">activeByDefault</span> /&gt;</span></span><br><span class="line">                <span class="comment">&lt;!--å½“åŒ¹é…çš„jdkè¢«æ£€æµ‹åˆ°ï¼Œprofileè¢«æ¿€æ´»ã€‚ä¾‹å¦‚ï¼Œ1.4æ¿€æ´»JDK1.4ï¼Œ1.4.0_2ï¼Œè€Œ!1.4æ¿€æ´»æ‰€æœ‰ç‰ˆæœ¬ä¸æ˜¯ä»¥1.4å¼€å¤´çš„JDKã€‚ --&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">jdk</span> /&gt;</span></span><br><span class="line">                <span class="comment">&lt;!--å½“åŒ¹é…çš„æ“ä½œç³»ç»Ÿå±æ€§è¢«æ£€æµ‹åˆ°ï¼Œprofileè¢«æ¿€æ´»ã€‚oså…ƒç´ å¯ä»¥å®šä¹‰ä¸€äº›æ“ä½œç³»ç»Ÿç›¸å…³çš„å±æ€§ã€‚ --&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">os</span>&gt;</span></span><br><span class="line">                    <span class="comment">&lt;!--æ¿€æ´»profileçš„æ“ä½œç³»ç»Ÿçš„åå­— --&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">name</span>&gt;</span>Windows XP<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line">                    <span class="comment">&lt;!--æ¿€æ´»profileçš„æ“ä½œç³»ç»Ÿæ‰€å±å®¶æ—(å¦‚ &#x27;windows&#x27;) --&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">family</span>&gt;</span>Windows<span class="tag">&lt;/<span class="name">family</span>&gt;</span></span><br><span class="line">                    <span class="comment">&lt;!--æ¿€æ´»profileçš„æ“ä½œç³»ç»Ÿä½“ç³»ç»“æ„ --&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">arch</span>&gt;</span>x86<span class="tag">&lt;/<span class="name">arch</span>&gt;</span></span><br><span class="line">                    <span class="comment">&lt;!--æ¿€æ´»profileçš„æ“ä½œç³»ç»Ÿç‰ˆæœ¬ --&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">version</span>&gt;</span>5.1.2600<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">os</span>&gt;</span></span><br><span class="line">                <span class="comment">&lt;!--å¦‚æœMavenæ£€æµ‹åˆ°æŸä¸€ä¸ªå±æ€§ï¼ˆå…¶å€¼å¯ä»¥åœ¨POMä¸­é€šè¿‡$&#123;åç§°&#125;å¼•ç”¨ï¼‰ï¼Œå…¶æ‹¥æœ‰å¯¹åº”çš„åç§°å’Œå€¼ï¼ŒProfileå°±ä¼šè¢«æ¿€æ´»ã€‚å¦‚æœå€¼ å­—æ®µæ˜¯ç©ºçš„ï¼Œé‚£ä¹ˆå­˜åœ¨å±æ€§åç§°å­—æ®µå°±ä¼šæ¿€æ´»profileï¼Œå¦åˆ™æŒ‰åŒºåˆ†å¤§å°å†™æ–¹å¼åŒ¹é…å±æ€§å€¼å­—æ®µ --&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">property</span>&gt;</span></span><br><span class="line">                    <span class="comment">&lt;!--æ¿€æ´»profileçš„å±æ€§çš„åç§° --&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">name</span>&gt;</span>mavenVersion<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line">                    <span class="comment">&lt;!--æ¿€æ´»profileçš„å±æ€§çš„å€¼ --&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">value</span>&gt;</span>2.0.3<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">                <span class="comment">&lt;!--æä¾›ä¸€ä¸ªæ–‡ä»¶åï¼Œé€šè¿‡æ£€æµ‹è¯¥æ–‡ä»¶çš„å­˜åœ¨æˆ–ä¸å­˜åœ¨æ¥æ¿€æ´»profileã€‚missingæ£€æŸ¥æ–‡ä»¶æ˜¯å¦å­˜åœ¨ï¼Œå¦‚æœä¸å­˜åœ¨åˆ™æ¿€æ´» profileã€‚å¦ä¸€æ–¹é¢ï¼Œexistsåˆ™ä¼šæ£€æŸ¥æ–‡ä»¶æ˜¯å¦å­˜åœ¨ï¼Œå¦‚æœå­˜åœ¨åˆ™æ¿€æ´»profileã€‚ --&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">file</span>&gt;</span></span><br><span class="line">                    <span class="comment">&lt;!--å¦‚æœæŒ‡å®šçš„æ–‡ä»¶å­˜åœ¨ï¼Œåˆ™æ¿€æ´»profileã€‚ --&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">exists</span>&gt;</span>/usr/local/hudson/hudson-home/jobs/maven-guide-zh-to-production/workspace/</span><br><span class="line">                    <span class="tag">&lt;/<span class="name">exists</span>&gt;</span></span><br><span class="line">                    <span class="comment">&lt;!--å¦‚æœæŒ‡å®šçš„æ–‡ä»¶ä¸å­˜åœ¨ï¼Œåˆ™æ¿€æ´»profileã€‚ --&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">missing</span>&gt;</span>/usr/local/hudson/hudson-home/jobs/maven-guide-zh-to-production/workspace/</span><br><span class="line">                    <span class="tag">&lt;/<span class="name">missing</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">file</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">activation</span>&gt;</span></span><br><span class="line">            <span class="comment">&lt;!--æ„å»ºé¡¹ç›®æ‰€éœ€è¦çš„ä¿¡æ¯ã€‚å‚è§buildå…ƒç´  --&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">build</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">defaultGoal</span> /&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">resources</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">resource</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">targetPath</span> /&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">filtering</span> /&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">directory</span> /&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">includes</span> /&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">excludes</span> /&gt;</span></span><br><span class="line">                    <span class="tag">&lt;/<span class="name">resource</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">resources</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">testResources</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">testResource</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">targetPath</span> /&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">filtering</span> /&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">directory</span> /&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">includes</span> /&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">excludes</span> /&gt;</span></span><br><span class="line">                    <span class="tag">&lt;/<span class="name">testResource</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">testResources</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">directory</span> /&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">finalName</span> /&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">filters</span> /&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">pluginManagement</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">plugins</span>&gt;</span></span><br><span class="line">                        <span class="comment">&lt;!--å‚è§build/pluginManagement/plugins/pluginå…ƒç´  --&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">plugin</span>&gt;</span></span><br><span class="line">                            <span class="tag">&lt;<span class="name">groupId</span> /&gt;</span></span><br><span class="line">                            <span class="tag">&lt;<span class="name">artifactId</span> /&gt;</span></span><br><span class="line">                            <span class="tag">&lt;<span class="name">version</span> /&gt;</span></span><br><span class="line">                            <span class="tag">&lt;<span class="name">extensions</span> /&gt;</span></span><br><span class="line">                            <span class="tag">&lt;<span class="name">executions</span>&gt;</span></span><br><span class="line">                                <span class="tag">&lt;<span class="name">execution</span>&gt;</span></span><br><span class="line">                                    <span class="tag">&lt;<span class="name">id</span> /&gt;</span></span><br><span class="line">                                    <span class="tag">&lt;<span class="name">phase</span> /&gt;</span></span><br><span class="line">                                    <span class="tag">&lt;<span class="name">goals</span> /&gt;</span></span><br><span class="line">                                    <span class="tag">&lt;<span class="name">inherited</span> /&gt;</span></span><br><span class="line">                                    <span class="tag">&lt;<span class="name">configuration</span> /&gt;</span></span><br><span class="line">                                <span class="tag">&lt;/<span class="name">execution</span>&gt;</span></span><br><span class="line">                            <span class="tag">&lt;/<span class="name">executions</span>&gt;</span></span><br><span class="line">                            <span class="tag">&lt;<span class="name">dependencies</span>&gt;</span></span><br><span class="line">                                <span class="comment">&lt;!--å‚è§dependencies/dependencyå…ƒç´  --&gt;</span></span><br><span class="line">                                <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">                                    ......</span><br><span class="line">                                <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">                            <span class="tag">&lt;/<span class="name">dependencies</span>&gt;</span></span><br><span class="line">                            <span class="tag">&lt;<span class="name">goals</span> /&gt;</span></span><br><span class="line">                            <span class="tag">&lt;<span class="name">inherited</span> /&gt;</span></span><br><span class="line">                            <span class="tag">&lt;<span class="name">configuration</span> /&gt;</span></span><br><span class="line">                        <span class="tag">&lt;/<span class="name">plugin</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;/<span class="name">plugins</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">pluginManagement</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">plugins</span>&gt;</span></span><br><span class="line">                    <span class="comment">&lt;!--å‚è§build/pluginManagement/plugins/pluginå…ƒç´  --&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">plugin</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">groupId</span> /&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">artifactId</span> /&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">version</span> /&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">extensions</span> /&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">executions</span>&gt;</span></span><br><span class="line">                            <span class="tag">&lt;<span class="name">execution</span>&gt;</span></span><br><span class="line">                                <span class="tag">&lt;<span class="name">id</span> /&gt;</span></span><br><span class="line">                                <span class="tag">&lt;<span class="name">phase</span> /&gt;</span></span><br><span class="line">                                <span class="tag">&lt;<span class="name">goals</span> /&gt;</span></span><br><span class="line">                                <span class="tag">&lt;<span class="name">inherited</span> /&gt;</span></span><br><span class="line">                                <span class="tag">&lt;<span class="name">configuration</span> /&gt;</span></span><br><span class="line">                            <span class="tag">&lt;/<span class="name">execution</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;/<span class="name">executions</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">dependencies</span>&gt;</span></span><br><span class="line">                            <span class="comment">&lt;!--å‚è§dependencies/dependencyå…ƒç´  --&gt;</span></span><br><span class="line">                            <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">                                ......</span><br><span class="line">                            <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;/<span class="name">dependencies</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">goals</span> /&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">inherited</span> /&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">configuration</span> /&gt;</span></span><br><span class="line">                    <span class="tag">&lt;/<span class="name">plugin</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">plugins</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">build</span>&gt;</span></span><br><span class="line">            <span class="comment">&lt;!--æ¨¡å—ï¼ˆæœ‰æ—¶ç§°ä½œå­é¡¹ç›®ï¼‰ è¢«æ„å»ºæˆé¡¹ç›®çš„ä¸€éƒ¨åˆ†ã€‚åˆ—å‡ºçš„æ¯ä¸ªæ¨¡å—å…ƒç´ æ˜¯æŒ‡å‘è¯¥æ¨¡å—çš„ç›®å½•çš„ç›¸å¯¹è·¯å¾„ --&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">modules</span> /&gt;</span></span><br><span class="line">            <span class="comment">&lt;!--å‘ç°ä¾èµ–å’Œæ‰©å±•çš„è¿œç¨‹ä»“åº“åˆ—è¡¨ã€‚ --&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">repositories</span>&gt;</span></span><br><span class="line">                <span class="comment">&lt;!--å‚è§repositories/repositoryå…ƒç´  --&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">repository</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">releases</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">enabled</span> /&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">updatePolicy</span> /&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">checksumPolicy</span> /&gt;</span></span><br><span class="line">                    <span class="tag">&lt;/<span class="name">releases</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">snapshots</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">enabled</span> /&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">updatePolicy</span> /&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">checksumPolicy</span> /&gt;</span></span><br><span class="line">                    <span class="tag">&lt;/<span class="name">snapshots</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">id</span> /&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">name</span> /&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">url</span> /&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">layout</span> /&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">repository</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">repositories</span>&gt;</span></span><br><span class="line">            <span class="comment">&lt;!--å‘ç°æ’ä»¶çš„è¿œç¨‹ä»“åº“åˆ—è¡¨ï¼Œè¿™äº›æ’ä»¶ç”¨äºæ„å»ºå’ŒæŠ¥è¡¨ --&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">pluginRepositories</span>&gt;</span></span><br><span class="line">                <span class="comment">&lt;!--åŒ…å«éœ€è¦è¿æ¥åˆ°è¿œç¨‹æ’ä»¶ä»“åº“çš„ä¿¡æ¯.å‚è§repositories/repositoryå…ƒç´  --&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">pluginRepository</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">releases</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">enabled</span> /&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">updatePolicy</span> /&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">checksumPolicy</span> /&gt;</span></span><br><span class="line">                    <span class="tag">&lt;/<span class="name">releases</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">snapshots</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">enabled</span> /&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">updatePolicy</span> /&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">checksumPolicy</span> /&gt;</span></span><br><span class="line">                    <span class="tag">&lt;/<span class="name">snapshots</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">id</span> /&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">name</span> /&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">url</span> /&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">layout</span> /&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">pluginRepository</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">pluginRepositories</span>&gt;</span></span><br><span class="line">            <span class="comment">&lt;!--è¯¥å…ƒç´ æè¿°äº†é¡¹ç›®ç›¸å…³çš„æ‰€æœ‰ä¾èµ–ã€‚ è¿™äº›ä¾èµ–ç»„æˆäº†é¡¹ç›®æ„å»ºè¿‡ç¨‹ä¸­çš„ä¸€ä¸ªä¸ªç¯èŠ‚ã€‚å®ƒä»¬è‡ªåŠ¨ä»é¡¹ç›®å®šä¹‰çš„ä»“åº“ä¸­ä¸‹è½½ã€‚è¦è·å–æ›´å¤šä¿¡æ¯ï¼Œè¯·çœ‹é¡¹ç›®ä¾èµ–æœºåˆ¶ã€‚ --&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">dependencies</span>&gt;</span></span><br><span class="line">                <span class="comment">&lt;!--å‚è§dependencies/dependencyå…ƒç´  --&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">                    ......</span><br><span class="line">                <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">dependencies</span>&gt;</span></span><br><span class="line">            <span class="comment">&lt;!--ä¸èµæˆä½¿ç”¨. ç°åœ¨Mavenå¿½ç•¥è¯¥å…ƒç´ . --&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">reports</span> /&gt;</span></span><br><span class="line">            <span class="comment">&lt;!--è¯¥å…ƒç´ åŒ…æ‹¬ä½¿ç”¨æŠ¥è¡¨æ’ä»¶äº§ç”ŸæŠ¥è¡¨çš„è§„èŒƒã€‚å½“ç”¨æˆ·æ‰§è¡Œ&quot;mvn site&quot;ï¼Œè¿™äº›æŠ¥è¡¨å°±ä¼šè¿è¡Œã€‚ åœ¨é¡µé¢å¯¼èˆªæ èƒ½çœ‹åˆ°æ‰€æœ‰æŠ¥è¡¨çš„é“¾æ¥ã€‚å‚è§reportingå…ƒç´  --&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">reporting</span>&gt;</span></span><br><span class="line">                ......</span><br><span class="line">            <span class="tag">&lt;/<span class="name">reporting</span>&gt;</span></span><br><span class="line">            <span class="comment">&lt;!--å‚è§dependencyManagementå…ƒç´  --&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">dependencyManagement</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">dependencies</span>&gt;</span></span><br><span class="line">                    <span class="comment">&lt;!--å‚è§dependencies/dependencyå…ƒç´  --&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">                        ......</span><br><span class="line">                    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">dependencies</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">dependencyManagement</span>&gt;</span></span><br><span class="line">            <span class="comment">&lt;!--å‚è§distributionManagementå…ƒç´  --&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">distributionManagement</span>&gt;</span></span><br><span class="line">                ......</span><br><span class="line">            <span class="tag">&lt;/<span class="name">distributionManagement</span>&gt;</span></span><br><span class="line">            <span class="comment">&lt;!--å‚è§propertieså…ƒç´  --&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">properties</span> /&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">profile</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">profiles</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--æ¨¡å—ï¼ˆæœ‰æ—¶ç§°ä½œå­é¡¹ç›®ï¼‰ è¢«æ„å»ºæˆé¡¹ç›®çš„ä¸€éƒ¨åˆ†ã€‚åˆ—å‡ºçš„æ¯ä¸ªæ¨¡å—å…ƒç´ æ˜¯æŒ‡å‘è¯¥æ¨¡å—çš„ç›®å½•çš„ç›¸å¯¹è·¯å¾„ --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">modules</span> /&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--å‘ç°ä¾èµ–å’Œæ‰©å±•çš„è¿œç¨‹ä»“åº“åˆ—è¡¨ã€‚ --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">repositories</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--åŒ…å«éœ€è¦è¿æ¥åˆ°è¿œç¨‹ä»“åº“çš„ä¿¡æ¯ --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">repository</span>&gt;</span></span><br><span class="line">            <span class="comment">&lt;!--å¦‚ä½•å¤„ç†è¿œç¨‹ä»“åº“é‡Œå‘å¸ƒç‰ˆæœ¬çš„ä¸‹è½½ --&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">releases</span>&gt;</span></span><br><span class="line">                <span class="comment">&lt;!--trueæˆ–è€…falseè¡¨ç¤ºè¯¥ä»“åº“æ˜¯å¦ä¸ºä¸‹è½½æŸç§ç±»å‹æ„ä»¶ï¼ˆå‘å¸ƒç‰ˆï¼Œå¿«ç…§ç‰ˆï¼‰å¼€å¯ã€‚ --&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">enabled</span> /&gt;</span></span><br><span class="line">                <span class="comment">&lt;!--è¯¥å…ƒç´ æŒ‡å®šæ›´æ–°å‘ç”Ÿçš„é¢‘ç‡ã€‚Mavenä¼šæ¯”è¾ƒæœ¬åœ°POMå’Œè¿œç¨‹POMçš„æ—¶é—´æˆ³ã€‚è¿™é‡Œçš„é€‰é¡¹æ˜¯ï¼šalwaysï¼ˆä¸€ç›´ï¼‰ï¼Œdailyï¼ˆé»˜è®¤ï¼Œæ¯æ—¥ï¼‰ï¼Œintervalï¼šXï¼ˆè¿™é‡ŒXæ˜¯ä»¥åˆ†é’Ÿä¸ºå•ä½çš„æ—¶é—´é—´éš”ï¼‰ï¼Œæˆ–è€…neverï¼ˆä»ä¸ï¼‰ã€‚ --&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">updatePolicy</span> /&gt;</span></span><br><span class="line">                <span class="comment">&lt;!--å½“MavenéªŒè¯æ„ä»¶æ ¡éªŒæ–‡ä»¶å¤±è´¥æ—¶è¯¥æ€ä¹ˆåšï¼šignoreï¼ˆå¿½ç•¥ï¼‰ï¼Œfailï¼ˆå¤±è´¥ï¼‰ï¼Œæˆ–è€…warnï¼ˆè­¦å‘Šï¼‰ã€‚ --&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">checksumPolicy</span> /&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">releases</span>&gt;</span></span><br><span class="line">            <span class="comment">&lt;!-- å¦‚ä½•å¤„ç†è¿œç¨‹ä»“åº“é‡Œå¿«ç…§ç‰ˆæœ¬çš„ä¸‹è½½ã€‚æœ‰äº†releaseså’Œsnapshotsè¿™ä¸¤ç»„é…ç½®ï¼ŒPOMå°±å¯ä»¥åœ¨æ¯ä¸ªå•ç‹¬çš„ä»“åº“ä¸­ï¼Œä¸ºæ¯ç§ç±»å‹çš„æ„ä»¶é‡‡å–ä¸åŒçš„ </span></span><br><span class="line"><span class="comment">                ç­–ç•¥ã€‚ä¾‹å¦‚ï¼Œå¯èƒ½æœ‰äººä¼šå†³å®šåªä¸ºå¼€å‘ç›®çš„å¼€å¯å¯¹å¿«ç…§ç‰ˆæœ¬ä¸‹è½½çš„æ”¯æŒã€‚å‚è§repositories/repository/releaseså…ƒç´  --&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">snapshots</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">enabled</span> /&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">updatePolicy</span> /&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">checksumPolicy</span> /&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">snapshots</span>&gt;</span></span><br><span class="line">            <span class="comment">&lt;!--è¿œç¨‹ä»“åº“å”¯ä¸€æ ‡è¯†ç¬¦ã€‚å¯ä»¥ç”¨æ¥åŒ¹é…åœ¨settings.xmlæ–‡ä»¶é‡Œé…ç½®çš„è¿œç¨‹ä»“åº“ --&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">id</span>&gt;</span>banseon-repository-proxy<span class="tag">&lt;/<span class="name">id</span>&gt;</span></span><br><span class="line">            <span class="comment">&lt;!--è¿œç¨‹ä»“åº“åç§° --&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">name</span>&gt;</span>banseon-repository-proxy<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line">            <span class="comment">&lt;!--è¿œç¨‹ä»“åº“URLï¼ŒæŒ‰protocol://hostname/pathå½¢å¼ --&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">url</span>&gt;</span>http://192.168.1.169:9999/repository/<span class="tag">&lt;/<span class="name">url</span>&gt;</span></span><br><span class="line">            <span class="comment">&lt;!-- ç”¨äºå®šä½å’Œæ’åºæ„ä»¶çš„ä»“åº“å¸ƒå±€ç±»å‹-å¯ä»¥æ˜¯defaultï¼ˆé»˜è®¤ï¼‰æˆ–è€…legacyï¼ˆé—ç•™ï¼‰ã€‚Maven 2ä¸ºå…¶ä»“åº“æä¾›äº†ä¸€ä¸ªé»˜è®¤çš„å¸ƒå±€ï¼›ç„¶ </span></span><br><span class="line"><span class="comment">                è€Œï¼ŒMaven 1.xæœ‰ä¸€ç§ä¸åŒçš„å¸ƒå±€ã€‚æˆ‘ä»¬å¯ä»¥ä½¿ç”¨è¯¥å…ƒç´ æŒ‡å®šå¸ƒå±€æ˜¯defaultï¼ˆé»˜è®¤ï¼‰è¿˜æ˜¯legacyï¼ˆé—ç•™ï¼‰ã€‚ --&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">layout</span>&gt;</span>default<span class="tag">&lt;/<span class="name">layout</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">repository</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">repositories</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--å‘ç°æ’ä»¶çš„è¿œç¨‹ä»“åº“åˆ—è¡¨ï¼Œè¿™äº›æ’ä»¶ç”¨äºæ„å»ºå’ŒæŠ¥è¡¨ --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">pluginRepositories</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--åŒ…å«éœ€è¦è¿æ¥åˆ°è¿œç¨‹æ’ä»¶ä»“åº“çš„ä¿¡æ¯.å‚è§repositories/repositoryå…ƒç´  --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">pluginRepository</span>&gt;</span></span><br><span class="line">            ......</span><br><span class="line">        <span class="tag">&lt;/<span class="name">pluginRepository</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">pluginRepositories</span>&gt;</span></span><br><span class="line"> </span><br><span class="line"> </span><br><span class="line">    <span class="comment">&lt;!--è¯¥å…ƒç´ æè¿°äº†é¡¹ç›®ç›¸å…³çš„æ‰€æœ‰ä¾èµ–ã€‚ è¿™äº›ä¾èµ–ç»„æˆäº†é¡¹ç›®æ„å»ºè¿‡ç¨‹ä¸­çš„ä¸€ä¸ªä¸ªç¯èŠ‚ã€‚å®ƒä»¬è‡ªåŠ¨ä»é¡¹ç›®å®šä¹‰çš„ä»“åº“ä¸­ä¸‹è½½ã€‚è¦è·å–æ›´å¤šä¿¡æ¯ï¼Œè¯·çœ‹é¡¹ç›®ä¾èµ–æœºåˆ¶ã€‚ --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependencies</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="comment">&lt;!--ä¾èµ–çš„group ID --&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.apache.maven<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="comment">&lt;!--ä¾èµ–çš„artifact ID --&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>maven-artifact<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="comment">&lt;!--ä¾èµ–çš„ç‰ˆæœ¬å·ã€‚ åœ¨Maven 2é‡Œ, ä¹Ÿå¯ä»¥é…ç½®æˆç‰ˆæœ¬å·çš„èŒƒå›´ã€‚ --&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>3.8.1<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">            <span class="comment">&lt;!-- ä¾èµ–ç±»å‹ï¼Œé»˜è®¤ç±»å‹æ˜¯jarã€‚å®ƒé€šå¸¸è¡¨ç¤ºä¾èµ–çš„æ–‡ä»¶çš„æ‰©å±•åï¼Œä½†ä¹Ÿæœ‰ä¾‹å¤–ã€‚ä¸€ä¸ªç±»å‹å¯ä»¥è¢«æ˜ å°„æˆå¦å¤–ä¸€ä¸ªæ‰©å±•åæˆ–åˆ†ç±»å™¨ã€‚ç±»å‹ç»å¸¸å’Œä½¿ç”¨çš„æ‰“åŒ…æ–¹å¼å¯¹åº”ï¼Œ </span></span><br><span class="line"><span class="comment">                å°½ç®¡è¿™ä¹Ÿæœ‰ä¾‹å¤–ã€‚ä¸€äº›ç±»å‹çš„ä¾‹å­ï¼šjarï¼Œwarï¼Œejb-clientå’Œtest-jarã€‚å¦‚æœè®¾ç½®extensionsä¸º trueï¼Œå°±å¯ä»¥åœ¨ pluginé‡Œå®šä¹‰æ–°çš„ç±»å‹ã€‚æ‰€ä»¥å‰é¢çš„ç±»å‹çš„ä¾‹å­ä¸å®Œæ•´ã€‚ --&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">type</span>&gt;</span>jar<span class="tag">&lt;/<span class="name">type</span>&gt;</span></span><br><span class="line">            <span class="comment">&lt;!-- ä¾èµ–çš„åˆ†ç±»å™¨ã€‚åˆ†ç±»å™¨å¯ä»¥åŒºåˆ†å±äºåŒä¸€ä¸ªPOMï¼Œä½†ä¸åŒæ„å»ºæ–¹å¼çš„æ„ä»¶ã€‚åˆ†ç±»å™¨åè¢«é™„åŠ åˆ°æ–‡ä»¶åçš„ç‰ˆæœ¬å·åé¢ã€‚ä¾‹å¦‚ï¼Œå¦‚æœä½ æƒ³è¦æ„å»ºä¸¤ä¸ªå•ç‹¬çš„æ„ä»¶æˆ </span></span><br><span class="line"><span class="comment">                JARï¼Œä¸€ä¸ªä½¿ç”¨Java 1.4ç¼–è¯‘å™¨ï¼Œå¦ä¸€ä¸ªä½¿ç”¨Java 6ç¼–è¯‘å™¨ï¼Œä½ å°±å¯ä»¥ä½¿ç”¨åˆ†ç±»å™¨æ¥ç”Ÿæˆä¸¤ä¸ªå•ç‹¬çš„JARæ„ä»¶ã€‚ --&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">classifier</span>&gt;</span><span class="tag">&lt;/<span class="name">classifier</span>&gt;</span></span><br><span class="line">            <span class="comment">&lt;!--ä¾èµ–èŒƒå›´ã€‚åœ¨é¡¹ç›®å‘å¸ƒè¿‡ç¨‹ä¸­ï¼Œå¸®åŠ©å†³å®šå“ªäº›æ„ä»¶è¢«åŒ…æ‹¬è¿›æ¥ã€‚æ¬²çŸ¥è¯¦æƒ…è¯·å‚è€ƒä¾èµ–æœºåˆ¶ã€‚ - compile ï¼šé»˜è®¤èŒƒå›´ï¼Œç”¨äºç¼–è¯‘ - providedï¼šç±»ä¼¼äºç¼–è¯‘ï¼Œä½†æ”¯æŒä½ æœŸå¾…jdkæˆ–è€…å®¹å™¨æä¾›ï¼Œç±»ä¼¼äºclasspath </span></span><br><span class="line"><span class="comment">                - runtime: åœ¨æ‰§è¡Œæ—¶éœ€è¦ä½¿ç”¨ - test: ç”¨äºtestä»»åŠ¡æ—¶ä½¿ç”¨ - system: éœ€è¦å¤–åœ¨æä¾›ç›¸åº”çš„å…ƒç´ ã€‚é€šè¿‡systemPathæ¥å–å¾— </span></span><br><span class="line"><span class="comment">                - systemPath: ä»…ç”¨äºèŒƒå›´ä¸ºsystemã€‚æä¾›ç›¸åº”çš„è·¯å¾„ - optional: å½“é¡¹ç›®è‡ªèº«è¢«ä¾èµ–æ—¶ï¼Œæ ‡æ³¨ä¾èµ–æ˜¯å¦ä¼ é€’ã€‚ç”¨äºè¿ç»­ä¾èµ–æ—¶ä½¿ç”¨ --&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">scope</span>&gt;</span>test<span class="tag">&lt;/<span class="name">scope</span>&gt;</span></span><br><span class="line">            <span class="comment">&lt;!--ä»…ä¾›systemèŒƒå›´ä½¿ç”¨ã€‚æ³¨æ„ï¼Œä¸é¼“åŠ±ä½¿ç”¨è¿™ä¸ªå…ƒç´ ï¼Œå¹¶ä¸”åœ¨æ–°çš„ç‰ˆæœ¬ä¸­è¯¥å…ƒç´ å¯èƒ½è¢«è¦†ç›–æ‰ã€‚è¯¥å…ƒç´ ä¸ºä¾èµ–è§„å®šäº†æ–‡ä»¶ç³»ç»Ÿä¸Šçš„è·¯å¾„ã€‚éœ€è¦ç»å¯¹è·¯å¾„è€Œä¸æ˜¯ç›¸å¯¹è·¯å¾„ã€‚æ¨èä½¿ç”¨å±æ€§åŒ¹é…ç»å¯¹è·¯å¾„ï¼Œä¾‹å¦‚$&#123;java.home&#125;ã€‚ --&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">systemPath</span>&gt;</span><span class="tag">&lt;/<span class="name">systemPath</span>&gt;</span></span><br><span class="line">            <span class="comment">&lt;!--å½“è®¡ç®—ä¼ é€’ä¾èµ–æ—¶ï¼Œ ä»ä¾èµ–æ„ä»¶åˆ—è¡¨é‡Œï¼Œåˆ—å‡ºè¢«æ’é™¤çš„ä¾èµ–æ„ä»¶é›†ã€‚å³å‘Šè¯‰mavenä½ åªä¾èµ–æŒ‡å®šçš„é¡¹ç›®ï¼Œä¸ä¾èµ–é¡¹ç›®çš„ä¾èµ–ã€‚æ­¤å…ƒç´ ä¸»è¦ç”¨äºè§£å†³ç‰ˆæœ¬å†²çªé—®é¢˜ --&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">exclusions</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">exclusion</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-core<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">exclusion</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">exclusions</span>&gt;</span></span><br><span class="line">            <span class="comment">&lt;!--å¯é€‰ä¾èµ–ï¼Œå¦‚æœä½ åœ¨é¡¹ç›®Bä¸­æŠŠCä¾èµ–å£°æ˜ä¸ºå¯é€‰ï¼Œä½ å°±éœ€è¦åœ¨ä¾èµ–äºBçš„é¡¹ç›®ï¼ˆä¾‹å¦‚é¡¹ç›®Aï¼‰ä¸­æ˜¾å¼çš„å¼•ç”¨å¯¹Cçš„ä¾èµ–ã€‚å¯é€‰ä¾èµ–é˜»æ–­ä¾èµ–çš„ä¼ é€’æ€§ã€‚ --&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">optional</span>&gt;</span>true<span class="tag">&lt;/<span class="name">optional</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependencies</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--ä¸èµæˆä½¿ç”¨. ç°åœ¨Mavenå¿½ç•¥è¯¥å…ƒç´ . --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">reports</span>&gt;</span><span class="tag">&lt;/<span class="name">reports</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--è¯¥å…ƒç´ æè¿°ä½¿ç”¨æŠ¥è¡¨æ’ä»¶äº§ç”ŸæŠ¥è¡¨çš„è§„èŒƒã€‚å½“ç”¨æˆ·æ‰§è¡Œ&quot;mvn site&quot;ï¼Œè¿™äº›æŠ¥è¡¨å°±ä¼šè¿è¡Œã€‚ åœ¨é¡µé¢å¯¼èˆªæ èƒ½çœ‹åˆ°æ‰€æœ‰æŠ¥è¡¨çš„é“¾æ¥ã€‚ --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">reporting</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--trueï¼Œåˆ™ï¼Œç½‘ç«™ä¸åŒ…æ‹¬é»˜è®¤çš„æŠ¥è¡¨ã€‚è¿™åŒ…æ‹¬&quot;é¡¹ç›®ä¿¡æ¯&quot;èœå•ä¸­çš„æŠ¥è¡¨ã€‚ --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">excludeDefaults</span> /&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--æ‰€æœ‰äº§ç”Ÿçš„æŠ¥è¡¨å­˜æ”¾åˆ°å“ªé‡Œã€‚é»˜è®¤å€¼æ˜¯$&#123;project.build.directory&#125;/siteã€‚ --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">outputDirectory</span> /&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--ä½¿ç”¨çš„æŠ¥è¡¨æ’ä»¶å’Œä»–ä»¬çš„é…ç½®ã€‚ --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">plugins</span>&gt;</span></span><br><span class="line">            <span class="comment">&lt;!--pluginå…ƒç´ åŒ…å«æè¿°æŠ¥è¡¨æ’ä»¶éœ€è¦çš„ä¿¡æ¯ --&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">plugin</span>&gt;</span></span><br><span class="line">                <span class="comment">&lt;!--æŠ¥è¡¨æ’ä»¶åœ¨ä»“åº“é‡Œçš„group ID --&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">groupId</span> /&gt;</span></span><br><span class="line">                <span class="comment">&lt;!--æŠ¥è¡¨æ’ä»¶åœ¨ä»“åº“é‡Œçš„artifact ID --&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">artifactId</span> /&gt;</span></span><br><span class="line">                <span class="comment">&lt;!--è¢«ä½¿ç”¨çš„æŠ¥è¡¨æ’ä»¶çš„ç‰ˆæœ¬ï¼ˆæˆ–ç‰ˆæœ¬èŒƒå›´ï¼‰ --&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">version</span> /&gt;</span></span><br><span class="line">                <span class="comment">&lt;!--ä»»ä½•é…ç½®æ˜¯å¦è¢«ä¼ æ’­åˆ°å­é¡¹ç›® --&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">inherited</span> /&gt;</span></span><br><span class="line">                <span class="comment">&lt;!--æŠ¥è¡¨æ’ä»¶çš„é…ç½® --&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">configuration</span> /&gt;</span></span><br><span class="line">                <span class="comment">&lt;!--ä¸€ç»„æŠ¥è¡¨çš„å¤šé‡è§„èŒƒï¼Œæ¯ä¸ªè§„èŒƒå¯èƒ½æœ‰ä¸åŒçš„é…ç½®ã€‚ä¸€ä¸ªè§„èŒƒï¼ˆæŠ¥è¡¨é›†ï¼‰å¯¹åº”ä¸€ä¸ªæ‰§è¡Œç›®æ ‡ ã€‚ä¾‹å¦‚ï¼Œæœ‰1ï¼Œ2ï¼Œ3ï¼Œ4ï¼Œ5ï¼Œ6ï¼Œ7ï¼Œ8ï¼Œ9ä¸ªæŠ¥è¡¨ã€‚1ï¼Œ2ï¼Œ5æ„æˆAæŠ¥è¡¨é›†ï¼Œå¯¹åº”ä¸€ä¸ªæ‰§è¡Œç›®æ ‡ã€‚2ï¼Œ5ï¼Œ8æ„æˆBæŠ¥è¡¨é›†ï¼Œå¯¹åº”å¦ä¸€ä¸ªæ‰§è¡Œç›®æ ‡ --&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">reportSets</span>&gt;</span></span><br><span class="line">                    <span class="comment">&lt;!--è¡¨ç¤ºæŠ¥è¡¨çš„ä¸€ä¸ªé›†åˆï¼Œä»¥åŠäº§ç”Ÿè¯¥é›†åˆçš„é…ç½® --&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">reportSet</span>&gt;</span></span><br><span class="line">                        <span class="comment">&lt;!--æŠ¥è¡¨é›†åˆçš„å”¯ä¸€æ ‡è¯†ç¬¦ï¼ŒPOMç»§æ‰¿æ—¶ç”¨åˆ° --&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">id</span> /&gt;</span></span><br><span class="line">                        <span class="comment">&lt;!--äº§ç”ŸæŠ¥è¡¨é›†åˆæ—¶ï¼Œè¢«ä½¿ç”¨çš„æŠ¥è¡¨çš„é…ç½® --&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">configuration</span> /&gt;</span></span><br><span class="line">                        <span class="comment">&lt;!--é…ç½®æ˜¯å¦è¢«ç»§æ‰¿åˆ°å­POMs --&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">inherited</span> /&gt;</span></span><br><span class="line">                        <span class="comment">&lt;!--è¿™ä¸ªé›†åˆé‡Œä½¿ç”¨åˆ°å“ªäº›æŠ¥è¡¨ --&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">reports</span> /&gt;</span></span><br><span class="line">                    <span class="tag">&lt;/<span class="name">reportSet</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">reportSets</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">plugin</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">plugins</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">reporting</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- ç»§æ‰¿è‡ªè¯¥é¡¹ç›®çš„æ‰€æœ‰å­é¡¹ç›®çš„é»˜è®¤ä¾èµ–ä¿¡æ¯ã€‚è¿™éƒ¨åˆ†çš„ä¾èµ–ä¿¡æ¯ä¸ä¼šè¢«ç«‹å³è§£æ,è€Œæ˜¯å½“å­é¡¹ç›®å£°æ˜ä¸€ä¸ªä¾èµ–ï¼ˆå¿…é¡»æè¿°group IDå’Œ artifact </span></span><br><span class="line"><span class="comment">        IDä¿¡æ¯ï¼‰ï¼Œå¦‚æœgroup IDå’Œartifact IDä»¥å¤–çš„ä¸€äº›ä¿¡æ¯æ²¡æœ‰æè¿°ï¼Œåˆ™é€šè¿‡group IDå’Œartifact ID åŒ¹é…åˆ°è¿™é‡Œçš„ä¾èµ–ï¼Œå¹¶ä½¿ç”¨è¿™é‡Œçš„ä¾èµ–ä¿¡æ¯ã€‚ --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependencyManagement</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependencies</span>&gt;</span></span><br><span class="line">            <span class="comment">&lt;!--å‚è§dependencies/dependencyå…ƒç´  --&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">                ......</span><br><span class="line">            <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependencies</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependencyManagement</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--é¡¹ç›®åˆ†å‘ä¿¡æ¯ï¼Œåœ¨æ‰§è¡Œmvn deployåè¡¨ç¤ºè¦å‘å¸ƒçš„ä½ç½®ã€‚æœ‰äº†è¿™äº›ä¿¡æ¯å°±å¯ä»¥æŠŠç½‘ç«™éƒ¨ç½²åˆ°è¿œç¨‹æœåŠ¡å™¨æˆ–è€…æŠŠæ„ä»¶éƒ¨ç½²åˆ°è¿œç¨‹ä»“åº“ã€‚ --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">distributionManagement</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--éƒ¨ç½²é¡¹ç›®äº§ç”Ÿçš„æ„ä»¶åˆ°è¿œç¨‹ä»“åº“éœ€è¦çš„ä¿¡æ¯ --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">repository</span>&gt;</span></span><br><span class="line">            <span class="comment">&lt;!--æ˜¯åˆ†é…ç»™å¿«ç…§ä¸€ä¸ªå”¯ä¸€çš„ç‰ˆæœ¬å·ï¼ˆç”±æ—¶é—´æˆ³å’Œæ„å»ºæµæ°´å·ï¼‰ï¼Ÿè¿˜æ˜¯æ¯æ¬¡éƒ½ä½¿ç”¨ç›¸åŒçš„ç‰ˆæœ¬å·ï¼Ÿå‚è§repositories/repositoryå…ƒç´  --&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">uniqueVersion</span> /&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">id</span>&gt;</span>banseon-maven2<span class="tag">&lt;/<span class="name">id</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">name</span>&gt;</span>banseon maven2<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">url</span>&gt;</span>file://$&#123;basedir&#125;/target/deploy<span class="tag">&lt;/<span class="name">url</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">layout</span> /&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">repository</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--æ„ä»¶çš„å¿«ç…§éƒ¨ç½²åˆ°å“ªé‡Œï¼Ÿå¦‚æœæ²¡æœ‰é…ç½®è¯¥å…ƒç´ ï¼Œé»˜è®¤éƒ¨ç½²åˆ°repositoryå…ƒç´ é…ç½®çš„ä»“åº“ï¼Œå‚è§distributionManagement/repositoryå…ƒç´  --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">snapshotRepository</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">uniqueVersion</span> /&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">id</span>&gt;</span>banseon-maven2<span class="tag">&lt;/<span class="name">id</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">name</span>&gt;</span>Banseon-maven2 Snapshot Repository<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">url</span>&gt;</span>scp://svn.baidu.com/banseon:/usr/local/maven-snapshot<span class="tag">&lt;/<span class="name">url</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">layout</span> /&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">snapshotRepository</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--éƒ¨ç½²é¡¹ç›®çš„ç½‘ç«™éœ€è¦çš„ä¿¡æ¯ --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">site</span>&gt;</span></span><br><span class="line">            <span class="comment">&lt;!--éƒ¨ç½²ä½ç½®çš„å”¯ä¸€æ ‡è¯†ç¬¦ï¼Œç”¨æ¥åŒ¹é…ç«™ç‚¹å’Œsettings.xmlæ–‡ä»¶é‡Œçš„é…ç½® --&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">id</span>&gt;</span>banseon-site<span class="tag">&lt;/<span class="name">id</span>&gt;</span></span><br><span class="line">            <span class="comment">&lt;!--éƒ¨ç½²ä½ç½®çš„åç§° --&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">name</span>&gt;</span>business api website<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line">            <span class="comment">&lt;!--éƒ¨ç½²ä½ç½®çš„URLï¼ŒæŒ‰protocol://hostname/pathå½¢å¼ --&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">url</span>&gt;</span></span><br><span class="line">                scp://svn.baidu.com/banseon:/var/www/localhost/banseon-web</span><br><span class="line">            <span class="tag">&lt;/<span class="name">url</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">site</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--é¡¹ç›®ä¸‹è½½é¡µé¢çš„URLã€‚å¦‚æœæ²¡æœ‰è¯¥å…ƒç´ ï¼Œç”¨æˆ·åº”è¯¥å‚è€ƒä¸»é¡µã€‚ä½¿ç”¨è¯¥å…ƒç´ çš„åŸå› æ˜¯ï¼šå¸®åŠ©å®šä½é‚£äº›ä¸åœ¨ä»“åº“é‡Œçš„æ„ä»¶ï¼ˆç”±äºlicenseé™åˆ¶ï¼‰ã€‚ --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">downloadUrl</span> /&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--å¦‚æœæ„ä»¶æœ‰äº†æ–°çš„group IDå’Œartifact IDï¼ˆæ„ä»¶ç§»åˆ°äº†æ–°çš„ä½ç½®ï¼‰ï¼Œè¿™é‡Œåˆ—å‡ºæ„ä»¶çš„é‡å®šä½ä¿¡æ¯ã€‚ --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">relocation</span>&gt;</span></span><br><span class="line">            <span class="comment">&lt;!--æ„ä»¶æ–°çš„group ID --&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span> /&gt;</span></span><br><span class="line">            <span class="comment">&lt;!--æ„ä»¶æ–°çš„artifact ID --&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span> /&gt;</span></span><br><span class="line">            <span class="comment">&lt;!--æ„ä»¶æ–°çš„ç‰ˆæœ¬å· --&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">version</span> /&gt;</span></span><br><span class="line">            <span class="comment">&lt;!--æ˜¾ç¤ºç»™ç”¨æˆ·çš„ï¼Œå…³äºç§»åŠ¨çš„é¢å¤–ä¿¡æ¯ï¼Œä¾‹å¦‚åŸå› ã€‚ --&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">message</span> /&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">relocation</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- ç»™å‡ºè¯¥æ„ä»¶åœ¨è¿œç¨‹ä»“åº“çš„çŠ¶æ€ã€‚ä¸å¾—åœ¨æœ¬åœ°é¡¹ç›®ä¸­è®¾ç½®è¯¥å…ƒç´ ï¼Œå› ä¸ºè¿™æ˜¯å·¥å…·è‡ªåŠ¨æ›´æ–°çš„ã€‚æœ‰æ•ˆçš„å€¼æœ‰ï¼šnoneï¼ˆé»˜è®¤ï¼‰ï¼Œconvertedï¼ˆä»“åº“ç®¡ç†å‘˜ä» </span></span><br><span class="line"><span class="comment">            Maven 1 POMè½¬æ¢è¿‡æ¥ï¼‰ï¼Œpartnerï¼ˆç›´æ¥ä»ä¼™ä¼´Maven 2ä»“åº“åŒæ­¥è¿‡æ¥ï¼‰ï¼Œdeployedï¼ˆä»Maven 2å®ä¾‹éƒ¨ ç½²ï¼‰ï¼Œverifiedï¼ˆè¢«æ ¸å®æ—¶æ­£ç¡®çš„å’Œæœ€ç»ˆçš„ï¼‰ã€‚ --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">status</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">distributionManagement</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--ä»¥å€¼æ›¿ä»£åç§°ï¼ŒPropertieså¯ä»¥åœ¨æ•´ä¸ªPOMä¸­ä½¿ç”¨ï¼Œä¹Ÿå¯ä»¥ä½œä¸ºè§¦å‘æ¡ä»¶ï¼ˆè§settings.xmlé…ç½®æ–‡ä»¶é‡Œactivationå…ƒç´ çš„è¯´æ˜ï¼‰ã€‚æ ¼å¼æ˜¯&lt;name&gt;value&lt;/name&gt;ã€‚ --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">properties</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">project</span>&gt;</span></span><br></pre></td></tr></table></figure>]]></content>
    
    
    <summary type="html">&lt;p&gt;è„±ç¦»IDEï¼Œæœ¬åœ°ï¼ˆMavenã€Gradleã€JDKã€Antï¼‰/åœ¨çº¿ï¼ˆTravis-CIï¼‰build Javaé¡¹ç›®çš„æ­¥éª¤ã€‚&lt;/p&gt;</summary>
    
    
    
    <category term="SoftwareConstruction" scheme="https://www.fvolcano.red/categories/SoftwareConstruction/"/>
    
    <category term="Java" scheme="https://www.fvolcano.red/categories/SoftwareConstruction/Java/"/>
    
    
    <category term="æ•´ç†" scheme="https://www.fvolcano.red/tags/%E6%95%B4%E7%90%86/"/>
    
  </entry>
  
  <entry>
    <title>JUnitä½¿ç”¨æ‰‹å†Œ</title>
    <link href="https://www.fvolcano.red/2021/manual-of-JUnit/"/>
    <id>https://www.fvolcano.red/2021/manual-of-JUnit/</id>
    <published>2021-05-11T11:20:35.000Z</published>
    <updated>2021-05-11T11:20:35.000Z</updated>
    
    <content type="html"><![CDATA[<p><img src="/2021/manual-of-JUnit/image-20210517194801837.png" alt="image-20210517194801837"><a id="more"></a></p><h2 id="å‚è€ƒèµ„æ–™"><a href="#å‚è€ƒèµ„æ–™" class="headerlink" title="å‚è€ƒèµ„æ–™"></a>å‚è€ƒèµ„æ–™</h2><ol><li><a href="https://www.guru99.com/junit-tutorial.html">JUnit Tutorial for Beginners: Learn in 3 Days</a></li><li><a href="https://github.com/junit-team/junit4">junit4 github</a></li><li><a href="https://www.vogella.com/tutorials/JUnit/article.html">Unit Testing with JUnit 5 - Tutorial</a></li><li><a href="https://junit.org/junit5/docs/current/user-guide/#overview">JUnit 5 User Guide</a></li></ol><h1 id="JUnit4"><a href="#JUnit4" class="headerlink" title="JUnit4"></a>JUnit4</h1><p>package: org.Junit</p><h2 id="Concepts"><a href="#Concepts" class="headerlink" title="Concepts"></a>Concepts</h2><h3 id="Test-Case"><a href="#Test-Case" class="headerlink" title="Test Case"></a><a href="https://www.guru99.com/test-case.html">Test Case</a></h3><p>A test case is a set of actions executed to verify a particular feature or functionality of your software application. A Test Case contains test steps, test data, precondition, postcondition developed for specific test scenario to verify any requirement. </p><p>For a <a href="https://www.guru99.com/test-scenario.html">Test Scenario</a>: Check Login Functionality there many possible test cases are:</p><ul><li>Test Case 1: Check results on entering valid User Id &amp; Password</li><li>Test Case 2: Check results on entering Invalid User ID &amp; Password</li><li>Test Case 3: Check response when a User ID is Empty &amp; Login Button is pressed, and many more</li></ul><h3 id="Test-fixture"><a href="#Test-fixture" class="headerlink" title="Test fixture"></a>Test fixture</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">OutputFileTest</span> </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> File output; </span><br><span class="line">    <span class="meta">@Before</span> </span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">createOutputFile</span><span class="params">()</span> </span>&#123; </span><br><span class="line">       output = <span class="keyword">new</span> File(...);</span><br><span class="line">    &#125;</span><br><span class="line">  </span><br><span class="line">true<span class="meta">@After</span> </span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">deleteOutputFile</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        output.delete(); </span><br><span class="line">    &#125; </span><br><span class="line">    </span><br><span class="line">    <span class="meta">@Test</span> </span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">testFile1</span><span class="params">()</span> </span>&#123;</span><br><span class="line">       <span class="comment">// code for test case objective</span></span><br><span class="line">    &#125; </span><br><span class="line">true<span class="meta">@Test</span> </span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">testFile2</span><span class="params">()</span> </span>&#123;</span><br><span class="line">       <span class="comment">// code for test case objective</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>A test fixture is a context where a <strong>Test Case</strong> runs. Typically, test fixtures include:</p><ul><li>Objects or resources that are available for any test case.</li><li>Activities required that makes these objects/resources available, such as <strong>setup</strong> and <strong>teardown</strong>.</li></ul><h3 id="Test-Suites"><a href="#Test-Suites" class="headerlink" title="Test Suites"></a>Test Suites</h3><p>Test suite allows us to aggregate all test cases from multiple classes in an order in one place and run it together.</p><p>To run the suite test, you need to annotate a class using below-mentioned annotations:</p><p>@Runwith(Suite.class)</p><p>@SuiteClasses(test1.class,test2.classâ€¦â€¦) or @Suite.SuiteClasses ({test1.class, test2.classâ€¦â€¦})</p><p>ä¾‹å­ï¼š</p><p><img src="/2021/manual-of-JUnit/052416_0732_CreateJUnit3.png" alt="Create JUnit Test Suite"></p><p><img src="/2021/manual-of-JUnit/052416_0732_CreateJUnit4.png" alt="Create JUnit Test Suite"></p><h3 id="Test-Runner"><a href="#Test-Runner" class="headerlink" title="Test Runner"></a>Test Runner</h3><p>a tool for execution of the test cases.</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Test</span> </span>&#123;                </span><br><span class="line">true<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;        </span><br><span class="line">truetrueResult result = JUnitCore.runClasses(CreateAndSetName.class);</span><br><span class="line">        <span class="keyword">for</span> (Failure failure : result.getFailures()) &#123;</span><br><span class="line">            System.out.println(failure.toString());                    </span><br><span class="line">         &#125;        </span><br><span class="line">          System.out.println(result.wasSuccessful());                    </span><br><span class="line">       &#125;        </span><br><span class="line">&#125;      </span><br></pre></td></tr></table></figure><h3 id="Test-Scenario"><a href="#Test-Scenario" class="headerlink" title="Test Scenario"></a>Test Scenario</h3><p>A test scenario is defined as any functionality that can be tested. It is also called <em>Test Condition</em> or <em>Test Possibility</em>. </p><h3 id="Error-Collector"><a href="#Error-Collector" class="headerlink" title="Error Collector"></a>Error Collector</h3><p>With JUnit error collector, you can still continue with the test execution even after an issue is found or test fails. Error collector collects all error objects and reports it only once after the test execution is over.</p><h2 id="Annotations"><a href="#Annotations" class="headerlink" title="Annotations"></a>Annotations</h2><h3 id="Before-and-After"><a href="#Before-and-After" class="headerlink" title="@Before and @After"></a>@Before and @After</h3><p><strong>@Before</strong> annotation is used on a method containing code to run before each test case. i.e it runs before each test execution. <strong>@After</strong> annotation is used on a method containing java code to run after each test case. These methods will run even if any exceptions are thrown in the test case or in the case of assertion failures.</p><ul><li>All the methods annotated with <strong>@Before</strong> will run before each test case, but they may run in any order. </li><li>You can inherit @Before and @After methods from a super class, Execution is as follows: It is a standard execution process in JUnit.</li></ul><ol><li>Execute the @Before methods in the superclass</li><li>Execute the @Before methods in this class</li><li>Execute a @Test method in this class</li><li>Execute the @After methods in this class</li><li>Execute the @After methods in the superclass</li></ol><h3 id="BeforeClass-and-AfterClass"><a href="#BeforeClass-and-AfterClass" class="headerlink" title="@BeforeClass and @AfterClass"></a>@BeforeClass and @AfterClass</h3><p>Run a method only once for the entire test class before(after) any of the tests are executed. They are used for â€œ<strong>once-only setup</strong>â€œ and â€œ<strong>once-only teardown</strong>â€œ, such as start &amp; stop servers and open &amp; close communication.</p><table><thead><tr><th align="left"><strong>Annotations</strong></th><th align="left"><strong>Description</strong></th></tr></thead><tbody><tr><td align="left">@Test</td><td align="left">This annotation is a replacement of org.junit.TestCase which indicates that public void method to which it is attached can be executed as a test Case.</td></tr><tr><td align="left">@Ignore</td><td align="left">This annotation can be used if you want to ignore some statements during test execution for e.g. disabling some test cases during test execution.</td></tr><tr><td align="left">@Test(timeout=500)</td><td align="left">This annotation can be used if you want to set some timeout during test execution for e.g. if you are working under some SLA (Service level agreement), and tests need to be completed within some specified time.</td></tr><tr><td align="left">@Test(expected=IllegalArgumentException.class)</td><td align="left">This annotation can be used if you want to handle some exception during test execution. For, e.g., if you want to check whether a particular method is throwing specified exception or not.</td></tr></tbody></table><h3 id="Ignore"><a href="#Ignore" class="headerlink" title="@Ignore"></a>@Ignore</h3><p>can be used in two scenarios as given below:</p><ol><li>If you want to ignore a test method, use @Ignore along with @Test annotation.</li><li>If you want to ignore all the tests of class, use @Ignore annotation at the class level.</li></ol><p>For exception testing, you can use</p><ul><li><strong>Optional parameter (expected) of @test</strong> annotation and</li><li>To trace the information ,â€fail()â€ can be used</li></ul><h3 id="Rule"><a href="#Rule" class="headerlink" title="@Rule"></a>@Rule</h3><p>is used to create an object of error collector. Once the object for error collector is created, you can easily add all the errors into the object using method <strong>addError (Throwable error)</strong>, these errors will be logged in JUnit test result.</p><p>example:</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> guru99.junit;        </span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.junit.Assert;        </span><br><span class="line"><span class="keyword">import</span> org.junit.Rule;        </span><br><span class="line"><span class="keyword">import</span> org.junit.Test;        </span><br><span class="line"><span class="keyword">import</span> org.junit.rules.ErrorCollector;        </span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ErrorCollectorExample</span> </span>&#123;                </span><br><span class="line">    <span class="meta">@Rule</span>        </span><br><span class="line">    <span class="keyword">public</span> ErrorCollector collector = <span class="keyword">new</span> ErrorCollector();                        </span><br><span class="line">    <span class="meta">@Test</span>        </span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">example</span><span class="params">()</span> </span>&#123;                    </span><br><span class="line">    collector.addError(<span class="keyword">new</span> Throwable(<span class="string">&quot;There is an error in first line&quot;</span>));        </span><br><span class="line">    collector.addError(<span class="keyword">new</span> Throwable(<span class="string">&quot;There is an error in second line&quot;</span>));</span><br><span class="line">        System.out.println(<span class="string">&quot;Hello&quot;</span>);                    </span><br><span class="line">        <span class="keyword">try</span> &#123;            </span><br><span class="line">            Assert.assertTrue(<span class="string">&quot;A &quot;</span> == <span class="string">&quot;B&quot;</span>);                    </span><br><span class="line">        &#125; <span class="keyword">catch</span> (Throwable t) &#123;                    </span><br><span class="line">            collector.addError(t);                    </span><br><span class="line">        &#125;        </span><br><span class="line">        System.out.println(<span class="string">&quot;World!!!!&quot;</span>);                    </span><br><span class="line">    &#125;        </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><img src="/2021/manual-of-JUnit/052416_1156_JUnitErrorC1.png" alt="JUnit ErrorCollector"></p><h3 id="Parameters"><a href="#Parameters" class="headerlink" title="@Parameters"></a>@Parameters</h3><p>Parameterized test is to execute the same test over and over again using different values. It helps developer to save time in executing same test which differs only in their inputs and expected results. Using Parameterized test, one can set up a test method that retrieves data from some data source.</p><p>example:</p><ol><li>Create a parameterized test class</li></ol><p><img src="/2021/manual-of-JUnit/052416_1228_JUnitParame3.png" alt="JUnit Parameterized Test"></p><p><strong>@RunWith</strong> annotation is used to specify its runner class name. If we donâ€™t specify any type as a parameter, the runtime will choose <strong>BlockJunit4ClassRunner</strong> by default.</p><ol start="2"><li><p>Create a constructor that stores the test data. It stores 3 variables</p><p><img src="/2021/manual-of-JUnit/052416_1228_JUnitParame4.png" alt="JUnit Parameterized Test"></p></li><li><p>Create a static method that generates and returns test data.</p></li></ol><p><img src="/2021/manual-of-JUnit/052416_1228_JUnitParame5.png" alt="JUnit Parameterized Test"></p><p><img src="/2021/manual-of-JUnit/052416_1228_JUnitParame6.png" alt="JUnit Parameterized Test"></p><ol start="4"><li>Create a test runner class to run parameterized test</li></ol><p><img src="/2021/manual-of-JUnit/052416_1228_JUnitParame7.png" alt="JUnit Parameterized Test"></p><h2 id="Assertions"><a href="#Assertions" class="headerlink" title="Assertions"></a>Assertions</h2><ul><li>org.junit.Assert</li></ul><table><thead><tr><th align="left"><strong>Method</strong></th><th align="left"><strong>Description</strong></th></tr></thead><tbody><tr><td align="left">void assertEquals(boolean expected, boolean actual)</td><td align="left">It checks whether two values are equals similar to equals method of Object class</td></tr><tr><td align="left">void assertFalse(boolean condition)</td><td align="left">functionality is to check that a condition is false.</td></tr><tr><td align="left">void assertNotNull(Object object)</td><td align="left">â€œassertNotNullâ€ functionality is to check that an object is not null.</td></tr><tr><td align="left">void assertNull(Object object)</td><td align="left">â€œassertNullâ€ functionality is to check that an object is null.</td></tr><tr><td align="left">void assertTrue(boolean condition)</td><td align="left">â€œassertTrueâ€ functionality is to check that a condition is true.</td></tr><tr><td align="left">void fail()</td><td align="left">If you want to throw any assertion error, you have fail() that always results in a fail verdict.</td></tr><tr><td align="left">void assertSame([String message]</td><td align="left">â€œassertSameâ€ functionality is to check that the two objects refer to the same object.</td></tr><tr><td align="left">void assertNotSame([String message]</td><td align="left">â€œassertNotSameâ€ functionality is to check that the two objects do not refer to the same object.</td></tr></tbody></table><ul><li><strong>assertArrayEquals(expected, actual)</strong>: if arrays have the same length</li><li><strong>assertEquals( aDoubleValue, anotherDoubleValue, 0.001 )</strong>: Math.abs( expected â€“ actual ) &lt;= delta</li></ul><h2 id="Class-and-Methods"><a href="#Class-and-Methods" class="headerlink" title="Class and Methods"></a>Class and Methods</h2><h3 id="org-junit-TestCase"><a href="#org-junit-TestCase" class="headerlink" title="org.junit.TestCase"></a>org.junit.TestCase</h3><table><thead><tr><th align="left"><strong>Method</strong></th><th align="left"><strong>Description</strong></th></tr></thead><tbody><tr><td align="left">int countTestCases()</td><td align="left">This method is used to count how many number of test cases executed by <strong>run(TestResult tr)</strong> method.</td></tr><tr><td align="left">TestResult createResult()</td><td align="left">This method is used to create a <strong>TestResult</strong> object.</td></tr><tr><td align="left">String getName()</td><td align="left">This method returns a string which is nothing but a <strong>TestCase</strong>.</td></tr><tr><td align="left">TestResult run()</td><td align="left">This method is used to execute a test which returns a <strong>TestResult</strong> object</td></tr><tr><td align="left">void run(TestResult result)</td><td align="left">This method is used to execute a test having a <strong>TestResult</strong> object which doesnâ€™t returns anything.</td></tr><tr><td align="left">void setName(String name)</td><td align="left">This method is used to set a name of a <strong>TestCase.</strong></td></tr><tr><td align="left">void setUp()</td><td align="left">This method is used to write resource association code. e.g. Create a database connection.</td></tr><tr><td align="left">void tearDown()</td><td align="left">This method is used to write resource release code. e.g. Release database connection after performing transaction operation.</td></tr></tbody></table><h3 id="org-junit-TestResult"><a href="#org-junit-TestResult" class="headerlink" title="org.junit.TestResult"></a>org.junit.TestResult</h3><table><thead><tr><th align="left"><strong>Method</strong></th><th align="left"><strong>Description</strong></th></tr></thead><tbody><tr><td align="left">void addError(Test test, Throwable t)</td><td align="left">This method is used if you require add an error to the test.</td></tr><tr><td align="left">void addFailure(Test test, AssertionFailedError t)</td><td align="left">This method is used if you require add a failure to the list of failures.</td></tr><tr><td align="left">void endTest(Test test)</td><td align="left">This method is used to notify that a test is performed(completed)</td></tr><tr><td align="left">int errorCount()</td><td align="left">This method is used to get the error detected during test execution.</td></tr><tr><td align="left">Enumeration&lt;TestFailure&gt; errors()</td><td align="left">This method simply returns a collection (Enumeration here) of errors.</td></tr><tr><td align="left">int failureCount()</td><td align="left">This method is used to get the count of errors detected during test execution.</td></tr><tr><td align="left">void run(TestCase test)</td><td align="left">This method is used to execute a test case.</td></tr><tr><td align="left">int runCount()</td><td align="left">This method simply counts the executed test.</td></tr><tr><td align="left">void startTest(Test test)</td><td align="left">This method is used to notify that a test is started.</td></tr><tr><td align="left">void stop()</td><td align="left">This method is used to test run to be stopped.</td></tr></tbody></table><h3 id="org-junit-TestSuite"><a href="#org-junit-TestSuite" class="headerlink" title="org.junit.TestSuite"></a>org.junit.TestSuite</h3><table><thead><tr><th align="left"><strong>Method</strong></th><th align="left"><strong>Description</strong></th></tr></thead><tbody><tr><td align="left">void addTest(Test test)</td><td align="left">This method is used if you want to add a test to the suite.</td></tr><tr><td align="left">void addTestSuite(Class&lt;? extends TestCase&gt; testClass)</td><td align="left">This method is used if you want to specify the class while adding a test to the suite.</td></tr><tr><td align="left">int countTestCases()</td><td align="left">This method is used if you want to count the number of test cases.</td></tr><tr><td align="left">String getName()</td><td align="left">This method is used to get the name of the test suite.</td></tr><tr><td align="left">void run(TestResult result)</td><td align="left">This method is used to execute a test and collect test result in <strong>TestResult</strong> object.</td></tr><tr><td align="left">void setName(String name)</td><td align="left">This method is used to set the name of <strong>TestSuite</strong>.</td></tr><tr><td align="left">Test testAt(int index)</td><td align="left">This method is used if you want to return the test at given index.</td></tr><tr><td align="left">int testCount()</td><td align="left">This method is used if you want to return a number of tests in the Suite.</td></tr><tr><td align="left">static Test warning(String message)</td><td align="left">This method returns a test which will fail and log a warning message.</td></tr></tbody></table><h1 id="JUnit-5"><a href="#JUnit-5" class="headerlink" title="JUnit 5"></a>JUnit 5</h1><blockquote><p>JUnit 5 = JUnit Platform + JUnit Jupiter + JUnit Vintage</p></blockquote><h2 id="Annotations-1"><a href="#Annotations-1" class="headerlink" title="Annotations"></a>Annotations</h2><p>Unless otherwise stated, all core annotations are located in the <code>org.junit.jupiter.api</code> package in the <code>junit-jupiter-api</code> module.</p><table><thead><tr><th align="left">Annotation</th><th align="left">Description</th></tr></thead><tbody><tr><td align="left"><code>@Test</code></td><td align="left">Denotes that a method is a test method. Unlike JUnit 4â€™s <code>@Test</code> annotation, this annotation does not declare any attributes, since test extensions in JUnit Jupiter operate based on their own dedicated annotations. Such methods are <em>inherited</em> unless they are <em>overridden</em>.</td></tr><tr><td align="left"><code>@ParameterizedTest</code></td><td align="left">Denotes that a method is a <a href="https://junit.org/junit5/docs/current/user-guide/#writing-tests-parameterized-tests">parameterized test</a>. Such methods are <em>inherited</em> unless they are <em>overridden</em>.</td></tr><tr><td align="left"><code>@RepeatedTest</code></td><td align="left">Denotes that a method is a test template for a <a href="https://junit.org/junit5/docs/current/user-guide/#writing-tests-repeated-tests">repeated test</a>. Such methods are <em>inherited</em> unless they are <em>overridden</em>.</td></tr><tr><td align="left"><code>@TestFactory</code></td><td align="left">Denotes that a method is a test factory for <a href="https://junit.org/junit5/docs/current/user-guide/#writing-tests-dynamic-tests">dynamic tests</a>. Such methods are <em>inherited</em> unless they are <em>overridden</em>.</td></tr><tr><td align="left"><code>@TestTemplate</code></td><td align="left">Denotes that a method is a <a href="https://junit.org/junit5/docs/current/user-guide/#writing-tests-test-templates">template for test cases</a> designed to be invoked multiple times depending on the number of invocation contexts returned by the registered <a href="https://junit.org/junit5/docs/current/user-guide/#extensions-test-templates">providers</a>. Such methods are <em>inherited</em> unless they are <em>overridden</em>.</td></tr><tr><td align="left"><code>@TestMethodOrder</code></td><td align="left">Used to configure the <a href="https://junit.org/junit5/docs/current/user-guide/#writing-tests-test-execution-order">test method execution order</a> for the annotated test class; similar to JUnit 4â€™s <code>@FixMethodOrder</code>. Such annotations are <em>inherited</em>.</td></tr><tr><td align="left"><code>@TestInstance</code></td><td align="left">Used to configure the <a href="https://junit.org/junit5/docs/current/user-guide/#writing-tests-test-instance-lifecycle">test instance lifecycle</a> for the annotated test class. Such annotations are <em>inherited</em>.</td></tr><tr><td align="left"><code>@DisplayName</code></td><td align="left">Declares a custom <a href="https://junit.org/junit5/docs/current/user-guide/#writing-tests-display-names">display name</a> for the test class or test method. Such annotations are not <em>inherited</em>.</td></tr><tr><td align="left"><code>@DisplayNameGeneration</code></td><td align="left">Declares a custom <a href="https://junit.org/junit5/docs/current/user-guide/#writing-tests-display-name-generator">display name generator</a> for the test class. Such annotations are <em>inherited</em>.</td></tr><tr><td align="left"><code>@BeforeEach</code></td><td align="left">Denotes that the annotated method should be executed <em>before</em> <strong>each</strong> <code>@Test</code>, <code>@RepeatedTest</code>, <code>@ParameterizedTest</code>, or <code>@TestFactory</code> method in the current class; analogous to JUnit 4â€™s <code>@Before</code>. Such methods are <em>inherited</em> unless they are <em>overridden</em>.</td></tr><tr><td align="left"><code>@AfterEach</code></td><td align="left">Denotes that the annotated method should be executed <em>after</em> <strong>each</strong> <code>@Test</code>, <code>@RepeatedTest</code>, <code>@ParameterizedTest</code>, or <code>@TestFactory</code> method in the current class; analogous to JUnit 4â€™s <code>@After</code>. Such methods are <em>inherited</em> unless they are <em>overridden</em>.</td></tr><tr><td align="left"><code>@BeforeAll</code></td><td align="left">Denotes that the annotated method should be executed <em>before</em> <strong>all</strong> <code>@Test</code>, <code>@RepeatedTest</code>, <code>@ParameterizedTest</code>, and <code>@TestFactory</code> methods in the current class; analogous to JUnit 4â€™s <code>@BeforeClass</code>. Such methods are <em>inherited</em> (unless they are <em>hidden</em> or <em>overridden</em>) and must be <code>static</code> (unless the â€œper-classâ€ <a href="https://junit.org/junit5/docs/current/user-guide/#writing-tests-test-instance-lifecycle">test instance lifecycle</a> is used).</td></tr><tr><td align="left"><code>@AfterAll</code></td><td align="left">Denotes that the annotated method should be executed <em>after</em> <strong>all</strong> <code>@Test</code>, <code>@RepeatedTest</code>, <code>@ParameterizedTest</code>, and <code>@TestFactory</code> methods in the current class; analogous to JUnit 4â€™s <code>@AfterClass</code>. Such methods are <em>inherited</em> (unless they are <em>hidden</em> or <em>overridden</em>) and must be <code>static</code> (unless the â€œper-classâ€ <a href="https://junit.org/junit5/docs/current/user-guide/#writing-tests-test-instance-lifecycle">test instance lifecycle</a> is used).</td></tr><tr><td align="left"><code>@Nested</code></td><td align="left">Denotes that the annotated class is a non-static <a href="https://junit.org/junit5/docs/current/user-guide/#writing-tests-nested">nested test class</a>. <code>@BeforeAll</code> and <code>@AfterAll</code> methods cannot be used directly in a <code>@Nested</code> test class unless the â€œper-classâ€ <a href="https://junit.org/junit5/docs/current/user-guide/#writing-tests-test-instance-lifecycle">test instance lifecycle</a> is used. Such annotations are not <em>inherited</em>.</td></tr><tr><td align="left"><code>@Tag</code></td><td align="left">Used to declare <a href="https://junit.org/junit5/docs/current/user-guide/#writing-tests-tagging-and-filtering">tags for filtering tests</a>, either at the class or method level; analogous to test groups in TestNG or Categories in JUnit 4. Such annotations are <em>inherited</em> at the class level but not at the method level.</td></tr><tr><td align="left"><code>@Disabled</code></td><td align="left">Used to <a href="https://junit.org/junit5/docs/current/user-guide/#writing-tests-disabling">disable</a> a test class or test method; analogous to JUnit 4â€™s <code>@Ignore</code>. Such annotations are not <em>inherited</em>.</td></tr><tr><td align="left"><code>@Timeout</code></td><td align="left">Used to fail a test, test factory, test template, or lifecycle method if its execution exceeds a given duration. Such annotations are <em>inherited</em>.</td></tr><tr><td align="left"><code>@ExtendWith</code></td><td align="left">Used to <a href="https://junit.org/junit5/docs/current/user-guide/#extensions-registration-declarative">register extensions declaratively</a>. Such annotations are <em>inherited</em>.</td></tr><tr><td align="left"><code>@RegisterExtension</code></td><td align="left">Used to <a href="https://junit.org/junit5/docs/current/user-guide/#extensions-registration-programmatic">register extensions programmatically</a> via fields. Such fields are <em>inherited</em> unless they are <em>shadowed</em>.</td></tr><tr><td align="left"><code>@TempDir</code></td><td align="left">Used to supply a <a href="https://junit.org/junit5/docs/current/user-guide/#writing-tests-built-in-extensions-TempDirectory">temporary directory</a> via field injection or parameter injection in a lifecycle method or test method; located in the <code>org.junit.jupiter.api.io</code> package.</td></tr></tbody></table><h2 id="Assertions-1"><a href="#Assertions-1" class="headerlink" title="Assertions"></a>Assertions</h2><p>JUnit Jupiter comes with many of the assertion methods that JUnit 4 has and adds a few that lend themselves well to being used with Java 8 lambdas. All JUnit Jupiter assertions are <code>static</code> methods in the <code>org.junit.jupiter.api.Assertions</code> class.</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="keyword">static</span> java.time.Duration.ofMillis;</span><br><span class="line"><span class="keyword">import</span> <span class="keyword">static</span> java.time.Duration.ofMinutes;</span><br><span class="line"><span class="keyword">import</span> <span class="keyword">static</span> org.junit.jupiter.api.Assertions.assertAll;</span><br><span class="line"><span class="keyword">import</span> <span class="keyword">static</span> org.junit.jupiter.api.Assertions.assertEquals;</span><br><span class="line"><span class="keyword">import</span> <span class="keyword">static</span> org.junit.jupiter.api.Assertions.assertNotNull;</span><br><span class="line"><span class="keyword">import</span> <span class="keyword">static</span> org.junit.jupiter.api.Assertions.assertThrows;</span><br><span class="line"><span class="keyword">import</span> <span class="keyword">static</span> org.junit.jupiter.api.Assertions.assertTimeout;</span><br><span class="line"><span class="keyword">import</span> <span class="keyword">static</span> org.junit.jupiter.api.Assertions.assertTimeoutPreemptively;</span><br><span class="line"><span class="keyword">import</span> <span class="keyword">static</span> org.junit.jupiter.api.Assertions.assertTrue;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.concurrent.CountDownLatch;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> example.domain.Person;</span><br><span class="line"><span class="keyword">import</span> example.util.Calculator;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.junit.jupiter.api.Test;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">AssertionsDemo</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">final</span> Calculator calculator = <span class="keyword">new</span> Calculator();</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">final</span> Person person = <span class="keyword">new</span> Person(<span class="string">&quot;Jane&quot;</span>, <span class="string">&quot;Doe&quot;</span>);</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">standardAssertions</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        assertEquals(<span class="number">2</span>, calculator.add(<span class="number">1</span>, <span class="number">1</span>));</span><br><span class="line">        assertEquals(<span class="number">4</span>, calculator.multiply(<span class="number">2</span>, <span class="number">2</span>),</span><br><span class="line">                <span class="string">&quot;The optional failure message is now the last parameter&quot;</span>);</span><br><span class="line">        assertTrue(<span class="string">&#x27;a&#x27;</span> &lt; <span class="string">&#x27;b&#x27;</span>, () -&gt; <span class="string">&quot;Assertion messages can be lazily evaluated -- &quot;</span></span><br><span class="line">                + <span class="string">&quot;to avoid constructing complex messages unnecessarily.&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">groupedAssertions</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="comment">// In a grouped assertion all assertions are executed, and all</span></span><br><span class="line">        <span class="comment">// failures will be reported together.</span></span><br><span class="line">        assertAll(<span class="string">&quot;person&quot;</span>,</span><br><span class="line">            () -&gt; assertEquals(<span class="string">&quot;Jane&quot;</span>, person.getFirstName()),</span><br><span class="line">            () -&gt; assertEquals(<span class="string">&quot;Doe&quot;</span>, person.getLastName())</span><br><span class="line">        );</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">dependentAssertions</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="comment">// Within a code block, if an assertion fails the</span></span><br><span class="line">        <span class="comment">// subsequent code in the same block will be skipped.</span></span><br><span class="line">        assertAll(<span class="string">&quot;properties&quot;</span>,</span><br><span class="line">            () -&gt; &#123;</span><br><span class="line">                String firstName = person.getFirstName();</span><br><span class="line">                assertNotNull(firstName);</span><br><span class="line"></span><br><span class="line">                <span class="comment">// Executed only if the previous assertion is valid.</span></span><br><span class="line">                assertAll(<span class="string">&quot;first name&quot;</span>,</span><br><span class="line">                    () -&gt; assertTrue(firstName.startsWith(<span class="string">&quot;J&quot;</span>)),</span><br><span class="line">                    () -&gt; assertTrue(firstName.endsWith(<span class="string">&quot;e&quot;</span>))</span><br><span class="line">                );</span><br><span class="line">            &#125;,</span><br><span class="line">            () -&gt; &#123;</span><br><span class="line">                <span class="comment">// Grouped assertion, so processed independently</span></span><br><span class="line">                <span class="comment">// of results of first name assertions.</span></span><br><span class="line">                String lastName = person.getLastName();</span><br><span class="line">                assertNotNull(lastName);</span><br><span class="line"></span><br><span class="line">                <span class="comment">// Executed only if the previous assertion is valid.</span></span><br><span class="line">                assertAll(<span class="string">&quot;last name&quot;</span>,</span><br><span class="line">                    () -&gt; assertTrue(lastName.startsWith(<span class="string">&quot;D&quot;</span>)),</span><br><span class="line">                    () -&gt; assertTrue(lastName.endsWith(<span class="string">&quot;e&quot;</span>))</span><br><span class="line">                );</span><br><span class="line">            &#125;</span><br><span class="line">        );</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">exceptionTesting</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        Exception exception = assertThrows(ArithmeticException.class, () -&gt;</span><br><span class="line">            calculator.divide(<span class="number">1</span>, <span class="number">0</span>));</span><br><span class="line">        assertEquals(<span class="string">&quot;/ by zero&quot;</span>, exception.getMessage());</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">timeoutNotExceeded</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="comment">// The following assertion succeeds.</span></span><br><span class="line">        assertTimeout(ofMinutes(<span class="number">2</span>), () -&gt; &#123;</span><br><span class="line">            <span class="comment">// Perform task that takes less than 2 minutes.</span></span><br><span class="line">        &#125;);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">timeoutNotExceededWithResult</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="comment">// The following assertion succeeds, and returns the supplied object.</span></span><br><span class="line">        String actualResult = assertTimeout(ofMinutes(<span class="number">2</span>), () -&gt; &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="string">&quot;a result&quot;</span>;</span><br><span class="line">        &#125;);</span><br><span class="line">        assertEquals(<span class="string">&quot;a result&quot;</span>, actualResult);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">timeoutNotExceededWithMethod</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="comment">// The following assertion invokes a method reference and returns an object.</span></span><br><span class="line">        String actualGreeting = assertTimeout(ofMinutes(<span class="number">2</span>), AssertionsDemo::greeting);</span><br><span class="line">        assertEquals(<span class="string">&quot;Hello, World!&quot;</span>, actualGreeting);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">timeoutExceeded</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="comment">// The following assertion fails with an error message similar to:</span></span><br><span class="line">        <span class="comment">// execution exceeded timeout of 10 ms by 91 ms</span></span><br><span class="line">        assertTimeout(ofMillis(<span class="number">10</span>), () -&gt; &#123;</span><br><span class="line">            <span class="comment">// Simulate task that takes more than 10 ms.</span></span><br><span class="line">            Thread.sleep(<span class="number">100</span>);</span><br><span class="line">        &#125;);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">timeoutExceededWithPreemptiveTermination</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="comment">// The following assertion fails with an error message similar to:</span></span><br><span class="line">        <span class="comment">// execution timed out after 10 ms</span></span><br><span class="line">        assertTimeoutPreemptively(ofMillis(<span class="number">10</span>), () -&gt; &#123;</span><br><span class="line">            <span class="comment">// Simulate task that takes more than 10 ms.</span></span><br><span class="line">            <span class="keyword">new</span> CountDownLatch(<span class="number">1</span>).await();</span><br><span class="line">        &#125;);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">static</span> String <span class="title">greeting</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;Hello, World!&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="Assumptions"><a href="#Assumptions" class="headerlink" title="Assumptions"></a>Assumptions</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="keyword">static</span> org.junit.jupiter.api.Assertions.assertEquals;</span><br><span class="line"><span class="keyword">import</span> <span class="keyword">static</span> org.junit.jupiter.api.Assumptions.assumeTrue;</span><br><span class="line"><span class="keyword">import</span> <span class="keyword">static</span> org.junit.jupiter.api.Assumptions.assumingThat;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> example.util.Calculator;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.junit.jupiter.api.Test;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">AssumptionsDemo</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">final</span> Calculator calculator = <span class="keyword">new</span> Calculator();</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">testOnlyOnCiServer</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        assumeTrue(<span class="string">&quot;CI&quot;</span>.equals(System.getenv(<span class="string">&quot;ENV&quot;</span>)));</span><br><span class="line">        <span class="comment">// remainder of test</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">testOnlyOnDeveloperWorkstation</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        assumeTrue(<span class="string">&quot;DEV&quot;</span>.equals(System.getenv(<span class="string">&quot;ENV&quot;</span>)),</span><br><span class="line">            () -&gt; <span class="string">&quot;Aborting test: not on developer workstation&quot;</span>);</span><br><span class="line">        <span class="comment">// remainder of test</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">testInAllEnvironments</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        assumingThat(<span class="string">&quot;CI&quot;</span>.equals(System.getenv(<span class="string">&quot;ENV&quot;</span>)),</span><br><span class="line">            () -&gt; &#123;</span><br><span class="line">                <span class="comment">// perform these assertions only on the CI server</span></span><br><span class="line">                assertEquals(<span class="number">2</span>, calculator.divide(<span class="number">4</span>, <span class="number">2</span>));</span><br><span class="line">            &#125;);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// perform these assertions in all environments</span></span><br><span class="line">        assertEquals(<span class="number">42</span>, calculator.multiply(<span class="number">6</span>, <span class="number">7</span>));</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="Migrating-from-JUnit4"><a href="#Migrating-from-JUnit4" class="headerlink" title="Migrating from JUnit4"></a>Migrating from JUnit4</h2><ul><li>Annotations reside in the <code>org.junit.jupiter.api</code> package.</li><li>Assertions reside in <code>org.junit.jupiter.api.Assertions</code>.<ul><li>Note that you may continue to use assertion methods from <code>org.junit.Assert</code> or any other assertion library such as <a href="https://joel-costigliola.github.io/assertj/">AssertJ</a>, <a href="https://hamcrest.org/JavaHamcrest/">Hamcrest</a>, <a href="https://truth.dev/">Truth</a>, etc.</li></ul></li><li>Assumptions reside in <code>org.junit.jupiter.api.Assumptions</code>.<ul><li>Note that JUnit Jupiter 5.4 and later versions support methods from JUnit 4â€™s <code>org.junit.Assume</code> class for assumptions. Specifically, JUnit Jupiter supports JUnit 4â€™s <code>AssumptionViolatedException</code> to signal that a test should be aborted instead of marked as a failure.</li></ul></li><li><code>@Before</code> and <code>@After</code> no longer exist; use <code>@BeforeEach</code> and <code>@AfterEach</code> instead.</li><li><code>@BeforeClass</code> and <code>@AfterClass</code> no longer exist; use <code>@BeforeAll</code> and <code>@AfterAll</code> instead.</li><li><code>@Ignore</code> no longer exists: use <code>@Disabled</code> or one of the other built-in <a href="https://junit.org/junit5/docs/current/user-guide/#writing-tests-conditional-execution">execution conditions</a> instead.</li><li><code>@Category</code> no longer exists; use <code>@Tag</code> instead.</li><li><code>@RunWith</code> no longer exists; superseded by <code>@ExtendWith</code>.</li><li><code>@Rule</code> and <code>@ClassRule</code> no longer exist; superseded by <code>@ExtendWith</code> and <code>@RegisterExtension</code></li></ul>]]></content>
    
    
    <summary type="html">&lt;p&gt;&lt;img src=&quot;/2021/manual-of-JUnit/image-20210517194801837.png&quot; alt=&quot;image-20210517194801837&quot;&gt;&lt;/p&gt;</summary>
    
    
    
    <category term="SoftwareConstruction" scheme="https://www.fvolcano.red/categories/SoftwareConstruction/"/>
    
    <category term="Java" scheme="https://www.fvolcano.red/categories/Java/"/>
    
    
    <category term="æ•´ç†" scheme="https://www.fvolcano.red/tags/%E6%95%B4%E7%90%86/"/>
    
  </entry>
  
  <entry>
    <title>å˜æ¸…æ¦‚å¿µï¼šå¼±ç±»å‹ã€å¼ºç±»å‹ã€åŠ¨æ€ç±»å‹ã€é™æ€ç±»å‹</title>
    <link href="https://www.fvolcano.red/2021/weak-strong-static-dynamic-langs/"/>
    <id>https://www.fvolcano.red/2021/weak-strong-static-dynamic-langs/</id>
    <published>2021-05-09T05:15:51.000Z</published>
    <updated>2021-05-09T05:15:51.000Z</updated>
    
    <content type="html"><![CDATA[<p><img src="/2021/weak-strong-static-dynamic-langs/b0aeb7ffd1667b9162e5329154d43777_r.jpg" alt="img"></p><a id="more"></a><h2 id="èµ„æ–™æ•´ç†"><a href="#èµ„æ–™æ•´ç†" class="headerlink" title="èµ„æ–™æ•´ç†"></a>èµ„æ–™æ•´ç†</h2><p><a href="https://www.zhihu.com/question/19918532">å¼±ç±»å‹ã€å¼ºç±»å‹ã€åŠ¨æ€ç±»å‹ã€é™æ€ç±»å‹è¯­è¨€çš„åŒºåˆ«æ˜¯ä»€ä¹ˆï¼Ÿ</a></p><p><a href="https://segmentfault.com/a/1190000012372372">é€šä¿—çš„æ–¹å¼ç†è§£åŠ¨æ€ç±»å‹ï¼Œé™æ€ç±»å‹ï¼›å¼ºç±»å‹ï¼Œå¼±ç±»å‹</a></p><p>æ­£ç¡®æ€§å­˜ç–‘ï¼Œåªæ˜¯ä½œä¸ºæ•´ç†ã€‚</p><h2 id="å‚è€ƒèµ„æ–™"><a href="#å‚è€ƒèµ„æ–™" class="headerlink" title="å‚è€ƒèµ„æ–™"></a>å‚è€ƒèµ„æ–™</h2><ol><li><a href="https://www.zhihu.com/question/23434097">ç¼–ç¨‹è¯­è¨€çš„ç±»å‹ç³»ç»Ÿä¸ºä½•å¦‚æ­¤é‡è¦ï¼Ÿ</a></li><li><a href="https://www.jianshu.com/p/336f19772046">ç¼–ç¨‹è¯­è¨€å‚»å‚»åˆ†ä¸æ¸…ï¼šå¼±ç±»å‹ã€å¼ºç±»å‹ã€åŠ¨æ€ç±»å‹ã€é™æ€ç±»å‹</a></li></ol><h1 id="å‰ç½®æ¦‚å¿µ"><a href="#å‰ç½®æ¦‚å¿µ" class="headerlink" title="å‰ç½®æ¦‚å¿µ"></a>å‰ç½®æ¦‚å¿µ</h1><h3 id="Program-Errors"><a href="#Program-Errors" class="headerlink" title="Program Errors"></a>Program Errors</h3><ul><li><em>trapped errors</em>ã€‚å¯¼è‡´ç¨‹åºç»ˆæ­¢æ‰§è¡Œï¼Œå¦‚é™¤0ï¼ŒJavaä¸­æ•°ç»„è¶Šç•Œè®¿é—®</li><li><em>untrapped errors</em>ã€‚ å‡ºé”™åç»§ç»­æ‰§è¡Œï¼Œä½†å¯èƒ½å‡ºç°ä»»æ„è¡Œä¸ºã€‚å¦‚Cé‡Œçš„ç¼“å†²åŒºæº¢å‡ºã€Jumpåˆ°é”™è¯¯åœ°å€</li></ul><h3 id="Forbidden-Behaviours"><a href="#Forbidden-Behaviours" class="headerlink" title="Forbidden Behaviours"></a>Forbidden Behaviours</h3><p>è¯­è¨€è®¾è®¡æ—¶ï¼Œå¯ä»¥å®šä¹‰ä¸€ç»„<em>forbidden behaviors</em>. å®ƒå¿…é¡»åŒ…æ‹¬æ‰€æœ‰untrapped errors, ä½†å¯èƒ½åŒ…å«trapped errors.</p><h3 id="well-behaved-amp-ill-behaved"><a href="#well-behaved-amp-ill-behaved" class="headerlink" title="well behaved &amp; ill behaved"></a>well behaved &amp; ill behaved</h3><p>å¦‚æœç¨‹åºæ‰§è¡Œä¸å¯èƒ½å‡ºç°forbidden behaviorsï¼Œåˆ™ä¸ºwell behavedï¼Œå¦åˆ™ä¸ºill behavedã€‚</p><p><img src="/2021/weak-strong-static-dynamic-langs/1460000012372377" alt="img"></p><p>ä»å›¾ä¸­å¯ä»¥çœ‹å‡ºï¼Œç»¿è‰²çš„ program è¡¨ç¤ºæ‰€æœ‰ç¨‹åºï¼ˆæ‰€æœ‰ç¨‹åºï¼Œä½ èƒ½æƒ³åˆ°å’Œä¸èƒ½æƒ³åˆ°çš„ï¼‰ï¼Œerror è¡¨ç¤ºå‡ºé”™çš„ç¨‹åºï¼Œerror ä¸ä»…ä»…åŒ…æ‹¬ trapped error å’Œ untrapped errorã€‚</p><p>æ ¹æ®å›¾æˆ‘ä»¬å¯ä»¥ä¸¥æ ¼çš„å®šä¹‰åŠ¨æ€ç±»å‹ï¼Œé™æ€ç±»å‹ï¼›å¼ºç±»å‹ï¼Œå¼±ç±»å‹</p><ul><li>å¼ºç±»å‹ï¼šå¦‚æœä¸€é—¨è¯­è¨€å†™å‡ºæ¥çš„ç¨‹åºåœ¨çº¢è‰²çŸ©å½¢å¤–éƒ¨ï¼Œåˆ™è¿™é—¨è¯­è¨€æ˜¯å¼ºç±»å‹çš„ï¼Œä¹Ÿå°±æ˜¯ä¸Šé¢è¯´çš„ well behaved</li><li>å¼±ç±»å‹ï¼šå¦‚æœä¸€é—¨è¯­è¨€å†™å‡ºæ¥çš„ç¨‹åºå¯èƒ½åœ¨çº¢è‰²çŸ©å½¢å†…éƒ¨ï¼Œåˆ™è¿™é—¨è¯­è¨€æ˜¯å¼±ç±»å‹çš„ï¼Œä¹Ÿå°±æ˜¯ä¸Šé¢è¯´çš„ ill behaved</li><li>é™æ€ç±»å‹ï¼šä¸€é—¨è¯­è¨€åœ¨<strong>ç¼–è¯‘</strong>æ—¶æ’é™¤å¯èƒ½å‡ºç°åœ¨çº¢è‰²çŸ©å½¢å†…çš„æƒ…å†µï¼ˆé€šè¿‡è¯­æ³•æŠ¥é”™ï¼‰ï¼Œåˆ™è¿™é—¨è¯­è¨€æ˜¯<strong>é™æ€ç±»å‹</strong>çš„</li><li>åŠ¨æ€ç±»å‹ï¼šä¸€é—¨è¯­è¨€åœ¨<strong>è¿è¡Œ</strong>æ—¶æ’é™¤å¯èƒ½å‡ºç°åœ¨çº¢è‰²çŸ©å½¢å†…çš„æƒ…å†µï¼ˆé€šè¿‡è¿è¡Œæ—¶æŠ¥é”™ï¼Œä½†å¦‚æœæ˜¯å¼±ç±»å‹å¯èƒ½ä¼šè§¦å‘ untrapped errorï¼Œæ¯”å¦‚éšå¼è½¬æ¢ï¼Œä½¿å¾—ç¨‹åºçœ‹èµ·æ¥ä¼¼ä¹æ˜¯æ­£å¸¸è¿è¡Œçš„ï¼‰ï¼Œåˆ™è¿™é—¨è¯­è¨€æ˜¯<strong>åŠ¨æ€ç±»å‹</strong>çš„</li></ul><p>å‚è€ƒï¼šã€ŠType Systemsã€‹ Luca Cardelli - Microsoft Research</p><p><strong>Trapped error:</strong> An execution error that immediately results in a fault.</p><p><strong>Untrapped error:</strong> An execution error that does not immediately result in a fault.</p><p><strong>Forbidden error:</strong> The occurrence of one of a predetermined class of execution errors;</p><p>Typically the improper application of an operation to a value, such as not(3).</p><p><strong>Well behaved:</strong> A program fragment that will not produce forbidden errors at run time.</p><p><strong>Strongly checked language:</strong> A language where no forbidden errors can occur at run time (depending on the definition of forbidden error).</p><p><strong>Weakly checked language:</strong> A language that is statically checked but provides no clear guarantee of absence of execution errors.</p><p><strong>Statically checked language:</strong> A language where good behavior is determined before execution.</p><p><strong>Dynamically checked language:</strong> A language where good behavior is enforced during execution.</p><p><strong>Type safety:</strong> The property stating that programs do not cause untrapped errors.</p><p><strong>Explicitly typed language:</strong> A typed language where types are part of the syntax.</p><p><strong>Implicitly typed language:</strong> A typed language where types are not part of the syntax.</p><h1 id="å¼ºå¼±ç±»å‹"><a href="#å¼ºå¼±ç±»å‹" class="headerlink" title="å¼ºå¼±ç±»å‹"></a>å¼ºå¼±ç±»å‹</h1><ul><li><em>å¼ºç±»å‹strongly typed</em>: å¦‚æœä¸€ç§è¯­è¨€çš„æ‰€æœ‰ç¨‹åºéƒ½æ˜¯well behavedâ€”â€”å³ä¸å¯èƒ½å‡ºç°forbidden behaviorsï¼Œåˆ™è¯¥è¯­è¨€ä¸ºstrongly typedã€‚</li><li><em>å¼±ç±»å‹weakly typed</em>: å¦åˆ™ä¸ºweakly typedã€‚æ¯”å¦‚Cè¯­è¨€çš„ç¼“å†²åŒºæº¢å‡ºï¼Œå±äºtrapped errorsï¼Œå³å±äºforbidden behaviors..æ•…Cæ˜¯å¼±ç±»å‹</li></ul><p>å¼±ç±»å‹è¯­è¨€ï¼Œç±»å‹æ£€æŸ¥æ›´ä¸ä¸¥æ ¼ï¼Œå¦‚åå‘äºå®¹å¿éšå¼ç±»å‹è½¬æ¢ã€‚è­¬å¦‚è¯´Cè¯­è¨€çš„intå¯ä»¥å˜æˆdoubleã€‚ è¿™æ ·çš„ç»“æœæ˜¯ï¼šå®¹æ˜“äº§ç”Ÿforbidden behavioursï¼Œæ‰€ä»¥æ˜¯å¼±ç±»å‹çš„ã€‚</p><p><strong>å¼ºç±»å‹å®šä¹‰è¯­è¨€ï¼ˆExplicit type conversionï¼Œå¼ºåˆ¶æ•°æ®ç±»å‹å®šä¹‰è¯­è¨€ï¼Œç±»å‹å®‰å…¨çš„è¯­è¨€ï¼‰ï¼š</strong></p><p>ä¸€æ—¦å˜é‡è¢«æŒ‡å®šæŸä¸ªæ•°æ®ç±»å‹ï¼Œå¦‚æœä¸ç»å¼ºåˆ¶è½¬æ¢ï¼Œå³æ°¸è¿œæ˜¯æ­¤æ•°æ®ç±»å‹ã€‚</p><p>ä¸¾ä¾‹ï¼šè‹¥å®šä¹‰äº†ä¸€ä¸ªæ•´å‹å˜é‡aï¼Œè‹¥ä¸è¿›è¡Œæ˜¾ç¤ºè½¬æ¢ï¼Œä¸èƒ½å°†aå½“ä½œå­—ç¬¦ä¸²ç±»å‹å¤„ç†<br>å¼ºç±»å‹è¯­è¨€æ˜¯æŒ‡éœ€è¦è¿›è¡Œå˜é‡/å¯¹è±¡ç±»å‹å£°æ˜çš„è¯­è¨€ï¼Œä¸€èˆ¬æƒ…å†µä¸‹éœ€è¦ç¼–è¯‘æ‰§è¡Œã€‚ä¾‹å¦‚C/C++/Java/C#</p><p><strong>å¼±ç±»å‹å®šä¹‰è¯­è¨€ï¼ˆImplicit type conversionï¼Œç±»å‹ä¸å®‰å…¨çš„è¯­è¨€ï¼‰ï¼š</strong></p><p>æ•°æ®ç±»å‹å¯ä»¥è¢«å¿½ç•¥çš„è¯­è¨€ã€‚å®ƒä¸å¼ºç±»å‹å®šä¹‰è¯­è¨€ç›¸å, ä¸€ä¸ªå˜é‡å¯ä»¥èµ‹ä¸åŒæ•°æ®ç±»å‹çš„å€¼ã€‚</p><p>ä¸¾ä¾‹ï¼šåœ¨VBScriptä¸­ï¼Œå¯ä»¥å°†å­—ç¬¦ä¸² â€˜12â€™ å’Œæ•´æ•° 3 è¿›è¡Œè¿æ¥å¾—åˆ°å­—ç¬¦ä¸² â€˜123â€™ï¼Œ ç„¶åå¯ä»¥æŠŠå®ƒçœ‹æˆæ•´æ•° 123ï¼Œè€Œä¸éœ€è¦æ˜¾ç¤ºè½¬æ¢<br>ä¾‹å¦‚PHP/ASP/Ruby/Python/Perl/ABAP/SQL/JavaScript/Unix Shellç­‰</p><p>æ³¨æ„ï¼šå¼ºç±»å‹å®šä¹‰è¯­è¨€åœ¨é€Ÿåº¦ä¸Šå¯èƒ½ç•¥é€Šè‰²äºå¼±ç±»å‹å®šä¹‰è¯­è¨€ï¼Œä½†æ˜¯å¼ºç±»å‹å®šä¹‰è¯­è¨€å¸¦æ¥çš„ä¸¥è°¨æ€§èƒ½å¤Ÿæœ‰æ•ˆçš„é¿å…è®¸å¤šé”™è¯¯ã€‚</p><h1 id="åŠ¨é™æ€ç±»å‹"><a href="#åŠ¨é™æ€ç±»å‹" class="headerlink" title="åŠ¨é™æ€ç±»å‹"></a>åŠ¨é™æ€ç±»å‹</h1><p>é™æ€ç±»å‹ã€åŠ¨æ€ç±»å‹å…¶å®æ˜¯æŒ‡Type Checkå‘ç”Ÿçš„æ—¶æœºã€‚</p><ul><li><em>é™æ€ç±»å‹ statically</em>: å¦‚æœåœ¨ç¼–è¯‘æ—¶æ‹’ç»ill behavedç¨‹åºï¼Œåˆ™æ˜¯statically typed;</li><li><em>åŠ¨æ€ç±»å‹dynamiclly</em>: å¦‚æœåœ¨è¿è¡Œæ—¶æ‹’ç»ill behaviors, åˆ™æ˜¯dynamiclly typedã€‚</li></ul><p>åªé€šè¿‡æ˜¯å¦å°†ç±»å‹åæ˜¾å¼åœ°å†™å‡ºæ¥ï¼Œå¦‚int a; å¹¶ä¸èƒ½åˆ¤æ–­åŠ¨é™æ€ç±»å‹ã€‚å¦‚Ocamlæ˜¯é™æ€éšå¼ç±»å‹ã€‚</p><p>é™æ€ç±»å‹å¯ä»¥åˆ†ä¸ºä¸¤ç§ï¼š</p><ul><li>å¦‚æœç±»å‹æ˜¯è¯­è¨€è¯­æ³•çš„ä¸€éƒ¨åˆ†ï¼Œåœ¨æ˜¯<strong>explicitly typedæ˜¾å¼ç±»å‹ï¼›</strong></li><li>å¦‚æœç±»å‹é€šè¿‡ç¼–è¯‘æ—¶æ¨å¯¼ï¼Œæ˜¯<strong>implicity typedéšå¼ç±»å‹</strong></li></ul><p><img src="/2021/weak-strong-static-dynamic-langs/ee19ac87e0b6adc9812c2e2cf77e7dc3_r.jpg" alt="img"></p><p><strong>åŠ¨æ€ç±»å‹è¯­è¨€ï¼ˆDynamically Typed Languageï¼‰ï¼š</strong></p><p>è¿è¡ŒæœŸé—´æ‰åšæ•°æ®ç±»å‹æ£€æŸ¥çš„è¯­è¨€ï¼Œå³åŠ¨æ€ç±»å‹è¯­è¨€ç¼–ç¨‹æ—¶ï¼Œæ°¸è¿œä¸ç”¨ç»™ä»»ä½•å˜é‡æŒ‡å®šæ•°æ®ç±»å‹ã€‚è¯¥è¯­è¨€ä¼šåœ¨ç¬¬ä¸€æ¬¡èµ‹å€¼ç»™å˜é‡æ—¶ï¼Œåœ¨å†…éƒ¨å°†æ•°æ®ç±»å‹è®°å½•ä¸‹æ¥ã€‚<br>ä¾‹å¦‚ï¼šECMAScript(JavaScript)ã€Rubyã€Pythonã€VBScriptã€php<br>Pythonå’ŒRubyå°±æ˜¯å…¸å‹åŠ¨æ€ç±»å‹è¯­è¨€ï¼Œå…¶ä»–å„ç§è„šæœ¬è¯­è¨€å¦‚VBScriptä¹Ÿå¤šå°‘å±äºåŠ¨æ€ç±»å‹è¯­è¨€<br>ä¼˜ç‚¹ï¼šæ–¹ä¾¿é˜…è¯»ï¼Œä¸éœ€è¦å†™éå¸¸å¤šçš„ç±»å‹ç›¸å…³çš„ä»£ç ï¼›<br>ç¼ºç‚¹ï¼šä¸æ–¹ä¾¿è°ƒè¯•ï¼Œå‘½åä¸è§„èŒƒæ—¶ä¼šé€ æˆè¯»ä¸æ‡‚ï¼Œä¸åˆ©äºç†è§£ç­‰</p><p><strong>é™æ€ç±»å‹è¯­è¨€ï¼ˆStatically Typed Languageï¼‰ï¼š</strong></p><p>ç¼–è¯‘æœŸé—´åšæ£€æŸ¥æ•°æ®ç±»å‹çš„è¯­è¨€ï¼Œå³å†™ç¨‹åºæ—¶è¦å£°æ˜æ‰€æœ‰å˜é‡çš„æ•°æ®ç±»å‹ï¼Œæ˜¯å›ºå®šçš„ã€‚ä½¿ç”¨æ•°æ®ä¹‹å‰ï¼Œå¿…é¡»å…ˆå£°æ˜æ•°æ®ç±»å‹ï¼ˆint ,float,doubleç­‰ï¼‰ã€‚ç›¸å½“äºä½¿ç”¨ä¹‹å‰ï¼Œé¦–å…ˆè¦ä¸ºå®ƒä»¬åˆ†é…å¥½å†…å­˜ç©ºé—´ã€‚<br>ä¾‹å¦‚ï¼šC/C++æ˜¯é™æ€ç±»å‹è¯­è¨€çš„å…¸å‹ä»£è¡¨ï¼Œå…¶ä»–çš„é™æ€ç±»å‹è¯­è¨€è¿˜æœ‰C#ã€JAVAç­‰<br>ä¼˜ç‚¹ï¼šç»“æ„éå¸¸è§„èŒƒï¼Œä¾¿äºè°ƒè¯•ï¼Œæ–¹ä¾¿ç±»å‹å®‰å…¨<br>ç¼ºç‚¹ï¼šä¸ºæ­¤éœ€è¦å†™æ›´å¤šç±»å‹ç›¸å…³ä»£ç ï¼Œä¸ä¾¿äºé˜…è¯»ã€ä¸æ¸…æ™°æ˜äº†</p><h1 id="ç¤ºä¾‹"><a href="#ç¤ºä¾‹" class="headerlink" title="ç¤ºä¾‹"></a>ç¤ºä¾‹</h1><p>å¼±ç±»å‹ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&gt; <span class="string">&quot;1&quot;</span>+<span class="number">2</span></span><br><span class="line"><span class="string">&#x27;12&#x27;</span></span><br></pre></td></tr></table></figure><p>å¼ºç±»å‹ï¼š</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="string">&quot;1&quot;</span>+<span class="number">2</span></span><br><span class="line">Traceback (most recent call last):</span><br><span class="line">  File <span class="string">&quot;&lt;stdin&gt;&quot;</span>, line <span class="number">1</span>, <span class="keyword">in</span> &lt;module&gt;</span><br><span class="line">TypeError: cannot concatenate <span class="string">&#x27;str&#x27;</span> <span class="keyword">and</span> <span class="string">&#x27;int&#x27;</span> objects</span><br></pre></td></tr></table></figure><p>åŠ¨æ€ç±»å‹ï¼š</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>a = <span class="number">1</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>type(a)</span><br><span class="line">&lt;type <span class="string">&#x27;int&#x27;</span>&gt;</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>a = <span class="string">&quot;s&quot;</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>type(a)</span><br><span class="line">&lt;type <span class="string">&#x27;str&#x27;</span>&gt;</span><br></pre></td></tr></table></figure><p>é™æ€ç±»å‹ï¼š</p><figure class="highlight haskell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">Prelude</span>&gt; <span class="keyword">let</span> a = <span class="string">&quot;123&quot;</span> :: <span class="type">Int</span></span><br><span class="line"></span><br><span class="line">&lt;interactive&gt;:<span class="number">2</span>:<span class="number">9</span>:</span><br><span class="line">    <span class="type">Couldn&#x27;t</span> match expected <span class="class"><span class="keyword">type</span> `<span class="type">Int&#x27;</span> with actual <span class="keyword">type</span> `[<span class="type">Char</span>]&#x27;</span></span><br><span class="line">    <span class="type">In</span> the expression: <span class="string">&quot;123&quot;</span> :: <span class="type">Int</span></span><br><span class="line">    <span class="type">In</span> an equation for `a&#x27;: a = <span class="string">&quot;123&quot;</span> :: <span class="type">Int</span></span><br></pre></td></tr></table></figure><h1 id="ç»“è®º"><a href="#ç»“è®º" class="headerlink" title="ç»“è®º"></a>ç»“è®º</h1><p><img src="/2021/weak-strong-static-dynamic-langs/1283539-31968e5f19abed4b.jpg" alt="img"></p><p>å®šä¹‰äº†ä¸€ä¸ªæŸä¸€ä¸ªç±»å‹çš„æ•°æ®ï¼Œé€šå¸¸æ„å‘³ç€ä»¥ä¸‹ä¸‰ä»¶äº‹ï¼š</p><p>1ï¼Œå®šä¹‰äº†ä¸€å—æŸç§ç»“æ„çš„å­˜å‚¨ç©ºé—´ï¼Œç”¨æ¥å­˜å‚¨è¿™ä¸ªæ•°æ®ï¼›</p><p>2ï¼Œç‰¹å®šç±»å‹æ„å‘³å¯ä»¥å¯¹è¿™å—å­˜å‚¨ç©ºé—´è¿›è¡Œä¸€äº›ç‰¹å®šçš„æ“ä½œï¼›</p><p>3ï¼Œå£°æ˜äº†ä¸€ä¸ªæ ‡è¯†ç¬¦ï¼ˆä¸ä¸¥å¯†çš„è¯´å°±æ˜¯å˜é‡åï¼‰ï¼Œä½œä¸ºæ“ä½œè¿™å—æ•°æ®çš„â€œæ ‡ç­¾â€ï¼Œä¹‹åå¯ä»¥é€šè¿‡è¿™ä¸ªæ ‡ç­¾æ“ä½œè¿™å—æ•°æ®ï¼Œå¦åˆ™è¿™å—æ•°æ®æ˜¯æ— æ³•ä½¿ç”¨çš„ã€‚</p><p>æ— è®ºç¼–è¯‘å‹è¯­è¨€è¿˜æ˜¯è§£é‡Šå‹è¯­è¨€ï¼Œè¿™ä¸‰ç‚¹æ˜¯å…±æ€§ã€‚</p><p>è‹¥ä»ç¨‹åºå‡ºé”™çš„è§’åº¦æ¥è§£é‡Šè¿™ä¸ªé—®é¢˜ï¼Œå’Œç±»å‹æœ‰å…³çš„é”™è¯¯æœ‰ï¼š</p><p>1ï¼Œè®¿é—®äº†ä¸€ä¸ªç‰¹å®šç±»å‹çš„æ ‡è¯†ç¬¦ï¼Œä½†æ˜¯è®¿é—®çš„ä¸æ˜¯é¢„æœŸçš„å­˜å‚¨ç©ºé—´ã€‚</p><p>2ï¼Œå¯¹ç‰¹å®šç±»å‹çš„æ ‡è¯†ç¬¦å¯¹åº”çš„æ•°æ®ï¼Œè¿›è¡Œäº†éé¢„æœŸçš„æ“ä½œã€‚</p><p>ä¸ºäº†é˜²æ­¢ä¸ç±»å‹æœ‰å…³çš„é”™è¯¯å‘ç”Ÿï¼Œç¼–ç¨‹è¯­è¨€å¯ä»¥è¿›è¡Œç±»å‹æ£€æŸ¥ã€‚</p><p>1ã€<strong>å¼ºç±»å‹æ£€æŸ¥</strong>ä¸<strong>å¼±ç±»å‹æ£€æŸ¥</strong>ï¼›</p><p>ç¨‹åºé”™è¯¯ï¼Œå¤§ä½“ä¸Šå¯åˆ†ä¸ºå¯æ•è·é”™è¯¯<em>trapped errors</em> å’Œä¸å¯æ•è·é”™è¯¯<em>untrapped errorsã€‚</em> å¯æ•è·é”™è¯¯<em>trapped errors</em> å‘ç”Ÿæ—¶ï¼Œç¨‹åºåœäº†ä¸‹æ¥ï¼Œç”¨æˆ·æ˜ç¡®çŸ¥é“å‘ç”Ÿäº†é”™è¯¯ï¼›è€Œä¸å¯æ•è·é”™è¯¯<em>untrapped errors</em>å‘ç”Ÿæ—¶ï¼Œç”¨æˆ·ä¸çŸ¥é“é”™è¯¯çš„å‘ç”Ÿï¼Œç¨‹åºçš„ç»“æœæ˜¯å¦æ­£ç¡®ä¹Ÿæ— æ³•åˆ¤æ–­ï¼Œæœ‰å¯èƒ½é€ æˆé‡å¤§æŸå¤±ã€‚æ‰€ä»¥ç±»å‹æ£€æŸ¥çš„ç›®æ ‡ï¼Œæ˜¯ï¼šâ€œæ•è·ä¸ç±»å‹æœ‰å…³çš„é”™è¯¯â€ã€‚</p><p>æ‰€ä»¥ï¼Œèƒ½ä¿è¯ä¸å­˜åœ¨ä¸ç±»å‹æœ‰å…³çš„ä¸å¯æ•è·é”™è¯¯çš„ç¼–ç¨‹è¯­è¨€ï¼Œå¯ä»¥ç§°ä¹‹ä¸º å…·æœ‰<strong>å¼ºç±»å‹æ£€æŸ¥</strong>ï¼›åä¹‹ç§°ä¸º <strong>å¼±ç±»å‹æ£€æŸ¥</strong>ã€‚</p><p>2ã€<strong>åŠ¨æ€ç±»å‹æ£€æŸ¥</strong>ä¸<strong>é™æ€ç±»å‹æ£€æŸ¥</strong>ï¼›</p><p>æ™®éè¯´æ³•æ˜¯<strong>é™æ€ç±»å‹æ£€æŸ¥</strong>æ˜¯æŒ‡åœ¨ç¼–è¯‘é˜¶æ®µè¿›è¡Œçš„ç±»å‹æ£€æŸ¥ï¼ŒåŠ¨æ€ç±»å‹æ£€æŸ¥æ˜¯åœ¨æ‰§è¡Œé˜¶æ®µè¿›è¡Œçš„ç±»å‹æ£€æŸ¥ã€‚é‚£ä¹ˆä¸¥æ ¼æ¥è¯´ï¼Œè§£é‡Šæ€§è¯­è¨€ï¼Œå¹¶æ²¡æœ‰ç¼–è¯‘é˜¶æ®µã€‚ï¼ˆè™½ç„¶ä¸ºäº†æ•ˆç‡é€šå¸¸ä¼šè½¬ä¹‰æˆä¸­é—´ä»£ç ï¼Œè¿™å…¶ä¸­å­˜åœ¨ä¸€äº›ç°è‰²åœ°å¸¦ï¼Œä½†æ˜¯è¿™ä¸ªè½¬ä¹‰çš„è¿‡ç¨‹ï¼Œæœ€åŸºæœ¬çš„è¦æ±‚æ˜¯å¯¹ç”¨æˆ·é€æ˜ã€‚ï¼‰æ‰€ä»¥æŒ‰â€ç¼–è¯‘é˜¶æ®µâ€çš„è¯´æ³•ï¼Œå¯¹äºè§£é‡Šå‹è¯­è¨€ï¼Œå¹¶ä¸å­˜åœ¨<strong>é™æ€ç±»å‹æ£€æŸ¥</strong>çš„æ¦‚å¿µã€‚ä½†æ˜¯ï¼Œè®¸å¤šè§£é‡Šå‹è¯­è¨€ï¼Œç°åœ¨å¾€å¾€å¯ä»¥é€šè¿‡å¤–ç½®çš„lintå·¥å…·å¯¹è„šæœ¬è¿›è¡Œæ£€æŸ¥ï¼Œè¿™ä¹Ÿæ˜¯ä¸€ç§é™æ€æ£€æŸ¥ï¼Œä½†æ˜¯å·²ç»ä¸æ˜¯è¯­è¨€æœ¬èº«çš„ç‰¹æ€§äº†ã€‚</p><p>å¯¹äºç¼–è¯‘å‹è¯­è¨€æ¥è¯´ï¼Œå¯ä»¥åœ¨ç¼–è¯‘é˜¶æ®µè¿›è¡Œ<strong>é™æ€ç±»å‹æ£€æŸ¥</strong>ï¼Œè€Œä¸”å› ä¸ºè¿è¡Œæ—¶åº“çš„å­˜åœ¨ï¼Œä¹Ÿå¯ä»¥åœ¨è¿è¡Œæ—¶è¿›è¡Œ<strong>åŠ¨æ€ç±»å‹æ£€æŸ¥ã€‚</strong></p><p>3ã€æ ‡è¯†ç¬¦<strong>åŠ¨æ€ç±»å‹ç»‘å®š</strong>ä¸<strong>é™æ€ç±»å‹ç»‘å®š</strong>ï¼›</p><p>ç‰¹å®šç±»å‹æ•°æ®éœ€è¦ä¸€ä¸ªæ ‡è¯†ç¬¦ï¼ˆä¸ä¸¥å¯†çš„è¯´å°±æ˜¯å˜é‡åï¼‰ä¸å…¶ç»‘å®šã€‚è¿™é‡Œé¢æ¶‰åŠçš„æ¦‚å¿µæ¯”è¾ƒå¤æ‚ï¼š</p><ul><li><p>æ ‡è¯†ç¬¦ä¸ç‰¹å®šç±»å‹çš„æ•°æ®ç»‘å®šåï¼Œä¸å…è®¸è§£ç»‘ï¼Œé‚£æ€•æ˜¯è§£ç»‘åé‡æ–°ç»‘å®šåˆ°åŒæ ·ç±»å‹çš„æ•°æ®ã€‚</p></li><li><p>æ ‡è¯†ç¬¦ä¸ç‰¹å®šç±»å‹çš„æ•°æ®ç»‘å®šåï¼Œå…è®¸è§£ç»‘ï¼Œä½†æ˜¯è§£ç»‘ååªå…è®¸é‡æ–°ç»‘å®šåˆ°åŒæ ·ç±»å‹çš„æ•°æ®ã€‚</p></li><li><p>æ ‡è¯†ç¬¦ä¸ç‰¹å®šç±»å‹çš„æ•°æ®ç»‘å®šåï¼Œå…è®¸è§£ç»‘ï¼Œè§£ç»‘åå…è®¸ç»‘å®šåˆ°ä»»æ„ç±»å‹çš„æ•°æ®ã€‚</p></li></ul><p>4ã€å¯¹äºç¼–è¯‘å‹è¯­è¨€ï¼Œä¸Šè¿°ç»‘å®šï¼Œç†è®ºä¸Šå¯ä»¥å‘ç”Ÿåœ¨ç¼–è¯‘é˜¶æ®µï¼Œä¹Ÿå¯ä»¥å‘ç”Ÿåœ¨æ‰§è¡Œé˜¶æ®µã€‚åœ¨æ‰§è¡Œé˜¶æ®µï¼Œå˜é‡åå¾€å¾€å¹¶ä¸å­˜åœ¨ï¼Œå­˜åœ¨çš„åªæ˜¯æŒ‡é’ˆï¼Œè¿™ä¹Ÿæ˜¯ä¸€ç§éšå«çš„åŠ¨æ€ç»‘å®šï¼Œæ„å‘³è¿™ä¸€ä¸ªæŒ‡é’ˆæŒ‡å‘äº†ä¸€ä¸ªæ–°çš„ç±»å‹çš„æ•°æ®ç©ºé—´ï¼Œè¿™æœ‰æå¤§çš„ä¾¿åˆ©æ€§çµæ´»æ€§ï¼Œä¹Ÿæœ‰æå¤§çš„å±é™©æ€§ã€‚Cè¯­è¨€çœ‹ä¼¼éå¸¸â€œé™æ€â€ï¼Œå…¶å®åŠ¨æ€çš„ä¸€å¡Œç³Šæ¶‚ã€‚</p><p>ä¸Šè¿°æƒ…å†µä¸­çš„3ï¼Œæ˜¯é€šå¸¸æ„ä¹‰ä¸Šæ‰€è¯´çš„åŠ¨æ€ç±»å‹ç»‘å®šã€‚åŠ¨æ€ç±»å‹ç»‘å®šçš„ä¸»è¦é—®é¢˜æ˜¯ï¼ŒåŒä¸€ä¸ªæ ‡è¯†ç¬¦çš„å¤šæ¬¡ç»‘å®šï¼Œå®¹æ˜“æ··æ·†æœ¬æ¥çš„æ„ä¹‰ã€‚åŠ¨æ€ç»‘å®šçš„è¡¨ç¤ºç¬¦ï¼Œå¾€å¾€é€šè¿‡æ¨åˆ°æ¥ç¡®å®šç±»å‹ï¼Œè¿™ä¹Ÿä¼šé€ æˆç¨‹åºçš„å¯è¯»æ€§å¾ˆå·®ã€‚</p><p>æ‰€ä»¥ï¼Œä¸ºäº†ææ¸…æ¥šâ€œå¼±ç±»å‹ã€å¼ºç±»å‹ã€åŠ¨æ€ç±»å‹ã€é™æ€ç±»å‹â€è¿™å››ä¸ªææ³•ï¼Œå…³é”®è¦è¿™ä¸ªææ³•å°±å®¹æ˜“è®©äººè¿·æƒ‘ï¼Œä¸å¦‚ææ¸…æ¥šè¿™ä¸‰å¯¹æ¦‚å¿µï¼š</p><p><strong>å¼±ç±»å‹æ£€æŸ¥</strong> ä¸ <strong>å¼ºç±»å‹æ£€æ“¦</strong></p><p><strong>åŠ¨æ€ç±»å‹æ£€æŸ¥</strong> ä¸ <strong>é™æ€ç±»å‹æ£€æŸ¥</strong></p><p>æ ‡è¯†ç¬¦çš„ <strong>é™æ€ç±»å‹ç»‘å®š</strong> ä¸ <strong>åŠ¨æ€ç±»å‹ç»‘å®š</strong></p>]]></content>
    
    
    <summary type="html">&lt;p&gt;&lt;img src=&quot;/2021/weak-strong-static-dynamic-langs/b0aeb7ffd1667b9162e5329154d43777_r.jpg&quot; alt=&quot;img&quot;&gt;&lt;/p&gt;</summary>
    
    
    
    <category term="Java" scheme="https://www.fvolcano.red/categories/Java/"/>
    
    
    <category term="æ•´ç†" scheme="https://www.fvolcano.red/tags/%E6%95%B4%E7%90%86/"/>
    
  </entry>
  
  <entry>
    <title>è®¡ç®—æœºç³»ç»Ÿå®éªŒè®°å½•</title>
    <link href="https://www.fvolcano.red/2021/computer-architecture-hitlabs/"/>
    <id>https://www.fvolcano.red/2021/computer-architecture-hitlabs/</id>
    <published>2021-04-06T14:12:07.000Z</published>
    <updated>2021-04-06T14:12:07.000Z</updated>
    
    <content type="html"><![CDATA[<p>CSAPPç»å…¸å®éªŒä¸ªäººè§£ç­”ï¼Œå…±å…«ä¸ªã€‚<a id="more"></a></p><h1 id="å‚è€ƒ"><a href="#å‚è€ƒ" class="headerlink" title="å‚è€ƒ"></a>å‚è€ƒ</h1><p><a href="https://blog.csdn.net/weixin_45406155">dream or nightmareåšå®¢</a></p><h1 id="å®éªŒä¸€"><a href="#å®éªŒä¸€" class="headerlink" title="å®éªŒä¸€"></a>å®éªŒä¸€</h1><ol><li>linuxä¸windowsä¸‹å›è½¦ç¼–ç å¯¹æ¯”ã€‚</li></ol><ul><li><a href="https://www.jianshu.com/p/fd7822e69fea">Windowså’ŒLinux è¡Œå°¾ç¬¦(EndOfLine)çš„åŒºåˆ«</a></li></ul><p>windowsä¸‹é»˜è®¤ç¼–ç  ANSIï¼Œlinuxé»˜è®¤utf-8ã€‚</p><h3 id="å„ç³»ç»Ÿå…³äºè¡Œå°¾ç¬¦ï¼ˆEnd-of-Lineï¼‰çš„è§„å®š"><a href="#å„ç³»ç»Ÿå…³äºè¡Œå°¾ç¬¦ï¼ˆEnd-of-Lineï¼‰çš„è§„å®š" class="headerlink" title="å„ç³»ç»Ÿå…³äºè¡Œå°¾ç¬¦ï¼ˆEnd-of-Lineï¼‰çš„è§„å®š"></a>å„ç³»ç»Ÿå…³äºè¡Œå°¾ç¬¦ï¼ˆEnd-of-Lineï¼‰çš„è§„å®š</h3><p>Unixæ¯è¡Œç»“å°¾ä¸ºâ€\nâ€</p><p>Windowsç³»ç»Ÿæ¯è¡Œç»“å°¾æ˜¯â€œ\r\nâ€</p><p>Mac OSåœ¨ OS Xä»¥å‰æ¯è¡Œç»“å°¾æ˜¯â€\râ€ï¼Œ ç°åœ¨æ¯è¡Œç»“å°¾æ˜¯ â€œ\nâ€</p><table><thead><tr><th>ä¸­æ–‡å</th><th>è‹±æ–‡å</th><th>è‹±æ–‡ç¼©å†™</th><th>è‹±æ–‡è§£é‡Š</th><th>Cè¯­è¨€ä¸­è¡¨ç¤º</th><th>ASCIIç </th></tr></thead><tbody><tr><td>å›è½¦</td><td>carriage return</td><td>CR</td><td>return</td><td>\n</td><td>0x0A (10)</td></tr><tr><td>æ¢è¡Œ</td><td>line feed</td><td>LF</td><td>new line</td><td>\r</td><td>0x0D (14)</td></tr></tbody></table><blockquote><p>åœ¨è®¡ç®—æœºè¿˜æ²¡æœ‰å‡ºç°ä¹‹å‰ï¼Œæœ‰ä¸€ç§å«åšç”µä¼ æ‰“å­—æœºï¼ˆTeletype Model 33ï¼‰çš„ç©æ„ï¼Œæ¯ç§’é’Ÿå¯ä»¥æ‰“10ä¸ªå­—ç¬¦ã€‚ä½†æ˜¯å®ƒæœ‰ä¸€ä¸ªé—®é¢˜ï¼Œå°±æ˜¯æ‰“å®Œä¸€è¡Œæ¢è¡Œçš„æ—¶å€™ï¼Œè¦ç”¨å»0.2ç§’ï¼Œæ­£å¥½å¯ä»¥æ‰“ä¸¤ä¸ªå­—ç¬¦ã€‚è¦æ˜¯åœ¨è¿™0.2ç§’é‡Œé¢ï¼Œåˆæœ‰æ–°çš„å­—ç¬¦ä¼ è¿‡æ¥ï¼Œé‚£ä¹ˆè¿™ä¸ªå­—ç¬¦å°†ä¸¢å¤±ã€‚äºæ˜¯ï¼Œç ”åˆ¶äººå‘˜æƒ³äº†ä¸ªåŠæ³•è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œå°±æ˜¯åœ¨æ¯è¡Œåé¢åŠ ä¸¤ä¸ªè¡¨ç¤ºç»“æŸçš„å­—ç¬¦ã€‚ä¸€ä¸ªå«åšâ€œå›è½¦â€ï¼Œå‘Šè¯‰æ‰“å­—æœºæŠŠæ‰“å°å¤´å®šä½åœ¨å·¦è¾¹ç•Œï¼›å¦ä¸€ä¸ªå«åšâ€œæ¢è¡Œâ€ï¼Œå‘Šè¯‰æ‰“å­—æœºæŠŠçº¸å‘ä¸‹ç§»ä¸€è¡Œã€‚è¿™å°±æ˜¯â€œæ¢è¡Œâ€å’Œâ€œå›è½¦â€çš„æ¥å†ï¼Œä»å®ƒä»¬çš„è‹±è¯­åå­—ä¸Šä¹Ÿå¯ä»¥çœ‹å‡ºä¸€äºŒã€‚åæ¥ï¼Œè®¡ç®—æœºå‘æ˜äº†ï¼Œè¿™ä¸¤ä¸ªæ¦‚å¿µä¹Ÿå°±è¢«èˆ¬åˆ°äº†è®¡ç®—æœºä¸Šã€‚é‚£æ—¶ï¼Œå­˜å‚¨å™¨å¾ˆè´µï¼Œä¸€äº›ç§‘å­¦å®¶è®¤ä¸ºåœ¨æ¯è¡Œç»“å°¾åŠ ä¸¤ä¸ªå­—ç¬¦å¤ªæµªè´¹äº†ï¼ŒåŠ ä¸€ä¸ªå°±å¯ä»¥ã€‚äºæ˜¯ï¼Œå°±å‡ºç°äº†åˆ†æ­§ã€‚</p></blockquote><p>ç»“æœæ˜¯ï¼šUnix/Macç³»ç»Ÿä¸‹çš„æ–‡ä»¶åœ¨Windowsé‡Œæ‰“å¼€çš„è¯ï¼Œæ‰€æœ‰æ–‡å­—ä¼šå˜æˆä¸€è¡Œï¼›Windowsé‡Œçš„æ–‡ä»¶åœ¨Unix/Macä¸‹æ‰“å¼€çš„è¯ï¼Œåœ¨æ¯è¡Œçš„ç»“å°¾å¯èƒ½ä¼šå¤šå‡ºä¸€ä¸ª^Mç¬¦å·ã€‚</p><p>åœ¨Windowsç³»ç»Ÿä¸­ï¼Œæ–‡æœ¬æ–‡ä»¶ä»¥â€ \r\nâ€ä»£è¡¨æ¢è¡Œã€‚ç”¨fputsç­‰å‡½æ•°å†™æ¢è¡Œç¬¦â€™\nâ€™æ—¶ï¼ŒWindowsä¼šå°†â€™\nâ€™éšå¼è½¬æ¢ä¸ºâ€\r\nâ€ï¼Œç„¶åå†å†™å…¥åˆ°æ–‡ä»¶ä¸­ã€‚ç”¨fgetsç­‰å‡½æ•°è¯»æ¢è¡Œç¬¦â€™\nâ€™çš„æ—¶å€™ï¼ŒWindowsä¼šå°†æ–‡ä»¶ä¸­çš„â€\r\nâ€éšå¼è½¬æ¢ä¸ºâ€™\nâ€™ï¼Œç„¶åå†è¯»åˆ°å˜é‡ä¸­ã€‚</p><ul><li>å¯ä»¥ç”¨linuxå‘½ä»¤å®ç°è½¬æ¢ï¼š</li></ul><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> unix2dos filename</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> dos2unix filename</span></span><br></pre></td></tr></table></figure><ul><li><p>ä¸€èˆ¬åœ¨ç¨‹åºä¸­, å†™\nå°±å¯ä»¥äº†, å®ƒåœ¨linuxæˆ–windowsä¸­éƒ½èƒ½å®ç°å›è½¦+æ¢è¡Œçš„åŠŸèƒ½(åªæ˜¯åœ¨æ–‡æœ¬æ–‡ä»¶ä¸­, linuxåªä¼šæœ‰0x0a, windowsä¼šè‡ªåŠ¨æ¢ä¸º0x0d 0x0a)ã€‚</p></li><li><p>åœ¨linuxä¸‹ä½¿ç”¨%cä¼šè¯»åˆ°\nå’Œ\rä¸¤ä¸ªå­—ç¬¦ã€‚æ‰€ä»¥éœ€è¦å°†^Mï¼ˆä¹Ÿå°±æ˜¯\rï¼‰å­—ç¬¦åˆ æ‰ã€‚</p></li></ul><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> cat a.txt | tr -d <span class="string">&quot;^M&quot;</span> &gt; b.txt</span></span><br></pre></td></tr></table></figure><ol start="2"><li>è§£é‡Šç°è±¡ã€‚</li></ol><p><img src="/2021/computer-architecture-hitlabs/1.png"></p><p><img src="/2021/computer-architecture-hitlabs/2.png"></p><p>åŸå› ï¼š</p><p>ç¬¬ä¸€ç»„æ•°æ®ï¼šè¾“å…¥å’Œè¾“å‡ºä¸ä¸€è‡´æ˜¯å› ä¸ºå•ç²¾åº¦æµ®ç‚¹æ•°åœ¨IEEEè§„å®šä¸‹çš„è¡¨ç¤ºé€ æˆçš„ã€‚ç¬¬ä¸€ç»„æ•°æ®åœ¨äºŒè¿›åˆ¶æ•°è¡¨ç¤ºä¸‹ä¸ºæ— å¾ªç¯çš„å°æ•°ï¼Œç”±äºfloatæ•°æ®ç±»å‹åªèƒ½å­˜å‚¨23ä½å°æ•°ï¼Œä¸ºæ•°åé¢çš„æ•°éƒ½ä¼šè¢«æˆªæ–­è€Œä¸”ä¼šå‘å¶æ•°è¿›è¡Œèˆå…¥ï¼Œå› æ­¤æœ‰çš„æ•°æ®è¿›è¡Œèˆå…¥æ—¶ä¼šæ”¹å˜è¿è¡Œç»“æœï¼Œæ‰€ä»¥ç¬¬ä¸€ç»„æ•°æ®å­˜åœ¨ä¸€äº›æ•°æ®å‘ç”Ÿç»“æœæ”¹å˜.</p><p>ç¬¬äºŒç»„æ•°æ®ï¼šç”±ç¬¬ä¸€ç»„æ•°æ®ä¸­çš„åˆ†æå¯çŸ¥ï¼Œç¬¬äºŒç»„æ•°æ®åœ¨è¿›è¡Œå¶æ•°èˆå…¥çš„æƒ…å†µä¸‹å¹¶æ²¡æœ‰å‘ç”Ÿç»“æœçš„æ”¹å˜ï¼Œå› æ­¤è¿è¡Œç»“æœå’Œæ•°æ®è¾“å…¥çš„å†…å®¹ç›¸åŒç›¸åŒã€‚</p><p>ä½¿ç”¨æµ®ç‚¹æ•°åº”æ³¨æ„ï¼šfloatå•ç²¾åº¦æµ®ç‚¹æ•°åœ¨è®¡ç®—æœºå­˜å‚¨å¤§å¤šæ˜¯è¿‘ä¼¼å€¼ï¼Œæ— æ³•ç²¾ç¡®è¡¨ç¤ºå‡†ç¡®æ•°å€¼ã€‚å› æ­¤æœ€å¥½ä¸è¦å¯¹floatå•ç²¾åº¦æµ®ç‚¹æ•°è¿›è¡Œæ¯”è¾ƒçš„è¿ç®—ã€‚å¦‚æœæƒ³è¦æ›´é«˜ç²¾åº¦çš„æ•°æ®è¡¨ç¤ºå¯ä»¥é€‰æ‹©ä½¿ç”¨doubleåŒç²¾åº¦æµ®ç‚¹æ•°çš„ç±»å‹æˆ–è€…ç”¨æ•°ç»„æŒ‰ä½è¡¨ç¤ºã€‚</p><ol start="3"><li>æŸ¥çœ‹å„æ•°å€¼çš„å†…å­˜ä¸­åå…­è¿›åˆ¶å­˜å‚¨ã€‚</li></ol><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;stdio.h&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">typedef</span> <span class="keyword">unsigned</span> <span class="keyword">char</span> *byte_pointer;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">show_bytes</span><span class="params">(byte_pointer start, <span class="keyword">size_t</span> len)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">true<span class="keyword">size_t</span> i;</span><br><span class="line">true<span class="keyword">for</span>(i=<span class="number">0</span>; i&lt;len; i++)&#123;</span><br><span class="line">truetrue<span class="built_in">printf</span>(<span class="string">&quot;%.2x&quot;</span>, start[i]);</span><br><span class="line">true&#125;</span><br><span class="line">true<span class="built_in">printf</span>(<span class="string">&quot;\n&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">true<span class="keyword">int</span> i = <span class="number">1</span>;</span><br><span class="line">trueshow_bytes((byte_pointer)&amp;i, <span class="keyword">sizeof</span>(<span class="keyword">int</span>));    </span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h2 id="æ”¶è·"><a href="#æ”¶è·" class="headerlink" title="æ”¶è·"></a>æ”¶è·</h2><ol><li><p>å­¦ä¼šå¦‚ä½•ä½¿ç”¨linuxçš„å‘½ä»¤è¡Œï¼Œä½¿ç”¨ä¸€äº›ç®€å•çš„å‘½ä»¤ä»£æ›¿å›¾å½¢ç•Œé¢æ“ä½œã€‚</p></li><li><p>å­¦ä¼šåœ¨å‘½ä»¤è¡Œå®Œæ•´å†™å‡ºä¸€ä¸ªcç¨‹åºï¼Œç”¨vimç¼–è¾‘ï¼Œgccç¼–è¯‘ã€‚</p></li><li><p>äº†è§£åœ¨windowså’Œlinuxå¹³å°ä¸‹å¦‚ä½•é…ç½®Cç¼–è¯‘ç¯å¢ƒã€‚</p></li><li><p>å¤ä¹ äº†Cç›¸å…³çŸ¥è¯†ç‚¹ï¼Œç¼–å†™äº†å‡ ä¸ªç®€å•ç¨‹åºã€‚</p></li><li><p>äº†è§£äº†windows å’Œ linux çš„ç¡¬ä»¶ä¿¡æ¯ã€‚</p></li></ol><h1 id="å®éªŒäºŒ"><a href="#å®éªŒäºŒ" class="headerlink" title="å®éªŒäºŒ"></a>å®éªŒäºŒ</h1><h2 id="debug-with-gdb-amp-objdump"><a href="#debug-with-gdb-amp-objdump" class="headerlink" title="debug with gdb &amp; objdump"></a>debug with gdb &amp; objdump</h2><ol><li><p><a href="https://www.howtoforge.com/linux-objdump-command/">Linux objdump Command Explained for Beginners (7 Examples)</a></p></li><li><p><a href="https://www.howtoforge.com/tutorial/how-to-debug-c-programs-in-linux-using-gdb/">How to debug C programs in Linux using gdb</a></p></li><li><p><a href="https://linux.die.net/man/1/gcc">gcc man page</a></p></li><li><p><a href="https://developer.ibm.com/technologies/linux/articles/l-gdb/">Linux software debugging with GDB</a></p></li><li><p><a href="https://www.bytesnap.com/how-to-debug-your-linux-application-debugging-by-printf/#">How to debug your Linux Application: Debugging by printf</a></p></li><li><p><a href="http://www.brendangregg.com/blog/2016-08-09/gdb-example-ncurses.html">gdb Debugging Full Example (Tutorial): ncurses</a></p></li><li><p><a href="https://www.youtube.com/watch?v=-n9Fkq1e6sg&list=PLHTh1InhhwT7J5jl4vAhO1WvGHUUFgUQH&index=41&ab_channel=CppCon">CppCon 2016: Greg Law â€œGDB - A Lot More Than You Knewâ€</a></p></li></ol><h2 id="ä¸åŒç±»å‹å€¼å­˜å‚¨ä½ç½®"><a href="#ä¸åŒç±»å‹å€¼å­˜å‚¨ä½ç½®" class="headerlink" title="ä¸åŒç±»å‹å€¼å­˜å‚¨ä½ç½®"></a>ä¸åŒç±»å‹å€¼å­˜å‚¨ä½ç½®</h2><p><a href="https://blog.csdn.net/handsome_bear/article/details/102970573">constã€staticå˜é‡å­˜å‚¨ä½ç½®</a></p><p>â‘ staticæ— è®ºæ˜¯å…¨å±€å˜é‡è¿˜æ˜¯å±€éƒ¨å˜é‡éƒ½å­˜å‚¨åœ¨å…¨å±€/é™æ€åŒºåŸŸï¼Œåœ¨ç¼–è¯‘æœŸå°±ä¸ºå…¶åˆ†é…å†…å­˜ï¼Œåœ¨ç¨‹åºç»“æŸæ—¶é‡Šæ”¾ã€‚</p><p>â‘¡<strong>constå…¨å±€å˜é‡</strong>å­˜å‚¨åœ¨åªè¯»æ•°æ®æ®µï¼Œç¼–è¯‘æœŸæœ€åˆå°†å…¶ä¿å­˜åœ¨ç¬¦å·è¡¨ä¸­ï¼Œç¬¬ä¸€æ¬¡ä½¿ç”¨æ—¶ä¸ºå…¶åˆ†é…å†…å­˜ï¼Œåœ¨ç¨‹åºç»“æŸæ—¶é‡Šæ”¾ï¼›<strong>constå±€éƒ¨å˜é‡</strong>å­˜å‚¨åœ¨æ ˆä¸­ï¼Œä»£ç å—ç»“æŸæ—¶é‡Šæ”¾ã€‚</p><p>â‘¢å…¨å±€å˜é‡å­˜å‚¨åœ¨å…¨å±€/é™æ€åŒºåŸŸï¼Œåœ¨ç¼–è¯‘æœŸä¸ºå…¶åˆ†é…å†…å­˜ï¼Œåœ¨ç¨‹åºç»“æŸæ—¶é‡Šæ”¾ã€‚</p><p>â‘£å±€éƒ¨å˜é‡å­˜å‚¨åœ¨æ ˆä¸­ï¼Œä»£ç å—ç»“æŸæ—¶é‡Šæ”¾ã€‚</p><p>æ³¨ï¼šå½“å…¨å±€å˜é‡å’Œé™æ€å±€éƒ¨å˜é‡æœªèµ‹åˆå€¼æ—¶ï¼Œç³»ç»Ÿè‡ªåŠ¨ç½®ä¸º0ã€‚ä½†æœªåˆå§‹åŒ–å…¨å±€å˜é‡ä¸ºå¼±ç±»å‹ï¼Œå¯èƒ½ä¼šæ”¹å˜ä¸ºå¼•ç”¨å…¶ä»–å¯é‡å®šä½æ¨¡å—å†…çš„åŒåå˜é‡ã€‚</p><p>ä¾‹ã€</p><p>x ï¼šå…¨å±€  .data</p><p>y ï¼šå±€éƒ¨  stack</p><p>z ï¼šå±€éƒ¨char*  .text</p><p><img src="/2021/computer-architecture-hitlabs/6.png"></p><p><img src="/2021/computer-architecture-hitlabs/8.png" alt="å„æ®µåœ°å€åŒºåŸŸ"></p><p>x ä¸ z éƒ½æ˜¯é€šè¿‡ä¸å½“å‰æŒ‡ä»¤æŒ‡é’ˆåç§»é‡æ¥å®šä½å…¶åœ¨å†…å­˜ä¸­çš„ä½ç½®ï¼Œè€Œå­˜åœ¨stackä¸­çš„yæ˜¯é€šè¿‡ åŸºå€å¯„å­˜å™¨ rbp æ¥å®šä½ã€‚</p><p><img src="/2021/computer-architecture-hitlabs/7.png" alt="æ±‡ç¼–ä»£ç çœ‹æ•°æ®è®¿é—®æ–¹å¼"></p><h2 id="ç¼–ç "><a href="#ç¼–ç " class="headerlink" title="ç¼–ç "></a>ç¼–ç </h2><ol><li>æºç¨‹åºçš„ç¼–ç ï¼šå’ŒOSã€ç¼–è¾‘å™¨ã€ç¼–è¯‘å™¨ç›¸å…³ï¼ŒLinux / windows/Mac ä¸‹çš„ç¼–ç ä¸å›è½¦å¤„ç†ä¸åŒï¼Œæ‰€ä»¥ä¸åŒç¼–ç åœ¨ä¸æ­£ç¡®çš„ä½¿ç”¨ç¯å¢ƒä¸‹å¯èƒ½æœ‰ç¼–è¯‘ä»¥åŠé”™è¯¯è¾“å‡ºã€‚<br>åˆ†æéªŒè¯ï¼šVS/CB/GCCä¸‹ä¸åŒæºç¨‹åºç¼–ç æ˜¯æ€ä¹ˆå¤„ç†çš„ï¼Ÿ</li></ol><ol start="2"><li><strong>æ·±å…¥ç ”ç©¶Unicodeæ ‡å‡†å’ŒUTF-8ç¼–ç </strong></li></ol><ul><li><p><a href="https://www.bilibili.com/video/BV1gZ4y1x7p7">éå¸¸è¯¦ç»†çš„å­—ç¬¦ç¼–ç è®²è§£ï¼ŒASCIIã€GB2312ã€GBKã€Unicodeã€UTF-8ç­‰çŸ¥è¯†ç‚¹éƒ½æœ‰</a></p></li><li><p>GB2312ä¸ºä»€ä¹ˆè¦åŠ ä¸Š0xA0ï¼šGB2312 æ˜¯åŒå­—èŠ‚ç¼–ç ï¼Œä¸ºäº†ä¸ ASCII ç åŒºåˆ†å¼€ï¼Œå­—èŠ‚çš„ç¬¬8ä½å¿…é¡»æ˜¯1ï¼Œæ‰€ä»¥è‡³å°‘è¦ä» 0x80(128, 1000 0000) å¼€å§‹å§ï¼Œä½†æ˜¯æ ¹æ®ä¸Šé¢çš„è§„å®šï¼Œ0x80 - 0x9f è¦ç•™ç»™æ§åˆ¶å—ï¼Œæ‰€ä»¥åªèƒ½ä» 0xA0 å¼€å§‹å’¯ã€‚é‚£ä¸ºä»€ä¹ˆ GB2312 ç¼–ç ä¸æ˜¯ä» 0xA0 å¼€å§‹ï¼Œè€Œæ˜¯ 0xA1 å¼€å§‹å‘¢ï¼Ÿ å› ä¸º 0xA0 æ­£å¥½æ˜¯å›¾å½¢å—çš„ç©ºæ ¼ï¼Œæ‰€ä»¥å°±ä» 0xA1 å¼€å§‹ç¼–ç ã€‚</p></li><li><p><a href="https://www.youtube.com/watch?v=I-pQH_krD0M&ab_channel=ComputerScience">ASCII and Unicode Character Sets</a></p></li><li><p><a href="http://www.ruanyifeng.com/blog/2007/10/ascii_unicode_and_utf-8.html">å­—ç¬¦ç¼–ç ç¬”è®°ï¼šASCIIï¼ŒUnicode å’Œ UTF-8 - é˜®ä¸€å³°</a></p></li><li><p><a href="http://cenalulu.github.io/linux/character-encoding/">ååˆ†é’Ÿææ¸…å­—ç¬¦é›†å’Œå­—ç¬¦ç¼–ç </a></p></li><li><p><a href="https://www.zhihu.com/question/52346583">é•¿æ–‡ç­”æ¡ˆ-çŸ¥ä¹unicodeä¸utf-8</a></p></li><li><p><a href="https://www.cnblogs.com/54chensongxia/p/11650841.html">ç¼–ç é—®é¢˜ï¼šåŸºç¡€æ¦‚å¿µä¸å»¶ä¼¸</a></p></li><li><p><a href="https://www.zhihu.com/question/20650946">Windows è®°äº‹æœ¬çš„ ANSIã€Unicodeã€UTF-8 è¿™ä¸‰ç§ç¼–ç æ¨¡å¼æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ</a> (æ··ä¹±ç¨‹åº¦å¯è§ä¸€æ–‘)</p></li><li><p><a href="https://www.cnblogs.com/malecrab/p/5300486.html">ANSIæ˜¯ä»€ä¹ˆç¼–ç ï¼Ÿ</a></p></li><li><p><a href="https://www.codenong.com/cs105965196/">åè¯è§£é‡Šï¼šUnicodeã€UCS-2/4ã€UTF-8/16/32ã€GB2312ã€GBK</a></p></li></ul><figure class="highlight angelscript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">Unicodeç¬¦å·èŒƒå›´         |        UTF<span class="number">-8</span>ç¼–ç æ–¹å¼</span><br><span class="line">   (åå…­è¿›åˆ¶)           |         ï¼ˆäºŒè¿›åˆ¶ï¼‰</span><br><span class="line">-----------------------+---------------------------------------------</span><br><span class="line"><span class="number">0000</span> <span class="number">0000</span><span class="number">-0000</span> <span class="number">007</span>F    |        <span class="number">0</span>xxxxxxx</span><br><span class="line"><span class="number">0000</span> <span class="number">0080</span><span class="number">-0000</span> <span class="number">07</span>FF    |        <span class="number">110</span>xxxxx <span class="number">10</span>xxxxxx</span><br><span class="line"><span class="number">0000</span> <span class="number">0800</span><span class="number">-0000</span> FFFF    |        <span class="number">1110</span>xxxx <span class="number">10</span>xxxxxx <span class="number">10</span>xxxxxx</span><br><span class="line"><span class="number">0001</span> <span class="number">0000</span><span class="number">-0010</span> FFFF    |        <span class="number">11110</span>xxx <span class="number">10</span>xxxxxx <span class="number">10</span>xxxxxx <span class="number">10</span>xxxxxx</span><br></pre></td></tr></table></figure><p>UTF16ç¼–ç æ˜¯Unicodeæœ€ç›´æ¥çš„å®ç°æ–¹å¼ï¼Œé€šå¸¸æˆ‘ä»¬åœ¨windowsä¸Šæ–°å»ºæ–‡æœ¬æ–‡ä»¶åä¿å­˜ä¸ºUnicodeç¼–ç ï¼Œå…¶å®å°±æ˜¯ä¿å­˜ä¸ºUTF16ç¼–ç ã€‚</p><ol start="3"><li><strong>Cè¯­è¨€å¤„ç†utf-8æ–‡æœ¬</strong></li></ol><ul><li><a href="https://segmentfault.com/a/1190000004274760">åœ¨ C ç¨‹åºä¸­å¤„ç† UTF-8 æ–‡æœ¬</a></li></ul><p>æ‰“å°æ•°æ®çš„å­—èŠ‚ï¼ˆåå…­è¿›åˆ¶ï¼‰è¡¨ç¤ºï¼š</p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// å…ˆå–æ•°æ®åœ°å€ï¼Œè½¬æ¢æˆå•å­—èŠ‚é•¿åº¦çš„ç±»å‹ï¼ˆunsigned charï¼‰çš„æŒ‡é’ˆï¼Œ</span></span><br><span class="line"><span class="comment">// ç„¶åæŒ‰ç…§åå…­è¿›åˆ¶é€å­—èŠ‚æ‰“å°å³å¯ï¼Œæ ¼å¼ä¸ºâ€œ%.2xâ€ã€‚</span></span><br><span class="line"><span class="built_in">printf</span>(<span class="string">&quot;%.2x &quot;</span>, *(<span class="keyword">unsigned</span> <span class="keyword">char</span>*)(str + i));</span><br></pre></td></tr></table></figure><p>utf8lenï¼šè®¡ç®—utf8ç¼–ç çš„å­—ç¬¦ä¸²çš„ä¸ªæ•°ã€‚</p><p>ï¼é”™è¯¯ï¼š</p><p><img src="/2021/computer-architecture-hitlabs/image-20210416204335280.png" alt="image-20210416204335280"></p><ul><li><p>æ¯”è¾ƒæ—¶åº”è¯¥ä¸ºäºŒè¿›åˆ¶ï¼Œè€Œå†™æˆäº†0xåå…­è¿›åˆ¶ï¼ŒCæ²¡æœ‰äºŒè¿›åˆ¶çš„ç›´æ¥è¡¨ç¤ºï¼Œå°†ä¹‹è½¬åŒ–ä¸ºåå…­è¿›åˆ¶å†™å…¥ã€‚</p></li><li><p>byte &amp; 1000 0000 == 0 å´ä¸è¿›å…¥åˆ†æ”¯?<br>ä¼˜å…ˆçº§é—®é¢˜ã€‚</p></li></ul><p><img src="/2021/computer-architecture-hitlabs/image-20210416210130066.png" alt="image-20210416210130066"></p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;stdlib.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;string.h&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">utf8len</span><span class="params">(<span class="keyword">char</span>* str)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"><span class="comment">//      unsigned char c1 = 1 &lt;&lt; 7;</span></span><br><span class="line">        <span class="keyword">unsigned</span> <span class="keyword">char</span> c2 = <span class="number">1</span> &lt;&lt; <span class="number">6</span>;</span><br><span class="line">        <span class="keyword">unsigned</span> <span class="keyword">char</span> c3 = <span class="number">7</span> &lt;&lt; <span class="number">4</span>;</span><br><span class="line">        <span class="keyword">unsigned</span> <span class="keyword">char</span> c4 = <span class="number">15</span> &lt;&lt; <span class="number">3</span>;</span><br><span class="line">        <span class="keyword">int</span> i = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">int</span> num = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">for</span>(i = <span class="number">0</span>; i &lt; <span class="built_in">strlen</span>(str); i++) &#123;</span><br><span class="line">                <span class="keyword">unsigned</span> <span class="keyword">char</span> byte = *(<span class="keyword">unsigned</span> <span class="keyword">char</span>*)(str + i);</span><br><span class="line">                <span class="keyword">if</span>(byte &lt;= <span class="number">0x7F</span>) &#123;</span><br><span class="line">                        <span class="comment">// 0xxx xxxx</span></span><br><span class="line">                        num++;</span><br><span class="line">                &#125; <span class="keyword">else</span> <span class="keyword">if</span> ((byte &amp; c2) == <span class="number">0x40</span>) &#123;</span><br><span class="line">                        <span class="comment">// 110x xxxx  xxxx xxxx</span></span><br><span class="line">                        num++;</span><br><span class="line">                        i++;</span><br><span class="line">                &#125; <span class="keyword">else</span> <span class="keyword">if</span> ((byte &amp; c3) == <span class="number">0x60</span>) &#123;</span><br><span class="line">                        <span class="comment">// 1110 xxxx  xxxx xxxx  xxxx xxxx</span></span><br><span class="line">                        num++;</span><br><span class="line">                        i += <span class="number">2</span>;</span><br><span class="line">                &#125; <span class="keyword">else</span> <span class="keyword">if</span> ((byte &amp; c4) == <span class="number">0x70</span>) &#123;</span><br><span class="line">                        <span class="comment">// 1111 0xxx  xxxx xxxx  xxxx xxxx  xxxx xxxx</span></span><br><span class="line">                        num++;</span><br><span class="line">                        i += <span class="number">3</span>;</span><br><span class="line">                &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> num;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">        <span class="keyword">char</span> *str = (<span class="keyword">char</span>*)<span class="built_in">malloc</span>(<span class="keyword">sizeof</span>(<span class="keyword">char</span>)*<span class="number">100</span>);</span><br><span class="line">        <span class="built_in">scanf</span>(<span class="string">&quot;%s&quot;</span>, str);</span><br><span class="line">        <span class="keyword">int</span> i = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">for</span>(i = <span class="number">0</span>; i &lt; <span class="built_in">strlen</span>(str); i++) &#123;</span><br><span class="line">                <span class="built_in">printf</span>(<span class="string">&quot;%.2x &quot;</span>, *(<span class="keyword">unsigned</span> <span class="keyword">char</span>*)(str + i));</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">&quot;\n&quot;</span>);</span><br><span class="line">        <span class="keyword">int</span> len = utf8len(str);</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">&quot;The number of characters is %d\n&quot;</span>, len);</span><br><span class="line">        <span class="built_in">free</span>(str);</span><br><span class="line">        <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><img src="/2021/computer-architecture-hitlabs/image-20210416210258729.png" alt="image-20210416210258729"></p><ol start="4"><li><strong>å­—ç¬¦ä¸²æ¯”è¾ƒå‡½æ•° strcmp() å¯¹ä¸­æ–‡çš„å¤„ç†</strong></li></ol><p><img src="/2021/computer-architecture-hitlabs/image-20210417075647150.png" alt="image-20210417075647150"></p><p>strcmp() æºç ï¼š</p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">int</span> __cdecl <span class="title">strcmp</span> <span class="params">(<span class="keyword">const</span> <span class="keyword">char</span> * src, <span class="keyword">const</span> <span class="keyword">char</span> * dst)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">int</span> ret = <span class="number">0</span> ;</span><br><span class="line">    <span class="keyword">while</span>( ! (ret = *(<span class="keyword">unsigned</span> <span class="keyword">char</span> *)src - *(<span class="keyword">unsigned</span> <span class="keyword">char</span> *)dst) &amp;&amp; *dst)</span><br><span class="line">                ++src, ++dst;  </span><br><span class="line">    <span class="keyword">if</span> ( ret &lt; <span class="number">0</span> )</span><br><span class="line">           ret = <span class="number">-1</span> ;</span><br><span class="line">    <span class="keyword">else</span> <span class="keyword">if</span> ( ret &gt; <span class="number">0</span> )</span><br><span class="line">           ret = <span class="number">1</span> ;</span><br><span class="line">    <span class="keyword">return</span>( ret );</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ä¸­æ–‡æ¯”è¾ƒå®é™…ä¸Šä¹Ÿæ˜¯æ¯”è¾ƒå­—ç¬¦åœ¨è®¡ç®—æœºä¸­å­˜å‚¨çš„01ï¼Œè€Œå­—ç¬¦çš„01æ˜¯ç”±å­—ç¬¦é›†ä¸å­—ç¬¦ç¼–ç å…±åŒå†³å®šçš„ï¼Œç¼–ç å­—ç¬¦é›†Unicodeï¼Œæœ‰UTF-8ã€UTF-16ã€UTF-32ç­‰å¤šç§å­—ç¬¦ç¼–ç ï¼›ç¼–ç å­—ç¬¦é›†ASCIIï¼Œæœ¬èº«å°±æ˜¯ç¼–ç å­—ç¬¦é›†ï¼Œåˆæ˜¯å­—ç¬¦ç¼–ç ï¼›ç¼–ç å­—ç¬¦é›†CB2312ï¼Œåªæœ‰EUC-CNä¸€ç§å­—ç¬¦ç¼–ç ï¼Œä»¥ä¸‹ä»¥utf-8ä¸ºä¾‹ã€‚</p><p><img src="/2021/computer-architecture-hitlabs/image-20210417080821157.png" alt="unicodeä¸­æ–‡èŒƒå›´"></p><p>åœ¨linuxä¸­ï¼Œé»˜è®¤ä½¿ç”¨çš„ç¼–ç æ–¹å¼æ˜¯ä¸å¸¦BOMçš„UTF-8ï¼Œåˆ™æ±‰å­—çš„å­˜å‚¨é¡ºåºæ˜¯åŸºæœ¬æŒ‰ç…§æ±‰å­—å­—ç¬¦åœ¨Unicodeä¸­çš„ç ç‚¹å€¼(code point)æ¥å†³å®šçš„ã€‚</p><ul><li><a href="https://www.cnblogs.com/huahuahu/p/Unicode-zi-fu-chuan-pai-xu-gui-ze-yi-ru-he-que-din.html">Unicode å­—ç¬¦ä¸²æ’åºè§„åˆ™ï¼ˆä¸€ï¼‰ï¼šå¦‚ä½•ç¡®å®šå•ä¸ªå­—ç¬¦çš„é¡ºåº</a></li><li><a href="https://www.cnblogs.com/huahuahu/p/Unicode-zi-fu-chuan-pai-xu-gui-ze-er-ru-he-bi-jiao.html">Unicode å­—ç¬¦ä¸²æ’åºè§„åˆ™ï¼ˆäºŒï¼‰ï¼šå¦‚ä½•æ¯”è¾ƒå­—ç¬¦ä¸²</a></li><li><a href="https://www.unicode.org/charts/rs.pdf">å®˜æ–¹æ–‡æ¡£ ç®€</a>      <a href="http://www.unicode.org/versions/Unicode13.0.0/ch18.pdf">å®˜æ–¹æ–‡æ¡£ è¯¦</a></li><li><a href="https://www.unicode.org/reports/tr38/">UNICODE HAN DATABASE (UNIHAN)</a></li><li><a href="https://zhuanlan.zhihu.com/p/50380852">æ·±å…¥ç†è§£è‹¹æœç³»ç»Ÿï¼ˆUnicodeï¼‰å­—ç¬¦ä¸²çš„æ’åºæ–¹æ³•</a></li></ul><p>Unicode Collation Algorithm (UCA) æ˜¯ Unicode åˆ¶å®šçš„å¦‚ä½•æ¯”è¾ƒä¸¤ä¸ª Unicode å­—ç¬¦ä¸²çš„è§„èŒƒã€‚UCAæŒ‡å®šäº†é»˜è®¤æƒ…å†µä¸‹ Unicode å­—ç¬¦çš„é¡ºåºã€‚ä½†æ˜¯è¿™ä»…ä»…æ˜¯é»˜è®¤æƒ…å†µï¼Œä¹Ÿå°±æ˜¯ç…§é¡¾äº†å¤§å¤šæ•°æƒ…å†µï¼ˆä¹Ÿå°±æ˜¯æ’åºå¯¹è‹±è¯­å›½å®¶æ¯”è¾ƒå‹å¥½ï¼‰ã€‚å¯¹äºå…¶ä»–åœ°åŒºçš„äººä»¬æ¥è¯´ï¼Œå°±éœ€è¦è¾“å…¥å’Œé»˜è®¤æƒ…å†µä¸åŒçš„æ•°æ®ï¼Œä»¥è·å¾—å’Œå½“åœ°ä¹ æƒ¯ç›¸ç¬¦åˆçš„ç»“æœã€‚æ¯”å¦‚åŒæ ·çš„æ±‰å­—ï¼Œåœ¨ä¸­å›½å¤§é™†æ˜¯æŒ‰ç…§æ±‰è¯­æ‹¼éŸ³æ’åºçš„ï¼Œåœ¨é¦™æ¸¯å°±æ˜¯æŒ‰ç…§ç¬”ç”»æ•°ç›®æ’åºçš„ï¼Œç¬”ç”»æ’åºçš„ä¾æ®ä¸»è¦æ˜¯åº·ç†™å­—å…¸ç¬¬ä¸ƒç‰ˆã€‚</p><p>Common Locale Data Repository (CLDR)ï¼Œä»åå­—ä¸Šå¯ä»¥çœ‹å‡ºï¼Œè¿™ä¸ªå®é™…ä¸Šæ˜¯ä¸€å †æ•°æ®çš„ä»“åº“ã€‚å¯¹äºæŒ‡å®šçš„åœ°åŒº (locale)ï¼Œå¯ä»¥ä»ä¸­æ‰¾åˆ°æŒ‡å®šçš„æ•°æ®ã€‚å†ç»“åˆ UCAï¼Œå°±å¯ä»¥å¾—åˆ°ç¬¦åˆå½“æœŸä¹ æƒ¯çš„æ’åºç»“æœã€‚</p><p><img src="/2021/computer-architecture-hitlabs/image-20210417101024600.png"></p><p>ä¸­å›½å¤§é™†ä½¿ç”¨unicodeå®é™…ä¸Šæ˜¯é¦–å…ˆæŒ‰ç…§æ‹¼éŸ³æ’åºï¼Œè¡¨ç°ä¸ºä¸åŒè¡Œä¹‹é—´çš„é¡ºåºã€‚å¯¹äºåŒéŸ³å­—ï¼Œä¹Ÿå°±æ˜¯æ¯ä¸€è¡Œä¹‹é—´çš„é¡ºåºï¼Œå…ˆæŒ‰ç…§ç¬”ç”»æ•°æ’åºï¼Œå†æŒ‰ç…§<code>kRSUnicode</code>æ’åºã€‚</p><h2 id="æ•°æ®å˜æ¢ä¸è¾“å…¥è¾“å‡º"><a href="#æ•°æ®å˜æ¢ä¸è¾“å…¥è¾“å‡º" class="headerlink" title="æ•°æ®å˜æ¢ä¸è¾“å…¥è¾“å‡º"></a>æ•°æ®å˜æ¢ä¸è¾“å…¥è¾“å‡º</h2><ol><li><strong>printf ä¸ scanf çš„å®ç°</strong></li></ol><p><a href="https://blog.csdn.net/u010125463/article/details/46522587">æµ…æScanfæºç </a></p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"></span><br></pre></td></tr></table></figure><ol start="2"><li><a href="https://blog.csdn.net/rakish_wind/article/details/81433679">getsï¼ˆï¼‰å‡½æ•°ä¸scanfï¼ˆï¼‰å‡½æ•°å¯¹è¯»å–å­—ç¬¦ä¸²çš„åŒºåˆ«ä¹‹å¤„</a></li></ol><p>gets()ï¼šå¯æ¥å—å¸¦ç©ºæ ¼çš„å­—ç¬¦ä¸²ï¼Œå›è½¦ç»ˆæ­¢ï¼Œåœ¨å­—ç¬¦ä¸²æœ«å°¾è¡¥â€™\0â€™ï¼Œä¼šä»è¾“å…¥ç¼“å­˜åŒºä¸­å¸æ”¶å›è½¦ï¼Œå¯æ¥å—ç©ºå­—ç¬¦ä¸²ã€‚</p><p>ï¼ˆPSï¼šputsï¼ˆï¼‰è¾“å‡ºå­—ç¬¦ä¸²æ—¶ä¼šè‡ªåŠ¨åŠ ä¸Šæ¢è¡Œã€‚ï¼‰</p><p>scanf()ï¼š%så¸æ”¶å­—ç¬¦ä¸²æ—¶ï¼Œä¸å¸æ”¶ç©ºç™½ç¬¦ï¼Œé‡è§ç©ºç™½ç¬¦åœæ­¢å¸æ”¶ï¼Œåœ¨å­—ç¬¦ä¸²æœ«å°¾è¡¥â€™\0â€™ï¼Œå¹¶ä¸”scanfï¼ˆï¼‰å¸æ”¶å­—ç¬¦æ—¶ä¼šè‡ªåŠ¨ç•¥è¿‡å¼€å¤´çš„ç©ºç™½ç¬¦ï¼Œç›´è‡³é‡è§ä¸€ä¸ªéç©ºç™½ç¬¦æ‰å¼€å§‹å®ƒçš„å¸æ”¶è¿‡ç¨‹ã€‚</p><ul><li><a href="https://www.cnblogs.com/52php/p/5724372.html">Cä¸­å„inputå‡½æ•°ç”¨æ³•</a></li></ul><ol start="3"><li><strong>ç¼–å†™å‡½æ•°cs_atoi/cs_atof  ï¼ˆå­—ç¬¦ä¸²è½¬æ­£æ•°/æµ®ç‚¹æ•°ï¼‰</strong><br>å­—ç¬¦ä¸²é™å®šä¸ºåè¿›åˆ¶ï¼Œå¤„ç†æ•ˆæœåŒscanf</li></ol><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;string.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;assert.h&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">        <span class="keyword">char</span> str[<span class="number">100</span>];</span><br><span class="line">        <span class="built_in">scanf</span>(<span class="string">&quot;%s&quot;</span>, str);</span><br><span class="line">        <span class="keyword">int</span> i;</span><br><span class="line">        <span class="keyword">int</span> res = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">for</span>(i = <span class="number">0</span>; i &lt; <span class="built_in">strlen</span>(str); i++) &#123;</span><br><span class="line">                res = res * <span class="number">10</span> + (str[i] - <span class="string">&#x27;0&#x27;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">&quot;int: %d\n&quot;</span>, res);</span><br><span class="line">        assert(res == atoi(str));</span><br><span class="line">        <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;string.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;assert.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;float.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;math.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;stdlib.h&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">        <span class="keyword">char</span> str[<span class="number">100</span>];</span><br><span class="line">        <span class="built_in">scanf</span>(<span class="string">&quot;%s&quot;</span>, str);</span><br><span class="line">        <span class="keyword">int</span> i;</span><br><span class="line">        <span class="keyword">int</span> len = <span class="built_in">strlen</span>(str);</span><br><span class="line">        <span class="keyword">double</span> res = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">for</span>(i = <span class="number">0</span>; i &lt; len &amp;&amp; str[i] != <span class="string">&#x27;.&#x27;</span>; i++) &#123;</span><br><span class="line">                res = res * <span class="number">10</span> + (str[i] - <span class="string">&#x27;0&#x27;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">double</span> t = <span class="number">10</span>;</span><br><span class="line">        <span class="keyword">for</span>(i = i+<span class="number">1</span>; i &lt; len; i++,t*=<span class="number">10</span>) &#123;</span><br><span class="line">                res += (str[i] - <span class="string">&#x27;0&#x27;</span>) / t;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">&quot;double: %lf\n&quot;</span>, res);</span><br><span class="line">        <span class="keyword">double</span> atod = atof(str);</span><br><span class="line">        assert(<span class="built_in">fabs</span>(res - atod) &lt;= <span class="number">1e-5</span>);</span><br><span class="line">        <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ol start="4"><li><strong>ç¼–å†™å‡½æ•°cs_itoa/cs_ftoa  ï¼ˆæ­£æ•°/æµ®ç‚¹æ•°è½¬å­—ç¬¦ä¸²ï¼‰</strong><br>å­—ç¬¦ä¸²é™å®šä¸ºåè¿›åˆ¶ï¼Œå¤„ç†æ•ˆæœåŒprintf</li></ol><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;string.h&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">char</span> *  <span class="title">itoa</span> <span class="params">( <span class="keyword">int</span> value, <span class="keyword">char</span> * str, <span class="keyword">int</span> base )</span></span>;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">        <span class="keyword">int</span> i;</span><br><span class="line">        <span class="keyword">char</span> c[<span class="number">100</span>];</span><br><span class="line">        c[<span class="number">99</span>] = <span class="string">&#x27;\0&#x27;</span>;</span><br><span class="line">        <span class="keyword">int</span> num = <span class="number">98</span>;</span><br><span class="line">        <span class="built_in">scanf</span>(<span class="string">&quot;%d&quot;</span>, &amp;i);</span><br><span class="line">        <span class="keyword">while</span>(i != <span class="number">0</span>) &#123;</span><br><span class="line">                c[num--] = i % <span class="number">10</span> + <span class="string">&#x27;0&#x27;</span>;</span><br><span class="line">                i /= <span class="number">10</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">&quot;%s\n&quot;</span>, &amp;c[num+<span class="number">1</span>]);</span><br><span class="line">        <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;float.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;stdlib.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;string.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;math.h&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">char</span> * <span class="title">itoa</span><span class="params">(<span class="keyword">int</span> value, <span class="keyword">char</span> * str, <span class="keyword">int</span> base)</span></span>;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">        <span class="keyword">double</span> d;</span><br><span class="line">        <span class="keyword">char</span> c[<span class="number">100</span>];</span><br><span class="line">        c[<span class="number">99</span>] = <span class="string">&#x27;\0&#x27;</span>;</span><br><span class="line">        <span class="keyword">int</span> num = <span class="number">98</span>;</span><br><span class="line">        <span class="keyword">int</span> time = <span class="number">0</span>;</span><br><span class="line">        <span class="built_in">scanf</span>(<span class="string">&quot;%lf&quot;</span>, &amp;d);</span><br><span class="line">        <span class="keyword">while</span>(<span class="built_in">fabs</span>((<span class="keyword">double</span>)((<span class="keyword">long</span> <span class="keyword">long</span>)(d*<span class="number">10</span>)/<span class="number">10</span>) - d) &gt; DBL_EPSILON) &#123;</span><br><span class="line">                <span class="comment">// still have .</span></span><br><span class="line">                d *= <span class="number">10</span>;</span><br><span class="line">                time++;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">long</span> <span class="keyword">long</span> l = (<span class="keyword">long</span> <span class="keyword">long</span>) d;</span><br><span class="line">        <span class="keyword">while</span>(l != <span class="number">0</span>) &#123;</span><br><span class="line">                c[num--] = l % <span class="number">10</span> + <span class="string">&#x27;0&#x27;</span>;</span><br><span class="line">                time--;</span><br><span class="line">                <span class="keyword">if</span>(time == <span class="number">0</span>) &#123;</span><br><span class="line">                        c[num--] = <span class="string">&#x27;.&#x27;</span>;</span><br><span class="line">                        time--;</span><br><span class="line">                &#125;</span><br><span class="line">                l /= <span class="number">10</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">&quot;%s\n&quot;</span>, &amp;c[num+<span class="number">1</span>]);</span><br><span class="line">        <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ol start="5"><li><strong>æµ®ç‚¹æ•°æ¯”è¾ƒ</strong></li></ol><p><a href="https://bot-man-jl.github.io/articles/?post=2020/Comparing-Floating-Point-Numbers">å¦‚ä½•æ¯”è¾ƒä¸¤ä¸ªæµ®ç‚¹æ•°</a></p><p>å¯¹äºæµ®ç‚¹æ•°ï¼š<strong>é™¤äº†èƒ½ç”¨2çš„æŒ‡æ•°å¹‚ä¹˜ä»¥æ•´æ•°è¡¨ç¤ºçš„æµ®ç‚¹æ•°èƒ½å¤Ÿè¢«ç²¾ç¡®çš„è¡¨ç¤ºå¤–ï¼Œå…¶ä½™çš„æµ®ç‚¹æ•°éƒ½æ˜¯è¿‘ä¼¼è¡¨ç¤ºçš„ã€‚</strong></p><p>ä½¿ç”¨fabsæ¥æ±‚ç»å¯¹å€¼ã€‚</p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span>(<span class="built_in">fabs</span>(f1 - f2) &lt;= <span class="number">1e-6</span>) &#123;  <span class="comment">//equal</span></span><br><span class="line">    ...</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// æˆ–è€…ä½¿ç”¨ float.h ä¸­çš„ FLT_ESPILON(1.1920929e-7) | DBL_EPSILON(2.22045e-16)</span></span><br></pre></td></tr></table></figure><p>é”™è¯¯ï¼š</p><p><img src="/2021/computer-architecture-hitlabs/10.png"></p><p>1ï¼‰abs() å‡½æ•°ä¼ å…¥æµ®ç‚¹æ•°æ—¶ï¼šabsä¼šæŠŠè¯¥æµ®ç‚¹æ•°è§£é‡Šä¸ºintï¼Œå› æ­¤æ•°å­—å¯èƒ½ä¼šå˜å¾—å¾ˆå¤§ã€‚</p><p>2ï¼‰fabs() ç»“æœé”™è¯¯ï¼šæ²¡æœ‰åŒ…å«å¤´æ–‡ä»¶ stdlib.hï¼Œè¿è¡Œæ²¡æœ‰æŠ¥é”™ï¼Œè¿”å›0ã€‚</p><p>å•ç²¾åº¦æ•°7ä½æœ‰æ•ˆæ•°å­—ã€‚ ï¼ˆfloatï¼‰<br>åŒç²¾åº¦æ•°16ä½æœ‰æ•ˆæ•°å­—ã€‚ï¼ˆdoubleï¼‰</p><p>å•ç²¾åº¦æ•°çš„å°¾æ•°ç”¨23ä½å­˜å‚¨ï¼ŒåŠ ä¸Šé»˜è®¤çš„å°æ•°ç‚¹å‰çš„1ä½1ï¼Œ2^(23+1) = 16777216ã€‚å› ä¸º 10^7 &lt; 16777216 &lt; 10^8ï¼Œæ‰€ä»¥è¯´å•ç²¾åº¦æµ®ç‚¹æ•°çš„æœ‰æ•ˆä½æ•°æ˜¯7ä½ã€‚ åŒç²¾åº¦çš„å°¾æ•°ç”¨52ä½å­˜å‚¨ï¼Œ2^(52+1) = 9007199254740992ï¼Œ10^16 &lt; 9007199254740992 &lt; 10^17ï¼Œæ‰€ä»¥åŒç²¾åº¦çš„æœ‰æ•ˆä½æ•°æ˜¯16ä½</p><p>å•ç²¾åº¦æµ®ç‚¹æ•°çš„å®é™…æœ‰æ•ˆç²¾åº¦ä¸º24ä½äºŒè¿›åˆ¶ï¼Œè¿™ç›¸å½“äº 24*log102â‰ˆ7.2 ä½10è¿›åˆ¶çš„ç²¾åº¦ï¼Œæ‰€ä»¥å¹³æ—¶æˆ‘ä»¬è¯´â€œå•ç²¾åº¦æµ®ç‚¹æ•°å…·æœ‰7ä½ç²¾åº¦â€ã€‚ï¼ˆç²¾åº¦çš„ç†è§£ï¼šå½“ä»1.000â€¦02å˜åŒ–ä¸º1.000â€¦12æ—¶ï¼Œå˜åŠ¨èŒƒå›´ä¸º 2-23ï¼Œè€ƒè™‘åˆ°å› ä¸ºå››èˆäº”å…¥è€Œå¾—åˆ°çš„1å€ç²¾åº¦æé«˜ï¼Œæ‰€ä»¥å•ç²¾åº¦æµ®ç‚¹æ•°å¯ä»¥åæ˜ 2-24çš„æ•°å€¼å˜åŒ–ï¼Œå³24ä½äºŒè¿›åˆ¶ç²¾åº¦ï¼‰</p><p><a href="https://blog.csdn.net/github_33873969/article/details/78040129">Cè¯­è¨€çš„int, float,doubleç›¸äº’è½¬åŒ–ï¼ˆä»æœ¬è´¨ä¸Šç†è§£å¯èƒ½çš„é—®é¢˜ï¼‰</a></p><p><img src="https://img-blog.csdn.net/20170920213214857?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvZ2l0aHViXzMzODczOTY5/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast"></p><h2 id="é‡åˆ°çš„é—®é¢˜"><a href="#é‡åˆ°çš„é—®é¢˜" class="headerlink" title="é‡åˆ°çš„é—®é¢˜"></a>é‡åˆ°çš„é—®é¢˜</h2><ol><li>codeblocks è°ƒè¯•æ—¶ä¸åœä¸‹ã€‚</li></ol><p>åŸå› ä¸€ã€projectä¸­æ–‡è·¯å¾„ã€‚</p><p>åŸå› äºŒã€codeblocks ç‰ˆæœ¬ä¸ gcc gdb ä¸å…¼å®¹ã€‚</p><ol start="2"><li><p>gdbè°ƒè¯•æ—¶æŸ¥çœ‹å…¨å±€å˜é‡å†…å­˜ï¼Œä½¿ç”¨å‘½ä»¤ï¼š x /x x</p><p>Cannot access memory at address 0xffffffffb90efc69.</p></li></ol><p>åŸå› ï¼šxå‘½ä»¤åæ¥åœ°å€ï¼Œç›´æ¥å†™xä»£è¡¨ä½ è¦è®¿é—®(x)çš„å†…å®¹ï¼Œè‡ªç„¶æŠ¥é”™ã€‚æ­£ç¡®ï¼šx /x &amp;x</p><h2 id="æ”¶è·-1"><a href="#æ”¶è·-1" class="headerlink" title="æ”¶è·"></a>æ”¶è·</h2><ol><li>å­¦ä¼šäº†å¦‚ä½•ç”¨gdb, objdumpæ¥è°ƒè¯•ç¨‹åºã€è§‚å¯Ÿç¨‹åºä¿¡æ¯ã€‚</li><li>ç»ƒä¹ äº†å¯»æ‰¾å’Œæ•´ç†æœ‰æ•ˆä¿¡æ¯çš„èƒ½åŠ›ã€‚</li><li>å¯¹æµ®ç‚¹æ•°çš„äºŒè¿›åˆ¶è¡¨ç¤ºæœ‰äº†æ›´æ·±çš„ç†è§£ã€‚</li><li>å¯¹unicodeå­—ç¬¦é›†ã€utfç¼–ç ã€ANSIã€ASCIIã€GBKç¼–ç æœ‰äº†è¾ƒä¸ºå…¨é¢çš„äº†è§£ã€‚</li><li>äº†è§£äº†ä¸åŒå˜é‡åœ¨å†…å­˜ä¸­çš„å­˜å‚¨ä½ç½®å’Œå†…å­˜çš„æ®µåˆ†å¸ƒã€‚</li></ol><h1 id="å®éªŒä¸‰-Bomb"><a href="#å®éªŒä¸‰-Bomb" class="headerlink" title="å®éªŒä¸‰ Bomb"></a>å®éªŒä¸‰ Bomb</h1><h2 id="phase-1"><a href="#phase-1" class="headerlink" title="phase 1"></a>phase 1</h2><p>b 74</p><p>è¿›å…¥phase_1:</p><p><img src="/2021/computer-architecture-hitlabs/image-20210421174611067.png"></p><p>æ¨æµ‹æ‹†å¼¹å¯†ç å­—ç¬¦ä¸²çš„å­˜å‚¨åœ°å€ä¸º<code>$0x403150</code>ï¼Œå› ä¸ºè°ƒç”¨<code>strings_not_equal</code>å‰æœ‰æŠŠè¯¥åœ°å€æ”¾å…¥esiå¯„å­˜å™¨çš„è¯­å¥ã€‚</p><p>ä»¥å­—ç¬¦ä¸²å½¢å¼æŸ¥çœ‹è¯¥åœ°å€å†…å®¹ï¼Œå¾—åˆ°ï¼š</p><p><img src="/2021/computer-architecture-hitlabs/image-20210421175019595.png"></p><h2 id="phase-2"><a href="#phase-2" class="headerlink" title="phase 2"></a>phase 2</h2><p>b 82</p><p>I am just a renegade hockey mom.</p><p>è¿›å…¥phase_2:</p><p><img src="/2021/computer-architecture-hitlabs/image-20210421175354138.png"></p><p>è¿›å…¥read_six_number:</p><p><img src="/2021/computer-architecture-hitlabs/image-20210422143204775.png"></p><p>å¯çŸ¥read_six_numberç”¨æ¥å¤„ç†è¾“å…¥ï¼Œè¾“å…¥æ ¼å¼ä¸ºâ€%d %d %d %d %d %dâ€ã€‚</p><p><img src="/2021/computer-architecture-hitlabs/image-20210422134321868.png"></p><p>æ ¹æ®æ±‡ç¼–ä»£ç å¯æ¨æ–­å‡ºè¾“å…¥æ•°å­—çš„è§„å¾‹ã€‚</p><h2 id="phase-3"><a href="#phase-3" class="headerlink" title="phase 3"></a>phase 3</h2><p>1 2 4 7 11 16</p><p>b 89</p><p>è¿›å…¥phase_3:</p><p><img src="/2021/computer-architecture-hitlabs/image-20210422144049874.png"></p><p>å¯çŸ¥è¾“å…¥å½¢å¼ä¸ºâ€%d %c %dâ€ã€‚</p><p>æµ‹è¯•è¾“å…¥<code>1 c 0</code></p><p><img src="/2021/computer-architecture-hitlabs/image-20210422145054755.png"></p><p>å¯çŸ¥ <code>0xc(%rsp)</code> å¤„å­˜çš„æ˜¯ç¬¬ä¸€ä¸ªè¾“å…¥æ•°å­—ã€‚<code>cmp $0x7, %eax</code> è¡¨æ˜è¯¥æ•°å­—ä¸èƒ½å¤§äº7ã€‚</p><p><img src="/2021/computer-architecture-hitlabs/image-20210422145421416.png"></p><p>æ¥ä¸‹æ¥çœ‹ä½äº<code>0x8(%rsp)</code>çš„ç¬¬äºŒä¸ªæ•°å­—æ˜¯å¦ç­‰äº0x368 = 872ã€‚</p><p><img src="/2021/computer-architecture-hitlabs/image-20210422150618945.png"></p><p>ç”±ç¬¬ä¸‰æ­¥æ¯”è¾ƒå¯å¾—éœ€è¦è¾“å…¥çš„å­—ç¬¦ä¸ºâ€™tâ€™ã€‚</p><h2 id="phase-4"><a href="#phase-4" class="headerlink" title="phase 4"></a>phase 4</h2><p>1 t 872</p><p>b 95</p><p>è¿›å…¥phase_4:</p><p><img src="/2021/computer-architecture-hitlabs/image-20210422150922762.png"></p><p>åŒç†å¾—ï¼Œéœ€è¦è¾“å…¥çš„æ˜¯ä¸¤ä¸ªæ•°å­—ã€‚</p><p><img src="/2021/computer-architecture-hitlabs/image-20210422151719517.png"></p><p>ç»§ç»­å¾€ä¸‹ï¼Œå¯çŸ¥ç¬¬äºŒqä¸ªæ•°å­—éœ€è¦åœ¨[2, 4]ä¸­ã€‚</p><p><img src="/2021/computer-architecture-hitlabs/image-20210422202835800.png"></p><p>çœ‹ func4 å‡½æ•°è¿”å›æ—¶çš„æ±‡ç¼–ä»£ç å¾—è¾“å…¥çš„ç¬¬ä¸€ä¸ªæ•°å­—éœ€è¦ä¸eaxç›¸ç­‰ã€‚</p><p><img src="/2021/computer-architecture-hitlabs/image-20210422204740646.png"></p><p>ä»func4é€€å‡ºæ—¶ï¼Œraxçš„å€¼ä¸º0xa2ã€‚(åœ¨ç¬¬äºŒä¸ªè¾“å…¥æ•°å­—ä¸º3çš„æƒ…å†µä¸‹)</p><p><img src="/2021/computer-architecture-hitlabs/image-20210422152712885.png"></p><p><img src="/2021/computer-architecture-hitlabs/image-20210422153036291.png"></p><p>esi ä¸­å­˜æ”¾è¾“å…¥çš„ç¬¬äºŒä¸ªæ•°å­—ï¼Œediçš„åˆå§‹å€¼ä¸º8ã€‚</p><p><img src="/2021/computer-architecture-hitlabs/image-20210422153344590.png"></p><p>å°†ediä¸1æ¯”è¾ƒï¼Œè‹¥ç›¸ç­‰åˆ™è·³åˆ°<code>mov %esi, %eax</code>ã€‚</p><p><img src="/2021/computer-architecture-hitlabs/image-20210422153609671.png"></p><p>func4å‡½æ•°å†…éƒ¨ä¼šå°†å‚æ•°å‡ä¸€ï¼Œè°ƒç”¨è‡ªå·±ã€‚è¿›å…¥ç¬¬äºŒä¸ªfunc4å‡½æ•°æ ˆæ—¶ï¼Œedi == 7ã€‚</p><p><img src="/2021/computer-architecture-hitlabs/image-20210422153909104.png"></p><p>ä¸€ç›´åˆ°å‚æ•°ä¸º1ã€‚</p><p><img src="/2021/computer-architecture-hitlabs/image-20210422154208393.png"></p><p>ç”±æ­¤å¯ä»¥å†™å‡ºfunc4çš„æ¡†æ¶ï¼š</p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">func4</span><span class="params">(<span class="keyword">int</span> n)</span> </span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">if</span>(n == <span class="number">0</span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">    &#125; <span class="keyword">else</span> <span class="keyword">if</span>(n == <span class="number">1</span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> è¾“å…¥çš„ç¬¬äºŒä¸ªæ•°å­—</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="keyword">int</span> res1 = func(n<span class="number">-1</span>);</span><br><span class="line">        <span class="keyword">int</span> res2 = func(n<span class="number">-2</span>);</span><br><span class="line">        <span class="keyword">return</span> res1 + res2 + è¾“å…¥çš„ç¬¬äºŒä¸ªæ•°å­—</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>å°†è¾“å…¥çš„ç¬¬äºŒä¸ªæ•°å­—è®°ä¸ºâ‘¡ï¼Œå¾—åˆ°func4æœ€ç»ˆçš„è¿”å›å€¼ä¸ºï¼š</p><table><thead><tr><th>1</th><th>2</th><th>3</th><th>4</th><th>5</th><th>6</th><th>7</th><th>8</th></tr></thead><tbody><tr><td>â‘¡</td><td>2â‘¡</td><td>4â‘¡</td><td>7â‘¡</td><td>12â‘¡</td><td>20â‘¡</td><td>33â‘¡</td><td>54â‘¡</td></tr></tbody></table><p>åªè¦æ»¡è¶³è¾“å…¥æ•°å­—ï¼šâ‘  = 54 â‘¡ã€‚</p><h2 id="phase-5"><a href="#phase-5" class="headerlink" title="phase 5"></a>phase 5</h2><p>162 3</p><p>b 101</p><p>åŒç†æŸ¥çœ‹scanfå‚æ•°å¾—åˆ°éœ€è¦çš„ä¸ºä¸¤ä¸ªæ•°å­—(â€œ%d %dâ€)ã€‚</p><p><img src="/2021/computer-architecture-hitlabs/image-20210422214403157.png"></p><p>å½“eaxäºŒè¿›åˆ¶å4ä½ä¸º1111æ—¶ï¼Œè·³å…¥phase_5+91ã€‚</p><p><img src="/2021/computer-architecture-hitlabs/image-20210422214132046.png"></p><p>edx çš„æœ€å4ä½éœ€è¦ä¸º0xfï¼Œè¾“å…¥çš„ç¬¬äºŒä¸ªæ•°å­—éœ€è¦ä¸ecxç›¸ç­‰ã€‚</p><p><img src="/2021/computer-architecture-hitlabs/image-20210422215036187.png"></p><p>è¾“å…¥çš„ç¬¬ä¸€ä¸ªæ•°å­—åå››ä½ä¸ä¸º1111æ—¶ï¼Œæ‰§è¡Œphase_4ä¹‹åä»£ç ï¼Œå¯å¾—raxæ˜¯è®¿é—®æ•°ç»„çš„ä¸‹æ ‡ã€‚</p><p><code>mov %eax, 0xc(%rsp)</code>: ç”¨array[â‘ ] çš„å€¼è¦†ç›–â‘ çš„ä½ç½®ã€‚</p><p><code>add %eax, %ecx</code>: å°†è¯¥æ•°ç»„å€¼åŠ å…¥ecxã€‚</p><p><img src="/2021/computer-architecture-hitlabs/image-20210422220110768.png"></p><p>ç”±æ­¤å¯å¾—ï¼Œæœ€ç»ˆçš„ç»“æœæ˜¯ä»ä¸‹æ ‡ä¸ºâ‘ å¼€å§‹æ‰§è¡Œä¸Šè¿°ä¸»è¦æ“ä½œ15æ¬¡åï¼Œraxçš„å€¼ä¸º15ï¼Œç»è¿‡çš„ç´¯åŠ å’Œ(ecx)åˆ™ä¸ºâ‘¡ã€‚</p><p>æ ¹æ®arrayçš„å€¼ï¼Œå¯å¾—5 115ã€‚</p><h2 id="phase-6"><a href="#phase-6" class="headerlink" title="phase 6"></a>phase 6</h2><p>5 115</p><p>b 108</p><p>è¿›å…¥phase_6ï¼Œç”±read_six_numberå‡½æ•°å¯çŸ¥éœ€è¦è¾“å…¥çš„æ˜¯å…­ä¸ªæ•°å­—ã€‚</p><p><img src="/2021/computer-architecture-hitlabs/image-20210423074937411.png"></p><p>æŸ¥çœ‹rspå¤„å†…å®¹å¯çŸ¥ï¼šå‡½æ•°å°†è¾“å…¥çš„å…­ä¸ªæ•°å­—(1 2 3 4 5 6)æ”¾åœ¨äº†rsp+0x30å¤„ã€‚</p><p><img src="/2021/computer-architecture-hitlabs/image-20210423075339517.png"></p><p>å¯¹åº”æ±‡ç¼–ä»£ç ä¸­çš„ä½ç½®è¡¨æ˜raxç”¨æ¥é€‰å®šæŸä¸€ä¸ªæ•°å­—ã€‚</p><p>åˆ†æphase_6çš„æ±‡ç¼–ä»£ç ï¼Œå¯å¾—ï¼š</p><p><img src="/2021/computer-architecture-hitlabs/image-20210423081019406.png"></p><p>ç”±æ­¤å¯ä»¥æ¨æ–­å‡ºå‡½æ•°çš„ç¬¬ä¸€éƒ¨åˆ†ä¸ºï¼š</p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; <span class="number">6</span>; i++) &#123;</span><br><span class="line">    <span class="keyword">if</span>(input[i] - <span class="number">1</span> &gt; <span class="number">5</span>) <span class="keyword">return</span>;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> j = i+<span class="number">1</span>; j &lt; <span class="number">6</span>; j++) &#123;</span><br><span class="line">        <span class="keyword">if</span>(input[i] == input[j]) <span class="keyword">return</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æœ€ç»ˆç»“æœå…¶ä¸­ä¸€ä¸ªè¦æ±‚è¾“å…¥ä¸ºä¸¤ä¸¤ä¸ç›¸ç­‰çš„å…­ä¸ªå°äº7çš„æ•°å­—ï¼ˆå³123456çš„ä¸€ä¸ªæ’åˆ—ï¼‰ã€‚</p><p><img src="/2021/computer-architecture-hitlabs/image-20210423085247725.png"></p><p><img src="/2021/computer-architecture-hitlabs/image-20210423090018665.png"></p><p>åˆ†æå¯å¾—ï¼Œå‡½æ•°éå†è¾“å…¥çš„æ¯ä¸€ä¸ªæ•°å­—ï¼Œæ¯æ¬¡eaxéƒ½ä»1åˆ°6é€’å¢ï¼Œå½“éå†åˆ°çš„ç¬¬iä¸ªæ•°ç­‰äºeaxï¼Œåˆ™æŠŠå¯¹åº”çš„ebpçš„å€¼ï¼ˆnodeiåœ°å€ï¼‰å­˜å…¥æ ˆrsp+8(i-1)ä¸­ï¼Œebpéšeaxå˜åŒ–è€Œå˜åŒ–ï¼Œå˜ä¸ºä¸‹ä¸€ä¸ªèŠ‚ç‚¹ï¼ˆnextï¼‰åœ°å€ã€‚</p><p>ä¾‹å¦‚ï¼Œå‡è®¾è¾“å…¥ä¸º3 1 2 5 6 4ï¼Œåˆ™æ ˆé¡¶nodeåœ°å€æ’åˆ—ä¹Ÿæ˜¯3 1 2 5 6 4ã€‚</p><p>æ¥ä¸‹æ¥ï¼Œå°†nodeåºåˆ—æŒ‰ç…§è¿™ä¸ªé¡ºåºé‡æ–°è¿æ¥ï¼ˆæ”¹å˜æ¯ä¸€ä¸ªnodeçš„nextåŸŸä¸ºåºåˆ—ä¸­çš„ä¸‹ä¸€ä¸ªï¼‰ã€‚</p><p><img src="/2021/computer-architecture-hitlabs/image-20210423141118889.png"></p><p><img src="/2021/computer-architecture-hitlabs/image-20210423141414546.png"></p><p>æœ€ç»ˆæ¥å—çš„ç»“æœä¸ºï¼šæ‰€æœ‰ç›¸é‚»çš„èŠ‚ç‚¹ï¼Œå‰ä¸€ä¸ªèŠ‚ç‚¹ï¼ˆrbxï¼‰çš„valueæ¯”å½“å‰èŠ‚ç‚¹çš„valueï¼ˆeaxï¼‰å€¼å°ï¼ˆå³æ’åºï¼‰ã€‚</p><p>å„èŠ‚ç‚¹valueåˆ†åˆ«ä¸ºï¼š738ã€323ã€138ã€191ã€148ã€584ã€‚</p><p>åˆ™ä»å°åˆ°å¤§æ’åºindexä¸º3-&gt;5-&gt;4-&gt;2-&gt;6-&gt;1ã€‚</p><p>å› æ­¤è¾“å…¥çš„æ•°å­—åº”è¯¥ä¸º 3 5 4 2 6 1ã€‚</p><p><img src="/2021/computer-architecture-hitlabs/image-20210423143414354.png"></p><h2 id="éšè—å…³å¡"><a href="#éšè—å…³å¡" class="headerlink" title="éšè—å…³å¡"></a>éšè—å…³å¡</h2><p>åœ¨ phase_defused å‡½æ•°ä¸­ï¼š</p><p><img src="/2021/computer-architecture-hitlabs/image-20210422211257809.png"></p><p>å½“åœ¨ç¬¬å››å…³è¾“å…¥åé™„åŠ ç‰¹å®šå­—ç¬¦ä¸²æ—¶ï¼Œè¿›å…¥éšè—å…³å¡ã€‚</p><p><img src="/2021/computer-architecture-hitlabs/image-20210423145041470.png"></p><p>ç”±æ­¤å¯çŸ¥ç‰¹å®šå­—ç¬¦ä¸²æ˜¯DrEvilã€‚</p><p>ä½†éœ€è¦å½“0x40576cå¤„çš„å€¼(num_input_string)ç­‰äº6æ—¶æ‰ä¼šè¿›å…¥(å³è§£å¼€å‰é¢å…¨éƒ¨å…­å…³å)ã€‚</p><p>secret_phaseæ±‡ç¼–ä»£ç ï¼š</p><p><img src="/2021/computer-architecture-hitlabs/image-20210422211430054.png"></p><p>ç”±atoiå‡½æ•°å¯çŸ¥éœ€è¦è¾“å…¥çš„æ˜¯ä¸€ä¸ªæ•´æ•°ã€‚</p><p><img src="/2021/computer-architecture-hitlabs/image-20210423151243541.png"></p><p>è¿™ä¸ªæ•´æ•°å‡å»ä¸€åéœ€è¦ä¸æ¯”0x3e8(1000)å¤§ã€‚</p><p>æ¥ç€ä¼šè¿›å…¥ä¸€ä¸ªfun7å‡½æ•°ï¼Œå¾—åˆ°çš„è¿”å›å€¼åº”è¯¥ä¸º6ã€‚</p><p><img src="/2021/computer-architecture-hitlabs/image-20210423151600870.png"></p><p>è¿›å…¥fun7ï¼š</p><p><img src="/2021/computer-architecture-hitlabs/image-20210423163239565.png"></p><p>å½“è¾“å…¥çš„æ•°å­—æ¯”rdiæŒ‡å‘çš„æ•°å­—å¤§æ—¶ï¼ŒrdiåŠ ä¸Š0x10é€’å½’ï¼Œè¿”å›æ—¶å°†å¾—åˆ°çš„å€¼ä¹˜ä»¥2åŠ ä¸€ï¼›å°æ—¶ï¼ŒrdiåŠ ä¸Š0x8é€’å½’ï¼Œè¿”å›æ—¶å°†å¾—åˆ°çš„å€¼ä¹˜ä»¥ï¼›è‹¥ç›¸ç­‰åˆ™è¿”å›0ã€‚</p><p>éœ€è¦æœ€ç»ˆè¿”å›å€¼ä¸º6åˆ™å¯ä»¥ç»è¿‡0-&gt;1-&gt;3-&gt;6ã€‚å…¶ä¸­å¤§å°å˜åŒ–ä¸º å°äº-&gt;å¤§äº-&gt;å¤§äº-&gt;ç›¸ç­‰ã€‚ä¸€æ­¥æ­¥è¾“å…¥å€¼æµ‹è¯•å¾—åˆ°æœ€ç»ˆçš„â€ç›¸ç­‰â€ä¸º0x23(35)ã€‚</p><p>å…¨éƒ¨å®Œæˆï¼š</p><p><img src="/2021/computer-architecture-hitlabs/image-20210423162943384.png"></p><h2 id="æ”¶è·-2"><a href="#æ”¶è·-2" class="headerlink" title="æ”¶è·"></a>æ”¶è·</h2><ol><li>ç»ƒä¹ äº†å¦‚ä½•ä½¿ç”¨gdbæ¥è°ƒè¯•ç¨‹åºã€‚</li><li>å­¦ä¹ äº†edbçš„ä½¿ç”¨æ–¹æ³•ã€‚</li><li>æ›´æ·±åœ°ç†è§£çš„ä¸åŒç»“æ„çš„cä»£ç ç”Ÿæˆçš„æ±‡ç¼–ä»£ç ã€‚</li><li>å­¦ä¼šäº†å¦‚ä½•é€šè¿‡æŸ¥çœ‹å†…å­˜å’Œå¯„å­˜å™¨å˜åŒ–æ¥åæ¨ç¨‹åºä»£ç ã€‚</li><li>é€šè¿‡å®è·µçœŸæ­£ç†è§£äº†å„ç§æ•°æ®çš„å­˜å‚¨ä½ç½®å’Œè®¿é—®æ–¹å¼ã€‚</li></ol><h1 id="å®éªŒå››"><a href="#å®éªŒå››" class="headerlink" title="å®éªŒå››"></a>å®éªŒå››</h1><p>32ä½ with ebp</p><h2 id="smoke"><a href="#smoke" class="headerlink" title="smoke"></a>smoke</h2><p>ç”Ÿæˆcookieï¼š</p><p><img src="/2021/computer-architecture-hitlabs/image-20210428161046341.png"></p><p><img src="/2021/computer-architecture-hitlabs/image-20210428161418480.png"></p><p>smoke åœ°å€ï¼š</p><p><img src="/2021/computer-architecture-hitlabs/image-20210428165538996.png"></p><p>æ”»å‡»å­—ç¬¦ä¸²çš„å¤§å°åº”è¯¥æ˜¯0x28+4+4=48ä¸ªå­—èŠ‚ã€‚æ”»å‡»å­—ç¬¦ä¸²çš„æœ€å4å­—èŠ‚åº”æ˜¯smokeå‡½æ•°çš„åœ°å€0x08048bbbã€‚(å°ç«¯æ¨¡å¼å†™å…¥)</p><p>00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 bb 8b 04 08</p><p>æˆåŠŸï¼š</p><p><img src="/2021/computer-architecture-hitlabs/image-20210428173923240.png"></p><h2 id="Fizz"><a href="#Fizz" class="headerlink" title="Fizz"></a>Fizz</h2><p>fizzçš„åœ°å€ä¸º0x08048be8ï¼Œå‚æ•°åº”è¯¥å­˜åœ¨ %ebp + 8 çš„ä½ç½®ã€‚</p><p><img src="/2021/computer-architecture-hitlabs/image-20210428180037175.png"></p><p>ä»getbufå¼¹å‡ºè¿”å›å€¼åï¼ŒespæŒ‡å‘(è¿”å›åœ°å€-4)çš„ä½ç½®ã€‚</p><p>ç¬¬äº”è¡Œæ±‡ç¼–ä»£ç ä¸æ˜¯å°†0x804e158æ”¾å…¥edxï¼Œè€Œæ˜¯å°†åœ¨0x804e158è¿™ä¸ªåœ°å€çš„æ•°æ”¾å…¥ã€‚è‹¥ä»£è¡¨ç«‹å³æ•°ï¼Œä¼šåœ¨æ•°å‰é¢åŠ ä¸Š$ã€‚</p><p><img src="/2021/computer-architecture-hitlabs/image-20210428225717486.png"></p><p>æˆåŠŸï¼š</p><p><img src="/2021/computer-architecture-hitlabs/image-20210428224608219.png"></p><h2 id="Bang"><a href="#Bang" class="headerlink" title="Bang"></a>Bang</h2><p>æŸ¥çœ‹bangå‡½æ•°å†…éƒ¨ï¼š</p><p><img src="/2021/computer-architecture-hitlabs/image-20210429151703502.png"></p><p>å¯çŸ¥å…¨å±€å˜é‡å­˜åœ¨ 0x0804e160 çš„ä½ç½®ï¼Œè¦ç­‰äºcookieå€¼ã€‚</p><p>å†™å‡ºè®¾ç½®å…¨å±€å˜é‡çš„æ±‡ç¼–ä»£ç ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">mov 0x804e158, %eax</span><br><span class="line">mov %eax, 0x804e160</span><br><span class="line">pushl $0x08048c39</span><br><span class="line">ret</span><br></pre></td></tr></table></figure><p>é€šè¿‡ä¸‹é¢ä¸¤æ¡å‘½ä»¤æ¥ç”Ÿæˆæ±‡ç¼–ä»£ç çš„æœºå™¨ä»£ç ã€‚</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">gcc -m32 -c asm.s</span><br><span class="line">objdump -d asm.o</span><br></pre></td></tr></table></figure><p>æ„é€ ä¸€ä¸ªåŒ…å«åäºŒä¸ªå››å­—èŠ‚ä¸²çš„å­—ç¬¦ä¸²ï¼Œå‰é¢ä¸ºç”Ÿæˆçš„æœºå™¨æŒ‡ä»¤ï¼ˆç”Ÿæˆé¡ºåºï¼‰ï¼Œæœ€åå››ä¸ªå­—èŠ‚ä¸ºbufæ•°ç»„çš„åœ°å€ï¼ˆå°ç«¯é¡ºåºï¼‰ã€‚</p><figure class="highlight angelscript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">a1 <span class="number">58</span> e1 <span class="number">04</span> <span class="number">08</span></span><br><span class="line">a3 <span class="number">60</span> e1 <span class="number">04</span> <span class="number">08</span></span><br><span class="line"><span class="number">68</span> <span class="number">39</span> <span class="number">8</span>c <span class="number">04</span> <span class="number">08</span></span><br><span class="line">c3</span><br><span class="line"><span class="number">30</span> <span class="number">30</span> <span class="number">30</span> <span class="number">30</span></span><br><span class="line"><span class="number">30</span> <span class="number">30</span> <span class="number">30</span> <span class="number">30</span></span><br><span class="line"><span class="number">30</span> <span class="number">30</span> <span class="number">30</span> <span class="number">30</span></span><br><span class="line"><span class="number">30</span> <span class="number">30</span> <span class="number">30</span> <span class="number">30</span></span><br><span class="line"><span class="number">30</span> <span class="number">30</span> <span class="number">30</span> <span class="number">30</span></span><br><span class="line"><span class="number">30</span> <span class="number">30</span> <span class="number">30</span> <span class="number">30</span></span><br><span class="line"><span class="number">30</span> <span class="number">30</span> <span class="number">30</span> <span class="number">30</span></span><br><span class="line">e8 <span class="number">2f</span> <span class="number">68</span> <span class="number">55</span>   # è¿”å›åœ°å€ï¼Œå³æ’å…¥çš„æœºå™¨ä»£ç çš„åœ°å€</span><br></pre></td></tr></table></figure><p>æˆåŠŸï¼š</p><p><img src="/2021/computer-architecture-hitlabs/image-20210429201658050.png"></p><blockquote><p><img src="/2021/computer-architecture-hitlabs/image-20210429154914764.png"></p><p>assembly language source files in Unix are traditionally named <code>.s</code>, or <code>.S</code> (capital S, remember Unix filenames are case sensitive) if they are to be passed through the C preprocessor. (C-style macro and include expansion are handled by the C preprocessor, not by the assembler itself, which is why it doesnâ€™t work when you run <code>as</code> directly.)</p><p>Files not otherwise recognized are assumed to be object files to be passed to the linker, but since you specified <code>-c</code>, the linker is not to be run, so <code>gcc</code> thinks there is nothing to do.</p><p>æ­£ç¡®ï¼šåŠ ä¸Šåç¼€.S</p><p><img src="/2021/computer-architecture-hitlabs/image-20210429155136028.png"></p></blockquote><p>æ³¨æ„ï¼šè‹¥ä½¿ç”¨callçš„æ±‡ç¼–æŒ‡ä»¤ï¼Œbufbombä¼šäº§ç”Ÿ segmentation faultã€‚</p><p><img src="/2021/computer-architecture-hitlabs/image-20210429202957431.png"></p><h2 id="boom"><a href="#boom" class="headerlink" title="boom"></a>boom</h2><p>ä¸ç¬¬ä¸‰é˜¶æ®µåŒç†ï¼Œè¿”å›æ—¶å›åˆ°teståŸæœ¬ä¿å­˜çš„è¿”å›åœ°å€ï¼Œéœ€è¦æ³¨æ„çš„æ˜¯éœ€è¦æŠŠtestçš„ebpè¿˜åŸã€‚æ±‡ç¼–ä»£ç å¦‚ä¸‹ï¼š</p><p><img src="/2021/computer-architecture-hitlabs/image-20210429205135658.png"></p><p>æ„é€ çš„å­—ç¬¦ä¸²ä¸º</p><figure class="highlight angelscript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">b8 <span class="number">48</span> <span class="number">3</span>e e9 <span class="number">25</span></span><br><span class="line">bd <span class="number">30</span> <span class="number">30</span> <span class="number">68</span> <span class="number">55</span></span><br><span class="line"><span class="number">68</span> a7 <span class="number">8</span>c <span class="number">04</span> <span class="number">08</span></span><br><span class="line">c3</span><br><span class="line"><span class="number">00</span> <span class="number">00</span> <span class="number">00</span> <span class="number">00</span></span><br><span class="line"><span class="number">00</span> <span class="number">00</span> <span class="number">00</span> <span class="number">00</span></span><br><span class="line"><span class="number">00</span> <span class="number">00</span> <span class="number">00</span> <span class="number">00</span></span><br><span class="line"><span class="number">00</span> <span class="number">00</span> <span class="number">00</span> <span class="number">00</span></span><br><span class="line"><span class="number">00</span> <span class="number">00</span> <span class="number">00</span> <span class="number">00</span></span><br><span class="line"><span class="number">00</span> <span class="number">00</span> <span class="number">00</span> <span class="number">00</span></span><br><span class="line"><span class="number">00</span> <span class="number">00</span> <span class="number">00</span> <span class="number">00</span></span><br><span class="line">e8 <span class="number">2f</span> <span class="number">68</span> <span class="number">55</span></span><br></pre></td></tr></table></figure><blockquote><p>é—®é¢˜ï¼šæ±‡ç¼–ä»£ç ä½¿ç”¨å†…å­˜åœ°å€èµ‹å€¼æ—¶å¤±è´¥ã€‚</p><p>åŸå› ï¼šç”Ÿæˆçš„æœºå™¨ä»£ç å°†callå˜ä¸ºe8ï¼Œä»£è¡¨è·³è‡³ç›¸å¯¹åœ°å€å¤„ï¼Œripä¸åŒåˆ™ä¸åŒã€‚</p><p>é¿å¼€ä½¿ç”¨callè¿˜å¯ä»¥è¿™ä¹ˆå®ç°ï¼š</p><figure class="highlight mel"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">movl $0x804204e, %eax</span><br><span class="line">jmp *%eax</span><br></pre></td></tr></table></figure></blockquote><h2 id="Nitro"><a href="#Nitro" class="headerlink" title="Nitro"></a>Nitro</h2><p>åœ¨getbufnå‡½æ•°æ‰“æ–­ç‚¹ï¼Œæ¯æ¬¡æ‰§è¡ŒæŸ¥çœ‹ebpçš„å€¼ï¼Œå‘ç°æ˜¯å·®ä¸º0x18çš„ç­‰å·®æ•°åˆ—ã€‚</p><p><img src="/2021/computer-architecture-hitlabs/image-20210430213035638.png"></p><p>åŒæ—¶è®°ä¸‹testnçš„è¿”å›åœ°å€ï¼Œåœ¨æ±‡ç¼–ä»£ç ä¸­æœ€åè·³è½¬ï¼Œæ¢å¤åŸæ¥çš„ä½ç½®ã€‚</p><p>éªŒè¯ï¼šåœ¨testnçš„æ±‡ç¼–ä»£ç ä¸­æœ‰</p><p><img src="/2021/computer-architecture-hitlabs/image-20210505093440581.png"></p><p>ç”±äºtestnå’Œgetbufnçš„æ ˆæ˜¯è¿ç»­çš„ï¼Œä»getbufnè¿”å›åï¼ŒäºŒè€…æ²¡æœ‰å˜åŒ–ï¼Œespå’Œebpçš„å·®å€¼ç¡®å®ä¸º0x18ã€‚</p><p>å®Œæ•´æ±‡ç¼–ä»£ç ä¸ºï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">movl $0x25e93e48, %eax</span><br><span class="line">movl 0x18(%esp), %ebp</span><br><span class="line">pushl $0x08048d21</span><br><span class="line">ret</span><br></pre></td></tr></table></figure><p>åŒæ—¶åœ¨<code>push %eax</code>è¯­å¥å¤„æ‰“æ–­ç‚¹ï¼Œ%eaxä¸­å­˜ç€è¾“å…¥å­—ç¬¦ä¸²çš„å­˜å‚¨èµ·å§‹ä½ç½®ï¼š</p><p><img src="/2021/computer-architecture-hitlabs/image-20210505084134543.png"></p><table><thead><tr><th>1</th><th>2</th><th>3</th><th>4</th><th>5</th></tr></thead><tbody><tr><td>55 68 2e 08</td><td>55 68 2e 48</td><td>55 68 2d 98</td><td>55 68 2d c8</td><td>55 68 2e 18</td></tr></tbody></table><p><img src="/2021/computer-architecture-hitlabs/image-20210505095124477.png" alt="image-20210505095124477"></p><p>å­—ç¬¦ä¸²é•¿åº¦ä¸º0x208+4+4=524ä¸ªå­èŠ‚ï¼Œå‰é¢ç”¨90(nopæŒ‡ä»¤)å¡«å……ï¼Œæ¥ç€ä¸ºæ”»å‡»ä»£ç ï¼Œè¦†ç›–ebpï¼Œæœ€åæ˜¯è·³è½¬åœ°å€ï¼Œä»æ¯æ¬¡çš„è¾“å…¥å­—ç¬¦ä¸²èµ·å§‹ä½ç½®ä¸­é€‰å‡ºæœ€å¤§çš„ä½œä¸ºè·³è½¬åœ°å€ã€‚</p><p>ç”±æ­¤å¾—åˆ°å­—ç¬¦ä¸²ï¼š</p><figure class="highlight angelscript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">90</span> <span class="number">90</span> <span class="number">90</span> <span class="number">90</span> <span class="number">90</span> <span class="number">90</span> <span class="number">90</span> <span class="number">90</span> <span class="number">90</span> <span class="number">90</span> <span class="number">90</span> <span class="number">90</span> <span class="number">90</span> <span class="number">90</span> <span class="number">90</span> <span class="number">90</span> <span class="number">90</span> <span class="number">90</span> <span class="number">90</span> <span class="number">90</span></span><br><span class="line"><span class="number">90</span> <span class="number">90</span> <span class="number">90</span> <span class="number">90</span> <span class="number">90</span> <span class="number">90</span> <span class="number">90</span> <span class="number">90</span> <span class="number">90</span> <span class="number">90</span> <span class="number">90</span> <span class="number">90</span> <span class="number">90</span> <span class="number">90</span> <span class="number">90</span> <span class="number">90</span> <span class="number">90</span> <span class="number">90</span> <span class="number">90</span> <span class="number">90</span></span><br><span class="line"><span class="number">90</span> <span class="number">90</span> <span class="number">90</span> <span class="number">90</span> <span class="number">90</span> <span class="number">90</span> <span class="number">90</span> <span class="number">90</span> <span class="number">90</span> <span class="number">90</span> <span class="number">90</span> <span class="number">90</span> <span class="number">90</span> <span class="number">90</span> <span class="number">90</span> <span class="number">90</span> <span class="number">90</span> <span class="number">90</span> <span class="number">90</span> <span class="number">90</span></span><br><span class="line"><span class="number">90</span> <span class="number">90</span> <span class="number">90</span> <span class="number">90</span> <span class="number">90</span> <span class="number">90</span> <span class="number">90</span> <span class="number">90</span> <span class="number">90</span> <span class="number">90</span> <span class="number">90</span> <span class="number">90</span> <span class="number">90</span> <span class="number">90</span> <span class="number">90</span> <span class="number">90</span> <span class="number">90</span> <span class="number">90</span> <span class="number">90</span> <span class="number">90</span></span><br><span class="line"><span class="number">90</span> <span class="number">90</span> <span class="number">90</span> <span class="number">90</span> <span class="number">90</span> <span class="number">90</span> <span class="number">90</span> <span class="number">90</span> <span class="number">90</span> <span class="number">90</span> <span class="number">90</span> <span class="number">90</span> <span class="number">90</span> <span class="number">90</span> <span class="number">90</span> <span class="number">90</span> <span class="number">90</span> <span class="number">90</span> <span class="number">90</span> <span class="number">90</span></span><br><span class="line"><span class="number">90</span> <span class="number">90</span> <span class="number">90</span> <span class="number">90</span> <span class="number">90</span> <span class="number">90</span> <span class="number">90</span> <span class="number">90</span> <span class="number">90</span> <span class="number">90</span> <span class="number">90</span> <span class="number">90</span> <span class="number">90</span> <span class="number">90</span> <span class="number">90</span> <span class="number">90</span> <span class="number">90</span> <span class="number">90</span> <span class="number">90</span> <span class="number">90</span></span><br><span class="line"><span class="number">90</span> <span class="number">90</span> <span class="number">90</span> <span class="number">90</span> <span class="number">90</span> <span class="number">90</span> <span class="number">90</span> <span class="number">90</span> <span class="number">90</span> <span class="number">90</span> <span class="number">90</span> <span class="number">90</span> <span class="number">90</span> <span class="number">90</span> <span class="number">90</span> <span class="number">90</span> <span class="number">90</span> <span class="number">90</span> <span class="number">90</span> <span class="number">90</span></span><br><span class="line"><span class="number">90</span> <span class="number">90</span> <span class="number">90</span> <span class="number">90</span> <span class="number">90</span> <span class="number">90</span> <span class="number">90</span> <span class="number">90</span> <span class="number">90</span> <span class="number">90</span> <span class="number">90</span> <span class="number">90</span> <span class="number">90</span> <span class="number">90</span> <span class="number">90</span> <span class="number">90</span> <span class="number">90</span> <span class="number">90</span> <span class="number">90</span> <span class="number">90</span></span><br><span class="line"><span class="number">90</span> <span class="number">90</span> <span class="number">90</span> <span class="number">90</span> <span class="number">90</span> <span class="number">90</span> <span class="number">90</span> <span class="number">90</span> <span class="number">90</span> <span class="number">90</span> <span class="number">90</span> <span class="number">90</span> <span class="number">90</span> <span class="number">90</span> <span class="number">90</span> <span class="number">90</span> <span class="number">90</span> <span class="number">90</span> <span class="number">90</span> <span class="number">90</span></span><br><span class="line"><span class="number">90</span> <span class="number">90</span> <span class="number">90</span> <span class="number">90</span> <span class="number">90</span> <span class="number">90</span> <span class="number">90</span> <span class="number">90</span> <span class="number">90</span> <span class="number">90</span> <span class="number">90</span> <span class="number">90</span> <span class="number">90</span> <span class="number">90</span> <span class="number">90</span> <span class="number">90</span> <span class="number">90</span> <span class="number">90</span> <span class="number">90</span> <span class="number">90</span></span><br><span class="line"><span class="number">90</span> <span class="number">90</span> <span class="number">90</span> <span class="number">90</span> <span class="number">90</span> <span class="number">90</span> <span class="number">90</span> <span class="number">90</span> <span class="number">90</span> <span class="number">90</span> <span class="number">90</span> <span class="number">90</span> <span class="number">90</span> <span class="number">90</span> <span class="number">90</span> <span class="number">90</span> <span class="number">90</span> <span class="number">90</span> <span class="number">90</span> <span class="number">90</span></span><br><span class="line"><span class="number">90</span> <span class="number">90</span> <span class="number">90</span> <span class="number">90</span> <span class="number">90</span> <span class="number">90</span> <span class="number">90</span> <span class="number">90</span> <span class="number">90</span> <span class="number">90</span> <span class="number">90</span> <span class="number">90</span> <span class="number">90</span> <span class="number">90</span> <span class="number">90</span> <span class="number">90</span> <span class="number">90</span> <span class="number">90</span> <span class="number">90</span> <span class="number">90</span></span><br><span class="line"><span class="number">90</span> <span class="number">90</span> <span class="number">90</span> <span class="number">90</span> <span class="number">90</span> <span class="number">90</span> <span class="number">90</span> <span class="number">90</span> <span class="number">90</span> <span class="number">90</span> <span class="number">90</span> <span class="number">90</span> <span class="number">90</span> <span class="number">90</span> <span class="number">90</span> <span class="number">90</span> <span class="number">90</span> <span class="number">90</span> <span class="number">90</span> <span class="number">90</span></span><br><span class="line"><span class="number">90</span> <span class="number">90</span> <span class="number">90</span> <span class="number">90</span> <span class="number">90</span> <span class="number">90</span> <span class="number">90</span> <span class="number">90</span> <span class="number">90</span> <span class="number">90</span> <span class="number">90</span> <span class="number">90</span> <span class="number">90</span> <span class="number">90</span> <span class="number">90</span> <span class="number">90</span> <span class="number">90</span> <span class="number">90</span> <span class="number">90</span> <span class="number">90</span></span><br><span class="line"><span class="number">90</span> <span class="number">90</span> <span class="number">90</span> <span class="number">90</span> <span class="number">90</span> <span class="number">90</span> <span class="number">90</span> <span class="number">90</span> <span class="number">90</span> <span class="number">90</span> <span class="number">90</span> <span class="number">90</span> <span class="number">90</span> <span class="number">90</span> <span class="number">90</span> <span class="number">90</span> <span class="number">90</span> <span class="number">90</span> <span class="number">90</span> <span class="number">90</span></span><br><span class="line"><span class="number">90</span> <span class="number">90</span> <span class="number">90</span> <span class="number">90</span> <span class="number">90</span> <span class="number">90</span> <span class="number">90</span> <span class="number">90</span> <span class="number">90</span> <span class="number">90</span> <span class="number">90</span> <span class="number">90</span> <span class="number">90</span> <span class="number">90</span> <span class="number">90</span> <span class="number">90</span> <span class="number">90</span> <span class="number">90</span> <span class="number">90</span> <span class="number">90</span></span><br><span class="line"><span class="number">90</span> <span class="number">90</span> <span class="number">90</span> <span class="number">90</span> <span class="number">90</span> <span class="number">90</span> <span class="number">90</span> <span class="number">90</span> <span class="number">90</span> <span class="number">90</span> <span class="number">90</span> <span class="number">90</span> <span class="number">90</span> <span class="number">90</span> <span class="number">90</span> <span class="number">90</span> <span class="number">90</span> <span class="number">90</span> <span class="number">90</span> <span class="number">90</span></span><br><span class="line"><span class="number">90</span> <span class="number">90</span> <span class="number">90</span> <span class="number">90</span> <span class="number">90</span> <span class="number">90</span> <span class="number">90</span> <span class="number">90</span> <span class="number">90</span> <span class="number">90</span> <span class="number">90</span> <span class="number">90</span> <span class="number">90</span> <span class="number">90</span> <span class="number">90</span> <span class="number">90</span> <span class="number">90</span> <span class="number">90</span> <span class="number">90</span> <span class="number">90</span></span><br><span class="line"><span class="number">90</span> <span class="number">90</span> <span class="number">90</span> <span class="number">90</span> <span class="number">90</span> <span class="number">90</span> <span class="number">90</span> <span class="number">90</span> <span class="number">90</span> <span class="number">90</span> <span class="number">90</span> <span class="number">90</span> <span class="number">90</span> <span class="number">90</span> <span class="number">90</span> <span class="number">90</span> <span class="number">90</span> <span class="number">90</span> <span class="number">90</span> <span class="number">90</span></span><br><span class="line"><span class="number">90</span> <span class="number">90</span> <span class="number">90</span> <span class="number">90</span> <span class="number">90</span> <span class="number">90</span> <span class="number">90</span> <span class="number">90</span> <span class="number">90</span> <span class="number">90</span> <span class="number">90</span> <span class="number">90</span> <span class="number">90</span> <span class="number">90</span> <span class="number">90</span> <span class="number">90</span> <span class="number">90</span> <span class="number">90</span> <span class="number">90</span> <span class="number">90</span></span><br><span class="line"><span class="number">90</span> <span class="number">90</span> <span class="number">90</span> <span class="number">90</span> <span class="number">90</span> <span class="number">90</span> <span class="number">90</span> <span class="number">90</span> <span class="number">90</span> <span class="number">90</span> <span class="number">90</span> <span class="number">90</span> <span class="number">90</span> <span class="number">90</span> <span class="number">90</span> <span class="number">90</span> <span class="number">90</span> <span class="number">90</span> <span class="number">90</span> <span class="number">90</span></span><br><span class="line"><span class="number">90</span> <span class="number">90</span> <span class="number">90</span> <span class="number">90</span> <span class="number">90</span> <span class="number">90</span> <span class="number">90</span> <span class="number">90</span> <span class="number">90</span> <span class="number">90</span> <span class="number">90</span> <span class="number">90</span> <span class="number">90</span> <span class="number">90</span> <span class="number">90</span> <span class="number">90</span> <span class="number">90</span> <span class="number">90</span> <span class="number">90</span> <span class="number">90</span></span><br><span class="line"><span class="number">90</span> <span class="number">90</span> <span class="number">90</span> <span class="number">90</span> <span class="number">90</span> <span class="number">90</span> <span class="number">90</span> <span class="number">90</span> <span class="number">90</span> <span class="number">90</span> <span class="number">90</span> <span class="number">90</span> <span class="number">90</span> <span class="number">90</span> <span class="number">90</span> <span class="number">90</span> <span class="number">90</span> <span class="number">90</span> <span class="number">90</span> <span class="number">90</span></span><br><span class="line"><span class="number">90</span> <span class="number">90</span> <span class="number">90</span> <span class="number">90</span> <span class="number">90</span> <span class="number">90</span> <span class="number">90</span> <span class="number">90</span> <span class="number">90</span> <span class="number">90</span> <span class="number">90</span> <span class="number">90</span> <span class="number">90</span> <span class="number">90</span> <span class="number">90</span> <span class="number">90</span> <span class="number">90</span> <span class="number">90</span> <span class="number">90</span> <span class="number">90</span></span><br><span class="line"><span class="number">90</span> <span class="number">90</span> <span class="number">90</span> <span class="number">90</span> <span class="number">90</span> <span class="number">90</span> <span class="number">90</span> <span class="number">90</span> <span class="number">90</span> <span class="number">90</span> <span class="number">90</span> <span class="number">90</span> <span class="number">90</span> <span class="number">90</span> <span class="number">90</span> <span class="number">90</span> <span class="number">90</span> <span class="number">90</span> <span class="number">90</span> <span class="number">90</span></span><br><span class="line"><span class="number">90</span> <span class="number">90</span> <span class="number">90</span> <span class="number">90</span> <span class="number">90</span> <span class="number">90</span> <span class="number">90</span> <span class="number">90</span> <span class="number">90</span></span><br><span class="line">b8 <span class="number">48</span> <span class="number">3</span>e e9 <span class="number">25</span> <span class="number">8</span>b <span class="number">6</span>c <span class="number">24</span> <span class="number">18</span> <span class="number">68</span> <span class="number">21</span> <span class="number">8</span>d <span class="number">04</span> <span class="number">08</span> c3   # æ¶æ„ä»£ç </span><br><span class="line"><span class="number">48</span> <span class="number">2</span>e <span class="number">68</span> <span class="number">55</span>   # è·³è½¬åœ°å€å°ç«¯è¡¨ç¤º</span><br></pre></td></tr></table></figure><p>ä½†å‡ºç°äº†å¼‚å¸¸ï¼š</p><blockquote><p><img src="/2021/computer-architecture-hitlabs/image-20210505094839984.png" alt="image-20210505094839984"></p><p>åŸå› ï¼š</p><p>ç”±testnå¯çŸ¥ï¼Œè°ƒç”¨getbufnå‰åuniquevalçš„è¿”å›å€¼è¦ä¿æŒä¸å˜ï¼Œå¦åˆ™ä¼šå¼•å‘sabotagedå¼‚å¸¸ã€‚</p><p><img src="/2021/computer-architecture-hitlabs/image-20210505095543967.png" alt="image-20210505095543967"></p><p>æ¨¡æ‹ŸCä»£ç ä¸ºï¼š</p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">testn</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"> <span class="keyword">int</span> val;</span><br><span class="line"> <span class="keyword">volatile</span> <span class="keyword">int</span> local = uniqueval();</span><br><span class="line"> val = getbufn();</span><br><span class="line"> <span class="keyword">if</span> (local != uniqueval())</span><br><span class="line"> &#123;</span><br><span class="line">     <span class="built_in">printf</span>(<span class="string">&quot;Sabotaged!: the stack has been corrupted\n&quot;</span>);</span><br><span class="line"> &#125;</span><br><span class="line"> <span class="keyword">else</span> <span class="keyword">if</span> (val == cookie)</span><br><span class="line"> &#123;</span><br><span class="line">     <span class="built_in">printf</span>(<span class="string">&quot;KABOOM!: getbufn returned 0x%x\n&quot;</span>, val);</span><br><span class="line">     validate(<span class="number">4</span>);</span><br><span class="line"> &#125;</span><br><span class="line"> <span class="keyword">else</span></span><br><span class="line"> &#123;</span><br><span class="line">     <span class="built_in">printf</span>(<span class="string">&quot;Dud: getbufn returned 0x%x\n&quot;</span>, val);</span><br><span class="line"> &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>å¯çŸ¥æ˜¯å­—ç¬¦ä¸²å°†uniquevalå­˜åœ¨æ ˆä¸­çš„å€¼ç»™ç ´åäº†/å‡½æ•°è¡Œä¸ºè¢«æ”¹å˜ã€‚</p><p>æœªè§£å†³ã€‚</p></blockquote><p>æœªå®Œå¾…ç»­ã€‚</p><h1 id="å®éªŒäº”"><a href="#å®éªŒäº”" class="headerlink" title="å®éªŒäº”"></a>å®éªŒäº”</h1><p>æ‰§è¡Œ<code>./LinkAddress -u 1190200215 å–»ç¿çº¢</code>åï¼š</p><figure class="highlight angelscript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br></pre></td><td class="code"><pre><span class="line">env     <span class="number">0x7ffdf24654f0</span>  <span class="number">140728668148976</span></span><br><span class="line">env[<span class="number">0</span>]  *env    <span class="number">0x7ffdf2467648</span>  <span class="number">140728668157512</span></span><br><span class="line">XDG_SESSION_ID=<span class="number">8719</span></span><br><span class="line">env[<span class="number">1</span>]  *env    <span class="number">0x7ffdf246765c</span>  <span class="number">140728668157532</span></span><br><span class="line">HOSTNAME=iZbp1hzujytkmx0eqfmgsuZ</span><br><span class="line">env[<span class="number">2</span>]  *env    <span class="number">0x7ffdf246767d</span>  <span class="number">140728668157565</span></span><br><span class="line">TERM=xterm<span class="number">-256</span>color</span><br><span class="line">env[<span class="number">3</span>]  *env    <span class="number">0x7ffdf2467691</span>  <span class="number">140728668157585</span></span><br><span class="line">SHELL=/bin/bash</span><br><span class="line">env[<span class="number">4</span>]  *env    <span class="number">0x7ffdf24676a1</span>  <span class="number">140728668157601</span></span><br><span class="line">HISTSIZE=<span class="number">1000</span></span><br><span class="line">env[<span class="number">5</span>]  *env    <span class="number">0x7ffdf24676af</span>  <span class="number">140728668157615</span></span><br><span class="line">SSH_CLIENT=<span class="number">111.40</span><span class="number">.58</span><span class="number">.130</span> <span class="number">20088</span> <span class="number">22</span></span><br><span class="line">env[<span class="number">6</span>]  *env    <span class="number">0x7ffdf24676d1</span>  <span class="number">140728668157649</span></span><br><span class="line">OLDPWD=/root/code</span><br><span class="line">env[<span class="number">7</span>]  *env    <span class="number">0x7ffdf24676e3</span>  <span class="number">140728668157667</span></span><br><span class="line">SSH_TTY=/dev/pts/<span class="number">0</span></span><br><span class="line">env[<span class="number">8</span>]  *env    <span class="number">0x7ffdf24676f6</span>  <span class="number">140728668157686</span></span><br><span class="line">USER=root</span><br><span class="line">env[<span class="number">9</span>]  *env    <span class="number">0x7ffdf2467700</span>  <span class="number">140728668157696</span></span><br><span class="line">LD_LIBRARY_PATH=/usr/local/gcc<span class="number">-3.4</span><span class="number">.3</span>/lib:</span><br><span class="line">env[<span class="number">10</span>] *env    <span class="number">0x7ffdf246772a</span>  <span class="number">140728668157738</span></span><br><span class="line">LS_COLORS=rs=<span class="number">0</span>:di=<span class="number">38</span>;<span class="number">5</span>;<span class="number">27</span>:ln=<span class="number">38</span>;<span class="number">5</span>;<span class="number">51</span>:mh=<span class="number">44</span>;<span class="number">38</span>;<span class="number">5</span>;<span class="number">15</span>:pi=<span class="number">40</span>;<span class="number">38</span>;<span class="number">5</span>;<span class="number">11</span>:so=<span class="number">38</span>;<span class="number">5</span>;<span class="number">13</span>:<span class="keyword">do</span>=<span class="number">38</span>;<span class="number">5</span>;<span class="number">5</span>:bd=<span class="number">48</span>;<span class="number">5</span>;<span class="number">232</span>;<span class="number">38</span>;<span class="number">5</span>;<span class="number">11</span>:cd=<span class="number">48</span>;<span class="number">5</span>;<span class="number">232</span>;<span class="number">38</span>;<span class="number">5</span>;<span class="number">3</span>:<span class="keyword">or</span>=<span class="number">48</span>;<span class="number">5</span>;<span class="number">232</span>;<span class="number">38</span>;<span class="number">5</span>;<span class="number">9</span>:mi=<span class="number">05</span>;<span class="number">48</span>;<span class="number">5</span>;<span class="number">232</span>;<span class="number">38</span>;<span class="number">5</span>;<span class="number">15</span>:su=<span class="number">48</span>;<span class="number">5</span>;<span class="number">196</span>;<span class="number">38</span>;<span class="number">5</span>;<span class="number">15</span>:sg=<span class="number">48</span>;<span class="number">5</span>;<span class="number">11</span>;<span class="number">38</span>;<span class="number">5</span>;<span class="number">16</span>:ca=<span class="number">48</span>;<span class="number">5</span>;<span class="number">196</span>;<span class="number">38</span>;<span class="number">5</span>;<span class="number">226</span>:tw=<span class="number">48</span>;<span class="number">5</span>;<span class="number">10</span>;<span class="number">38</span>;<span class="number">5</span>;<span class="number">16</span>:ow=<span class="number">48</span>;<span class="number">5</span>;<span class="number">10</span>;<span class="number">38</span>;<span class="number">5</span>;<span class="number">21</span>:st=<span class="number">48</span>;<span class="number">5</span>;<span class="number">21</span>;<span class="number">38</span>;<span class="number">5</span>;<span class="number">15</span>:ex=<span class="number">38</span>;<span class="number">5</span>;<span class="number">34</span>:*.tar=<span class="number">38</span>;<span class="number">5</span>;<span class="number">9</span>:*.tgz=<span class="number">38</span>;<span class="number">5</span>;<span class="number">9</span>:*.arc=<span class="number">38</span>;<span class="number">5</span>;<span class="number">9</span>:*.arj=<span class="number">38</span>;<span class="number">5</span>;<span class="number">9</span>:*.taz=<span class="number">38</span>;<span class="number">5</span>;<span class="number">9</span>:*.lha=<span class="number">38</span>;<span class="number">5</span>;<span class="number">9</span>:*.lz4=<span class="number">38</span>;<span class="number">5</span>;<span class="number">9</span>:*.lzh=<span class="number">38</span>;<span class="number">5</span>;<span class="number">9</span>:*.lzma=<span class="number">38</span>;<span class="number">5</span>;<span class="number">9</span>:*.tlz=<span class="number">38</span>;<span class="number">5</span>;<span class="number">9</span>:*.txz=<span class="number">38</span>;<span class="number">5</span>;<span class="number">9</span>:*.tzo=<span class="number">38</span>;<span class="number">5</span>;<span class="number">9</span>:*.t7z=<span class="number">38</span>;<span class="number">5</span>;<span class="number">9</span>:*.zip=<span class="number">38</span>;<span class="number">5</span>;<span class="number">9</span>:*.z=<span class="number">38</span>;<span class="number">5</span>;<span class="number">9</span>:*.Z=<span class="number">38</span>;<span class="number">5</span>;<span class="number">9</span>:*.dz=<span class="number">38</span>;<span class="number">5</span>;<span class="number">9</span>:*.gz=<span class="number">38</span>;<span class="number">5</span>;<span class="number">9</span>:*.lrz=<span class="number">38</span>;<span class="number">5</span>;<span class="number">9</span>:*.lz=<span class="number">38</span>;<span class="number">5</span>;<span class="number">9</span>:*.lzo=<span class="number">38</span>;<span class="number">5</span>;<span class="number">9</span>:*.xz=<span class="number">38</span>;<span class="number">5</span>;<span class="number">9</span>:*.bz2=<span class="number">38</span>;<span class="number">5</span>;<span class="number">9</span>:*.bz=<span class="number">38</span>;<span class="number">5</span>;<span class="number">9</span>:*.tbz=<span class="number">38</span>;<span class="number">5</span>;<span class="number">9</span>:*.tbz2=<span class="number">38</span>;<span class="number">5</span>;<span class="number">9</span>:*.tz=<span class="number">38</span>;<span class="number">5</span>;<span class="number">9</span>:*.deb=<span class="number">38</span>;<span class="number">5</span>;<span class="number">9</span>:*.rpm=<span class="number">38</span>;<span class="number">5</span>;<span class="number">9</span>:*.jar=<span class="number">38</span>;<span class="number">5</span>;<span class="number">9</span>:*.war=<span class="number">38</span>;<span class="number">5</span>;<span class="number">9</span>:*.ear=<span class="number">38</span>;<span class="number">5</span>;<span class="number">9</span>:*.sar=<span class="number">38</span>;<span class="number">5</span>;<span class="number">9</span>:*.rar=<span class="number">38</span>;<span class="number">5</span>;<span class="number">9</span>:*.alz=<span class="number">38</span>;<span class="number">5</span>;<span class="number">9</span>:*.ace=<span class="number">38</span>;<span class="number">5</span>;<span class="number">9</span>:*.zoo=<span class="number">38</span>;<span class="number">5</span>;<span class="number">9</span>:*.cpio=<span class="number">38</span>;<span class="number">5</span>;<span class="number">9</span>:*<span class="number">.7</span>z=<span class="number">38</span>;<span class="number">5</span>;<span class="number">9</span>:*.rz=<span class="number">38</span>;<span class="number">5</span>;<span class="number">9</span>:*.cab=<span class="number">38</span>;<span class="number">5</span>;<span class="number">9</span>:*.jpg=<span class="number">38</span>;<span class="number">5</span>;<span class="number">13</span>:*.jpeg=<span class="number">38</span>;<span class="number">5</span>;<span class="number">13</span>:*.gif=<span class="number">38</span>;<span class="number">5</span>;<span class="number">13</span>:*.bmp=<span class="number">38</span>;<span class="number">5</span>;<span class="number">13</span>:*.pbm=<span class="number">38</span>;<span class="number">5</span>;<span class="number">13</span>:*.pgm=<span class="number">38</span>;<span class="number">5</span>;<span class="number">13</span>:*.ppm=<span class="number">38</span>;<span class="number">5</span>;<span class="number">13</span>:*.tga=<span class="number">38</span>;<span class="number">5</span>;<span class="number">13</span>:*.xbm=<span class="number">38</span>;<span class="number">5</span>;<span class="number">13</span>:*.xpm=<span class="number">38</span>;<span class="number">5</span>;<span class="number">13</span>:*.tif=<span class="number">38</span>;<span class="number">5</span>;<span class="number">13</span>:*.tiff=<span class="number">38</span>;<span class="number">5</span>;<span class="number">13</span>:*.png=<span class="number">38</span>;<span class="number">5</span>;<span class="number">13</span>:*.svg=<span class="number">38</span>;<span class="number">5</span>;<span class="number">13</span>:*.svgz=<span class="number">38</span>;<span class="number">5</span>;<span class="number">13</span>:*.mng=<span class="number">38</span>;<span class="number">5</span>;<span class="number">13</span>:*.pcx=<span class="number">38</span>;<span class="number">5</span>;<span class="number">13</span>:*.mov=<span class="number">38</span>;<span class="number">5</span>;<span class="number">13</span>:*.mpg=<span class="number">38</span>;<span class="number">5</span>;<span class="number">13</span>:*.mpeg=<span class="number">38</span>;<span class="number">5</span>;<span class="number">13</span>:*.m2v=<span class="number">38</span>;<span class="number">5</span>;<span class="number">13</span>:*.mkv=<span class="number">38</span>;<span class="number">5</span>;<span class="number">13</span>:*.webm=<span class="number">38</span>;<span class="number">5</span>;<span class="number">13</span>:*.ogm=<span class="number">38</span>;<span class="number">5</span>;<span class="number">13</span>:*.mp4=<span class="number">38</span>;<span class="number">5</span>;<span class="number">13</span>:*.m4v=<span class="number">38</span>;<span class="number">5</span>;<span class="number">13</span>:*.mp4v=<span class="number">38</span>;<span class="number">5</span>;<span class="number">13</span>:*.vob=<span class="number">38</span>;<span class="number">5</span>;<span class="number">13</span>:*.qt=<span class="number">38</span>;<span class="number">5</span>;<span class="number">13</span>:*.nuv=<span class="number">38</span>;<span class="number">5</span>;<span class="number">13</span>:*.wmv=<span class="number">38</span>;<span class="number">5</span>;<span class="number">13</span>:*.asf=<span class="number">38</span>;<span class="number">5</span>;<span class="number">13</span>:*.rm=<span class="number">38</span>;<span class="number">5</span>;<span class="number">13</span>:*.rmvb=<span class="number">38</span>;<span class="number">5</span>;<span class="number">13</span>:*.flc=<span class="number">38</span>;<span class="number">5</span>;<span class="number">13</span>:*.avi=<span class="number">38</span>;<span class="number">5</span>;<span class="number">13</span>:*.fli=<span class="number">38</span>;<span class="number">5</span>;<span class="number">13</span>:*.flv=<span class="number">38</span>;<span class="number">5</span>;<span class="number">13</span>:*.gl=<span class="number">38</span>;<span class="number">5</span>;<span class="number">13</span>:*.dl=<span class="number">38</span>;<span class="number">5</span>;<span class="number">13</span>:*.xcf=<span class="number">38</span>;<span class="number">5</span>;<span class="number">13</span>:*.xwd=<span class="number">38</span>;<span class="number">5</span>;<span class="number">13</span>:*.yuv=<span class="number">38</span>;<span class="number">5</span>;<span class="number">13</span>:*.cgm=<span class="number">38</span>;<span class="number">5</span>;<span class="number">13</span>:*.emf=<span class="number">38</span>;<span class="number">5</span>;<span class="number">13</span>:*.axv=<span class="number">38</span>;<span class="number">5</span>;<span class="number">13</span>:*.anx=<span class="number">38</span>;<span class="number">5</span>;<span class="number">13</span>:*.ogv=<span class="number">38</span>;<span class="number">5</span>;<span class="number">13</span>:*.ogx=<span class="number">38</span>;<span class="number">5</span>;<span class="number">13</span>:*.aac=<span class="number">38</span>;<span class="number">5</span>;<span class="number">45</span>:*.au=<span class="number">38</span>;<span class="number">5</span>;<span class="number">45</span>:*.flac=<span class="number">38</span>;<span class="number">5</span>;<span class="number">45</span>:*.mid=<span class="number">38</span>;<span class="number">5</span>;<span class="number">45</span>:*.midi=<span class="number">38</span>;<span class="number">5</span>;<span class="number">45</span>:*.mka=<span class="number">38</span>;<span class="number">5</span>;<span class="number">45</span>:*.mp3=<span class="number">38</span>;<span class="number">5</span>;<span class="number">45</span>:*.mpc=<span class="number">38</span>;<span class="number">5</span>;<span class="number">45</span>:*.ogg=<span class="number">38</span>;<span class="number">5</span>;<span class="number">45</span>:*.ra=<span class="number">38</span>;<span class="number">5</span>;<span class="number">45</span>:*.wav=<span class="number">38</span>;<span class="number">5</span>;<span class="number">45</span>:*.axa=<span class="number">38</span>;<span class="number">5</span>;<span class="number">45</span>:*.oga=<span class="number">38</span>;<span class="number">5</span>;<span class="number">45</span>:*.spx=<span class="number">38</span>;<span class="number">5</span>;<span class="number">45</span>:*.xspf=<span class="number">38</span>;<span class="number">5</span>;<span class="number">45</span>:</span><br><span class="line">env[<span class="number">11</span>] *env    <span class="number">0x7ffdf2467de2</span>  <span class="number">140728668159458</span></span><br><span class="line">MAVEN_HOME=/opt/maven/apache-maven<span class="number">-3.6</span><span class="number">.3</span></span><br><span class="line">env[<span class="number">12</span>] *env    <span class="number">0x7ffdf2467e0b</span>  <span class="number">140728668159499</span></span><br><span class="line">MAIL=/var/spool/mail/root</span><br><span class="line">env[<span class="number">13</span>] *env    <span class="number">0x7ffdf2467e25</span>  <span class="number">140728668159525</span></span><br><span class="line">PATH=/opt/maven/apache-maven<span class="number">-3.6</span><span class="number">.3</span>/bin:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/usr/local/java/jdk<span class="number">-16</span>/bin:/root/.local/bin:/root/bin:/root/.local/bin</span><br><span class="line">env[<span class="number">14</span>] *env    <span class="number">0x7ffdf2467ec5</span>  <span class="number">140728668159685</span></span><br><span class="line">PWD=/root/code/lab5</span><br><span class="line">env[<span class="number">15</span>] *env    <span class="number">0x7ffdf2467ed9</span>  <span class="number">140728668159705</span></span><br><span class="line">JAVA_HOME=/usr/local/java/jdk<span class="number">-16</span></span><br><span class="line">env[<span class="number">16</span>] *env    <span class="number">0x7ffdf2467efa</span>  <span class="number">140728668159738</span></span><br><span class="line">LANG=en_US.UTF<span class="number">-8</span></span><br><span class="line">env[<span class="number">17</span>] *env    <span class="number">0x7ffdf2467f0b</span>  <span class="number">140728668159755</span></span><br><span class="line">HISTCONTROL=ignoredups</span><br><span class="line">env[<span class="number">18</span>] *env    <span class="number">0x7ffdf2467f22</span>  <span class="number">140728668159778</span></span><br><span class="line">SHLVL=<span class="number">1</span></span><br><span class="line">env[<span class="number">19</span>] *env    <span class="number">0x7ffdf2467f2a</span>  <span class="number">140728668159786</span></span><br><span class="line">HOME=/root</span><br><span class="line">env[<span class="number">20</span>] *env    <span class="number">0x7ffdf2467f35</span>  <span class="number">140728668159797</span></span><br><span class="line">LOGNAME=root</span><br><span class="line">env[<span class="number">21</span>] *env    <span class="number">0x7ffdf2467f42</span>  <span class="number">140728668159810</span></span><br><span class="line">CLASSPATH=/usr/local/java/jdk<span class="number">-16</span>/lib</span><br><span class="line">env[<span class="number">22</span>] *env    <span class="number">0x7ffdf2467f67</span>  <span class="number">140728668159847</span></span><br><span class="line">SSH_CONNECTION=<span class="number">111.40</span><span class="number">.58</span><span class="number">.130</span> <span class="number">20088</span> <span class="number">172.25</span><span class="number">.37</span><span class="number">.193</span> <span class="number">22</span></span><br><span class="line">env[<span class="number">23</span>] *env    <span class="number">0x7ffdf2467f9b</span>  <span class="number">140728668159899</span></span><br><span class="line">LESSOPEN=||/usr/bin/lesspipe.sh %s</span><br><span class="line">env[<span class="number">24</span>] *env    <span class="number">0x7ffdf2467fbe</span>  <span class="number">140728668159934</span></span><br><span class="line">XDG_RUNTIME_DIR=/run/user/<span class="number">0</span></span><br><span class="line">env[<span class="number">25</span>] *env    <span class="number">0x7ffdf2467fda</span>  <span class="number">140728668159962</span></span><br><span class="line">_=./LinkAddress</span><br><span class="line">big <span class="built_in">array</span>       <span class="number">0x40602140</span>      <span class="number">1080041792</span></span><br><span class="line">huge <span class="built_in">array</span>      <span class="number">0x602140</span>        <span class="number">6299968</span></span><br><span class="line">global  <span class="number">0x602080</span>        <span class="number">6299776</span></span><br><span class="line">gint0   <span class="number">0x60212c</span>        <span class="number">6299948</span></span><br><span class="line">glong   <span class="number">0x602088</span>        <span class="number">6299784</span></span><br><span class="line">cstr    <span class="number">0x6020a0</span>        <span class="number">6299808</span></span><br><span class="line">pstr    <span class="number">0x400d80</span>        <span class="number">4197760</span></span><br><span class="line">gc      <span class="number">0x400dac</span>        <span class="number">4197804</span></span><br><span class="line">cc      <span class="number">0x400dc0</span>        <span class="number">4197824</span></span><br><span class="line">local <span class="built_in">int</span> <span class="number">0</span>     <span class="number">0x7ffdf246539c</span>  <span class="number">140728668148636</span></span><br><span class="line">local <span class="built_in">int</span> <span class="number">1</span>     <span class="number">0x7ffdf2465398</span>  <span class="number">140728668148632</span></span><br><span class="line">local static <span class="built_in">int</span> <span class="number">0</span>      <span class="number">0x602130</span>        <span class="number">6299952</span></span><br><span class="line">local static <span class="built_in">int</span> <span class="number">1</span>      <span class="number">0x602110</span>        <span class="number">6299920</span></span><br><span class="line">local astr      <span class="number">0x7ffdf2464fa0</span>  <span class="number">140728668147616</span></span><br><span class="line">local pstr      <span class="number">0x400e30</span>        <span class="number">4197936</span></span><br><span class="line">argc    <span class="number">0x7ffdf2464f9c</span>  <span class="number">140728668147612</span></span><br><span class="line">argv    <span class="number">0x7ffdf24654c8</span>  <span class="number">140728668148936</span></span><br><span class="line">argv[<span class="number">0</span>]     <span class="number">7f</span>fdf2467622</span><br><span class="line">argv[<span class="number">1</span>]     <span class="number">7f</span>fdf2467630</span><br><span class="line">argv[<span class="number">2</span>]     <span class="number">7f</span>fdf2467633</span><br><span class="line">argv[<span class="number">3</span>]     <span class="number">7f</span>fdf246763e</span><br><span class="line">argv[<span class="number">0</span>] <span class="number">0x7ffdf2467622</span>  <span class="number">140728668157474</span></span><br><span class="line">./LinkAddress</span><br><span class="line">argv[<span class="number">1</span>] <span class="number">0x7ffdf2467630</span>  <span class="number">140728668157488</span></span><br><span class="line">-u</span><br><span class="line">argv[<span class="number">2</span>] <span class="number">0x7ffdf2467633</span>  <span class="number">140728668157491</span></span><br><span class="line"><span class="number">1190200215</span></span><br><span class="line">argv[<span class="number">3</span>] <span class="number">0x7ffdf246763e</span>  <span class="number">140728668157502</span></span><br><span class="line">å–»ç¿çº¢</span><br><span class="line">p1      <span class="number">0x7f57a5865010</span>  <span class="number">140014415925264</span></span><br><span class="line">p2      <span class="number">0x7f57b5e26010</span>  <span class="number">140014690394128</span></span><br><span class="line">p3      <span class="number">0x7f57b5e05010</span>  <span class="number">140014690258960</span></span><br><span class="line">p4      <span class="number">0x7f5765864010</span>  <span class="number">140013342179344</span></span><br><span class="line">p5      (nil)   <span class="number">0</span></span><br><span class="line">show_pointer    <span class="number">0x400738</span>        <span class="number">4196152</span></span><br><span class="line">useless <span class="number">0x40072d</span>        <span class="number">4196141</span></span><br><span class="line">main    <span class="number">0x400768</span>        <span class="number">4196200</span></span><br><span class="line">exit    <span class="number">0x400630</span>        <span class="number">4195888</span></span><br><span class="line">printf  <span class="number">0x4005f0</span>        <span class="number">4195824</span></span><br><span class="line">malloc  <span class="number">0x400620</span>        <span class="number">4195872</span></span><br><span class="line">free    <span class="number">0x4005c0</span>        <span class="number">4195776</span></span><br><span class="line">strcpy  <span class="number">0x4005d0</span>        <span class="number">4195792</span></span><br></pre></td></tr></table></figure><h2 id="phase1"><a href="#phase1" class="headerlink" title="phase1"></a>phase1</h2><p>æŸ¥çœ‹phase1.oçš„æ±‡ç¼–ä»£ç ï¼š</p><p><img src="/2021/computer-architecture-hitlabs/image-20210519215620823.png" alt="image-20210519215620823"></p><p>å¾—å‡½æ•°ä¼šå°†è¦æ‰“å°çš„å†…å®¹æ”¾å…¥eaxä¸­ï¼Œè¿™ä¸ªåœ°å€éœ€è¦é‡å®šä½åˆ°<code>.data+0x53</code>çš„ä½ç½®ã€‚</p><p>é€šè¿‡æŸ¥çœ‹phase.oçš„elfå¯å¾—<code>.data</code>çš„åç§»ä¸º0x60ï¼š</p><p><img src="/2021/computer-architecture-hitlabs/image-20210519221731703.png" alt="image-20210519221731703"></p><p>å°†<code>0x60+0x53=0xB3</code>ä½ç½®å¼€å§‹çš„å†…å®¹æ”¹ä¸ºå­¦å·ï¼Œæœ€åè¦ç”¨<code>00</code>ç»“æŸï¼š</p><p><img src="/2021/computer-architecture-hitlabs/image-20210519222709855.png" alt="image-20210519222709855"></p><p>æˆåŠŸï¼š</p><p><img src="/2021/computer-architecture-hitlabs/image-20210519222612164.png" alt="image-20210519222612164"></p><h2 id="phase2"><a href="#phase2" class="headerlink" title="phase2"></a>phase2</h2><p>æœ‰ä¸‰ç§å¯é€‰æ–¹æ¡ˆï¼š</p><ol><li>åœ¨do_phaseä¸­è°ƒç”¨putså‡½æ•°ã€‚<br>ä½†å› ä¸ºputså‡½æ•°æ˜¯å¤–éƒ¨ç¬¦å·ï¼Œéœ€è¦æ–°å»ºä¸€ä¸ªé‡å®šä½é¡¹ï¼Œè¿èƒŒäº†åªèƒ½ä¿®æ”¹.textèŠ‚çš„å®éªŒè¦æ±‚ï¼Œæ•…èˆå¼ƒã€‚</li><li>å‹å…¥å­¦å·å­—ç¬¦ä¸²ï¼Œå‹å…¥ä¸²åœ°å€ä½œä¸ºå‚æ•°è°ƒç”¨åŒ…å«putsçš„é‚£ä¸ªå‡½æ•°ã€‚<br>å¦‚ä¸‹ã€‚</li><li>ç›´æ¥jmpåˆ°putså‰pushå‚æ•°çš„è¯­å¥ã€‚</li></ol><p>phase2.oçš„æ±‡ç¼–ä»£ç ä¸ºï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br></pre></td><td class="code"><pre><span class="line">phase2.o:     file format elf32-i386</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">Disassembly of section .text:</span><br><span class="line"></span><br><span class="line">00000000 &lt;mFwieYqD&gt;:</span><br><span class="line">   0:    f3 0f 1e fb              endbr32 </span><br><span class="line">   4:    55                       push   %ebp</span><br><span class="line">   5:    89 e5                    mov    %esp,%ebp</span><br><span class="line">   7:    83 ec 08                 sub    $0x8,%esp</span><br><span class="line">   a:    83 ec 08                 sub    $0x8,%esp</span><br><span class="line">   d:    68 00 00 00 00           push   $0x0</span><br><span class="line">  12:    ff 75 08                 pushl  0x8(%ebp)</span><br><span class="line">  15:    e8 fc ff ff ff           call   16 &lt;mFwieYqD+0x16&gt;</span><br><span class="line">  1a:    83 c4 10                 add    $0x10,%esp</span><br><span class="line">  1d:    85 c0                    test   %eax,%eax</span><br><span class="line">  1f:    75 10                    jne    31 &lt;mFwieYqD+0x31&gt;</span><br><span class="line">  21:    83 ec 0c                 sub    $0xc,%esp</span><br><span class="line">  24:    ff 75 08                 pushl  0x8(%ebp)</span><br><span class="line">  27:    e8 fc ff ff ff           call   28 &lt;mFwieYqD+0x28&gt;</span><br><span class="line">  2c:    83 c4 10                 add    $0x10,%esp</span><br><span class="line">  2f:    eb 01                    jmp    32 &lt;mFwieYqD+0x32&gt;</span><br><span class="line">  31:    90                       nop</span><br><span class="line">  32:    c9                       leave  </span><br><span class="line">  33:    c3                       ret    </span><br><span class="line"></span><br><span class="line">00000034 &lt;do_phase&gt;:</span><br><span class="line">  34:    f3 0f 1e fb              endbr32 </span><br><span class="line">  38:    55                       push   %ebp</span><br><span class="line">  39:    89 e5                    mov    %esp,%ebp</span><br><span class="line">  3b:    90                       nop</span><br><span class="line">  3c:    90                       nop</span><br><span class="line">  3d:    90                       nop</span><br><span class="line">  3e:    90                       nop</span><br><span class="line">  3f:    90                       nop</span><br><span class="line">  40:    90                       nop</span><br><span class="line">  41:    90                       nop</span><br><span class="line">  42:    90                       nop</span><br><span class="line">  43:    90                       nop</span><br><span class="line">  44:    90                       nop</span><br><span class="line">  45:    90                       nop</span><br><span class="line">  46:    90                       nop</span><br><span class="line">  47:    90                       nop</span><br><span class="line">  48:    90                       nop</span><br><span class="line">  49:    90                       nop</span><br><span class="line">  4a:    90                       nop</span><br><span class="line">  4b:    90                       nop</span><br><span class="line">  4c:    90                       nop</span><br><span class="line">  4d:    90                       nop</span><br><span class="line">  4e:    90                       nop</span><br><span class="line">  4f:    90                       nop</span><br><span class="line">  50:    90                       nop</span><br><span class="line">  51:    90                       nop</span><br><span class="line">  52:    90                       nop</span><br><span class="line">  53:    90                       nop</span><br><span class="line">  54:    90                       nop</span><br><span class="line">  55:    90                       nop</span><br></pre></td></tr></table></figure><p>åˆ†æå¯å¾—ï¼Œéœ€è¦åœ¨do_phaseå‡½æ•°ä¸­åˆ›å»ºä¸€ä¸ªå­¦å·å­—ç¬¦ä¸²ï¼Œç„¶åå°†è¯¥å­—ç¬¦ä¸²çš„åœ°å€ä½œä¸ºå‚æ•°å‹æ ˆï¼Œè°ƒç”¨å‡½æ•°mFwieYqDã€‚</p><p>ç¼–å†™æ±‡ç¼–ä»£ç ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">sub $0xc, %esp</span><br><span class="line">movl $0x30393131, -0xc(%ebp)</span><br><span class="line">movl $0x32303032, -0x8(%ebp)</span><br><span class="line">movl $0x00003531, -0x4(%ebp)</span><br><span class="line">lea -0xc(%ebp), %eax</span><br><span class="line">push %eax</span><br><span class="line">call 0x00   # å…ˆéšä¾¿å¡«ä¸€ä¸ªå€¼</span><br></pre></td></tr></table></figure><p>æ±‡ç¼–æˆæœºå™¨ç åä¿®æ”¹phase2.oï¼š</p><p><img src="/2021/computer-architecture-hitlabs/image-20210525211821409.png" alt="image-20210525211821409"></p><p>æˆåŠŸå‹å…¥å­¦å·å­—ç¬¦ä¸²å‚æ•°ï¼š</p><p><img src="/2021/computer-architecture-hitlabs/image-20210525204141593.png" alt="image-20210525204141593"></p><p>æ¥ç€æ ¹æ®å‡½æ•°mFwieYqDçš„åç§»é‡æ¥ç¡®å®šcallçš„åç§»é‡ï¼Œè¯»elfå¾—mFwieYqDåœ¨.textèŠ‚çš„0åç§»å¤„ï¼š</p><p><img src="/2021/computer-architecture-hitlabs/image-20210525204701370.png" alt="image-20210525204701370"></p><p>ä¸‹ä¸€æ¡æŒ‡ä»¤çš„åœ°å€ä¸º0x5cï¼Œæ•…å¾—callåé¢çš„åç§»é‡ä¸º0x0-0x5c = -0x5c = ffffffa4ï¼Œå°†å®ƒå¡«å…¥phase2.oçš„callåé¢ï¼š</p><p><img src="/2021/computer-architecture-hitlabs/image-20210525212256082.png" alt="image-20210525212256082"></p><p>æˆåŠŸï¼š</p><p><img src="/2021/computer-architecture-hitlabs/image-20210525212737634.png" alt="image-20210525212737634"></p><blockquote><p>é”™è¯¯ï¼šoperand type mismatch for â€˜pushâ€™</p><p>åŸå› ï¼šæ²¡æœ‰åŠ ä¸Š<code>-m32 -c</code>å‚æ•°ï¼Œåœ¨64-bit modeä¸‹é¢ï¼Œpushå’Œæ ˆè¿›è¡Œäº¤äº’çš„æ—¶å€™ï¼Œä¸èƒ½ä½¿ç”¨%eaxï¼Œè€Œè¦ä½¿ç”¨%raxã€‚</p></blockquote><h2 id="phase3"><a href="#phase3" class="headerlink" title="phase3"></a>phase3</h2><p>phase3çš„æ±‡ç¼–ä»£ç ä¸ºï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></td><td class="code"><pre><span class="line">Disassembly of section .text:</span><br><span class="line"></span><br><span class="line">00000000 &lt;do_phase&gt;:</span><br><span class="line">   0:    f3 0f 1e fb              endbr32 </span><br><span class="line">   4:    55                       push   %ebp</span><br><span class="line">   5:    89 e5                    mov    %esp,%ebp</span><br><span class="line">   7:    83 ec 28                 sub    $0x28,%esp</span><br><span class="line">   a:    65 a1 14 00 00 00        mov    %gs:0x14,%eax</span><br><span class="line">  10:    89 45 f4                 mov    %eax,-0xc(%ebp)</span><br><span class="line">  13:    31 c0                    xor    %eax,%eax</span><br><span class="line">  15:    c7 45 e9 69 76 74 67     movl   $0x67747669,-0x17(%ebp)</span><br><span class="line">  1c:    c7 45 ed 6c 79 63 62     movl   $0x6263796vimc,-0x13(%ebp)</span><br><span class="line">  23:    66 c7 45 f1 61 7a        movw   $0x7a61,-0xf(%ebp)</span><br><span class="line">  29:    c6 45 f3 00              movb   $0x0,-0xd(%ebp)</span><br><span class="line">  2d:    c7 45 e4 00 00 00 00     movl   $0x0,-0x1c(%ebp)</span><br><span class="line">  34:    eb 28                    jmp    5e &lt;do_phase+0x5e&gt;</span><br><span class="line">  36:    8d 55 e9                 lea    -0x17(%ebp),%edx</span><br><span class="line">  39:    8b 45 e4                 mov    -0x1c(%ebp),%eax</span><br><span class="line">  3c:    01 d0                    add    %edx,%eax</span><br><span class="line">  3e:    0f b6 00                 movzbl (%eax),%eax</span><br><span class="line">  41:    0f b6 c0                 movzbl %al,%eax</span><br><span class="line">  44:    0f b6 80 00 00 00 00     movzbl 0x0(%eax),%eax</span><br><span class="line">truetruetrue47: R_386_32    orEYJGWrtE</span><br><span class="line">  4b:    0f be c0                 movsbl %al,%eax</span><br><span class="line">  4e:    83 ec 0c                 sub    $0xc,%esp</span><br><span class="line">  51:    50                       push   %eax</span><br><span class="line">  52:    e8 fc ff ff ff           call   53 &lt;do_phase+0x53&gt;</span><br><span class="line">truetruetrue53: R_386_PC32    putchar</span><br><span class="line">  57:    83 c4 10                 add    $0x10,%esp</span><br><span class="line">  5a:    83 45 e4 01              addl   $0x1,-0x1c(%ebp)</span><br><span class="line">  5e:    8b 45 e4                 mov    -0x1c(%ebp),%eax</span><br><span class="line">  61:    83 f8 09                 cmp    $0x9,%eax</span><br><span class="line">  64:    76 d0                    jbe    36 &lt;do_phase+0x36&gt;</span><br><span class="line">  66:    83 ec 0c                 sub    $0xc,%esp</span><br><span class="line">  69:    6a 0a                    push   $0xa</span><br><span class="line">  6b:    e8 fc ff ff ff           call   6c &lt;do_phase+0x6c&gt;</span><br><span class="line">truetruetrue6c: R_386_PC32    putchar</span><br><span class="line">  70:    83 c4 10                 add    $0x10,%esp</span><br><span class="line">  73:    90                       nop</span><br><span class="line">  74:    8b 45 f4                 mov    -0xc(%ebp),%eax</span><br><span class="line">  77:    65 33 05 14 00 00 00     xor    %gs:0x14,%eax</span><br><span class="line">  7e:    74 05                    je     85 &lt;do_phase+0x85&gt;</span><br><span class="line">  80:    e8 fc ff ff ff           call   81 &lt;do_phase+0x81&gt;</span><br><span class="line">truetruetrue81: R_386_PC32    __stack_chk_fail</span><br><span class="line">  85:    c9                       leave  </span><br><span class="line">  86:    c3                       ret </span><br></pre></td></tr></table></figure><p>å¯å¾—å¤§æ¦‚æ¡†æ¶ä¸ºï¼š</p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">char</span> orEYJGWrtE[<span class="number">256</span>];</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">do_phase</span><span class="params">()</span></span>&#123;</span><br><span class="line">        <span class="keyword">const</span> <span class="keyword">char</span> cookie[] = PHASE3_COOKIE;</span><br><span class="line">        <span class="keyword">for</span>( <span class="keyword">int</span> i=<span class="number">0</span>; i&lt;<span class="keyword">sizeof</span>(cookie)<span class="number">-1</span>; i++ )</span><br><span class="line">                <span class="built_in">printf</span>( <span class="string">&quot;%c&quot;</span>, orEYJGWrtE[ (<span class="keyword">unsigned</span> <span class="keyword">char</span>)(cookie[i]) ] );</span><br><span class="line">        <span class="built_in">printf</span>( <span class="string">&quot;\n&quot;</span> );</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æ¨¡å—å…¥å£å‡½æ•°do_phase()ä¾æ¬¡éå†ä¸€ä¸ªCOOKIEå­—ç¬¦ä¸²ï¼ˆç”±ä¸€ç»„äº’ä¸ç›¸åŒçš„è‹±æ–‡å­—æ¯ç»„æˆï¼Œä¸”æ€»é•¿åº¦ä¸å­¦å·å­—ç¬¦ä¸²ç›¸åŒï¼‰ä¸­çš„æ¯ä¸€å­—ç¬¦ï¼Œå¹¶é€šè¿‡ä¸€ä¸ªæ˜ å°„æ•°ç»„å°†è¯¥å­—ç¬¦çš„ä¸åŒå¯èƒ½ASCIIç¼–ç å–å€¼æ˜ å°„ä¸ºè¾“å‡ºå­—ç¬¦ã€‚  </p><p>åˆ†ææ±‡ç¼–ä»£ç ä¸­çš„movæŒ‡ä»¤å¯çŸ¥å‹å…¥çš„å­—ç¬¦æ•°ç»„å†…å®¹ä¸ºivtglycbazï¼Œå¯¹åº”çš„unsigned charä¸º69 76 74 67 6c 79 63 62 61 7aï¼ˆåå…­è¿›åˆ¶ï¼‰:</p><p><img src="/2021/computer-architecture-hitlabs/image-20210526145900036.png" alt="image-20210526145900036"></p><p>åœ¨phase3_patch.cæ–‡ä»¶ä¸­æ·»åŠ orEYJGWrtEå­—ç¬¦æ•°ç»„çš„å¼ºå®šä¹‰ä»£æ›¿phase3ä¸­çš„å¼±å®šä¹‰ï¼ŒæŒ‰ç…§å¯¹åº”çš„ä½ç½®å¡«å…¥å­¦å·ï¼Œå¦‚orEYJGWrtE[0x69 = 105] = â€˜1â€™:</p><p><img src="/2021/computer-architecture-hitlabs/image-20210526154957125.png" alt="image-20210526154957125"></p><p> æˆåŠŸï¼š</p><p><img src="/2021/computer-architecture-hitlabs/image-20210526160458435.png" alt="image-20210526160458435"></p><h2 id="phase4"><a href="#phase4" class="headerlink" title="phase4"></a>phase4</h2><p>phase4ä»£ç æ¡†æ¶ä¸ºï¼š</p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">do_phase</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">        <span class="keyword">const</span> <span class="keyword">char</span> cookie[] = PHASE4_COOKIE;</span><br><span class="line">        <span class="keyword">char</span> c;</span><br><span class="line">        <span class="keyword">for</span> ( <span class="keyword">int</span> i = <span class="number">0</span>; i &lt; <span class="keyword">sizeof</span>(cookie)<span class="number">-1</span>; i++ ) </span><br><span class="line">       &#123;</span><br><span class="line">                c = cookie[i];</span><br><span class="line">                <span class="keyword">switch</span> (c) </span><br><span class="line">                &#123;</span><br><span class="line">                      <span class="comment">// æ˜ å°„å…³ç³»</span></span><br><span class="line">                      <span class="keyword">case</span> â€˜Aâ€™: &#123; c = <span class="number">48</span>; <span class="keyword">break</span>; &#125; </span><br><span class="line">                      <span class="keyword">case</span> â€˜Bâ€™: &#123; c = <span class="number">121</span>; <span class="keyword">break</span>; &#125;</span><br><span class="line">                        â€¦</span><br><span class="line">                      <span class="keyword">case</span> â€˜Zâ€™: &#123; c = <span class="number">93</span>; <span class="keyword">break</span>; &#125;</span><br><span class="line">                &#125;</span><br><span class="line">               <span class="built_in">printf</span>(<span class="string">&quot;%c&quot;</span>, c);</span><br><span class="line">        &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æ¨¡å—å…¥å£å‡½æ•°do_phase()ä¾æ¬¡éå†ä¸€ä¸ªCOOKIEå­—ç¬¦ä¸²ï¼ˆç”±ä¸€ç»„äº’ä¸ç›¸åŒçš„å¤§å†™è‹±æ–‡å­—æ¯ç»„æˆï¼Œä¸”æ€»é•¿åº¦ä¸å­¦å·å­—ç¬¦ä¸²ç›¸åŒï¼‰ä¸­çš„æ¯ä¸€å­—ç¬¦ï¼Œå¹¶ä½¿ç”¨ä¸€ä¸ªswitchè¯­å¥å°†è¯¥å­—ç¬¦çš„ä¸åŒå¯èƒ½ASCIIç¼–ç å–å€¼æ˜ å°„ä¸ºè¾“å‡ºå­—ç¬¦ã€‚  </p><p>ä¸phase3ç±»ä¼¼ï¼Œå¾—åˆ°é¡ºåºå­—ç¬¦æ•°ç»„ä¸ºYJAFXRBDQWã€‚</p><p><img src="/2021/computer-architecture-hitlabs/image-20210526164951173.png" alt="image-20210526164951173"></p><p>æ±‡ç¼–ä»£ç ä¸ºï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br></pre></td><td class="code"><pre><span class="line">Disassembly of section .text:</span><br><span class="line"></span><br><span class="line">00000000 &lt;do_phase&gt;:</span><br><span class="line">   0:    f3 0f 1e fb              endbr32 </span><br><span class="line">   4:    55                       push   %ebp</span><br><span class="line">   5:    89 e5                    mov    %esp,%ebp</span><br><span class="line">   7:    83 ec 28                 sub    $0x28,%esp</span><br><span class="line">   a:    65 a1 14 00 00 00        mov    %gs:0x14,%eax</span><br><span class="line">  10:    89 45 f4                 mov    %eax,-0xc(%ebp)</span><br><span class="line">  13:    31 c0                    xor    %eax,%eax</span><br><span class="line">  15:    c7 45 e9 59 4a 41 46     movl   $0x46414a59,-0x17(%ebp)</span><br><span class="line">  1c:    c7 45 ed 58 52 42 44     movl   $0x44425258,-0x13(%ebp)</span><br><span class="line">  23:    66 c7 45 f1 51 57        movw   $0x5751,-0xf(%ebp)</span><br><span class="line">  29:    c6 45 f3 00              movb   $0x0,-0xd(%ebp)</span><br><span class="line">  2d:    c7 45 e4 00 00 00 00     movl   $0x0,-0x1c(%ebp)</span><br><span class="line">  34:    e9 e3 00 00 00           jmp    11c &lt;do_phase+0x11c&gt;</span><br><span class="line">  39:    8d 55 e9                 lea    -0x17(%ebp),%edx   # cookieå­—ç¬¦ä¸²åœ°å€</span><br><span class="line">  3c:    8b 45 e4                 mov    -0x1c(%ebp),%eax</span><br><span class="line">  3f:    01 d0                    add    %edx,%eax</span><br><span class="line">  41:    0f b6 00                 movzbl (%eax),%eax</span><br><span class="line">  44:    88 45 e3                 mov    %al,-0x1d(%ebp)  </span><br><span class="line">  47:    0f be 45 e3              movsbl -0x1d(%ebp),%eax   # é¡ºåºå–å­—ç¬¦</span><br><span class="line">  4b:    83 e8 41                 sub    $0x41,%eax    # å¯¹åº”çš„ASCIIå‡å»0x41</span><br><span class="line">  4e:    83 f8 19                 cmp    $0x19,%eax    # ä¸0x19æ¯”è¾ƒ</span><br><span class="line">  51:    0f 87 b1 00 00 00        ja     108 &lt;do_phase+0x108&gt;   # è‹¥å¤§äº0x19åˆ™è·³è½¬ï¼ˆéå¤§å†™å­—æ¯ï¼‰</span><br><span class="line">  57:    8b 04 85 00 00 00 00     mov    0x0(,%eax,4),%eax   # (cookie[i]-0x41)*4</span><br><span class="line">truetruetrue5a: R_386_32    .rodata</span><br><span class="line">  5e:    3e ff e0                 notrack jmp *%eax</span><br><span class="line">  61:    c6 45 e3 6a              movb   $0x6a,-0x1d(%ebp)</span><br><span class="line">  65:    e9 9e 00 00 00           jmp    108 &lt;do_phase+0x108&gt;</span><br><span class="line">  6a:    c6 45 e3 39              movb   $0x39,-0x1d(%ebp)</span><br><span class="line">  6e:    e9 95 00 00 00           jmp    108 &lt;do_phase+0x108&gt;</span><br><span class="line">  73:    c6 45 e3 36              movb   $0x36,-0x1d(%ebp)</span><br><span class="line">  77:    e9 8c 00 00 00           jmp    108 &lt;do_phase+0x108&gt;</span><br><span class="line">  7c:    c6 45 e3 31              movb   $0x31,-0x1d(%ebp)</span><br><span class="line">  80:    e9 83 00 00 00           jmp    108 &lt;do_phase+0x108&gt;</span><br><span class="line">  85:    c6 45 e3 69              movb   $0x69,-0x1d(%ebp)</span><br><span class="line">  89:    eb 7d                    jmp    108 &lt;do_phase+0x108&gt;</span><br><span class="line">  8b:    c6 45 e3 66              movb   $0x66,-0x1d(%ebp)</span><br><span class="line">  8f:    eb 77                    jmp    108 &lt;do_phase+0x108&gt;</span><br><span class="line">  91:    c6 45 e3 37              movb   $0x37,-0x1d(%ebp)</span><br><span class="line">  95:    eb 71                    jmp    108 &lt;do_phase+0x108&gt;</span><br><span class="line">  97:    c6 45 e3 32              movb   $0x32,-0x1d(%ebp)</span><br><span class="line">  9b:    eb 6b                    jmp    108 &lt;do_phase+0x108&gt;</span><br><span class="line">  9d:    c6 45 e3 30              movb   $0x30,-0x1d(%ebp)</span><br><span class="line">  a1:    eb 65                    jmp    108 &lt;do_phase+0x108&gt;</span><br><span class="line">  a3:    c6 45 e3 7c              movb   $0x7c,-0x1d(%ebp)</span><br><span class="line">  a7:    eb 5f                    jmp    108 &lt;do_phase+0x108&gt;</span><br><span class="line">  a9:    c6 45 e3 5a              movb   $0x5a,-0x1d(%ebp)</span><br><span class="line">  ad:    eb 59                    jmp    108 &lt;do_phase+0x108&gt;</span><br><span class="line">  af:    c6 45 e3 5e              movb   $0x5e,-0x1d(%ebp)</span><br><span class="line">  b3:    eb 53                    jmp    108 &lt;do_phase+0x108&gt;</span><br><span class="line">  b5:    c6 45 e3 44              movb   $0x44,-0x1d(%ebp)</span><br><span class="line">  b9:    eb 4d                    jmp    108 &lt;do_phase+0x108&gt;</span><br><span class="line">  bb:    c6 45 e3 3a              movb   $0x3a,-0x1d(%ebp)</span><br><span class="line">  bf:    eb 47                    jmp    108 &lt;do_phase+0x108&gt;</span><br><span class="line">  c1:    c6 45 e3 34              movb   $0x34,-0x1d(%ebp)</span><br><span class="line">  c5:    eb 41                    jmp    108 &lt;do_phase+0x108&gt;</span><br><span class="line">  c7:    c6 45 e3 5c              movb   $0x5c,-0x1d(%ebp)</span><br><span class="line">  cb:    eb 3b                    jmp    108 &lt;do_phase+0x108&gt;</span><br><span class="line">  cd:    c6 45 e3 47              movb   $0x47,-0x1d(%ebp)</span><br><span class="line">  d1:    eb 35                    jmp    108 &lt;do_phase+0x108&gt;</span><br><span class="line">  d3:    c6 45 e3 5b              movb   $0x5b,-0x1d(%ebp)</span><br><span class="line">  d7:    eb 2f                    jmp    108 &lt;do_phase+0x108&gt;</span><br><span class="line">  d9:    c6 45 e3 58              movb   $0x58,-0x1d(%ebp)</span><br><span class="line">  dd:    eb 29                    jmp    108 &lt;do_phase+0x108&gt;</span><br><span class="line">  df:    c6 45 e3 4b              movb   $0x4b,-0x1d(%ebp)</span><br><span class="line">  e3:    eb 23                    jmp    108 &lt;do_phase+0x108&gt;</span><br><span class="line">  e5:    c6 45 e3 66              movb   $0x66,-0x1d(%ebp)</span><br><span class="line">  e9:    eb 1d                    jmp    108 &lt;do_phase+0x108&gt;</span><br><span class="line">  eb:    c6 45 e3 5a              movb   $0x5a,-0x1d(%ebp)</span><br><span class="line">  ef:    eb 17                    jmp    108 &lt;do_phase+0x108&gt;</span><br><span class="line">  f1:    c6 45 e3 38              movb   $0x38,-0x1d(%ebp)</span><br><span class="line">  f5:    eb 11                    jmp    108 &lt;do_phase+0x108&gt;</span><br><span class="line">  f7:    c6 45 e3 49              movb   $0x49,-0x1d(%ebp)</span><br><span class="line">  fb:    eb 0b                    jmp    108 &lt;do_phase+0x108&gt;</span><br><span class="line">  fd:    c6 45 e3 33              movb   $0x33,-0x1d(%ebp)</span><br><span class="line"> 101:    eb 05                    jmp    108 &lt;do_phase+0x108&gt;</span><br><span class="line"> 103:    c6 45 e3 35              movb   $0x35,-0x1d(%ebp)</span><br><span class="line"> 107:    90                       nop</span><br><span class="line"> 108:    0f be 45 e3              movsbl -0x1d(%ebp),%eax</span><br><span class="line"> 10c:    83 ec 0c                 sub    $0xc,%esp</span><br><span class="line"> 10f:    50                       push   %eax</span><br><span class="line"> 110:    e8 fc ff ff ff           call   111 &lt;do_phase+0x111&gt;</span><br><span class="line">truetruetrue111: R_386_PC32    putchar</span><br><span class="line"> 115:    83 c4 10                 add    $0x10,%esp</span><br><span class="line"> 118:    83 45 e4 01              addl   $0x1,-0x1c(%ebp)</span><br><span class="line"> 11c:    8b 45 e4                 mov    -0x1c(%ebp),%eax</span><br><span class="line"> 11f:    83 f8 09                 cmp    $0x9,%eax</span><br><span class="line"> 122:    0f 86 11 ff ff ff        jbe    39 &lt;do_phase+0x39&gt;</span><br><span class="line"> 128:    83 ec 0c                 sub    $0xc,%esp</span><br><span class="line"> 12b:    6a 0a                    push   $0xa</span><br><span class="line"> 12d:    e8 fc ff ff ff           call   12e &lt;do_phase+0x12e&gt;</span><br><span class="line">truetruetrue12e: R_386_PC32    putchar</span><br><span class="line"> 132:    83 c4 10                 add    $0x10,%esp</span><br><span class="line"> 135:    90                       nop</span><br><span class="line"> 136:    8b 45 f4                 mov    -0xc(%ebp),%eax</span><br><span class="line"> 139:    65 33 05 14 00 00 00     xor    %gs:0x14,%eax</span><br><span class="line"> 140:    74 05                    je     147 &lt;do_phase+0x147&gt;</span><br><span class="line"> 142:    e8 fc ff ff ff           call   143 &lt;do_phase+0x143&gt;</span><br><span class="line">truetruetrue143: R_386_PC32    __stack_chk_fail</span><br><span class="line"> 147:    c9                       leave  </span><br><span class="line"> 148:    c3                       ret   </span><br></pre></td></tr></table></figure><p>ç”±èŠ‚å¤´è¡¨ä¿¡æ¯å¯çŸ¥.rodataåœ¨phase4.oçš„0x184å¤„ï¼š</p><p><img src="/2021/computer-architecture-hitlabs/image-20210526190222214.png" alt="image-20210526190222214"></p><p>åˆ†ææ±‡ç¼–ä»£ç å¯å¾—æ˜ å°„å…³ç³»ï¼Œæ ¹æ®switchä¸­å¯¹åº”è¾“å‡ºçš„å­—ç¬¦æ¥ä¿®æ”¹switchè·³è½¬è¡¨ä¿¡æ¯ï¼š</p><p><img src="/2021/computer-architecture-hitlabs/Snipaste_2021-05-26_18-52-18.png" alt="Snipaste_2021-05-26_18-52-18"></p><p>ä»¥å­—ç¬¦ä¸²ç¬¬ä¸€ä¸ªYä¸ºä¾‹ï¼Œå¯¹åº”çš„åº”è¯¥æ˜¯å­¦å·ä¸­ç¬¬ä¸€ä¸ªå­—ç¬¦â€™1â€™ï¼Œæ•…åœ¨.textä¸­æ‰¾åˆ°å¯¹åº”è¾“å‡ºâ€™1â€™çš„è¯­å¥çš„åœ°å€å¡«å…¥switchè·³è½¬è¡¨å¯¹åº”çš„Yçš„ä½ç½®ï¼ˆå€’æ•°ç¬¬äºŒä¸ªï¼‰ï¼š</p><p><img src="/2021/computer-architecture-hitlabs/image-20210526191508525.png" alt="image-20210526191508525"></p><p>åŸæœ¬çš„å€¼ä¸ç›®æ ‡ä¹‹é—´å¤§äº†0x81ï¼Œæ•…å°†æœºå™¨ä»£ç ä¸­çš„0xfdæ”¹ä¸º0xfd - 0x81 = 0x7cã€‚åˆ™å¯ä»¥æ­£ç¡®æ˜¾ç¤ºå‡ºç¬¬ä¸€ä¸ªå­—ç¬¦â€™1â€™ã€‚</p><p><img src="/2021/computer-architecture-hitlabs/image-20210526191833020.png" alt="image-20210526191833020"></p><p>å…¶ä»–çš„å­—ç¬¦ç”¨ç›¸åŒçš„æ–¹æ³•å¡«å…¥ï¼ŒæˆåŠŸï¼š</p><p><img src="/2021/computer-architecture-hitlabs/image-20210526213213296.png" alt="image-20210526213213296"></p><h1 id="å®éªŒå…­-CacheLab"><a href="#å®éªŒå…­-CacheLab" class="headerlink" title="å®éªŒå…­ CacheLab"></a>å®éªŒå…­ CacheLab</h1><h3 id="ç”¨CPU-ZæŸ¥çœ‹è®¡ç®—æœºCacheå„å‚æ•°"><a href="#ç”¨CPU-ZæŸ¥çœ‹è®¡ç®—æœºCacheå„å‚æ•°" class="headerlink" title="ç”¨CPU-ZæŸ¥çœ‹è®¡ç®—æœºCacheå„å‚æ•°"></a>ç”¨CPU-ZæŸ¥çœ‹è®¡ç®—æœºCacheå„å‚æ•°</h3><p><img src="/2021/computer-architecture-hitlabs/image-20210528162204930.png" alt="image-20210528162204930"></p><p><img src="/2021/computer-architecture-hitlabs/image-20210528211434587.png" alt="image-20210528211434587"></p><p>ä¸€çº§ç¼“å­˜ï¼šC = 32KB; S = 512; E = 8; B = 8B; s = 9; e = 3; b = 3.</p><p>äºŒçº§ç¼“å­˜ï¼šC = 256KB; S = 4096; E = 4; B = 16B; s = 12; e = 2; b = 4.</p><p>ä¸‰çº§ç¼“å­˜ï¼šC = 8MB; S = 131072; E = 16; B = 4B; s = 17; e = 4; b = 2.</p><h3 id="Cacheè¯»å†™ç­–ç•¥ï¼š"><a href="#Cacheè¯»å†™ç­–ç•¥ï¼š" class="headerlink" title="Cacheè¯»å†™ç­–ç•¥ï¼š"></a>Cacheè¯»å†™ç­–ç•¥ï¼š</h3><p>read-throughï¼š</p><ul><li>ä» cache ä¸­è¯»å–æ•°æ®ï¼Œè¯»å–åˆ°å°±ç›´æ¥è¿”å› ã€‚</li><li>è¯»å–ä¸åˆ°çš„è¯ï¼Œå…ˆä»ä½ä¸€å±‚åŠ è½½ï¼Œå†™å…¥åˆ° cache åè¿”å›å“åº”ã€‚</li></ul><p>Cache Aside Patternï¼ˆæ—è·¯ç¼“å­˜æ¨¡å¼ï¼‰ï¼š</p><p>åœ¨æ›´æ–°æ•°æ®æ—¶ä¸æ›´æ–°ç¼“å­˜ï¼Œè€Œæ˜¯åˆ é™¤ç¼“å­˜ä¸­çš„æ•°æ®ï¼Œåœ¨è¯»å–æ•°æ®æ—¶ï¼Œå‘ç°ç¼“å­˜ä¸­æ²¡äº†æ•°æ®ä¹‹åï¼Œå†ä»æ•°æ®åº“ä¸­è¯»å–æ•°æ®ï¼Œæ›´æ–°åˆ°ç¼“å­˜ä¸­ã€‚</p><p>è¯»ï¼šwrite-through</p><p>å†™ï¼šæ›´æ–°ä½ä¸€å±‚ååˆ é™¤cacheä¸­çš„å†…å®¹ã€‚</p><p>å†™å‘½ä¸­ï¼š</p><ol><li>ç›´å†™ write-through</li></ol><p>ç«‹å³å°†wçš„é«˜é€Ÿç¼“å­˜å—å†™å›åˆ°ç´§æ¥ç€çš„ä½ä¸€å±‚ä¸­ã€‚</p><ol start="2"><li>å†™å› write-back</li></ol><p>å°½å¯èƒ½åœ°æ¨è¿Ÿæ›´æ–°ï¼Œåªæœ‰å½“è¢«æ›¿æ¢æ—¶æ‰å†™å›ï¼Œéœ€è¦å¢åŠ ä¸€ä¸ªæ ¼å¤–çš„dirty bitã€‚</p><p>å†™ä¸å‘½ä¸­ï¼š</p><ol><li>å†™åˆ†é… write-allocate</li></ol><p>å°†è¦ä¿®æ”¹çš„å—ä»ä½ä¸€å±‚è¿åˆ°ç¼“å­˜ä¸­ï¼Œåœ¨ç¼“å­˜ä¸­ä¿®æ”¹ã€‚</p><ol start="2"><li>éå†™åˆ†é… not-write-allocate</li></ol><p>é¿å¼€ç¼“å­˜ï¼Œç›´æ¥æŠŠè¿™ä¸ªå­—å†™å…¥åˆ°ä½ä¸€å±‚ä¸­ã€‚</p><h3 id="ä½¿ç”¨-valgrind-å’Œ-gprof-è¿›è¡Œç¨‹åºæ€§èƒ½åˆ†æçš„æ–¹æ³•ã€‚"><a href="#ä½¿ç”¨-valgrind-å’Œ-gprof-è¿›è¡Œç¨‹åºæ€§èƒ½åˆ†æçš„æ–¹æ³•ã€‚" class="headerlink" title="ä½¿ç”¨ valgrind å’Œ gprof è¿›è¡Œç¨‹åºæ€§èƒ½åˆ†æçš„æ–¹æ³•ã€‚"></a>ä½¿ç”¨ valgrind å’Œ gprof è¿›è¡Œç¨‹åºæ€§èƒ½åˆ†æçš„<a href>æ–¹æ³•</a>ã€‚</h3><h2 id="csim-cache-simulation"><a href="#csim-cache-simulation" class="headerlink" title="csim (cache simulation)"></a>csim (cache simulation)</h2><p>csim-refæ‰§è¡Œæ–‡ä»¶çš„ä½¿ç”¨æ–¹æ³•ï¼š</p><p><img src="/2021/computer-architecture-hitlabs/image-20210526161059425.png" alt="image-20210526161059425"></p><p>ç¤ºä¾‹ï¼š</p><p><img src="/2021/computer-architecture-hitlabs/image-20210526161147468.png" alt="image-20210526161147468"></p><p>cachelab.h</p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/* </span></span><br><span class="line"><span class="comment"> * cachelab.h - Prototypes for Cache Lab helper functions</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="meta-keyword">ifndef</span> CACHELAB_TOOLS_H</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> CACHELAB_TOOLS_H</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> MAX_TRANS_FUNCS 100</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">typedef</span> <span class="class"><span class="keyword">struct</span> <span class="title">trans_func</span>&#123;</span></span><br><span class="line">  <span class="keyword">void</span> (*func_ptr)(<span class="keyword">int</span> M,<span class="keyword">int</span> N,<span class="keyword">int</span>[N][M],<span class="keyword">int</span>[M][N]);</span><br><span class="line">  <span class="keyword">char</span>* description;</span><br><span class="line">  <span class="keyword">char</span> correct;</span><br><span class="line">  <span class="keyword">unsigned</span> <span class="keyword">int</span> num_hits;</span><br><span class="line">  <span class="keyword">unsigned</span> <span class="keyword">int</span> num_misses;</span><br><span class="line">  <span class="keyword">unsigned</span> <span class="keyword">int</span> num_evictions;</span><br><span class="line">&#125; <span class="keyword">trans_func_t</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* </span></span><br><span class="line"><span class="comment"> * printSummary - This function provides a standard way for your cache</span></span><br><span class="line"><span class="comment"> * simulator * to display its final hit and miss statistics</span></span><br><span class="line"><span class="comment"> */</span> </span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">printSummary</span><span class="params">(<span class="keyword">int</span> hits,  <span class="comment">/* number of  hits */</span></span></span></span><br><span class="line"><span class="function"><span class="params">                  <span class="keyword">int</span> misses, <span class="comment">/* number of misses */</span></span></span></span><br><span class="line"><span class="function"><span class="params">                  <span class="keyword">int</span> evictions)</span></span>; <span class="comment">/* number of evictions */</span></span><br><span class="line"></span><br><span class="line"><span class="comment">/* Fill the matrix with data */</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">initMatrix</span><span class="params">(<span class="keyword">int</span> M, <span class="keyword">int</span> N, <span class="keyword">int</span> A[N][M], <span class="keyword">int</span> B[M][N])</span></span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* The baseline trans function that produces correct results. */</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">correctTrans</span><span class="params">(<span class="keyword">int</span> M, <span class="keyword">int</span> N, <span class="keyword">int</span> A[N][M], <span class="keyword">int</span> B[M][N])</span></span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* Add the given function to the function list */</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">registerTransFunction</span><span class="params">(</span></span></span><br><span class="line"><span class="function"><span class="params">    <span class="keyword">void</span> (*trans)(<span class="keyword">int</span> M,<span class="keyword">int</span> N,<span class="keyword">int</span>[N][M],<span class="keyword">int</span>[M][N]), <span class="keyword">char</span>* desc)</span></span>;</span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="meta-keyword">endif</span> <span class="comment">/* CACHELAB_TOOLS_H */</span></span></span><br></pre></td></tr></table></figure><p>cachelab.c</p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment"> * cachelab.c - Cache Lab helper functions</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;stdlib.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;assert.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&quot;cachelab.h&quot;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;time.h&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">trans_func_t</span> func_list[MAX_TRANS_FUNCS];</span><br><span class="line"><span class="keyword">int</span> func_counter = <span class="number">0</span>; </span><br><span class="line"></span><br><span class="line"><span class="comment">/* </span></span><br><span class="line"><span class="comment"> * printSummary - Summarize the cache simulation statistics. Student cache simulators</span></span><br><span class="line"><span class="comment"> *                must call this function in order to be properly autograded. </span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">printSummary</span><span class="params">(<span class="keyword">int</span> hits, <span class="keyword">int</span> misses, <span class="keyword">int</span> evictions)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;hits:%d misses:%d evictions:%d\n&quot;</span>, hits, misses, evictions);</span><br><span class="line">    FILE* output_fp = fopen(<span class="string">&quot;.csim_results&quot;</span>, <span class="string">&quot;w&quot;</span>);</span><br><span class="line">    assert(output_fp);</span><br><span class="line">    <span class="built_in">fprintf</span>(output_fp, <span class="string">&quot;%d %d %d\n&quot;</span>, hits, misses, evictions);</span><br><span class="line">    fclose(output_fp);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* </span></span><br><span class="line"><span class="comment"> * initMatrix - Initialize the given matrix </span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">initMatrix</span><span class="params">(<span class="keyword">int</span> M, <span class="keyword">int</span> N, <span class="keyword">int</span> A[N][M], <span class="keyword">int</span> B[M][N])</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">int</span> i, j;</span><br><span class="line">    srand(time(<span class="literal">NULL</span>));</span><br><span class="line">    <span class="keyword">for</span> (i = <span class="number">0</span>; i &lt; N; i++)&#123;</span><br><span class="line">        <span class="keyword">for</span> (j = <span class="number">0</span>; j &lt; M; j++)&#123;</span><br><span class="line">            <span class="comment">// A[i][j] = i+j;  /* The matrix created this way is symmetric */</span></span><br><span class="line">            A[i][j]=rand();</span><br><span class="line">            B[j][i]=rand();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">randMatrix</span><span class="params">(<span class="keyword">int</span> M, <span class="keyword">int</span> N, <span class="keyword">int</span> A[N][M])</span> </span>&#123;</span><br><span class="line">    <span class="keyword">int</span> i, j;</span><br><span class="line">    srand(time(<span class="literal">NULL</span>));</span><br><span class="line">    <span class="keyword">for</span> (i = <span class="number">0</span>; i &lt; N; i++)&#123;</span><br><span class="line">        <span class="keyword">for</span> (j = <span class="number">0</span>; j &lt; M; j++)&#123;</span><br><span class="line">            <span class="comment">// A[i][j] = i+j;  /* The matrix created this way is symmetric */</span></span><br><span class="line">            A[i][j]=rand();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* </span></span><br><span class="line"><span class="comment"> * correctTrans - baseline transpose function used to evaluate correctness </span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">correctTrans</span><span class="params">(<span class="keyword">int</span> M, <span class="keyword">int</span> N, <span class="keyword">int</span> A[N][M], <span class="keyword">int</span> B[M][N])</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">int</span> i, j, tmp;</span><br><span class="line">    <span class="keyword">for</span> (i = <span class="number">0</span>; i &lt; N; i++)&#123;</span><br><span class="line">        <span class="keyword">for</span> (j = <span class="number">0</span>; j &lt; M; j++)&#123;</span><br><span class="line">            tmp = A[i][j];</span><br><span class="line">            B[j][i] = tmp;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;    </span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">/* </span></span><br><span class="line"><span class="comment"> * registerTransFunction - Add the given trans function into your list</span></span><br><span class="line"><span class="comment"> *     of functions to be tested</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">registerTransFunction</span><span class="params">(<span class="keyword">void</span> (*trans)(<span class="keyword">int</span> M, <span class="keyword">int</span> N, <span class="keyword">int</span>[N][M], <span class="keyword">int</span>[M][N]), </span></span></span><br><span class="line"><span class="function"><span class="params">                           <span class="keyword">char</span>* desc)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    func_list[func_counter].func_ptr = trans;</span><br><span class="line">    func_list[func_counter].description = desc;</span><br><span class="line">    func_list[func_counter].correct = <span class="number">0</span>;</span><br><span class="line">    func_list[func_counter].num_hits = <span class="number">0</span>;</span><br><span class="line">    func_list[func_counter].num_misses = <span class="number">0</span>;</span><br><span class="line">    func_list[func_counter].num_evictions =<span class="number">0</span>;</span><br><span class="line">    func_counter++;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>csim.cå®ç°å¦‚ä¸‹ï¼š</p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;getopt.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;stdlib.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;unistd.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;assert.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;math.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;limits.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;string.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;errno.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&quot;cachelab.h&quot;</span></span></span><br><span class="line"></span><br><span class="line"><span class="comment">//#define DEBUG_ON </span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> ADDRESS_LENGTH 64</span></span><br><span class="line"></span><br><span class="line"><span class="comment">/* Type: Memory address */</span></span><br><span class="line"><span class="keyword">typedef</span> <span class="keyword">unsigned</span> <span class="keyword">long</span> <span class="keyword">long</span> <span class="keyword">int</span> <span class="keyword">mem_addr_t</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* Type: Cache line</span></span><br><span class="line"><span class="comment">   LRU is a counter used to implement LRU replacement policy  */</span></span><br><span class="line"><span class="keyword">typedef</span> <span class="class"><span class="keyword">struct</span> <span class="title">cache_line</span> &#123;</span></span><br><span class="line">    <span class="keyword">char</span> valid;</span><br><span class="line">    <span class="keyword">mem_addr_t</span> tag;</span><br><span class="line">    <span class="keyword">unsigned</span> <span class="keyword">long</span> <span class="keyword">long</span> <span class="keyword">int</span> lru;</span><br><span class="line">&#125; <span class="keyword">cache_line_t</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">typedef</span> <span class="keyword">cache_line_t</span>* <span class="keyword">cache_set_t</span>;</span><br><span class="line"><span class="keyword">typedef</span> <span class="keyword">cache_set_t</span>* <span class="keyword">cache_t</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* Globals set by command line args */</span></span><br><span class="line"><span class="keyword">int</span> verbosity = <span class="number">0</span>; <span class="comment">/* print trace if set */</span></span><br><span class="line"><span class="keyword">int</span> s = <span class="number">0</span>; <span class="comment">/* set index bits */</span></span><br><span class="line"><span class="keyword">int</span> b = <span class="number">0</span>; <span class="comment">/* block offset bits */</span></span><br><span class="line"><span class="keyword">int</span> E = <span class="number">0</span>; <span class="comment">/* associativity */</span></span><br><span class="line"><span class="keyword">char</span>* trace_file = <span class="literal">NULL</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* Derived from command line args */</span></span><br><span class="line"><span class="keyword">int</span> S; <span class="comment">/* number of sets */</span></span><br><span class="line"><span class="keyword">int</span> B; <span class="comment">/* block size (bytes) */</span></span><br><span class="line"></span><br><span class="line"><span class="comment">/* Counters used to record cache statistics */</span></span><br><span class="line"><span class="keyword">int</span> miss_count = <span class="number">0</span>;</span><br><span class="line"><span class="keyword">int</span> hit_count = <span class="number">0</span>;</span><br><span class="line"><span class="keyword">int</span> eviction_count = <span class="number">0</span>;</span><br><span class="line"><span class="keyword">unsigned</span> <span class="keyword">long</span> <span class="keyword">long</span> <span class="keyword">int</span> lru_counter = <span class="number">1</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* The cache we are simulating */</span></span><br><span class="line"><span class="keyword">cache_t</span> cache;  </span><br><span class="line"><span class="keyword">mem_addr_t</span> set_index_mask;<span class="comment">//ç”¨äºä»å†…å­˜åœ°å€å¾—åˆ°ç¼“å­˜ç»„çš„ç´¢å¼•å€¼</span></span><br><span class="line"></span><br><span class="line"><span class="comment">/* </span></span><br><span class="line"><span class="comment"> * initCache - Allocate memory, write 0&#x27;s for valid and tag and LRU</span></span><br><span class="line"><span class="comment"> * also computes the set_index_mask</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">initCache</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">truecache = (<span class="keyword">cache_t</span>) <span class="built_in">malloc</span> (<span class="keyword">sizeof</span>(<span class="keyword">cache_set_t</span>) * S);</span><br><span class="line">true<span class="keyword">int</span> i;</span><br><span class="line">true<span class="keyword">for</span> (i = <span class="number">0</span>; i &lt; S; i++) &#123;</span><br><span class="line">truetruecache[i] = (<span class="keyword">cache_set_t</span>) <span class="built_in">malloc</span> (<span class="keyword">sizeof</span>(<span class="keyword">cache_line_t</span>) * E);</span><br><span class="line">truetrue<span class="built_in">memset</span> (cache[i], <span class="number">0</span>, <span class="keyword">sizeof</span>(<span class="keyword">cache_line_t</span>) * E);</span><br><span class="line">true&#125;</span><br><span class="line">trueset_index_mask = (<span class="keyword">mem_addr_t</span>) (<span class="built_in">pow</span>(<span class="number">2</span>, s) - <span class="number">1</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">/* </span></span><br><span class="line"><span class="comment"> * freeCache - free allocated memory</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">freeCache</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">true<span class="keyword">int</span> i;</span><br><span class="line">true<span class="keyword">for</span> (i = <span class="number">0</span>; i &lt; S; i++) &#123;</span><br><span class="line">truetrue<span class="built_in">free</span> (cache[i]);</span><br><span class="line">true&#125;</span><br><span class="line">true<span class="built_in">free</span> (cache);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">/* </span></span><br><span class="line"><span class="comment"> * accessData - Access data at memory address addr.</span></span><br><span class="line"><span class="comment"> *   If it is already in cache, increase hit_count</span></span><br><span class="line"><span class="comment"> *   If it is not in cache, bring it in cache, increase miss count.</span></span><br><span class="line"><span class="comment"> *   Also increase eviction_count if a line is evicted.</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">accessData</span><span class="params">(<span class="keyword">mem_addr_t</span> addr)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">true<span class="keyword">mem_addr_t</span> set_index = (addr &gt;&gt; b) &amp; set_index_mask;</span><br><span class="line">true<span class="keyword">mem_addr_t</span> tag = addr &gt;&gt; (s+b);</span><br><span class="line">true<span class="keyword">cache_set_t</span> <span class="built_in">set</span> = cache[set_index];</span><br><span class="line">true<span class="keyword">unsigned</span> <span class="keyword">long</span> <span class="keyword">long</span> <span class="keyword">int</span> eviction_lru = ULLONG_MAX;</span><br><span class="line">true<span class="keyword">int</span> eviction_line = <span class="number">0</span>;</span><br><span class="line">true<span class="keyword">int</span> i;</span><br><span class="line">true<span class="keyword">for</span> (i = <span class="number">0</span>; i &lt; E; i++) &#123;</span><br><span class="line">truetrue<span class="keyword">if</span> (<span class="built_in">set</span>[i].valid == <span class="number">1</span> &amp;&amp; <span class="built_in">set</span>[i].tag == tag) &#123;</span><br><span class="line">truetruetrue<span class="built_in">set</span>[i].lru = lru_counter++;</span><br><span class="line">truetruetruehit_count++;</span><br><span class="line">truetruetrue<span class="built_in">printf</span>(<span class="string">&quot;hit &quot;</span>);</span><br><span class="line">truetruetrue<span class="keyword">return</span>;</span><br><span class="line">truetrue&#125;</span><br><span class="line">true&#125;</span><br><span class="line">truemiss_count++;</span><br><span class="line">true<span class="built_in">printf</span>(<span class="string">&quot;miss &quot;</span>);</span><br><span class="line">true<span class="keyword">for</span> (i = <span class="number">0</span>; i &lt; E; i++) &#123;</span><br><span class="line">truetrue<span class="keyword">if</span> (<span class="built_in">set</span>[i].valid == <span class="number">0</span>) &#123;</span><br><span class="line">truetruetrue<span class="built_in">set</span>[i].valid = <span class="number">1</span>;</span><br><span class="line">truetruetrue<span class="built_in">set</span>[i].tag = tag;</span><br><span class="line">truetruetrue<span class="built_in">set</span>[i].lru = lru_counter++;</span><br><span class="line">truetruetrue<span class="keyword">return</span>;</span><br><span class="line">truetrue&#125; <span class="keyword">else</span> <span class="keyword">if</span> (<span class="built_in">set</span>[i].lru &lt; eviction_lru) &#123;</span><br><span class="line">truetruetrueeviction_lru = <span class="built_in">set</span>[i].lru;</span><br><span class="line">truetruetrueeviction_line = i;</span><br><span class="line">truetrue&#125;</span><br><span class="line">true&#125;</span><br><span class="line">trueeviction_count++;</span><br><span class="line">true<span class="built_in">printf</span>(<span class="string">&quot;eviction &quot;</span>);</span><br><span class="line">true<span class="built_in">set</span>[eviction_line].valid = <span class="number">1</span>;</span><br><span class="line">true<span class="built_in">set</span>[eviction_line].tag = tag;</span><br><span class="line">true<span class="built_in">set</span>[eviction_line].lru = lru_counter++;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment"> * replayTrace - replays the given trace file against the cache </span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">replayTrace</span><span class="params">(<span class="keyword">char</span>* trace_fn)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">char</span> buf[<span class="number">1000</span>];</span><br><span class="line">    <span class="keyword">mem_addr_t</span> addr=<span class="number">0</span>;</span><br><span class="line">    <span class="keyword">unsigned</span> <span class="keyword">int</span> len=<span class="number">0</span>;</span><br><span class="line">    FILE* trace_fp = fopen(trace_fn, <span class="string">&quot;r&quot;</span>);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span>(!trace_fp)&#123;</span><br><span class="line">        <span class="built_in">fprintf</span>(<span class="built_in">stderr</span>, <span class="string">&quot;%s: %s\n&quot;</span>, trace_fn, strerror(errno));</span><br><span class="line">        <span class="built_in">exit</span>(<span class="number">1</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">while</span>( fgets(buf, <span class="number">1000</span>, trace_fp) != <span class="literal">NULL</span>) &#123;</span><br><span class="line">        <span class="keyword">if</span>(buf[<span class="number">1</span>]==<span class="string">&#x27;S&#x27;</span> || buf[<span class="number">1</span>]==<span class="string">&#x27;L&#x27;</span> || buf[<span class="number">1</span>]==<span class="string">&#x27;M&#x27;</span>) &#123;</span><br><span class="line">            <span class="built_in">sscanf</span>(buf+<span class="number">3</span>, <span class="string">&quot;%llx,%u&quot;</span>, &amp;addr, &amp;len);</span><br><span class="line">      </span><br><span class="line">            <span class="keyword">if</span>(verbosity)</span><br><span class="line">                <span class="built_in">printf</span>(<span class="string">&quot;%c %llx,%u &quot;</span>, buf[<span class="number">1</span>], addr, len);</span><br><span class="line"></span><br><span class="line">            accessData(addr);</span><br><span class="line"></span><br><span class="line">            <span class="comment">/* If the instruction is R/W then access again */</span></span><br><span class="line">            <span class="keyword">if</span>(buf[<span class="number">1</span>]==<span class="string">&#x27;M&#x27;</span>)</span><br><span class="line">                accessData(addr);</span><br><span class="line">            </span><br><span class="line">            <span class="keyword">if</span> (verbosity)</span><br><span class="line">                <span class="built_in">printf</span>(<span class="string">&quot;\n&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    fclose(trace_fp);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment"> * printUsage - Print usage info</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">printUsage</span><span class="params">(<span class="keyword">char</span>* argv[])</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;Usage: %s [-hv] -s &lt;num&gt; -E &lt;num&gt; -b &lt;num&gt; -t &lt;file&gt;\n&quot;</span>, argv[<span class="number">0</span>]);</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;Options:\n&quot;</span>);</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;  -h         Print this help message.\n&quot;</span>);</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;  -v         Optional verbose flag.\n&quot;</span>);</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;  -s &lt;num&gt;   Number of set index bits.\n&quot;</span>);</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;  -E &lt;num&gt;   Number of lines per set.\n&quot;</span>);</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;  -b &lt;num&gt;   Number of block offset bits.\n&quot;</span>);</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;  -t &lt;file&gt;  Trace file.\n&quot;</span>);</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;\nExamples:\n&quot;</span>);</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;  linux&gt;  %s -s 4 -E 1 -b 4 -t traces/yi.trace\n&quot;</span>, argv[<span class="number">0</span>]);</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;  linux&gt;  %s -v -s 8 -E 2 -b 4 -t traces/yi.trace\n&quot;</span>, argv[<span class="number">0</span>]);</span><br><span class="line">    <span class="built_in">exit</span>(<span class="number">0</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment"> * main - Main routine </span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">(<span class="keyword">int</span> argc, <span class="keyword">char</span>* argv[])</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">char</span> c;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">while</span>( (c=getopt(argc,argv,<span class="string">&quot;s:E:b:t:vh&quot;</span>)) != <span class="number">-1</span>)&#123;</span><br><span class="line">        <span class="keyword">switch</span>(c)&#123;</span><br><span class="line">        <span class="keyword">case</span> <span class="string">&#x27;s&#x27;</span>:</span><br><span class="line">            s = atoi(optarg);</span><br><span class="line">            <span class="keyword">break</span>;</span><br><span class="line">        <span class="keyword">case</span> <span class="string">&#x27;E&#x27;</span>:</span><br><span class="line">            E = atoi(optarg);</span><br><span class="line">            <span class="keyword">break</span>;</span><br><span class="line">        <span class="keyword">case</span> <span class="string">&#x27;b&#x27;</span>:</span><br><span class="line">            b = atoi(optarg);</span><br><span class="line">            <span class="keyword">break</span>;</span><br><span class="line">        <span class="keyword">case</span> <span class="string">&#x27;t&#x27;</span>:</span><br><span class="line">            trace_file = optarg;</span><br><span class="line">            <span class="keyword">break</span>;</span><br><span class="line">        <span class="keyword">case</span> <span class="string">&#x27;v&#x27;</span>:</span><br><span class="line">            verbosity = <span class="number">1</span>;</span><br><span class="line">            <span class="keyword">break</span>;</span><br><span class="line">        <span class="keyword">case</span> <span class="string">&#x27;h&#x27;</span>:</span><br><span class="line">            printUsage(argv);</span><br><span class="line">            <span class="built_in">exit</span>(<span class="number">0</span>);</span><br><span class="line">        <span class="keyword">default</span>:</span><br><span class="line">            printUsage(argv);</span><br><span class="line">            <span class="built_in">exit</span>(<span class="number">1</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/* Make sure that all required command line args were specified */</span></span><br><span class="line">    <span class="keyword">if</span> (s == <span class="number">0</span> || E == <span class="number">0</span> || b == <span class="number">0</span> || trace_file == <span class="literal">NULL</span>) &#123;</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">&quot;%s: Missing required command line argument\n&quot;</span>, argv[<span class="number">0</span>]);</span><br><span class="line">        printUsage(argv);</span><br><span class="line">        <span class="built_in">exit</span>(<span class="number">1</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/* Compute S, E and B from command line args */</span></span><br><span class="line">    S = <span class="number">1</span> &lt;&lt; s;</span><br><span class="line">trueB = <span class="number">1</span> &lt;&lt; b;</span><br><span class="line"> </span><br><span class="line">    <span class="comment">/* Initialize cache */</span></span><br><span class="line">    initCache();</span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="meta-keyword">ifdef</span> DEBUG_ON</span></span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;DEBUG: S:%u E:%u B:%u trace:%s\n&quot;</span>, S, E, B, trace_file);</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;DEBUG: set_index_mask: %llu\n&quot;</span>, set_index_mask);</span><br><span class="line"><span class="meta">#<span class="meta-keyword">endif</span></span></span><br><span class="line"> </span><br><span class="line">    replayTrace(trace_file);</span><br><span class="line"></span><br><span class="line">    <span class="comment">/* Free allocated memory */</span></span><br><span class="line">    freeCache();</span><br><span class="line"></span><br><span class="line">    <span class="comment">/* Output the hit and miss statistics for the autograder */</span></span><br><span class="line">    printSummary(hit_count, miss_count, eviction_count);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ç»“æœä¸csim-refä¸€è‡´ï¼š</p><p><img src="/2021/computer-architecture-hitlabs/image-20210529151718449.png" alt="image-20210529151718449"></p><h2 id="ä¼˜åŒ–çŸ©é˜µè½¬ç½®æ“ä½œ"><a href="#ä¼˜åŒ–çŸ©é˜µè½¬ç½®æ“ä½œ" class="headerlink" title="ä¼˜åŒ–çŸ©é˜µè½¬ç½®æ“ä½œ"></a>ä¼˜åŒ–çŸ©é˜µè½¬ç½®æ“ä½œ</h2><p>å‚è€ƒï¼š<a href="https://zhuanlan.zhihu.com/p/33846811">ã€Šæ·±å…¥ç†è§£è®¡ç®—æœºç³»ç»Ÿã€‹é…å¥—å®éªŒï¼šCache Lab</a></p><p>è¦æ±‚ï¼š</p><ol><li>ä¸€å…±åªå‡†ä½¿ç”¨ä¸è¶…è¿‡ 12 ä¸ª int ç±»å‹å±€éƒ¨å˜é‡</li><li>ä¸èƒ½ç”¨é€’å½’</li><li>ä¸å‡†æ”¹å˜ A æ•°ç»„çš„å†…å®¹</li><li>ä¸èƒ½å®šä¹‰æ–°çš„æ•°ç»„ä¹Ÿä¸èƒ½ç”¨ malloc å‡½æ•°å¼€è¾Ÿç©ºé—´ã€‚</li></ol><p>æœ€ç»ˆè¦ä½¿å¾— cache miss çš„æ¬¡æ•°å°½å¯èƒ½å°‘ã€‚</p><p>æ€è€ƒï¼š</p><p>æœ€ç»ˆåœ¨å‚è€ƒæ¨¡æ‹Ÿå™¨csim-refæ¨¡æ‹Ÿ1KB ç›´æ¥æ˜ å°„ã€å—å¤§å°32Bytesçš„cacheï¼ˆå‚æ•°s=5ã€E=1ã€b=5ï¼‰ä¸Šæµ‹è¯•è®¿å­˜è½¨è¿¹æ–‡ä»¶ã€‚</p><p>b = 5 ä»£è¡¨ä¸€ä¸ªå—å¯ä»¥å®¹çº³ 2^5 = 32ä¸ªå­—èŠ‚ï¼Œå³8ä¸ªintç±»å‹æ•°æ®ã€‚è€Œ<strong>å› ä¸ºæ•°ç»„åœ¨å†…å­˜ä¸­æ˜¯æŒ‰è¡Œå­˜å‚¨çš„ï¼Œæ•…é€‰å–å—çš„æ—¶å€™ä¹Ÿæ˜¯æŒ‰è¡Œã€‚</strong>æ¯ä¸ªæ•°ç»„å…ƒç´ çš„set_indexä½åœ¨bä¸ªåç§»ä½å‰ï¼Œè¿™æ„å‘³ç€æ¯8ä¸ªè¿ç»­çš„æ•°ç»„å…ƒç´ ä¼šæ˜ å°„åˆ°åŒä¸€ä¸ªsetã€‚</p><h2 id="32-x-32"><a href="#32-x-32" class="headerlink" title="32 x 32"></a>32 x 32</h2><p>åœ¨ 32 x 32çš„çŸ©é˜µä¸­ï¼Œä¸€è¡Œæœ‰4 ä¸ª cache è¡Œï¼Œæ‰€ä»¥ cache ä¸€å…±å¯ä»¥å­˜çŸ©é˜µçš„ 8 è¡Œã€‚æ•…ä½¿ç”¨åˆ†å—æŠ€æœ¯ï¼Œæ¯æ¬¡å¤„ç†çŸ©é˜µçš„ä¸€ä¸ª8*8åˆ†å—ã€‚</p><p><img src="/2021/computer-architecture-hitlabs/image-20210606133458231.png" alt="image-20210606133458231"></p><p>ä½†ç®€å•çš„åˆ†å—è¿˜ä¸è¶³ä»¥è¾¾åˆ°è¦æ±‚ã€‚</p><p>è¿‡ç¨‹ä¸­å¯ä»¥çœ‹ç”Ÿæˆçš„traceæ–‡ä»¶ï¼Œç”¨æ¨¡æ‹Ÿå™¨ -vé€‰é¡¹è¿è¡Œï¼Œäº†è§£æ¯æ¬¡missæ˜¯æ€ä¹ˆå‘ç”Ÿçš„ã€‚</p><p>Aå’ŒBä¸­å¯¹åº”çš„å…ƒç´ éƒ½æ˜¯æ˜ å°„åˆ°åŒä¸€è¡Œçš„ã€‚åœ¨åŠ è½½Açš„ç¬¬äºŒè¡Œä¹‹åï¼Œåœ¨å°†A[2][2]ä¼ é€ç»™B[2][2]çš„æ—¶å€™ï¼Œå°±å‘ç”Ÿäº†å†²çªâ€”â€”Açš„ç¬¬äºŒè¡Œè¢«æ›¿æ¢æ‰äº†ã€‚å½“ç„¶ï¼Œè¿‡äº†ä¸€ä¼šï¼ŒAçš„ç¬¬äºŒè¡Œåˆå›æ¥äº†ã€‚</p><p>è¿›ä¸€æ­¥è§‚å¯Ÿä¼šå‘ç°ï¼Œè¿™ç§å†²çªåªä¼šå‘ç”Ÿåœ¨å¤„ç†å¯¹è§’çº¿çš„å—ä¸Šã€‚äºæ˜¯é€‰æ‹©ç”¨ä¸´æ—¶å˜é‡å°†æ•°æ®ä¿å­˜èµ·æ¥ï¼Œè¿™æ ·å°±ä¸ç”¨æ‹…å¿ƒæŠ–åŠ¨é—®é¢˜ã€‚</p><p><img src="/2021/computer-architecture-hitlabs/image-20210529192945830.png" alt="image-20210529192945830"></p><p>ç»“æœå°äº300ï¼Œç¬¦åˆè¦æ±‚ã€‚</p><p><img src="/2021/computer-architecture-hitlabs/image-20210529200725774.png" alt="image-20210529200725774"></p><h2 id="64-x-64"><a href="#64-x-64" class="headerlink" title="64 x 64"></a>64 x 64</h2><p>å› ä¸ºçŸ©é˜µä¸€è¡Œçš„å…ƒç´ æ•°é‡ç¿»å€ï¼Œcacheèƒ½å¤Ÿè£…è½½çš„è¡Œæ•°å‡åŠï¼ˆ4è¡Œï¼‰ï¼Œè‹¥ç»§ç»­ä½¿ç”¨8*8çš„åˆ†å—ï¼Œä¼šåœ¨åˆ†å—å†…äº§ç”Ÿå†²çªã€‚</p><img src="/2021/computer-architecture-hitlabs/image-20210606133606510.png" alt="image-20210606133606510" style="zoom: 80%;"><p>æ•…æ”¹ä¸º4*4çš„åˆ†å—ã€‚</p><p><img src="/2021/computer-architecture-hitlabs/image-20210529194253972.png" alt="image-20210529194253972"></p><p><img src="/2021/computer-architecture-hitlabs/image-20210529200829892.png" alt="image-20210529200829892"></p><p>ç»“æœæ²¡æœ‰è¾¾åˆ°æ»¡åˆ†ï¼Œè¿˜éœ€è¦ç»§ç»­ä¼˜åŒ–ï¼šï¼ˆå‚è€ƒï¼š<a href="https://zhuanlan.zhihu.com/p/42754565">ã€Šæ·±å…¥ç†è§£è®¡ç®—æœºç³»ç»Ÿã€‹é…å¥—å®éªŒ4: Cache lab</a> &amp; <a href="https://www.cnblogs.com/liqiuhao/p/8026100.html">CS:APP3e æ·±å…¥ç†è§£è®¡ç®—æœºç³»ç»Ÿ_3e CacheLabå®éªŒ</a>)</p><p>é¦–å…ˆè€ƒè™‘Cacheä¸­åªèƒ½æ”¾4è¡ŒAä¸­çš„è¡Œï¼Œå¦‚æœå†ç”¨8Ã—8çš„å—ï¼Œå‰é¢4è¡Œå¯ä»¥å¡«å…¥ï¼Œåé¢4è¡Œä¼šåœ¨Cacheä¸­å‘ç”Ÿå†²çªï¼Œå¯¼è‡´missæ¬¡æ•°å¢åŠ ã€‚</p><p>å¦‚æœåªç”¨<code>4Ã—4</code>çš„å—å‘¢ï¼Ÿé‚£ä¹ˆæ¯æ¬¡Cacheä¸­æ”¾å…¥8ä¸ªintï¼Œæˆ‘ä»¬å´åªç”¨4ä¸ªï¼Œæµªè´¹ä¸¥é‡ï¼Œè¿™ä¸ªæ–¹æ³•æœ€å°‘ä¹Ÿåªèƒ½åšåˆ°1677æ¬¡missã€‚</p><p>é¢˜ç›®è¯´ä¸èƒ½å¯¹Aè¿›è¡Œæ“ä½œï¼Œä½†æ˜¯å¯ä»¥<strong>å¯¹Bè¿›è¡Œæ“ä½œ</strong>ï¼å°†Bä½œä¸ºç¼“å­˜ä½¿ç”¨</p><p><strong>æ”¹è¿›æ–¹æ³•</strong>ï¼šå°†<code>8 * 8</code> å—å†åˆ†æˆ4ä¸ª<code>4 * 4</code>çš„å—è¿›ä¸€æ­¥å¤„ç†ï¼Œç»è¿‡æ”¹è¿›ï¼Œè¾¾åˆ°1171miss</p><p>é¦–å…ˆå¯¹å·¦ä¸Šè§’å’Œå³ä¸Šè§’è¿›è¡Œå¤„ç†ï¼š</p><ol><li>Bå·¦ä¸Šè§’ = Aå·¦ä¸Šè§’è½¬ç½®ã€‚Bå³ä¸Šè§’=Aå³ä¸Šè§’è½¬ç½®ã€‚</li><li>æˆ‘ä»¬æœ€ååªéœ€è¦æŠŠè¿™éƒ¨åˆ†å¹³ç§»åˆ°Bçš„å·¦ä¸‹è§’å°±å¥½ã€‚</li></ol><p>ç°åœ¨Bå·¦ä¸Šè§’å®Œæˆ</p><ol><li>é¦–å…ˆç”¨å››ä¸ªå˜é‡å­˜å‚¨Açš„å·¦ä¸‹è§’çš„ä¸€åˆ—ã€‚</li><li>å†ç”¨å››ä¸ªå˜é‡å­˜å‚¨Bçš„å³ä¸Šè§’çš„ä¸€è¡Œã€‚</li><li>æŠŠå››ä¸ªå˜é‡å­˜å‚¨çš„Açš„å·¦ä¸‹è§’çš„ä¸€åˆ—ç§»åŠ¨åˆ°Bå³ä¸Šè§’çš„ä¸€è¡Œ</li><li>æŠŠå››ä¸ªå˜é‡å­˜å‚¨çš„Bçš„å³ä¸Šè§’çš„ä¸€è¡Œå¹³ç§»åˆ°Bå·¦ä¸‹è§’çš„ä¸€åˆ—</li><li>Bçš„å³ä¸‹è§’=Açš„å³ä¸‹è§’è½¬ç½®</li></ol><p>å…³é”®çš„æ“ä½œåœ¨ç¬¬äºŒæ­¥</p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span> (i = <span class="number">0</span>; i &lt; N; i += <span class="number">8</span>) &#123;</span><br><span class="line">    <span class="keyword">for</span> (j = <span class="number">0</span>; j &lt; M; j += <span class="number">8</span>) &#123;</span><br><span class="line">        <span class="keyword">for</span> (k = i; k &lt; i + <span class="number">4</span>; k++) &#123;</span><br><span class="line">            a0 = A[k][j];</span><br><span class="line">            a1 = A[k][j + <span class="number">1</span>];</span><br><span class="line">            a2 = A[k][j + <span class="number">2</span>];</span><br><span class="line">            a3 = A[k][j + <span class="number">3</span>];</span><br><span class="line">            a4 = A[k][j + <span class="number">4</span>];</span><br><span class="line">            a5 = A[k][j + <span class="number">5</span>];</span><br><span class="line">            a6 = A[k][j + <span class="number">6</span>];</span><br><span class="line">            a7 = A[k][j + <span class="number">7</span>];</span><br><span class="line"></span><br><span class="line">            B[j][k] = a0;</span><br><span class="line">            B[j + <span class="number">1</span>][k] = a1;</span><br><span class="line">            B[j + <span class="number">2</span>][k] = a2;</span><br><span class="line">            B[j + <span class="number">3</span>][k] = a3;</span><br><span class="line"></span><br><span class="line">            B[j][k + <span class="number">4</span>] = a4;</span><br><span class="line">            B[j + <span class="number">1</span>][k + <span class="number">4</span>] = a5;</span><br><span class="line">            B[j + <span class="number">2</span>][k + <span class="number">4</span>] = a6;</span><br><span class="line">            B[j + <span class="number">3</span>][k + <span class="number">4</span>] = a7;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">for</span> (l = j + <span class="number">4</span>; l &lt; j + <span class="number">8</span>; l++) &#123;</span><br><span class="line"></span><br><span class="line">            a4 = A[i + <span class="number">4</span>][l - <span class="number">4</span>]; <span class="comment">// A left-down col</span></span><br><span class="line">            a5 = A[i + <span class="number">5</span>][l - <span class="number">4</span>];</span><br><span class="line">            a6 = A[i + <span class="number">6</span>][l - <span class="number">4</span>];</span><br><span class="line">            a7 = A[i + <span class="number">7</span>][l - <span class="number">4</span>];</span><br><span class="line"></span><br><span class="line">            a0 = B[l - <span class="number">4</span>][i + <span class="number">4</span>]; <span class="comment">// B right-above line</span></span><br><span class="line">            a1 = B[l - <span class="number">4</span>][i + <span class="number">5</span>];</span><br><span class="line">            a2 = B[l - <span class="number">4</span>][i + <span class="number">6</span>];</span><br><span class="line">            a3 = B[l - <span class="number">4</span>][i + <span class="number">7</span>];</span><br><span class="line"></span><br><span class="line">            B[l - <span class="number">4</span>][i + <span class="number">4</span>] = a4; <span class="comment">// set B right-above line </span></span><br><span class="line">            B[l - <span class="number">4</span>][i + <span class="number">5</span>] = a5;</span><br><span class="line">            B[l - <span class="number">4</span>][i + <span class="number">6</span>] = a6;</span><br><span class="line">            B[l - <span class="number">4</span>][i + <span class="number">7</span>] = a7;</span><br><span class="line"></span><br><span class="line">            B[l][i] = a0;         <span class="comment">// set B left-down col</span></span><br><span class="line">            B[l][i + <span class="number">1</span>] = a1;</span><br><span class="line">            B[l][i + <span class="number">2</span>] = a2;</span><br><span class="line">            B[l][i + <span class="number">3</span>] = a3;</span><br><span class="line"></span><br><span class="line">            B[l][i + <span class="number">4</span>] = A[i + <span class="number">4</span>][l];</span><br><span class="line">            B[l][i + <span class="number">5</span>] = A[i + <span class="number">5</span>][l];</span><br><span class="line">            B[l][i + <span class="number">6</span>] = A[i + <span class="number">6</span>][l];</span><br><span class="line">            B[l][i + <span class="number">7</span>] = A[i + <span class="number">7</span>][l];</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æµ‹è¯•ç»“æœï¼š1171miss é€šè¿‡ã€‚</p><p>æ™®é€šçš„4x4åˆ†å—æ³•ä¼šæ˜¯è¿™æ ·çš„(ç®­å¤´è¡¨ç¤ºè¯»å…¥/å†™å…¥æ–¹å‘)</p><p><img src="/2021/computer-architecture-hitlabs/v2-46ad0a6f9238a15c56205ca80b5a08f3_r.jpg" alt="img"></p><p>ä½†æ˜¯è¿™æ ·æœ‰ä¸ªé—®é¢˜,å› ä¸ºæ¯é—´éš”4è¡Œ,cacheè¡Œå°±ä¼šè¢«è¦†ç›–,æ‰€ä»¥å†™å…¥bâ€™çš„æ—¶å€™å›é€ æˆä¸¥é‡çš„ç¼“å­˜æµªè´¹,æ‰€ä»¥æˆ‘ä»¬è€ƒè™‘ç°å°†bâ€™æ”¾åˆ°åŸcâ€™çš„ä½ç½®,ä¹Ÿå°±æ˜¯bâ€™å’Œcâ€™äº’æ¢ä½ç½®,ä¹‹åå†äº¤æ¢å›æ¥,å¦‚ä¸‹å›¾æ‰€ç¤º</p><p><img src="/2021/computer-architecture-hitlabs/v2-a6ea648f5be8b37d31098018447a434a_r.jpg" alt="img"></p><p>ä½†æ˜¯ä½¿ç”¨è¿™ç§æ–¹æ³•ä»ç„¶æ˜¯æ‹¿ä¸åˆ°æ»¡åˆ†çš„,è¿˜è¦ç»§ç»­è¿›è¡Œä¼˜åŒ–,æˆ‘ä»¬æƒ³åŠæ³•åœ¨å­˜å…¥câ€™çš„æ—¶å€™ç›´æ¥å°†bâ€™å¤åŸ,å¹¶ä¸”è¦åˆç†åˆ©ç”¨cache</p><p>æˆ‘ä»¬å¯ä»¥ä½¿ç”¨é€†åºå­˜å‚¨æ¥å®ç°è¿™ä¸€ç‚¹,å¦‚å›¾æ‰€ç¤º</p><ul><li>é€†åºå­˜æ”¾</li></ul><p><img src="/2021/computer-architecture-hitlabs/v2-f8a4f50fd07ec0e5cea7bd6aa3bf6266_r.jpg" alt="img"></p><ul><li>é€†åºè¯»å–</li></ul><p><img src="/2021/computer-architecture-hitlabs/v2-ec54f0eb4fb152c6e4e33e43d7256472_r.jpg" alt="img"></p><ul><li>æœ€ç»ˆ</li></ul><p><img src="/2021/computer-architecture-hitlabs/v2-04505f122f41b8ac5ace1d83710f6649_r.jpg" alt="img"></p><p>åŸå…ˆå­˜æ”¾çš„æ˜¯1,2,3,4çš„æ•°æ®,é€†åºå­˜å‚¨çš„è¯å°±å˜æˆäº†4,3,2,1ã€‚</p><p>é‚£ä¹ˆè¿™æ ·æœ‰ä»€ä¹ˆå¥½å¤„å‘¢?</p><ul><li>è€ƒè™‘ä¸€ä¸‹å¼€å§‹è¯»å…¥cæ—¶å€™çš„æƒ…å†µ</li></ul><p>æ­¤æ—¶cacheä¸­å­˜æ”¾æœ‰å…¨éƒ¨çš„bâ€™çš„æ•°æ®,<strong>å¦‚æœæ•°æ®ä¸æ˜¯é€†åºå­˜æ”¾çš„è¯</strong>,câ€™, dâ€™ç¬¬ä¸€è¡Œçš„ç¼“å­˜ä¼šè¦†ç›–æ‰bâ€™ç¬¬ä¸€è¡Œçš„ç¼“å­˜,æ­¤æ—¶å†è¯»å…¥bâ€™ç¬¬ä¸€è¡Œå‡†å¤‡æ”¾åˆ°câ€™ç¬¬ä¸€è¡Œæ—¶å°±ä¼šmissäº†ã€‚åæ­£,å¦‚<strong>æœæ•°æ®æ˜¯é€†åºå­˜æ”¾çš„è¯</strong>,å› ä¸ºåªè¦†ç›–äº†bâ€™ç¬¬ä¸€è¡Œçš„ç¼“å­˜,ä½†æ˜¯æˆ‘ä»¬è¦è¯»å…¥çš„æ˜¯bâ€™ç¬¬4è¡Œçš„æ•°æ®,è€Œbâ€™ç¬¬4è¡Œçš„æ•°æ®ä»ç„¶åœ¨ç¼“å­˜ä¸­,è¿™æ ·å°±èƒ½hitäº†ã€‚</p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">transpose_submit</span><span class="params">(<span class="keyword">int</span> M, <span class="keyword">int</span> N, <span class="keyword">int</span> A[N][M], <span class="keyword">int</span> B[M][N])</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">int</span> value0, value1, value2, value3, value4, value5, value6, value7;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; N; i += <span class="number">8</span>) &#123;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> j = <span class="number">0</span>; j &lt; M; j += <span class="number">8</span>) &#123;</span><br><span class="line">            <span class="keyword">for</span> (<span class="keyword">int</span> k = i; k &lt; i + <span class="number">4</span>; k++) &#123;</span><br><span class="line">                value0 = A[k][j];</span><br><span class="line">                value1 = A[k][j+<span class="number">1</span>];</span><br><span class="line">                value2 = A[k][j+<span class="number">2</span>];</span><br><span class="line">                value3 = A[k][j+<span class="number">3</span>];</span><br><span class="line">                value4 = A[k][j+<span class="number">4</span>];</span><br><span class="line">                value5 = A[k][j+<span class="number">5</span>];</span><br><span class="line">                value6 = A[k][j+<span class="number">6</span>];</span><br><span class="line">                value7 = A[k][j+<span class="number">7</span>];</span><br><span class="line"></span><br><span class="line">                <span class="comment">// a</span></span><br><span class="line">                B[j][k] = value0;</span><br><span class="line">                B[j+<span class="number">1</span>][k] = value1;</span><br><span class="line">                B[j+<span class="number">2</span>][k] = value2;</span><br><span class="line">                B[j+<span class="number">3</span>][k] = value3;</span><br><span class="line"></span><br><span class="line">                <span class="comment">// b é€†åºæ”¾ç½®</span></span><br><span class="line">                B[j+<span class="number">0</span>][k+<span class="number">4</span>] = value7;</span><br><span class="line">                B[j+<span class="number">1</span>][k+<span class="number">4</span>] = value6;</span><br><span class="line">                B[j+<span class="number">2</span>][k+<span class="number">4</span>] = value5;</span><br><span class="line">                B[j+<span class="number">3</span>][k+<span class="number">4</span>] = value4;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">for</span> (<span class="keyword">int</span> h = <span class="number">0</span>; h &lt; <span class="number">4</span>; h++) &#123;</span><br><span class="line">                value0 = A[i+<span class="number">4</span>][j+<span class="number">3</span>-h];</span><br><span class="line">                value1 = A[i+<span class="number">5</span>][j+<span class="number">3</span>-h];</span><br><span class="line">                value2 = A[i+<span class="number">6</span>][j+<span class="number">3</span>-h];</span><br><span class="line">                value3 = A[i+<span class="number">7</span>][j+<span class="number">3</span>-h];</span><br><span class="line">                value4 = A[i+<span class="number">4</span>][j+<span class="number">4</span>+h];</span><br><span class="line">                value5 = A[i+<span class="number">5</span>][j+<span class="number">4</span>+h];</span><br><span class="line">                value6 = A[i+<span class="number">6</span>][j+<span class="number">4</span>+h];</span><br><span class="line">                value7 = A[i+<span class="number">7</span>][j+<span class="number">4</span>+h];</span><br><span class="line"></span><br><span class="line">                <span class="comment">// b&#x27;åˆ°c&#x27;(å·¦ä¸‹è§’)</span></span><br><span class="line">                B[j+<span class="number">4</span>+h][i+<span class="number">0</span>] = B[j+<span class="number">3</span>-h][i+<span class="number">4</span>];</span><br><span class="line">                B[j+<span class="number">4</span>+h][i+<span class="number">1</span>] = B[j+<span class="number">3</span>-h][i+<span class="number">5</span>];</span><br><span class="line">                B[j+<span class="number">4</span>+h][i+<span class="number">2</span>] = B[j+<span class="number">3</span>-h][i+<span class="number">6</span>];</span><br><span class="line">                B[j+<span class="number">4</span>+h][i+<span class="number">3</span>] = B[j+<span class="number">3</span>-h][i+<span class="number">7</span>];</span><br><span class="line"></span><br><span class="line">                <span class="comment">// å­˜æ”¾c, d</span></span><br><span class="line">                B[j+<span class="number">3</span>-h][i+<span class="number">4</span>] = value0;</span><br><span class="line">                B[j+<span class="number">3</span>-h][i+<span class="number">5</span>] = value1;</span><br><span class="line">                B[j+<span class="number">3</span>-h][i+<span class="number">6</span>] = value2;</span><br><span class="line">                B[j+<span class="number">3</span>-h][i+<span class="number">7</span>] = value3;</span><br><span class="line">                B[j+<span class="number">4</span>+h][i+<span class="number">4</span>] = value4;</span><br><span class="line">                B[j+<span class="number">4</span>+h][i+<span class="number">5</span>] = value5;</span><br><span class="line">                B[j+<span class="number">4</span>+h][i+<span class="number">6</span>] = value6;</span><br><span class="line">                B[j+<span class="number">4</span>+h][i+<span class="number">7</span>] = value7;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>miss: 1243</p><p>å¦ä¸€ç§ä¼˜åŒ–æ–¹æ¡ˆï¼šï¼ˆå‚è€ƒ<a href="https://blog.csdn.net/weixin_45406155/article/details/112510369">å“ˆå·¥å¤§è®¡ç®—æœºç³»ç»Ÿå®éªŒå…­â€”â€”é«˜é€Ÿç¼“å†²å™¨æ¨¡æ‹Ÿ</a> &amp; <a href="https://zhuanlan.zhihu.com/p/28585726">CS:APPé…å¥—å®éªŒ4ï¼šCache Labç¬”è®°</a>)</p><p>è¿˜ç”¨8Ã—8çš„å—æ¥åšï¼Œé¢˜ç›®è¯´Aæ•°ç»„ä¸èƒ½å˜æ¢ï¼Œä½†æ˜¯è¯´Bæ•°ç»„å¯ä»¥ä»»æ„æ“ä½œå•Šã€‚æˆ‘ä»¬å¿…é¡»è¦ä¸€æ­¥åˆ°ä½å˜›ï¼Ÿå¯å¦è€ƒè™‘å…ˆæŠŠæ•°å­—ç§»åŠ¨åˆ°Bä¸­ï¼Œç„¶ååœ¨Bä¸­è‡ªå·±åšå˜åŒ–ã€‚</p><p>æ€è·¯ï¼šæ¯æ¬¡å¤„ç†ä¸€ä¸ªå—ï¼Œä¹Ÿå°±æ˜¯åƒ32x32é‚£æ ·å–å‡ºæ¯è¡Œçš„8ä¸ªå…ƒç´ ï¼Œç„¶åå°† æ¯è¡Œçš„0-3å·å…ƒç´ æ­£å¸¸çš„æ”¾åˆ°B[0-3][0]è¿™äº›ä½ç½®å»ï¼ˆä¹Ÿå°±æ˜¯æ­£å¸¸çš„è½¬ç½®),å‰©ä¸‹çš„å››ä¸ªå…ƒå…ˆæ”¾ç½®BçŸ©é˜µ4x4å—çš„æœ€å³è¾¹ä¿å­˜ï¼Œæ³¨æ„è¿™ä¸ªæ—¶å€™æˆ‘å·²ç»å–å‡ºæ¥äº†ã€‚ç„¶åå†ç”¨ä¸€ä¸ªå¾ªç¯å»æŠŠè¿™äº›å€¼æ”¾åˆ°Bæ­£ç¡®çš„ä½ç½®å»ï¼Œç„¶åA[4]åˆ°A[7]ä¹Ÿæ˜¯ä¸Šè¿°çš„å¤„ç†ã€‚å¯¹æ•´ä¸ªçŸ©é˜µé‡å¤è¿™ä¸ªæ“ä½œå³å¯ã€‚ç®€å•çš„ç¤ºæ„å›¾å¦‚ä¸‹ï¼š</p><p><img src="/2021/computer-architecture-hitlabs/20210112105734212.png" alt="img"></p><p><img src="/2021/computer-architecture-hitlabs/v2-85af81ad19187208673aacbb0cb42f69_r.jpg" alt="img"></p><p>ç”»çš„çº¿çš„åˆ†å‰²æ˜¯è¯»å…¥åˆ°Cacheä¸­çš„è¡Œä»¥åŠå†™å…¥åˆ°Bä¸­çš„é¡ºåºã€‚ï¼ˆç¬¬äºŒæ­¥æœ‰äº›ç”»é”™äº†ï¼ŒAå·¦ä¸‹è§’åº”è¯¥æ˜¯æŒ‰åˆ—å–æ•°æ®ï¼‰</p><ol><li><p>å…ˆè€ƒè™‘æŠŠAçš„ä¸ŠåŠéƒ¨åˆ†å­˜å…¥åˆ°Bï¼Œä½†æ˜¯ä¸ºäº†è€ƒè™‘Cacheä¸å†²çªï¼Œæ‰€ä»¥æŠŠå³ä¸Šè§’çš„4Ã—4çš„åŒºåŸŸä¹Ÿå­˜åœ¨Bçš„å³ä¸Šè§’ã€‚å¯¹äºåœ¨å¯¹è§’çº¿ä¸Šçš„å—ï¼ŒAçš„missç‡æ˜¯1/8ï¼ŒBçš„å·¦ä¸Šè§’éƒ¨åˆ†missç‡æ˜¯1/2ã€‚å¯¹äºä¸åœ¨å¯¹è§’çº¿ä¸Šçš„å—ï¼ŒAçš„missç‡è¿˜æ˜¯1/8ï¼ŒBå·¦ä¸Šè§’éƒ¨åˆ†çš„missç‡ä¸º1/4.</p></li><li><p>æ¥ä¸‹æ¥è¿™æ­¥æ˜¯å‡å°‘missç‡çš„å…³é”®ï¼ŒæŠŠAå·¦ä¸‹è§’çš„ä¸€åˆ—4ä¸ªæ•°æ®è¯»å‡ºï¼ŒBå³ä¸Šè§’çš„ä¸€è¡Œ4ä¸ªæ•°æ®è¯»å‡ºï¼Œéƒ½ç”¨intå˜é‡æš‚å­˜ï¼Œç„¶åæŠŠå‰å››ä¸ªå¡«å…¥Bå³ä¸Šè§’è¡Œä¸­ï¼Œåå››ä¸ªå¡«å…¥Bçš„å·¦ä¸‹è§’è¡Œä¸­ã€‚</p></li></ol><p>å› ä¸ºä»Bå³ä¸Šè§’è¯»å–çš„æ—¶å€™ï¼ŒæŠŠå—æ”¾å…¥äº†Cacheï¼Œç„¶åä»Aå¾€Bä¸­å¡«çš„æ—¶å€™ï¼Œå°±ä¸ä¼šå‡ºç°missæ“ä½œã€‚</p><ol start="3"><li>æœ€åä¸€æ­¥å°±æ˜¯æŠŠAçš„å³ä¸‹è§’å¡«å…¥Bçš„å³ä¸‹è§’ï¼Œå¯¹äºåœ¨å¯¹è§’çº¿ä¸Šçš„å—ï¼ŒAçš„missç‡ä¸º1/4ï¼ŒBçš„missç‡ä¸º1/2.ä¸åœ¨å¯¹è§’çº¿ä¸Šçš„å—ï¼ŒAï¼ŒBçš„missç‡éƒ½ä¸º0.</li></ol><p><img src="/2021/computer-architecture-hitlabs/20210112105745141.png" alt="img"></p><p><img src="/2021/computer-architecture-hitlabs/20210112105757204.png" alt="img"></p><h2 id="61-x-67"><a href="#61-x-67" class="headerlink" title="61 x 67"></a>61 x 67</h2><p>å°è¯•ä¸åŒçš„åˆ†å—ï¼Œ16*16å¯ä»¥è¾¾åˆ°è¦æ±‚ã€‚</p><p><img src="/2021/computer-architecture-hitlabs/image-20210529195537198.png" alt="image-20210529195537198"></p><p>ç»“æœï¼š</p><p><img src="/2021/computer-architecture-hitlabs/image-20210529200920477.png" alt="image-20210529200920477"></p><p>æˆ–è€…ï¼š</p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">transpose_submit</span><span class="params">(<span class="keyword">int</span> M, <span class="keyword">int</span> N, <span class="keyword">int</span> A[N][M], <span class="keyword">int</span> B[M][N])</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">int</span> i, j, k, a, b, c, d, e, f, g, h;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 48 * 48</span></span><br><span class="line">    <span class="keyword">for</span> (i = <span class="number">0</span>; i+<span class="number">16</span> &lt; N; i += <span class="number">16</span>) &#123;</span><br><span class="line">        <span class="keyword">for</span> (j = <span class="number">0</span>; j+<span class="number">16</span> &lt; M; j+=<span class="number">16</span>) &#123;</span><br><span class="line">            <span class="keyword">for</span> (k = i; k &lt; i+<span class="number">16</span>; k++) &#123;</span><br><span class="line">                a = A[k][j];</span><br><span class="line">                b = A[k][j+<span class="number">1</span>];</span><br><span class="line">                c = A[k][j+<span class="number">2</span>];</span><br><span class="line">                d = A[k][j+<span class="number">3</span>];</span><br><span class="line">                e = A[k][j+<span class="number">4</span>];</span><br><span class="line">                f = A[k][j+<span class="number">5</span>];</span><br><span class="line">                g = A[k][j+<span class="number">6</span>];</span><br><span class="line">                h = A[k][j+<span class="number">7</span>];</span><br><span class="line"></span><br><span class="line">                B[j+<span class="number">0</span>][k] = a;</span><br><span class="line">                B[j+<span class="number">1</span>][k] = b;</span><br><span class="line">                B[j+<span class="number">2</span>][k] = c;</span><br><span class="line">                B[j+<span class="number">3</span>][k] = d;</span><br><span class="line">                B[j+<span class="number">4</span>][k] = e;</span><br><span class="line">                B[j+<span class="number">5</span>][k] = f;</span><br><span class="line">                B[j+<span class="number">6</span>][k] = g;</span><br><span class="line">                B[j+<span class="number">7</span>][k] = h;</span><br><span class="line"></span><br><span class="line">                a = A[k][j+<span class="number">8</span>];</span><br><span class="line">                b = A[k][j+<span class="number">9</span>];</span><br><span class="line">                c = A[k][j+<span class="number">10</span>];</span><br><span class="line">                d = A[k][j+<span class="number">11</span>];</span><br><span class="line">                e = A[k][j+<span class="number">12</span>];</span><br><span class="line">                f = A[k][j+<span class="number">13</span>];</span><br><span class="line">                g = A[k][j+<span class="number">14</span>];</span><br><span class="line">                h = A[k][j+<span class="number">15</span>];</span><br><span class="line">                B[j+<span class="number">8</span>][k] = a;</span><br><span class="line">                B[j+<span class="number">9</span>][k] = b;</span><br><span class="line">                B[j+<span class="number">10</span>][k] = c;</span><br><span class="line">                B[j+<span class="number">11</span>][k] = d;</span><br><span class="line">                B[j+<span class="number">12</span>][k] = e;</span><br><span class="line">                B[j+<span class="number">13</span>][k] = f;</span><br><span class="line">                B[j+<span class="number">14</span>][k] = g;</span><br><span class="line">                B[j+<span class="number">15</span>][k] = h;</span><br><span class="line"></span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// å¤„ç†ä¸è§„åˆ™çš„éƒ¨åˆ†</span></span><br><span class="line">    <span class="keyword">for</span> (k = i; k &lt; N; k++) &#123;</span><br><span class="line">        <span class="keyword">for</span> (h = <span class="number">0</span>; h &lt; M; h++)&#123;</span><br><span class="line">            B[h][k] = A[k][h];</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">for</span> (k = <span class="number">0</span>; k &lt; i; k++) &#123;</span><br><span class="line">        <span class="keyword">for</span> (h = j; h &lt; M; h++) &#123;</span><br><span class="line">            B[h][k] = A[k][h];</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>miss: 1963</p><p>â€œå¯¹è§’çº¿â€çš„å…ƒç´ ï¼ˆæ¨ªåæ ‡ç­‰äºçºµåæ ‡ï¼‰è‚¯å®šè¿˜æ˜¯ä¼šå†²çªçš„ï¼ˆå…¶å®è¿™ä¸ªæ—¶å€™ä¸æ˜¯å¯¹è§’çº¿äº†ï¼Œå› ä¸ºä¸æ˜¯æ­£æ–¹å½¢ï¼‰ã€‚ï¼ˆå‚è€ƒ<a href="https://www.cnblogs.com/liqiuhao/p/8026100.html">CS:APP3e æ·±å…¥ç†è§£è®¡ç®—æœºç³»ç»Ÿ_3e CacheLabå®éªŒ</a>)</p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; N; i += <span class="number">16</span>)</span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> j = <span class="number">0</span>; j &lt; M; j += <span class="number">16</span>)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> k = i; k &lt; i + <span class="number">16</span> &amp;&amp; k &lt; N; ++k)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">int</span> temp_position = <span class="number">-1</span>;</span><br><span class="line">            <span class="keyword">int</span> temp_value = <span class="number">0</span>;</span><br><span class="line">            <span class="keyword">int</span> l;</span><br><span class="line">            <span class="keyword">for</span> (l = j; l &lt; j + <span class="number">16</span> &amp;&amp; l &lt; M; ++l)</span><br><span class="line">            &#123;</span><br><span class="line">                <span class="keyword">if</span> (l == k) <span class="comment">/* æ¨ªåæ ‡ç­‰äºçºµåæ ‡ï¼Œå±€éƒ¨å˜é‡æš‚å­˜ï¼Œæ•´ä¸ªblockè¯»å®Œå†å¤„ç† */</span></span><br><span class="line">                &#123;</span><br><span class="line">                    temp_position = k;</span><br><span class="line">                    temp_value = A[k][k];</span><br><span class="line">                &#125;</span><br><span class="line">                <span class="keyword">else</span></span><br><span class="line">                &#123;</span><br><span class="line">                    B[l][k] = A[k][l];</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">if</span> (temp_position != <span class="number">-1</span>) <span class="comment">/* é‡åˆ°äº†å†²çªå…ƒç´  */</span> </span><br><span class="line">            &#123;</span><br><span class="line">                B[temp_position][temp_position] = temp_value;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>miss: 1985</p><h1 id="Lab-7"><a href="#Lab-7" class="headerlink" title="Lab 7"></a>Lab 7</h1>]]></content>
    
    
    <summary type="html">&lt;p&gt;CSAPPç»å…¸å®éªŒä¸ªäººè§£ç­”ï¼Œå…±å…«ä¸ªã€‚&lt;/p&gt;</summary>
    
    
    
    <category term="ç³»ç»Ÿ" scheme="https://www.fvolcano.red/categories/%E7%B3%BB%E7%BB%9F/"/>
    
    
    <category term="å®éªŒ" scheme="https://www.fvolcano.red/tags/%E5%AE%9E%E9%AA%8C/"/>
    
  </entry>
  
  <entry>
    <title>Linux-0.11æ“ä½œç³»ç»Ÿå®éªŒ</title>
    <link href="https://www.fvolcano.red/2021/linux0.11-hitlabs/"/>
    <id>https://www.fvolcano.red/2021/linux0.11-hitlabs/</id>
    <published>2021-04-06T01:04:38.000Z</published>
    <updated>2021-04-06T01:04:38.000Z</updated>
    
    <content type="html"><![CDATA[<p>å“ˆå·¥å¤§æ“ä½œç³»ç»Ÿè¯¾ç¨‹å®éªŒè®°å½•ã€‚<a id="more"></a></p><p>ä¸»è¦å†…å®¹ä¸º</p><table><thead><tr><th align="center">ç¼–å·</th><th align="center">å®éªŒé¡¹ç›®</th><th align="center">å®éªŒå†…å®¹</th><th align="center">å®éªŒç›®çš„</th></tr></thead><tbody><tr><td align="center">å®éªŒä¸€</td><td align="center">ç³»ç»Ÿå¼•å¯¼</td><td align="center">ç¼–å†™bootsect.så’Œsetup.sï¼Œå®ç°ä¸€ä¸ªç®€å•çš„ç³»ç»Ÿå¼•å¯¼ã€‚</td><td align="center">æ·±å…¥è®¤è¯†ç³»ç»Ÿå¼•å¯¼è¿‡ç¨‹ï¼ŒæŒæ¡æ“ä½œç³»ç»Ÿå¼€å‘åŸºæœ¬è¿‡ç¨‹ã€‚</td></tr><tr><td align="center">å®éªŒäºŒ</td><td align="center">ç³»ç»Ÿè°ƒç”¨</td><td align="center">æ·»åŠ ä¸€ä¸ªç³»ç»Ÿè°ƒç”¨whoamiã€‚</td><td align="center">æ·±å…¥è®¤è¯†æ“ä½œç³»ç»Ÿæ¥å£çš„å·¥ä½œåŸç†ã€‚</td></tr><tr><td align="center">å®éªŒä¸‰</td><td align="center">è¿›ç¨‹è¿è¡Œè½¨è¿¹çš„è·Ÿè¸ª</td><td align="center">ç¼–å†™ç¨‹åºè·Ÿè¸ªè¿›ç¨‹çš„è¿è¡Œè½¨è¿¹ï¼Œä¸»è¦æ˜¯è¿›ç¨‹çš„çŠ¶æ€åˆ‡æ¢è¿‡ç¨‹ã€‚åŒæ—¶æ›¿æ¢ç°æœ‰çš„Linux 0.11è¿›ç¨‹è°ƒåº¦ç®—æ³•ï¼Œå¹¶å’Œç°æœ‰çš„è¿›ç¨‹è°ƒåº¦è¿›è¡Œå¯¹æ¯”ã€‚</td><td align="center">æ·±å…¥è®¤è¯†è¿›ç¨‹ï¼Œèƒ½é€šè¿‡å®é™…è¯•éªŒæ¥è¯„ä»·æ“ä½œç³»ç»Ÿæ€§èƒ½ã€‚</td></tr><tr><td align="center">å®éªŒå››</td><td align="center">ä¿¡å·é‡å®ç°å’Œåº”ç”¨</td><td align="center">åœ¨Linux 0.11ä¸Šå®ç°ä¿¡å·é‡ï¼Œå¹¶å®è·µMultiprogrammingã€‚</td><td align="center">ä½“ä¼šå¹¶å‘è¿›ç¨‹ï¼ŒæŒæ¡è¿›ç¨‹åŒæ­¥(äº’æ–¥)æŠ€æœ¯çš„å®ç°</td></tr><tr><td align="center">å®éªŒäº”</td><td align="center">Linux 0.11åœ°å€æ˜ å°„è·Ÿè¸ªä¸å…±äº«</td><td align="center">æ‰“å°Linux 0.11çš„åœ°å€æ˜ å°„è¿‡ç¨‹åˆ°logæ–‡ä»¶ä¸­ã€‚</td><td align="center">å®è·µé€»è¾‘åœ°å€ã€çº¿æ€§åœ°å€ã€ç‰©ç†åœ°å€ã€æ®µé¡µè¡¨ç­‰æ¦‚å¿µã€‚</td></tr><tr><td align="center">å®éªŒå…­</td><td align="center">æ§åˆ¶ç»ˆç«¯æ˜¾ç¤º</td><td align="center">ç‰¹æ®ŠæŒ‰é”®ä¿®æ”¹ç³»ç»ŸçŠ¶æ€ï¼Œå¹¶æ§åˆ¶æ˜¾ç¤º(å¦‚æŒ‰F1åæ€»æ˜¾ç¤º**)ã€‚</td><td align="center">æ·±å…¥è®¤è¯†è®¾å¤‡ç®¡ç†ï¼ŒæŒæ¡ç»ˆç«¯è®¾å¤‡é©±åŠ¨çš„å®ç°ã€‚</td></tr><tr><td align="center">å®éªŒä¸ƒ</td><td align="center">procæ–‡ä»¶ç³»ç»Ÿçš„å®ç°</td><td align="center">åœ¨Linux 0.11ä¸Šå®ç°ä¸€ä¸ªprocæ–‡ä»¶ç³»ç»Ÿï¼ŒåŠ¨æ€å¯Ÿçœ‹å†…æ ¸ã€‚</td><td align="center">ä½“ä¼šè™šæ‹Ÿæ–‡ä»¶ç³»ç»Ÿæ¦‚å¿µï¼ŒæŒæ¡æ–‡ä»¶ç³»ç»Ÿçš„å®ç°è¿‡ç¨‹ã€‚</td></tr><tr><td align="center">å®éªŒå…«</td><td align="center">åœ¨Linux 0.11ä¸Šå®ç°äº¤æ¢åˆ†åŒºå’Œå…¨å±€é¡µé¢ç½®æ¢</td><td align="center">åœ¨Linux 0.11ä¸Šå®Œæ•´çš„è™šæ‹Ÿå†…å­˜ï¼Œä¸»è¦æ˜¯å®ç°å…¨å±€çš„é¡µé¢ç½®æ¢å’Œäº¤æ¢åˆ†åŒºè®¾å¤‡çš„ç®¡ç†ï¼Œå¹¶å°†è¿™ä¸¤ä¸ªæ¨¡å—æ”¾å…¥ç³»ç»Ÿã€‚</td><td align="center">ç›¸æ¯”å‰é¢çš„å®éªŒè€Œè¨€ï¼Œæœ¬å®éªŒè¾ƒéš¾ã€‚å°†å…¨é¢åŠ æ·±è¿›ç¨‹ã€è™šå­˜ã€ç£ç›˜ã€ä¸­æ–­çš„è®¤è¯†ï¼Œå¯¹OSçš„ç³»ç»Ÿæ€§è·å¾—ç›´æ¥ç»éªŒã€‚</td></tr></tbody></table><h1 id="å®éªŒç¯å¢ƒ"><a href="#å®éªŒç¯å¢ƒ" class="headerlink" title="å®éªŒç¯å¢ƒ"></a>å®éªŒç¯å¢ƒ</h1><p>è¯¾ç¨‹æä¾›çº¿ä¸Šç¯å¢ƒ <a href="https://www.lanqiao.cn/courses/115">è“æ¡¥-æ“ä½œç³»ç»ŸåŸç†ä¸å®è·µ</a>ã€‚å› ä¸ºæ“ä½œè¿‡ç¨‹ä¸­å‡ºç°äº†ä¸€äº›é—®é¢˜ï¼Œæˆ‘æ”¹ç”¨è™šæ‹Ÿæœºã€‚</p><ul><li>Ubuntu 18.04</li><li>Bochs</li><li>gcc-3.4 (å‚è€ƒèµ„æ–™ç¬¬ä¸€ä¸ªgithubä¸­å¯ä¸‹è½½)</li><li>vim</li><li>hit-oslab-linux.tar.gz (å‚è€ƒèµ„æ–™ç¬¬ä¸€ä¸ªgithubä¸­å¯ä¸‹è½½)</li></ul><p>å®éªŒçš„åŸºæœ¬æµç¨‹æ˜¯æ ¹æ®å®éªŒè¦æ±‚ç¼–å†™åº”ç”¨ç¨‹åºã€ä¿®æ”¹ Linux 0.11 çš„æºä»£ç ï¼Œç”¨ gcc ç¼–è¯‘åï¼Œåœ¨ Bochs çš„è™šæ‹Ÿç¯å¢ƒä¸­è¿è¡Œã€è°ƒè¯•ç›®æ ‡ä»£ç ã€‚</p><blockquote><p>Bochs æ˜¯ä¸€ä¸ªå…è´¹ä¸”å¼€æ”¾æºä»£ç çš„ IA-32ï¼ˆx86ï¼‰æ¶æ„ PC æœºæ¨¡æ‹Ÿå™¨ã€‚åœ¨å®ƒæ¨¡æ‹Ÿå‡ºçš„ç¯å¢ƒä¸­å¯ä»¥è¿è¡Œ Linuxã€DOS å’Œå„ç§ç‰ˆæœ¬çš„ Windows ç­‰å¤šç§æ“ä½œç³»ç»Ÿã€‚ä¸”Bochs æœ¬èº«å…·æœ‰å¾ˆé«˜çš„ç§»æ¤æ€§ï¼Œå¯ä»¥è¿è¡Œåœ¨å¤šç§è½¯ç¡¬ä»¶å¹³å°ä¹‹ä¸Šã€‚</p></blockquote><p>hit-oslab-linux.tar.gz è§£å‹åæœ‰ï¼š</p><p><img src="/2021/linux0.11-hitlabs/1.png" alt="hit-oslab-linux.tar.gzè§£å‹åå†…å®¹"></p><ul><li>bochs ç›®å½•</li></ul><p>bochs ç›®å½•ä¸‹æ˜¯ä¸ bochs ç›¸å…³çš„æ‰§è¡Œæ–‡ä»¶ã€æ•°æ®æ–‡ä»¶å’Œé…ç½®æ–‡ä»¶ã€‚</p><ul><li>run è„šæœ¬</li></ul><p>run æ˜¯è¿è¡Œ bochs çš„è„šæœ¬å‘½ä»¤ã€‚</p><p>è¿è¡Œå bochs ä¼šè‡ªåŠ¨åœ¨å®ƒçš„è™šæ‹Ÿè½¯é©± A å’Œè™šæ‹Ÿç¡¬ç›˜ä¸Šå„æŒ‚è½½ä¸€ä¸ªé•œåƒæ–‡ä»¶ï¼Œè½¯é©±ä¸ŠæŒ‚è½½æ˜¯ linux-0.11/Imageï¼Œç¡¬ç›˜ä¸ŠæŒ‚è½½çš„æ˜¯ hdc-0.11.imgã€‚</p><p>å› ä¸º bochs é…ç½®æ–‡ä»¶ä¸­çš„è®¾ç½®æ˜¯ä»è½¯é©± A å¯åŠ¨ï¼Œæ‰€ä»¥ Linux 0.11 ä¼šè¢«è‡ªåŠ¨åŠ è½½ã€‚è€Œ Linux 0.11 ä¼šé©±åŠ¨ç¡¬ç›˜ï¼Œå¹¶ mount ç¡¬ç›˜ä¸Šçš„æ–‡ä»¶ç³»ç»Ÿï¼Œä¹Ÿå°±æ˜¯å°† hdc-0.11.img å†…é•œåƒçš„æ–‡ä»¶ç³»ç»ŸæŒ‚è½½åˆ° 0.11 ç³»ç»Ÿå†…çš„æ ¹ç›®å½• â€”â€” <code>/</code>ã€‚åœ¨ 0.11 ä¸‹è®¿é—®æ–‡ä»¶ç³»ç»Ÿï¼Œè®¿é—®çš„å°±æ˜¯ hdc-0.11.img æ–‡ä»¶å†…è™šæ‹Ÿçš„æ–‡ä»¶ç³»ç»Ÿã€‚</p><ul><li>hdc-0.11.img æ–‡ä»¶</li></ul><p>hdc-0.11.img æ–‡ä»¶çš„æ ¼å¼æ˜¯ Minix æ–‡ä»¶ç³»ç»Ÿçš„é•œåƒã€‚</p><p>Linux æ‰€æœ‰ç‰ˆæœ¬éƒ½æ”¯æŒè¿™ç§æ ¼å¼çš„æ–‡ä»¶ç³»ç»Ÿï¼Œæ‰€ä»¥å¯ä»¥ç›´æ¥åœ¨å®¿ä¸» Linux ä¸Šé€šè¿‡ mount å‘½ä»¤è®¿é—®æ­¤æ–‡ä»¶å†…çš„æ–‡ä»¶ï¼Œè¾¾åˆ°å®¿ä¸»ç³»ç»Ÿå’Œ bochs å†…è¿è¡Œçš„ Linux 0.11 ä¹‹é—´äº¤æ¢æ–‡ä»¶çš„æ•ˆæœã€‚</p><p>Windows ä¸‹ç›®å‰æ²¡æœ‰ï¼ˆæˆ–è€…æ˜¯è¿˜æ²¡å‘ç°ï¼‰ç›´æ¥è®¿é—® Minix æ–‡ä»¶ç³»ç»Ÿçš„åŠæ³•ï¼Œæ‰€ä»¥è¦å€ŸåŠ©äº fdb.imgï¼Œè¿™æ˜¯ä¸€ä¸ª 1.44M è½¯ç›˜çš„é•œåƒæ–‡ä»¶ï¼Œå†…éƒ¨æ˜¯ FAT12 æ–‡ä»¶ç³»ç»Ÿã€‚å°†å®ƒæŒ‚è½½åˆ° bochs çš„è½¯é©± Bï¼Œå°±å¯ä»¥åœ¨ 0.11 ä¸­è®¿é—®å®ƒã€‚è€Œé€šè¿‡ filedisk æˆ–è€… WinImageï¼Œå¯ä»¥åœ¨ Windows ä¸‹è®¿é—®å®ƒå†…éƒ¨çš„æ–‡ä»¶ã€‚</p><p>hdc-0.11.img å†…åŒ…å«æœ‰ï¼š</p><ul><li>Bash shellï¼›</li><li>ä¸€äº›åŸºæœ¬çš„ Linux å‘½ä»¤ã€å·¥å…·ï¼Œæ¯”å¦‚ cpã€rmã€mvã€tarï¼›</li><li>vi ç¼–è¾‘å™¨ï¼›</li><li>gcc 1.4 ç¼–è¯‘å™¨ï¼Œå¯ç”¨æ¥ç¼–è¯‘æ ‡å‡† C ç¨‹åºï¼›</li><li>as86 å’Œ ld86ï¼›</li><li>Linux 0.11 çš„æºä»£ç ï¼Œå¯åœ¨ 0.11 ä¸‹ç¼–è¯‘ï¼Œç„¶åè¦†ç›–ç°æœ‰çš„äºŒè¿›åˆ¶å†…æ ¸ã€‚</li></ul><p>é™¤æ­¤ä¹‹å¤–ï¼Œè¿˜éœ€è¦å®‰è£… gcc-3.4ã€‚å› ä¸ºLinux-0.11ä¸èƒ½åœ¨gcc 4.xç‰ˆæœ¬ç¼–è¯‘ï¼Œæ‰€ä»¥è¦è£…è€ä¸€ç‚¹å„¿çš„ç¼–è¯‘å™¨ã€‚</p><p>åœ¨Ubuntu 9.04(jaunty)åŠä¹‹å‰ï¼Œç”¨ä¸‹é¢å‘½ä»¤å®‰è£…ï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> sudo apt-get install gcc-3.4</span></span><br></pre></td></tr></table></figure><p>åœ¨Ubuntu 9.10(karmic)åŠä¹‹å:</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> tar -zxvf gcc-3.4-ubuntu.tar.gz</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> <span class="built_in">cd</span> gcc-3.4</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> sudo ./inst.sh XXX  <span class="comment"># i386 or amd64</span></span></span><br></pre></td></tr></table></figure><blockquote><p>è§£å‹gcc-3.4æ—¶å‡ºç°é”™è¯¯ï¼š</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">gzip: stdin: unexpected end of file</span><br><span class="line">tar: Unexpected EOF <span class="keyword">in</span> archive</span><br><span class="line">tar: Unexpected EOF <span class="keyword">in</span> archive</span><br><span class="line">tar: Error is not recoverable: exiting now</span><br></pre></td></tr></table></figure><p>è§£å†³æ–¹æ¡ˆï¼š</p><ol><li>ä¸‹è½½å¤±è´¥ï¼Œä¸¢å¤±å†…å®¹ï¼šé‡æ–°ä¸‹è½½è§£å‹ã€‚<br>the error youâ€™re getting is usually due to an incomplete download. The archive ends before the expected footer of the gzipped file. It will probably work fine if you just download it again.</li><li>åœ¨windowsä¸‹è§£å‹å¥½åå†æ‹–è¿›Ubuntuã€‚</li><li>tar.gz æ–‡ä»¶åæ˜¯å¦å«æœ‰éæ³•å­—ç¬¦ã€‚</li></ol></blockquote><h1 id="å‚è€ƒèµ„æ–™"><a href="#å‚è€ƒèµ„æ–™" class="headerlink" title="å‚è€ƒèµ„æ–™"></a>å‚è€ƒèµ„æ–™</h1><ul><li><p>è¯¾ç¨‹èµ„æ–™ <a href="https://www.bilibili.com/video/av51437944">æ“ä½œç³»ç»Ÿ-å“ˆå·¥å¤§ææ²»å†›è€å¸ˆ</a></p></li><li><p><a href="https://github.com/hoverwinter/HIT-OSLab">githubå®éªŒä»£ç </a></p></li><li><p><a href="https://hoverwinter.gitbooks.io/hit-oslab-manual/content/">å“ˆå·¥å¤§æ“ä½œç³»ç»Ÿå®éªŒæ‰‹å†Œ</a> (FAQ)</p></li><li><p><a href="https://blog.csdn.net/weixin_43166958/article/details/104223425">å¾æ­¥å°å…µçš„å®éªŒæ€»ç»“</a></p></li><li><p>linux-0.11 å†…æ ¸å®Œå…¨æ³¨é‡Š v3.0 / linux-0.12 by èµµç‚¯</p></li></ul><p>æ³¨ï¼šå®éªŒä¸­ç”¨æ ‡è®°ä¸º</p><blockquote></blockquote><p>ä¸ºè¿‡ç¨‹ä¸­å‡ºç°çš„é—®é¢˜ã€‚</p><h1 id="ç†Ÿæ‚‰å®éªŒç¯å¢ƒ"><a href="#ç†Ÿæ‚‰å®éªŒç¯å¢ƒ" class="headerlink" title="ç†Ÿæ‚‰å®éªŒç¯å¢ƒ"></a>ç†Ÿæ‚‰å®éªŒç¯å¢ƒ</h1><h2 id="1-ç¼–è¯‘å†…æ ¸"><a href="#1-ç¼–è¯‘å†…æ ¸" class="headerlink" title="1. ç¼–è¯‘å†…æ ¸"></a>1. ç¼–è¯‘å†…æ ¸</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> <span class="built_in">cd</span> ./oslab/linux-0.11/</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> make all</span></span><br></pre></td></tr></table></figure><p>åªè¦æœ€åæ²¡æœ‰å‡ºç°errorå°±è¯´æ˜ç¼–è¯‘æˆåŠŸã€‚</p><p>linux-0.11ç›®å½•ä¸‹æ˜¯å…¨éƒ¨çš„æºä»£ç ï¼Œå®éªŒå†…å®¹é ä¿®æ”¹è¿™äº›ä»£ç æ¥å®Œæˆã€‚ä¿®æ”¹åéœ€è¦é‡æ–°ç¼–è¯‘å†…æ ¸ï¼Œè¿˜æ˜¯æ‰§è¡Œå‘½ä»¤ï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> make all</span></span><br></pre></td></tr></table></figure><p>å¦‚æœé‡æ–°ç¼–è¯‘åï¼Œä½ çš„ä¿®æ”¹è²Œä¼¼æ²¡æœ‰ç”Ÿæ•ˆï¼Œå¯ä»¥è¯•è¯•å…ˆâ€œmake cleanâ€ï¼Œå†â€œmake allâ€ã€‚â€œmake cleanâ€æ˜¯åˆ é™¤ä¸Šä¸€æ¬¡ç¼–è¯‘ç”Ÿæˆçš„æ‰€æœ‰ä¸­é—´æ–‡ä»¶å’Œç›®æ ‡æ–‡ä»¶ï¼Œç¡®ä¿æ˜¯åœ¨å…¨æ–°çš„çŠ¶æ€ä¸‹ç¼–è¯‘æ•´ä¸ªå·¥ç¨‹ã€‚</p><h2 id="2-è¿è¡Œä¸è°ƒè¯•"><a href="#2-è¿è¡Œä¸è°ƒè¯•" class="headerlink" title="2. è¿è¡Œä¸è°ƒè¯•"></a>2. è¿è¡Œä¸è°ƒè¯•</h2><p>åœ¨Bochsä¸­è¿è¡Œæœ€æ–°ç¼–è¯‘å¥½çš„å†…æ ¸å¾ˆç®€å•ï¼Œåœ¨oslabç›®å½•ä¸‹æ‰§è¡Œï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> ./run</span></span><br></pre></td></tr></table></figure><p>å¦‚æœå‡ºç°Bochsçš„çª—å£ï¼Œé‡Œé¢æ˜¾ç¤ºlinuxçš„å¼•å¯¼è¿‡ç¨‹ï¼Œæœ€ååœæ­¢åœ¨<code>[/usr/root/]#</code>ï¼Œè¡¨ç¤ºè¿è¡ŒæˆåŠŸã€‚</p><p><img src="/2021/linux0.11-hitlabs/2.png" alt="Bochs"></p><blockquote><p>æ‰§è¡Œæ—¶å‡ºç°é”™è¯¯ï¼š</p><p>./bochs/bochs-gdb: error while loading shared libraries: libSM.so.6: cannot open shared object file: No such file or directory</p><p>è§£å†³æ–¹æ¡ˆï¼š<a href="https://blog.csdn.net/qq_40758751/article/details/88707214">https://blog.csdn.net/qq_40758751/article/details/88707214</a></p></blockquote><p>å†…æ ¸è°ƒè¯•åˆ†ä¸ºä¸¤ç§æ¨¡å¼ï¼šæ±‡ç¼–çº§è°ƒè¯•å’Œ C è¯­è¨€çº§è°ƒè¯•ã€‚</p><h4 id="ï¼ˆ1ï¼‰æ±‡ç¼–çº§è°ƒè¯•"><a href="#ï¼ˆ1ï¼‰æ±‡ç¼–çº§è°ƒè¯•" class="headerlink" title="ï¼ˆ1ï¼‰æ±‡ç¼–çº§è°ƒè¯•"></a>ï¼ˆ1ï¼‰æ±‡ç¼–çº§è°ƒè¯•</h4><p>æ±‡ç¼–çº§è°ƒè¯•éœ€è¦æ‰§è¡Œå‘½ä»¤ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># ç¡®è®¤åœ¨ oslab ç›®å½•ä¸‹</span></span><br><span class="line">$ <span class="built_in">cd</span> ~/oslab/</span><br><span class="line"></span><br><span class="line"><span class="comment"># è¿è¡Œè„šæœ¬å‰ç¡®å®šå·²ç»å…³é—­åˆšåˆšè¿è¡Œçš„ Bochs</span></span><br><span class="line">$ ./dbg-asm</span><br></pre></td></tr></table></figure><blockquote><p>æ±‡ç¼–çº§è°ƒè¯•çš„å¯åŠ¨ä¹‹å Bochs æ˜¯é»‘å±ï¼Œè¿™æ˜¯æ­£å¸¸çš„ã€‚</p></blockquote><p>å¯ä»¥ç”¨å‘½ä»¤ <code>help</code> æ¥æŸ¥çœ‹è°ƒè¯•ç³»ç»Ÿç”¨çš„åŸºæœ¬å‘½ä»¤ã€‚æ›´è¯¦ç»†çš„ä¿¡æ¯è¯·æŸ¥é˜… Bochs ä½¿ç”¨æ‰‹å†Œã€‚</p><p><img src="https://doc.shiyanlou.com/courses/uid977658-20190618-1560852351872" alt="å›¾ç‰‡æè¿°"></p><h4 id="ï¼ˆ2ï¼‰C-è¯­è¨€çº§è°ƒè¯•"><a href="#ï¼ˆ2ï¼‰C-è¯­è¨€çº§è°ƒè¯•" class="headerlink" title="ï¼ˆ2ï¼‰C è¯­è¨€çº§è°ƒè¯•"></a>ï¼ˆ2ï¼‰C è¯­è¨€çº§è°ƒè¯•</h4><p>C è¯­è¨€çº§è°ƒè¯•ç¨å¾®å¤æ‚ä¸€äº›ã€‚é¦–å…ˆæ‰§è¡Œå¦‚ä¸‹å‘½ä»¤ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ <span class="built_in">cd</span> ~/oslab</span><br><span class="line">$ ./dbg-c</span><br></pre></td></tr></table></figure><p><strong>ç„¶åå†æ‰“å¼€ä¸€ä¸ªç»ˆç«¯çª—å£</strong>ï¼Œæ‰§è¡Œï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ <span class="built_in">cd</span> ~/oslab</span><br><span class="line">$ ./rungdb</span><br></pre></td></tr></table></figure><blockquote><p>æ³¨æ„ï¼šå¯åŠ¨çš„é¡ºåºä¸èƒ½äº¤æ¢ï¼Œå¦åˆ™ gdb æ— æ³•è¿æ¥ã€‚</p></blockquote><p>å‡ºç°ä¸‹å›¾æ‰€ç¤ºçš„æç¤ºï¼Œæ‰è¯´æ˜è¿æ¥æˆåŠŸï¼š</p><p><img src="https://doc.shiyanlou.com/courses/uid977658-20190618-1560853330438" alt="å›¾ç‰‡æè¿°"></p><p>æ–°ç»ˆç«¯çª—å£ä¸­è¿è¡Œçš„æ˜¯ GDB è°ƒè¯•å™¨ã€‚å…³äº gdb è°ƒè¯•å™¨è¯·æŸ¥é˜… GDB ä½¿ç”¨æ‰‹å†Œã€‚</p><h2 id="3-æ–‡ä»¶äº¤æ¢"><a href="#3-æ–‡ä»¶äº¤æ¢" class="headerlink" title="3. æ–‡ä»¶äº¤æ¢"></a>3. æ–‡ä»¶äº¤æ¢</h2><blockquote><p>å¼€å§‹è®¾ç½®æ–‡ä»¶äº¤æ¢ä¹‹å‰ï¼ŒåŠ¡å¿…å…³é—­æ‰€æœ‰çš„ Bochs è¿›ç¨‹ã€‚</p></blockquote><p>oslab ä¸‹çš„ <code>hdc-0.11-new.img</code> æ˜¯ 0.11 å†…æ ¸å¯åŠ¨åçš„æ ¹æ–‡ä»¶ç³»ç»Ÿé•œåƒæ–‡ä»¶ï¼Œç›¸å½“äºåœ¨ bochs è™šæ‹Ÿæœºé‡Œè£…è½½çš„ç¡¬ç›˜ã€‚åœ¨ Ubuntu ä¸Šè®¿é—®å…¶å†…å®¹çš„æ–¹æ³•æ˜¯ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">$ <span class="built_in">cd</span> ~/oslab/</span><br><span class="line"></span><br><span class="line"><span class="comment"># å¯åŠ¨æŒ‚è½½è„šæœ¬</span></span><br><span class="line">$ sudo ./mount-hdc</span><br></pre></td></tr></table></figure><p>ä¹‹åï¼Œhdc ç›®å½•ä¸‹å°±æ˜¯å’Œ 0.11 å†…æ ¸ä¸€æ¨¡ä¸€æ ·çš„æ–‡ä»¶ç³»ç»Ÿäº†ï¼Œå¯ä»¥è¯»å†™ä»»ä½•æ–‡ä»¶ï¼ˆå¯èƒ½æœ‰äº›æ–‡ä»¶è¦ç”¨ sudo æ‰èƒ½è®¿é—®ï¼‰ã€‚</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># è¿›å…¥æŒ‚è½½åˆ° Ubuntu ä¸Šçš„ç›®å½•</span></span><br><span class="line">$ <span class="built_in">cd</span> ~/oslab/hdc</span><br><span class="line"></span><br><span class="line"><span class="comment"># æŸ¥çœ‹å†…å®¹</span></span><br><span class="line">$ ls -al</span><br></pre></td></tr></table></figure><p>è¯»å†™å®Œæ¯•ï¼Œä¸è¦å¿˜äº†å¸è½½è¿™ä¸ªæ–‡ä»¶ç³»ç»Ÿï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">$ <span class="built_in">cd</span> ~/oslab/</span><br><span class="line"></span><br><span class="line"><span class="comment"># å¸è½½</span></span><br><span class="line">$ sudo umount hdc</span><br></pre></td></tr></table></figure><p>ç»è¿‡ <code>sudo ./mount-hdc</code> è¿™æ ·å¤„ç†ä»¥åï¼Œæˆ‘ä»¬å¯ä»¥åœ¨ Ubuntu çš„ hdc ç›®å½•ä¸‹åˆ›å»ºä¸€ä¸ª xxx.c æ–‡ä»¶ï¼Œç„¶ååˆ©ç”¨ Ubuntu ä¸Šçš„ç¼–è¾‘å·¥å…·ï¼ˆå¦‚ gedit ç­‰ï¼‰å®ç°å¯¹ xxx.c æ–‡ä»¶çš„ç¼–è¾‘å·¥ä½œï¼Œåœ¨ç¼–è¾‘ä¿å­˜ä»¥åã€‚</p><p>æ‰§è¡Œ <code>sudo umount hdc</code> åï¼Œå†è¿›å…¥ Linux 0.11ï¼ˆå³ run å¯åŠ¨ bochs ä»¥åï¼‰å°±ä¼šçœ‹åˆ°è¿™ä¸ª xxx.cï¼ˆå³å¦‚ä¸‹å›¾æ‰€ç¤ºï¼‰ï¼Œè¿™æ ·å°±é¿å…äº†åœ¨ Linux 0.11 ä¸Šè¿›è¡Œç¼–è¾‘ xxx.c çš„éº»çƒ¦ï¼Œå› ä¸º Linux 0.11 ä½œä¸ºä¸€ä¸ªå¾ˆå°çš„æ“ä½œç³»ç»Ÿï¼Œå…¶ä¸Šçš„ç¼–è¾‘å·¥å…·åªæœ‰ viï¼Œä½¿ç”¨èµ·æ¥éå¸¸ä¸ä¾¿ã€‚</p><p><img src="https://doc.shiyanlou.com/userid19614labid568time1423993300541" alt="ç”¨ Ubuntu å’Œ Linux 0.11 å®Œæˆæ–‡ä»¶äº¤æ¢ä»¥åå†å¯åŠ¨ Linux 0.11 ä»¥å"></p><p>å¦å¤–åœ¨ Linux 0.11 ä¸Šäº§ç”Ÿçš„æ–‡ä»¶ï¼Œå¦‚åé¢å®éªŒä¸­äº§ç”Ÿçš„ <code>process.log</code> æ–‡ä»¶ï¼Œå¯ä»¥æŒ‰è¿™ç§æ–¹å¼ â€œæ”¾åˆ°â€ Ubuntu ä¸‹ç”¨ python ç¨‹åºè¿›è¡Œå¤„ç†ï¼Œå½“ç„¶è¿™ä¸ª python ç¨‹åºåœ¨ Linux 0.11 ä¸Šæ˜¾ç„¶æ˜¯ä¸å¥½ä½¿çš„ï¼Œå› ä¸º Linux 0.11 ä¸Šæ­å»ºä¸äº† python è§£é‡Šç¯å¢ƒã€‚</p><blockquote><p>æ³¨æ„ 1ï¼šä¸è¦åœ¨ 0.11 å†…æ ¸è¿è¡Œçš„æ—¶å€™ mount é•œåƒæ–‡ä»¶ï¼Œå¦åˆ™å¯èƒ½ä¼šæŸåæ–‡ä»¶ç³»ç»Ÿã€‚åŒç†ï¼Œä¹Ÿä¸è¦åœ¨å·²ç» mount çš„æ—¶å€™è¿è¡Œ 0.11 å†…æ ¸ã€‚</p><p>æ³¨æ„ 2ï¼šåœ¨å…³é—­ Bochs ä¹‹å‰ï¼Œéœ€è¦å…ˆåœ¨ 0.11 çš„å‘½ä»¤è¡Œè¿è¡Œ â€œsyncâ€ï¼Œç¡®ä¿æ‰€æœ‰ç¼“å­˜æ•°æ®éƒ½å­˜ç›˜åï¼Œå†å…³é—­ Bochsã€‚</p></blockquote><h2 id="FAQ"><a href="#FAQ" class="headerlink" title="FAQ"></a>FAQ</h2><p>Q: ä¸ºä½•æœ‰æ—¶Bochsçš„å…‰æ ‡é—ªåŠ¨ï¼Œå´ä¸å“åº”æˆ‘çš„è¾“å…¥ï¼Ÿ</p><p>A: æŒ‰ä¸€ä¸‹Altï¼Œç„¶åå†è¯•è¯•ã€‚ å¦‚æœä½ ä¹ æƒ¯ç”¨Alt+Tabåˆ‡æ¢çª—å£ï¼Œå°±è‚¯å®šä¼šé‡åˆ°è¿™ä¸ªé—®é¢˜ã€‚åŸå› æ˜¯åœ¨Bochsçª—å£æŒ‰ä¸‹Altï¼ŒBochsä¼šæ¥æ”¶åˆ°AltæŒ‰ä¸‹çš„äº‹ä»¶ï¼Œç„¶åå°†æ­¤äº‹ä»¶ä¼ ç»™Linux 0.11ã€‚å¾…å†æŒ‰ä¸‹Tabæ—¶ï¼Œä¸»æœºæ“ä½œç³»ç»Ÿç»åˆ¤æ–­è®¤å®šè¿™æ˜¯ä¸€ä¸ªåˆ‡æ¢çª—å£çš„å¿«æ·é”®ï¼Œäºæ˜¯ç›´æ¥åˆ‡æ¢çª—å£ï¼ŒTabå’ŒAltæŠ¬èµ·çš„äº‹ä»¶éƒ½ä¸ä¼šå†å‘ç»™Bochsã€‚ç­‰åˆ‡æ¢ä¼šBochsï¼ŒLinux 0.11æ­¤æ—¶è¿˜å¤„äºè®¤ä¸ºAltå·²æŒ‰ä¸‹çš„çŠ¶æ€ï¼Œå†æŒ‰ä»»ä½•æŒ‰é”®éƒ½è¢«è§£é‡Šæˆæ˜¯å’ŒAltç»„åˆçš„æŒ‰é”®ï¼Œæ‰€ä»¥å°±â€œå¥½åƒâ€ä¸å“åº”äº†ï¼ˆæŒ‰æ•°å­—é”®å¯ä»¥çœ‹åˆ°å®ƒçš„å“åº”ï¼‰ã€‚</p><p>Q: æ€æ ·åŠ å¿«make cleanã€make allçš„é€Ÿåº¦ï¼Ÿ</p><p>A: å¦‚æœåªä¿®æ”¹äº†kernelç›®å½•ä¸‹çš„æ–‡ä»¶ï¼Œåˆ é™¤kernelç›®å½•ä¸‹çš„kernel.oï¼Œç„¶åç›´æ¥makeå°±è¡Œäº†ã€‚å…¶å®ƒç›®å½•æ–¹æ³•ç±»ä¼¼ã€‚</p><p>Q: Bochså±å¹•ä¹±äº†æ€ä¹ˆåŠï¼Ÿ</p><p>A: è¿™æ˜¯Linuxçš„ç»ˆç«¯æ§åˆ¶å’ŒBochsè™šæ‹Ÿçš„ç»ˆç«¯ä¹‹é—´é…åˆä¸å¥½å¯¼è‡´çš„ï¼Œä¸€èˆ¬åœ¨å¤§é‡è¾“å‡ºä¿¡æ¯åï¼Œä¼šå‡ºç°æ··ä¹±ï¼Œç”šè‡³å¾ˆåƒæ­»æœºã€‚æ­¤æ—¶æŒ‰ctrl+lå¯ä»¥ç¼“è§£ä¸€ä¸‹ã€‚æœ€å¥½æ˜¯ç”¨è¾“å‡ºé‡å®šå‘åŠŸèƒ½å°†è¾“å‡ºéƒ½é‡å®šå‘åˆ°ä¸€ä¸ªæ–‡ä»¶ï¼Œç„¶åç”¨viçœ‹ã€‚</p><h1 id="å®éªŒä¸€ã€æ“ä½œç³»ç»Ÿå¼•å¯¼"><a href="#å®éªŒä¸€ã€æ“ä½œç³»ç»Ÿå¼•å¯¼" class="headerlink" title="å®éªŒä¸€ã€æ“ä½œç³»ç»Ÿå¼•å¯¼"></a>å®éªŒä¸€ã€æ“ä½œç³»ç»Ÿå¼•å¯¼</h1><h2 id="åŸºæœ¬å†…å®¹"><a href="#åŸºæœ¬å†…å®¹" class="headerlink" title="åŸºæœ¬å†…å®¹"></a>åŸºæœ¬å†…å®¹</h2><ol><li>é˜…è¯»ã€ŠLinuxå†…æ ¸å®Œå…¨æ³¨é‡Šã€‹çš„ç¬¬6ç« ï¼Œå¯¹è®¡ç®—æœºå’ŒLinux 0.11çš„å¼•å¯¼è¿‡ç¨‹è¿›è¡Œåˆæ­¥çš„äº†è§£ï¼›</li><li>æŒ‰ç…§è¦æ±‚æ”¹å†™0.11çš„å¼•å¯¼ç¨‹åºbootsect.s<ol><li>bootsect.s èƒ½åœ¨å±å¹•ä¸Šæ‰“å°ä¸€æ®µæç¤ºä¿¡æ¯â€œXXX is bootingâ€¦â€ï¼Œå…¶ä¸­ XXX æ˜¯ä½ ç»™è‡ªå·±çš„æ“ä½œç³»ç»Ÿèµ·çš„åå­—ï¼Œä¾‹å¦‚ LZJosã€Sunix ç­‰ï¼ˆå¯ä»¥ä¸Šè®ºå›ä¸Šç§€ç§€è°çš„ OS åå­—æœ€å¸…ï¼Œä¹Ÿå¯ä»¥æ˜¾ç¤ºä¸€ä¸ªç‰¹è‰² logoï¼Œä»¥è¡¨ç¤ºè‡ªå·±æ“ä½œç³»ç»Ÿçš„ä¸ä¼—ä¸åŒã€‚ï¼‰</li></ol></li><li>æ”¹å†™è¿›å…¥ä¿æŠ¤æ¨¡å¼å‰çš„è®¾ç½®ç¨‹åºsetup.sã€‚<ol><li>bootsect.s èƒ½å®Œæˆ setup.s çš„è½½å…¥ï¼Œå¹¶è·³è½¬åˆ° setup.s å¼€å§‹åœ°å€æ‰§è¡Œã€‚è€Œ setup.s å‘å±å¹•è¾“å‡ºä¸€è¡Œâ€Now we are in SETUPâ€ã€‚</li><li>setup.s èƒ½è·å–è‡³å°‘ä¸€ä¸ªåŸºæœ¬çš„ç¡¬ä»¶å‚æ•°ï¼ˆå¦‚å†…å­˜å‚æ•°ã€æ˜¾å¡å‚æ•°ã€ç¡¬ç›˜å‚æ•°ç­‰ï¼‰ï¼Œå°†å…¶å­˜æ”¾åœ¨å†…å­˜çš„ç‰¹å®šåœ°å€ï¼Œå¹¶è¾“å‡ºåˆ°å±å¹•ä¸Šã€‚</li><li>setup.s ä¸å†åŠ è½½ Linux å†…æ ¸ï¼Œä¿æŒä¸Šè¿°ä¿¡æ¯æ˜¾ç¤ºåœ¨å±å¹•ä¸Šå³å¯ã€‚</li></ol></li><li>é…å¥—æè€å¸ˆè¯¾ç¨‹ï¼šL2 L3</li></ol><p>å¼€å§‹å®éªŒå‰ï¼Œéœ€è¦äº†è§£ï¼š</p><p>ï¼ˆ1ï¼‰ç›¸å…³ä»£ç æ–‡ä»¶</p><p>Linux 0.11 æ–‡ä»¶å¤¹ä¸­çš„ <code>boot/bootsect.s</code>ã€<code>boot/setup.s</code> å’Œ <code>tools/build.c</code> æ˜¯æœ¬å®éªŒä¼šæ¶‰åŠåˆ°çš„æºæ–‡ä»¶ã€‚å®ƒä»¬çš„åŠŸèƒ½è¯¦è§ã€Šæ³¨é‡Šã€‹çš„ 6.2ã€6.3 èŠ‚å’Œ 16 ç« ã€‚</p><p>ï¼ˆ2ï¼‰å¼•å¯¼ç¨‹åºçš„è¿è¡Œç¯å¢ƒ</p><p>å¼•å¯¼ç¨‹åºç”± BIOS åŠ è½½å¹¶è¿è¡Œã€‚å®ƒæ´»åŠ¨æ—¶ï¼Œæ“ä½œç³»ç»Ÿè¿˜ä¸å­˜åœ¨ï¼Œæ•´å°è®¡ç®—æœºçš„æ‰€æœ‰èµ„æºéƒ½ç”±å®ƒæŒæ§ï¼Œè€Œèƒ½åˆ©ç”¨çš„åŠŸèƒ½åªæœ‰ BIOS ä¸­æ–­è°ƒç”¨ã€‚</p><p>å®éªŒä¸­ä¸»è¦ä½¿ç”¨ BIOS 0x10 å’Œ 0x13 ä¸­æ–­ã€‚</p><h2 id="è®¨è®º"><a href="#è®¨è®º" class="headerlink" title="è®¨è®º"></a>è®¨è®º</h2><p>æœ‰æ—¶ï¼Œç»§æ‰¿ä¼ ç»Ÿæ„å‘³ç€åˆ«æ‰‹è¹©è„šã€‚x86 è®¡ç®—æœºä¸ºäº†å‘ä¸‹å…¼å®¹ï¼Œå¯¼è‡´å¯åŠ¨è¿‡ç¨‹æ¯”è¾ƒå¤æ‚ã€‚è¯·æ‰¾å‡º x86 è®¡ç®—æœºå¯åŠ¨è¿‡ç¨‹ä¸­ï¼Œè¢«ç¡¬ä»¶å¼ºåˆ¶ï¼Œè½¯ä»¶å¿…é¡»éµå®ˆçš„ä¸¤ä¸ªâ€œå¤šæ­¤ä¸€ä¸¾â€çš„æ­¥éª¤ï¼ˆå¤šæ‰¾å‡ ä¸ªä¹Ÿæ— å¦¨ï¼‰ï¼Œè¯´è¯´å®ƒä»¬ä¸ºä»€ä¹ˆå¤šæ­¤ä¸€ä¸¾ï¼Œå¹¶è®¾è®¡æ›´ç®€æ´çš„æ›¿ä»£æ–¹æ¡ˆã€‚</p><p>å‚è€ƒææ–™ï¼š<a href="https://www.wikiwand.com/zh/X86">wiki: x86</a></p><p>x86æœ€å…ˆç”±å®æ¨¡å¼æ…¢æ…¢å‘å±•åˆ°ä¿æŠ¤æ¨¡å¼ï¼Œè¿™ä¸­é—´æœ‰è¿‡å¾ˆå¤šä¸ºäº†å‘ä¸‹å…¼å®¹è€Œä¸å¾—ä¸å¦¥åçš„ä½œæ³•ï¼Œæ¯”å¦‚è¯´ä¸ºäº†èƒ½è®¿é—®æ›´å¤šçš„å†…å­˜è€Œå¼€å¯äº†A20ï¼Œä¸ºäº†åœ¨ä¿æŠ¤æ¨¡å¼ä¸‹å¯ä»¥è¿è¡Œå®æ¨¡å¼çš„ç¨‹åºè€Œè®¾è®¡äº†v86(è™šæ‹Ÿå®æ¨¡å¼) <a href="https://www.wikiwand.com/zh/%E8%99%9A%E6%8B%9F8086%E6%A8%A1%E5%BC%8F">wiki: è™šæ‹Ÿ8086æ¨¡å¼</a>ç­‰ã€‚</p><p>1ï¼‰ è®¡ç®—æœºä¸Šç”µï¼ŒBIOSåˆå§‹åŒ–ä¸­æ–­å‘é‡è¡¨åï¼Œä¼šå°†å¯åŠ¨è®¾å¤‡çš„ç¬¬ä¸€ä¸ªæ‰‡åŒºï¼ˆå³å¼•å¯¼æ‰‡åŒºï¼‰è¯»å…¥å†…å­˜åœ°å€0x7c00ï¼ˆ31KB)å¤„ï¼Œå¹¶è·³è½¬åˆ°æ­¤å¤„å¼€å§‹æ‰§è¡Œã€‚è€Œä¸ºäº†æ–¹ä¾¿åŠ è½½ä¸»æ¨¡å—ï¼Œå¼•å¯¼ç¨‹åºé¦–å…ˆä¼šå°†è‡ªå·±ç§»åŠ¨åˆ°å†…å­˜ç›¸å¯¹é åçš„ä½ç½®ï¼Œå¦‚linux0.11çš„bootsectç¨‹åºå…ˆå°†è‡ªå·±ç§»åŠ¨åˆ°0x90000(576KB)å¤„ã€‚è¿™æ ·å…ˆç§»åŠ¨æ˜¯å¤šæ­¤ä¸€ä¸¾çš„ã€‚</p><ul><li>è§£å†³æ–¹æ¡ˆï¼šåœ¨ä¿è¯å¯é æ€§çš„å‰æä¸‹å°½é‡æ‰©å¤§å®åœ°å€æ¨¡å¼ä¸‹BIOSå¯è®¿é—®çš„å†…å­˜çš„èŒƒå›´ï¼Œå¦‚å¼•å¯¼æ‰‡åŒºåŠ è½½åˆ°0x90000ç­‰å†…å­˜é«˜åœ°å€å¤„è€Œä¸æ˜¯0x7c00ã€‚</li></ul><p>2ï¼‰ è®¡ç®—æœºä¸Šç”µåï¼ŒROM BIOSä¼šåœ¨ç‰©ç†å†…å­˜0å¤„åˆå§‹åŒ–ä¸­æ–­å‘é‡è¡¨ï¼Œå…¶ä¸­æœ‰256ä¸ªä¸­æ–­å‘é‡ï¼Œæ¯ä¸ªä¸­æ–­å‘é‡å ç”¨4å­—èŠ‚ï¼Œå…±1KBï¼Œåœ¨ç‰©ç†å†…å­˜åœ°å€0x000 - ox3ffå¤„ï¼Œè¿™äº›ä¸­æ–­å‘é‡ä¾›BIOSä¸­æ–­ä½¿ç”¨ã€‚è¿™å°±å¯¼è‡´äº†ä¸€ä¸ªé—®é¢˜ï¼Œå¦‚æœæ“ä½œç³»ç»Ÿçš„å¼•å¯¼ç¨‹åºåœ¨åŠ è½½æ“ä½œç³»ç»Ÿæ—¶ä½¿ç”¨äº†BIOSä¸­æ–­æ¥è·å–æˆ–è€…æ˜¾ç¤ºä¸€äº›ä¿¡æ¯æ—¶ï¼Œè¿™1KBåœ°å€ä¸èƒ½è¢«è¦†ç›–ã€‚ç„¶è€Œæ“ä½œç³»ç»Ÿçš„ä¸»æ¨¡å—ä¸ºäº†è®©å…¶ä¸­ä»£ç åœ°å€ç­‰äºå®é™…çš„ç‰©ç†åœ°å€ï¼Œéœ€è¦å°†å…¶åŠ è½½åˆ°å†…å­˜0x0000å¤„ã€‚æ‰€ä»¥æ“ä½œç³»ç»Ÿåœ¨åŠ è½½æ—¶éœ€è¦å…ˆå°†ä¸»æ¨¡å—åŠ è½½åˆ°å†…å­˜ä¸­ä¸ä¸BIOSä¸­æ–­å‘é‡è¡¨å†²çªçš„åœ°æ–¹ï¼Œä¹‹åå¯ä»¥è¦†ç›–ä¸­æ–­å‘é‡è¡¨æ—¶æ‰å°†å…¶ç§»åŠ¨åˆ°å†…å­˜èµ·å§‹å¤„ï¼Œå¦‚Linux0.11çš„Systemæ¨¡å—å°±æ˜¯åœ¨bootsectç¨‹åºä¸­å…ˆåŠ è½½åˆ°0x10000,ä¹‹ååœ¨setupç¨‹åºä¸­ç§»åˆ°0x0000å¤„ã€‚ è¿™æ ·å…ˆåŠ è½½åˆ°å¦å¤–åœ°æ–¹ä¹‹åå†ç§»åŠ¨åˆ°å†…å­˜èµ·å§‹ä½ç½®æ˜¯å¤šæ­¤ä¸€ä¸¾çš„ã€‚</p><ul><li>è§£å†³æ–¹æ¡ˆï¼šå¯ä»¥å°†BIOSä¸­æ–­å‘é‡è¡¨æ”¾åˆ°å®æ¨¡å¼ä¸‹èƒ½å¯»å€å†…å­˜çš„å…¶ä»–åœ°æ–¹ï¼Œæ“ä½œç³»ç»Ÿå¼•å¯¼ç¨‹åºç›´æ¥å°†æ“ä½œç³»ç»Ÿçš„ä¸»æ¨¡å—è¯»åˆ°å†…å­˜çš„èµ·å§‹å¤„ã€‚</li></ul><p><img src="https://img-blog.csdnimg.cn/20200208110055585.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"></p><p><img src="https://img-blog.csdnimg.cn/20200208110730725.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80MzE2Njk1OA==,size_16,color_FFFFFF,t_70" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"></p><h2 id="bootsect-s-å±å¹•è¾“å‡º"><a href="#bootsect-s-å±å¹•è¾“å‡º" class="headerlink" title="bootsect.s å±å¹•è¾“å‡º"></a>bootsect.s å±å¹•è¾“å‡º</h2><blockquote><p>ä»£ç ä¸­ä»¥ <code>!</code> å¼€å¤´çš„è¡Œéƒ½æ˜¯æ³¨é‡Šï¼Œå®é™…åœ¨å†™ä»£ç æ—¶å¯ä»¥å¿½ç•¥ã€‚</p></blockquote><p>é¦–å…ˆæ¥çœ‹å®Œæˆå±å¹•æ˜¾ç¤ºçš„å…³é”®ä»£ç ï¼Œå¦‚ä¸‹ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">! é¦–å…ˆè¯»å…¥å…‰æ ‡ä½ç½®</span><br><span class="line">    mov ah,#0x03</span><br><span class="line">    xor bh,bh</span><br><span class="line">    int 0x10</span><br><span class="line"></span><br><span class="line">! æ˜¾ç¤ºå­—ç¬¦ä¸² â€œHello OS world, my name is LZJâ€</span><br><span class="line">! è¦æ˜¾ç¤ºçš„å­—ç¬¦ä¸²é•¿åº¦</span><br><span class="line">    mov cx,#36</span><br><span class="line">    mov bx,#0x0007</span><br><span class="line">    mov bp,#msg1</span><br><span class="line">! es:bp æ˜¯æ˜¾ç¤ºå­—ç¬¦ä¸²çš„åœ°å€</span><br><span class="line">! ç›¸æ¯”ä¸ linux-0.11 ä¸­çš„ä»£ç ï¼Œéœ€è¦å¢åŠ å¯¹ es çš„å¤„ç†ï¼Œå› ä¸ºåŸä»£ç ä¸­åœ¨è¾“å‡ºä¹‹å‰å·²ç»å¤„ç†äº† es</span><br><span class="line">    mov ax,#0x07c0</span><br><span class="line">    mov es,ax</span><br><span class="line">    mov ax,#0x1301</span><br><span class="line">    int 0x10</span><br><span class="line"></span><br><span class="line">! è®¾ç½®ä¸€ä¸ªæ— é™å¾ªç¯</span><br><span class="line">inf_loop:</span><br><span class="line">    jmp inf_loop</span><br></pre></td></tr></table></figure><p>è¿™é‡Œéœ€è¦ä¿®æ”¹çš„æ˜¯å­—ç¬¦ä¸²é•¿åº¦ï¼Œå³ç”¨éœ€è¦è¾“å‡ºçš„å­—ç¬¦ä¸²é•¿åº¦æ›¿æ¢ <code>mov cx,#24</code> ä¸­çš„ 24ã€‚è¦æ³¨æ„ï¼šé™¤äº†æˆ‘ä»¬è®¾ç½®çš„å­—ç¬¦ä¸² msg1 ä¹‹å¤–ï¼Œè¿˜æœ‰ä¸‰ä¸ªæ¢è¡Œ + å›è½¦ï¼Œä¸€å…±æ˜¯ 6 ä¸ªå­—ç¬¦ã€‚æ¯”å¦‚è¿™é‡Œ <code>Hello OS world, my name is LZJ</code> çš„é•¿åº¦æ˜¯ 30ï¼ŒåŠ ä¸Š 6 åæ˜¯ 36ï¼Œæ‰€ä»¥ä»£ç åº”è¯¥ä¿®æ”¹ä¸º <code>mov cx,#36</code>ã€‚</p><p>æ¥ä¸‹æ¥å°±æ˜¯ä¿®æ”¹è¾“å‡ºçš„å­—ç¬¦ä¸²äº†ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">! msg1 å¤„æ”¾ç½®å­—ç¬¦ä¸²</span><br><span class="line">msg1:</span><br><span class="line">! æ¢è¡Œ + å›è½¦</span><br><span class="line">    .byte   13,10</span><br><span class="line">    .ascii  &quot;Hello OS world, my name is LZJ&quot;</span><br><span class="line">! ä¸¤å¯¹æ¢è¡Œ + å›è½¦</span><br><span class="line">    .byte   13,10,13,10</span><br><span class="line"></span><br><span class="line">! boot_flag å¿…é¡»åœ¨æœ€åä¸¤ä¸ªå­—èŠ‚</span><br><span class="line">.org 510</span><br><span class="line">! è®¾ç½®å¼•å¯¼æ‰‡åŒºæ ‡è®° 0xAA55</span><br><span class="line">! å¿…é¡»æœ‰å®ƒï¼Œæ‰èƒ½å¼•å¯¼</span><br><span class="line">boot_flag:</span><br><span class="line">    .word   0xAA55</span><br></pre></td></tr></table></figure><p>å°† <code>.org 508</code> ä¿®æ”¹ä¸º <code>.org 510</code>ï¼Œæ˜¯å› ä¸ºè¿™é‡Œä¸éœ€è¦ <code>root_dev: .word ROOT_DEV</code>ï¼Œä¸ºäº†ä¿è¯ <code>boot_flag</code> ä¸€å®šåœ¨æœ€åä¸¤ä¸ªå­—èŠ‚ï¼Œæ‰€ä»¥è¦ä¿®æ”¹ <code>.org</code>ã€‚</p><p>å®Œæ•´çš„ä»£ç å¦‚ä¸‹ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">entry _start</span><br><span class="line">_start:</span><br><span class="line">    mov ah,#0x03</span><br><span class="line">    xor bh,bh</span><br><span class="line">    int 0x10</span><br><span class="line">    mov cx,#36</span><br><span class="line">    mov bx,#0x0007</span><br><span class="line">    mov bp,#msg1</span><br><span class="line">    mov ax,#0x07c0</span><br><span class="line">    mov es,ax</span><br><span class="line">    mov ax,#0x1301</span><br><span class="line">    int 0x10</span><br><span class="line">inf_loop:</span><br><span class="line">    jmp inf_loop</span><br><span class="line">msg1:</span><br><span class="line">    .byte   13,10</span><br><span class="line">    .ascii  &quot;Hello OS world, my name is LZJ&quot;</span><br><span class="line">    .byte   13,10,13,10</span><br><span class="line">.org 510</span><br><span class="line">boot_flag:</span><br><span class="line">    .word   0xAA55</span><br></pre></td></tr></table></figure><p>æ¥ç€æ‰§è¡Œä¸‹é¢ä¸¤ä¸ªå‘½ä»¤æ¥ç¼–è¯‘å’Œé“¾æ¥ bootsect.sã€‚</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> as86 -0 -a -o bootsect.o bootsect.s</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> ld86 -0 -s -o bootsect bootsect.o</span></span><br></pre></td></tr></table></figure><p>å…¶ä¸­ <code>-0</code>ï¼ˆæ³¨æ„ï¼šè¿™æ˜¯æ•°å­— 0ï¼Œä¸æ˜¯å­—æ¯ Oï¼‰è¡¨ç¤ºç”Ÿæˆ 8086 çš„ 16 ä½ç›®æ ‡ç¨‹åºï¼Œ<code>-a</code> è¡¨ç¤ºç”Ÿæˆä¸ GNU as å’Œ ld éƒ¨åˆ†å…¼å®¹çš„ä»£ç ï¼Œ<code>-s</code> å‘Šè¯‰é“¾æ¥å™¨ ld86 å»é™¤æœ€åç”Ÿæˆçš„å¯æ‰§è¡Œæ–‡ä»¶ä¸­çš„ç¬¦å·ä¿¡æ¯ã€‚</p><p>å¦‚æœè¿™ä¸¤ä¸ªå‘½ä»¤æ²¡æœ‰ä»»ä½•è¾“å‡ºï¼Œè¯´æ˜ç¼–è¯‘ä¸é“¾æ¥éƒ½é€šè¿‡äº†ã€‚</p><p>Ubuntu ä¸‹ç”¨ <code>ls -l</code> å¯åˆ—å‡ºä¸‹é¢çš„ä¿¡æ¯ï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">-rw--x--x    1  root  root  544  Jul  25  15:07   bootsect</span><br><span class="line">-rw------    1  root  root  257  Jul  25  15:07   bootsect.o</span><br><span class="line">-rw------    1  root  root  686  Jul  25  14:28   bootsect.s</span><br></pre></td></tr></table></figure><p>éœ€è¦ç•™æ„çš„æ–‡ä»¶æ˜¯ bootsect ï¼Œå®ƒçš„å¤§å°æ˜¯ 544 å­—èŠ‚ï¼Œè€Œå¼•å¯¼ç¨‹åºå¿…é¡»è¦æ­£å¥½å ç”¨ä¸€ä¸ªç£ç›˜æ‰‡åŒºï¼Œå³ 512 ä¸ªå­—èŠ‚ã€‚é€ æˆå¤šäº† 32 ä¸ªå­—èŠ‚çš„åŸå› æ˜¯ ld86 äº§ç”Ÿçš„æ˜¯ Minix å¯æ‰§è¡Œæ–‡ä»¶æ ¼å¼ï¼Œè¿™æ ·çš„å¯æ‰§è¡Œæ–‡ä»¶å¤„ç†æ–‡æœ¬æ®µã€æ•°æ®æ®µç­‰éƒ¨åˆ†ä»¥å¤–ï¼Œè¿˜åŒ…æ‹¬ä¸€ä¸ª Minix å¯æ‰§è¡Œæ–‡ä»¶å¤´éƒ¨ï¼Œå®ƒçš„ç»“æ„å¦‚ä¸‹ï¼š</p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">exec</span> &#123;</span></span><br><span class="line">    <span class="keyword">unsigned</span> <span class="keyword">char</span> a_magic[<span class="number">2</span>];  <span class="comment">//æ‰§è¡Œæ–‡ä»¶é­”æ•°</span></span><br><span class="line">    <span class="keyword">unsigned</span> <span class="keyword">char</span> a_flags;</span><br><span class="line">    <span class="keyword">unsigned</span> <span class="keyword">char</span> a_cpu;       <span class="comment">//CPUæ ‡è¯†å·</span></span><br><span class="line">    <span class="keyword">unsigned</span> <span class="keyword">char</span> a_hdrlen;    <span class="comment">//å¤´éƒ¨é•¿åº¦ï¼Œ32å­—èŠ‚æˆ–48å­—èŠ‚</span></span><br><span class="line">    <span class="keyword">unsigned</span> <span class="keyword">char</span> a_unused;</span><br><span class="line">    <span class="keyword">unsigned</span> <span class="keyword">short</span> a_version;</span><br><span class="line">    <span class="keyword">long</span> a_text; <span class="keyword">long</span> a_data; <span class="keyword">long</span> a_bss; <span class="comment">//ä»£ç æ®µé•¿åº¦ã€æ•°æ®æ®µé•¿åº¦ã€å †é•¿åº¦</span></span><br><span class="line">    <span class="keyword">long</span> a_entry;    <span class="comment">//æ‰§è¡Œå…¥å£åœ°å€</span></span><br><span class="line">    <span class="keyword">long</span> a_total;    <span class="comment">//åˆ†é…çš„å†…å­˜æ€»é‡</span></span><br><span class="line">    <span class="keyword">long</span> a_syms;     <span class="comment">//ç¬¦å·è¡¨å¤§å°</span></span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><p>ç®—ä¸€ç®—ï¼š6 charï¼ˆ6 å­—èŠ‚ï¼‰+ 1 shortï¼ˆ2 å­—èŠ‚ï¼‰ + 6 longï¼ˆ24 å­—èŠ‚ï¼‰= 32ï¼Œæ­£å¥½æ˜¯ 32 ä¸ªå­—èŠ‚ï¼Œå»æ‰è¿™ 32 ä¸ªå­—èŠ‚åå°±å¯ä»¥æ”¾å…¥å¼•å¯¼æ‰‡åŒºäº†ï¼ˆè¿™æ˜¯ <code>tools/build.c</code> çš„ç”¨é€”ä¹‹ä¸€ï¼‰ã€‚</p><p>å¯¹äºä¸Šé¢çš„ Minix å¯æ‰§è¡Œæ–‡ä»¶ï¼Œå…¶ a_magic[0]=0x01ï¼Œa_magic[1]=0x03ï¼Œa_flags=0x10ï¼ˆå¯æ‰§è¡Œæ–‡ä»¶ï¼‰ï¼Œa_cpu=0x04ï¼ˆè¡¨ç¤º Intel i8086/8088ï¼Œå¦‚æœæ˜¯ 0x17 åˆ™è¡¨ç¤º Sun å…¬å¸çš„ SPARCï¼‰ï¼Œæ‰€ä»¥ bootsect æ–‡ä»¶çš„å¤´å‡ ä¸ªå­—èŠ‚åº”è¯¥æ˜¯ 01 03 10 04ã€‚ä¸ºäº†éªŒè¯ä¸€ä¸‹ï¼ŒUbuntu ä¸‹ç”¨å‘½ä»¤â€œhexdump -C bootsectâ€å¯ä»¥çœ‹åˆ°ï¼š</p><figure class="highlight txt"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">00000000  01 03 10 04 20 00 00 00  00 02 00 00 00 00 00 00  |.... ...........|</span><br><span class="line">00000010  00 00 00 00 00 00 00 00  00 82 00 00 00 00 00 00  |................|</span><br><span class="line">00000020  b8 c0 07 8e d8 8e c0 b4  03 30 ff cd 10 b9 17 00  |.........0......|</span><br><span class="line">00000030  bb 07 00 bd 3f 00 b8 01  13 cd 10 b8 00 90 8e c0  |....?...........|</span><br><span class="line">00000040  ba 00 00 b9 02 00 bb 00  02 b8 04 02 cd 13 73 0a  |..............s.|</span><br><span class="line">00000050  ba 00 00 b8 00 00 cd 13  eb e1 ea 00 00 20 90 0d  |............. ..|</span><br><span class="line">00000060  0a 53 75 6e 69 78 20 69  73 20 72 75 6e 6e 69 6e  |.Sunix is runnin|</span><br><span class="line">00000070  67 21 0d 0a 0d 0a 00 00  00 00 00 00 00 00 00 00  |g!..............|</span><br><span class="line">00000080  00 00 00 00 00 00 00 00  00 00 00 00 00 00 00 00  |................|</span><br><span class="line">*</span><br><span class="line">00000210  00 00 00 00 00 00 00 00  00 00 00 00 00 00 55 aa  |..............U.|</span><br><span class="line">00000220</span><br></pre></td></tr></table></figure><p>æ¥ä¸‹æ¥å¹²ä»€ä¹ˆå‘¢ï¼Ÿæ˜¯çš„ï¼Œè¦å»æ‰è¿™ 32 ä¸ªå­—èŠ‚çš„æ–‡ä»¶å¤´éƒ¨ï¼ˆ<code>tools/build.c</code> çš„åŠŸèƒ½ä¹‹ä¸€å°±æ˜¯è¿™ä¸ªï¼‰ï¼éšæ‰‹ç¼–ä¸ªå°çš„æ–‡ä»¶è¯»å†™ç¨‹åºéƒ½å¯ä»¥å»æ‰å®ƒã€‚ä¸è¿‡ï¼Œæ‡’ä¸”èªæ˜çš„äººä¼šåœ¨ Ubuntu ä¸‹ç”¨å‘½ä»¤ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ dd bs=1 <span class="keyword">if</span>=bootsect of=Image skip=32</span><br></pre></td></tr></table></figure><p>ç”Ÿæˆçš„ Image å°±æ˜¯å»æ‰æ–‡ä»¶å¤´çš„ bootsectã€‚</p><p>å»æ‰è¿™ 32 ä¸ªå­—èŠ‚åï¼Œå°†ç”Ÿæˆçš„æ–‡ä»¶æ‹·è´åˆ° linux-0.11 ç›®å½•ä¸‹ï¼Œå¹¶ä¸€å®šè¦å‘½åä¸ºâ€œImageâ€ï¼ˆæ³¨æ„å¤§å°å†™ï¼‰ã€‚ç„¶åå°±â€œrunâ€å§ï¼</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># å½“å‰çš„å·¥ä½œè·¯å¾„ä¸º .../oslab/linux-0.11/boot/</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># å°†åˆšåˆšç”Ÿæˆçš„ Image å¤åˆ¶åˆ° linux-0.11 ç›®å½•ä¸‹</span></span><br><span class="line">$ cp ./Image ../Image</span><br><span class="line"></span><br><span class="line"><span class="comment"># æ‰§è¡Œ oslab ç›®å½•ä¸­çš„ run è„šæœ¬</span></span><br><span class="line">$ ../../run</span><br></pre></td></tr></table></figure><p><img src="https://doc.shiyanlou.com/userid13labid374time1421133611337" alt="bootsect å¼•å¯¼åçš„ç³»ç»Ÿå¯åŠ¨æƒ…å†µ"></p><blockquote><p>runæ—¶å‡ºé”™ï¼šNo bootable device</p><p><img src="C:/Users/fdxr1/AppData/Roaming/Typora/typora-user-images/image-20210419083654490.png"></p></blockquote><h1 id="å®éªŒäºŒã€"><a href="#å®éªŒäºŒã€" class="headerlink" title="å®éªŒäºŒã€"></a>å®éªŒäºŒã€</h1><p>æœªå®Œå¾…ç»­ã€‚</p>]]></content>
    
    
    <summary type="html">&lt;p&gt;å“ˆå·¥å¤§æ“ä½œç³»ç»Ÿè¯¾ç¨‹å®éªŒè®°å½•ã€‚&lt;/p&gt;</summary>
    
    
    
    <category term="æ“ä½œç³»ç»Ÿ" scheme="https://www.fvolcano.red/categories/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/"/>
    
    
    <category term="å®éªŒ" scheme="https://www.fvolcano.red/tags/%E5%AE%9E%E9%AA%8C/"/>
    
  </entry>
  
  <entry>
    <title>å›¾è®º-è¿‡æ²³é—®é¢˜åŠå…¶å˜å½¢</title>
    <link href="https://www.fvolcano.red/2020/Graph-CrossRiver/"/>
    <id>https://www.fvolcano.red/2020/Graph-CrossRiver/</id>
    <published>2020-11-09T13:13:01.000Z</published>
    <updated>2020-11-09T13:13:01.000Z</updated>
    
    <content type="html"><![CDATA[<p>ä¸€ä¸ªå†œå¤«å¸¦ç€ä¸€å¤´ç‹¼ã€ä¸€å¤´ç¾Šã€ä¸€é¢—ç™½èœè¿‡æ²³ã€‚ä»–é¢å‰åªæœ‰ä¸€æ¡èˆ¹ï¼Œåªèƒ½å®¹çº³ä»–å’Œä¸€ä»¶ç‰©å“ï¼Œåªæœ‰å†œå¤«ä¼šåˆ’èˆ¹ã€‚å¦‚æœå†œå¤«ä¸åœ¨åœºï¼Œç‹¼ä¼šåƒç¾Šã€ç¾Šä¼šåƒç™½èœï¼Œå†œå¤«åœ¨åœºåˆ™ä¸ä¼šã€‚æ±‚å°†æ‰€æœ‰ç‰©å“è¿åˆ°å¯¹å²¸çš„æ–¹æ¡ˆã€‚<a id="more"></a></p><h1 id="å›¾è®º-å®‰å…¨è¿‡æ²³çš„æœ€çŸ­è·¯å¾„é—®é¢˜"><a href="#å›¾è®º-å®‰å…¨è¿‡æ²³çš„æœ€çŸ­è·¯å¾„é—®é¢˜" class="headerlink" title="å›¾è®º-å®‰å…¨è¿‡æ²³çš„æœ€çŸ­è·¯å¾„é—®é¢˜"></a>å›¾è®º-å®‰å…¨è¿‡æ²³çš„æœ€çŸ­è·¯å¾„é—®é¢˜</h1><p><a href="https://www.cnblogs.com/lfri/p/9866992.html">åŸåšå®¢</a></p><h2 id="å†œå¤«è¿‡æ²³é—®é¢˜"><a href="#å†œå¤«è¿‡æ²³é—®é¢˜" class="headerlink" title="å†œå¤«è¿‡æ²³é—®é¢˜"></a>å†œå¤«è¿‡æ²³é—®é¢˜</h2><p><strong>é—®é¢˜æè¿°</strong></p><p>ä¸€ä¸ªå†œå¤«å¸¦ç€ä¸€å¤´ç‹¼ã€ä¸€å¤´ç¾Šã€ä¸€é¢—ç™½èœè¿‡æ²³ã€‚ä»–é¢å‰åªæœ‰ä¸€æ¡èˆ¹ï¼Œåªèƒ½å®¹çº³ä»–å’Œä¸€ä»¶ç‰©å“ï¼Œåªæœ‰å†œå¤«ä¼šåˆ’èˆ¹ã€‚å¦‚æœå†œå¤«ä¸åœ¨åœºï¼Œç‹¼ä¼šåƒç¾Šã€ç¾Šä¼šåƒç™½èœï¼Œå†œå¤«åœ¨åœºåˆ™ä¸ä¼šã€‚æ±‚å°†æ‰€æœ‰ç‰©å“è¿åˆ°å¯¹å²¸çš„æ–¹æ¡ˆã€‚</p><p><strong>è§£é¢˜æ€è·¯</strong></p><p>æ ¹æ®ç‰©å“çš„ä½ç½®å®šä¹‰çŠ¶æ€ï¼Œè‹¥åœ¨å·¦å²¸è®°ä¸º1ï¼Œå³å²¸è®°ä¸º0ï¼Œäºæ˜¯æœ€ç»ˆæ–¹æ¡ˆå°±æ˜¯(1,1,1,1)â€“&gt;(0,0,0,0)æ‰€ç»è¿‡çš„è·¯å¾„ã€‚</p><p>1ã€å®šä¹‰çŠ¶æ€</p><p><a href="https://img2018.cnblogs.com/blog/1365470/201810/1365470-20181028191311144-1211710443.png"><img src="/2020/Graph-CrossRiver/1365470-20181028191311144-1211710443.png"></a></p><p>2ã€åˆ—ä¸¾æ‰€æœ‰çŠ¶æ€ï¼ˆäººã€ç‹¼ã€ç¾Šã€èœï¼‰</p><p><a href="https://img2018.cnblogs.com/blog/1365470/201810/1365470-20181028191459048-317298943.png"><img src="/2020/Graph-CrossRiver/1365470-20181028191459048-317298943.png"></a></p><p>3ã€åˆ é™¤ä¸åˆç†çš„çŠ¶æ€ï¼ˆç‹¼å’Œç¾Šã€ç¾Šå’Œèœï¼‰</p><p><a href="https://img2018.cnblogs.com/blog/1365470/201810/1365470-20181028191647740-1828632698.png"><img src="/2020/Graph-CrossRiver/1365470-20181028191647740-1828632698.png"></a></p><p>4ã€è¿è¾¹ï¼ˆæ¨¡æ‹Ÿä¸€æ¬¡æ¸¡æ²³ï¼‰</p><p><a href="https://img2018.cnblogs.com/blog/1365470/201810/1365470-20181028192013516-1740822628.png"><img src="/2020/Graph-CrossRiver/1365470-20181028192013516-1740822628-1619247456141.png"></a></p><p>5ã€å¯»æ‰¾è·¯å¾„</p><p>å¯»æ‰¾(1111)â€“&gt;(0000)çš„è¾¹ï¼Œå¯ä»¥ç”¨å¯»è·¯ç®—æ³•å¦‚bfsã€dfs,å¦‚æœè¦æ±‚æœ€çŸ­è·¯å¯ä»¥ç”¨æœ€çŸ­è·¯ç®—æ³•å¦‚bfsã€Dijsktraç­‰ï¼Œå½“ç„¶è¿™é‡Œå›¾å¾ˆç®€å•ï¼Œå¯ç›´æ¥è§‚å¯Ÿå‡ºæ¥ã€‚</p><figure class="highlight livescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="params">(<span class="number">1111</span>)</span>--&gt;</span><span class="function"><span class="params">(<span class="number">0101</span>)</span>--&gt;</span><span class="function"><span class="params">(<span class="number">1101</span>)</span>--&gt;</span><span class="function"><span class="params">(<span class="number">0001</span>)</span>--&gt;</span><span class="function"><span class="params">(<span class="number">1011</span>)</span>--&gt;</span><span class="function"><span class="params">(<span class="number">0010</span>)</span>--&gt;</span><span class="function"><span class="params">(<span class="number">1010</span>)</span>--&gt;</span>(<span class="number">0000</span>)ï¼ˆä¸¤æ¡æœ€çŸ­è·¯ä¹‹ä¸€ï¼‰</span><br><span class="line">       å·¦å²¸                                 å³å²¸</span><br><span class="line"><span class="number">1</span>ã€äºº  ç‹¼  ç¾Š èŠ±                           ç©º</span><br><span class="line"><span class="number">2</span>ã€ç‹¼  èŠ±                                 äºº ç¾Š</span><br><span class="line"><span class="number">3</span>ã€äºº  ç‹¼ èŠ±                               ç¾Š</span><br><span class="line"><span class="number">4</span>ã€èŠ±                                     äºº ç‹¼  ç¾Š</span><br><span class="line"><span class="number">5</span>ã€äºº  ç¾Š  èŠ±                              ç‹¼</span><br><span class="line"><span class="number">6</span>ã€ç¾Š                                     äºº èŠ±  ç‹¼</span><br><span class="line"><span class="number">7</span>ã€äºº ç¾Š                                  ç‹¼ èŠ±</span><br><span class="line"><span class="number">8</span>ã€ç©º                                     ç‹¼ èŠ± äºº ç¾Š   </span><br></pre></td></tr></table></figure><h2 id="ä¼ æ•™å£«ä¸åƒäººæ¶é­”çš„é—®é¢˜"><a href="#ä¼ æ•™å£«ä¸åƒäººæ¶é­”çš„é—®é¢˜" class="headerlink" title="ä¼ æ•™å£«ä¸åƒäººæ¶é­”çš„é—®é¢˜"></a>ä¼ æ•™å£«ä¸åƒäººæ¶é­”çš„é—®é¢˜</h2><p><strong>é—®é¢˜æè¿°</strong></p><p>æœ‰ä¸‰ä¸ªä¼ æ•™å£«å’Œä¸‰ä¸ªåƒäººæ¶é­”è¦æ¸¡è¿‡ä¸€æ¡æ²³ï¼Œæ²³ä¸­æœ‰ä¸€æ¡èˆ¹ï¼Œåªèƒ½è£…ä¸‹ä¸¤ä¸ªäººã€‚åœ¨ä»»ä½•åœ°æ–¹ï¼ˆæ— è®ºæ˜¯å²¸è¾¹è¿˜æ˜¯èˆ¹ä¸Šï¼‰ï¼Œå¦‚æœåƒäººæ¶é­”æ•°é‡å¤šäºä¼ æ•™å£«æ•°é‡ï¼Œåƒäººæ¶é­”å°±ä¼šåƒæ‰ä¼ æ•™å£«ã€‚é—®ï¼šæ€ä¹ˆæ‰èƒ½è®©è¿™äº›éƒ½å®‰å…¨è¿‡æ²³ï¼Ÿ</p><p><strong>è§£é¢˜æ€è·¯</strong></p><p>1ã€å®šä¹‰çŠ¶æ€</p><p><a href="https://img2018.cnblogs.com/blog/1365470/201810/1365470-20181028194640506-192088956.png"><img src="/2020/Graph-CrossRiver/1365470-20181028194640506-192088956.png"></a></p><p>2ã€åˆ—ä¸¾æ‰€æœ‰çŠ¶æ€</p><p><a href="https://img2018.cnblogs.com/blog/1365470/201810/1365470-20181028194800042-757542463.png"><img src="/2020/Graph-CrossRiver/1365470-20181028194800042-757542463.png"></a></p><p>3ã€åˆ é™¤ä¸åˆç†çŠ¶æ€</p><p><a href="https://img2018.cnblogs.com/blog/1365470/201810/1365470-20181028194856707-156878733.png"><img src="/2020/Graph-CrossRiver/1365470-20181028194856707-156878733.png"></a></p><p>4ã€è¿è¾¹ï¼ˆæ¨¡æ‹Ÿä¾æ¬¡æ¸¡æ²³å˜åŒ–ï¼‰</p><p><a href="https://img2018.cnblogs.com/blog/1365470/201810/1365470-20181028195050222-475204241.png"><img src="/2020/Graph-CrossRiver/1365470-20181028195050222-475204241.png"></a></p><p>5ã€å¯»æ‰¾è·¯å¾„</p><p>å¯»æ‰¾(33 L 00)â€“&gt;(00 R 33)çš„è·¯å¾„</p><figure class="highlight angelscript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">å…¶ä¸­ä¸€æ¡è·¯å¾„</span><br><span class="line">(<span class="number">33</span> L <span class="number">00</span>)--&gt;(<span class="number">31</span> R <span class="number">01</span>)--&gt;(<span class="number">32</span> L <span class="number">01</span>)--&gt;(<span class="number">30</span> R <span class="number">03</span>)--&gt;(<span class="number">31</span> L <span class="number">02</span>)--&gt;(<span class="number">11</span> R <span class="number">22</span>)--&gt;(<span class="number">22</span> L <span class="number">01</span>)--&gt;(<span class="number">02</span> R <span class="number">31</span>)--&gt;(<span class="number">03</span> L <span class="number">30</span>)--&gt;(<span class="number">01</span> R <span class="number">32</span>)--&gt;(<span class="number">02</span> L <span class="number">31</span>)--&gt;(<span class="number">00</span> R <span class="number">33</span>)</span><br><span class="line"><span class="number">1</span>ã€ä¸¤ä¸ªåƒäººæ¶é­”è¿‡æ²³</span><br><span class="line"><span class="number">2</span>ã€ä¸€ä¸ªåƒäººæ¶é­”å›æ¥</span><br><span class="line"><span class="number">3</span>ã€ä¸¤ä¸ªåƒäººæ¶é­”è¿‡æ²³</span><br><span class="line"><span class="number">4</span>ã€ä¸€ä¸ªåƒäººæ¶é­”å›æ¥</span><br><span class="line"><span class="number">5</span>ã€ä¸¤ä¸ªä¼ æ•™å£«è¿‡æ²³</span><br><span class="line"><span class="number">6</span>ã€ä¸€ä¸ªä¼ æ•™å£«å’Œä¸€ä¸ªåƒäººæ¶é­”å›æ¥</span><br><span class="line"><span class="number">7</span>ã€ä¸¤ä¸ªä¼ æ•™å£«å›æ¥</span><br><span class="line"><span class="number">8</span>ã€ä¸€ä¸ªåƒäººæ¶é­”å›å»</span><br><span class="line"><span class="number">9</span>ã€ä¸¤ä¸ªåƒäººæ¶é­”è¿‡æ²³</span><br><span class="line"><span class="number">10</span>ã€ä¸€ä¸ªåƒäººæ¶é­”å›å»</span><br><span class="line"><span class="number">11</span>ã€ä¸¤ä¸ªåƒäººæ¶é­”è¿‡æ²³</span><br></pre></td></tr></table></figure><h2 id="å››äººè¿‡æ¡¥é—®é¢˜"><a href="#å››äººè¿‡æ¡¥é—®é¢˜" class="headerlink" title="å››äººè¿‡æ¡¥é—®é¢˜"></a>å››äººè¿‡æ¡¥é—®é¢˜</h2><p><strong>é—®é¢˜æè¿°</strong></p><p>åœ¨ä¸€ä¸ªæ¼†é»‘çš„å¤œé‡Œï¼Œå››ä½æ—…æ¸¸è€…æ¥åˆ°ä¸€åº§ç‹­çª„è€Œæ²¡æœ‰æŠ¤æ çš„æ¡¥è¾¹ï¼Œå¦‚æœä¸å€ŸåŠ©æ‰‹ç”µç­’çš„è¯ï¼Œå¤§å®¶æ˜¯æ— è®ºä¹Ÿä¸æ•¢è¿‡å»ã€‚ä¸å¹¸çš„æ˜¯å››ä¸ªäººä¸­åªæœ‰ä¸€åªæ‰‹ç”µç­’ï¼Œè€Œæ¡¥çª„å¾—åªå¤Ÿä¸¤ä¸ªäººåŒæ—¶é€šè¿‡ã€‚å¦‚æœå„è‡ªå•ç‹¬è¿‡æ¡¥å¾—è¯ï¼Œå››ä¸ªäººæ‰€éœ€è¦çš„æ—¶é—´åˆ†åˆ«æ˜¯1ã€2ã€5ã€10åˆ†é’Ÿï¼Œå¦‚æœä¸¤ä¸ªäººåŒæ—¶è¿‡æ¡¥ï¼Œæ‰€éœ€è¦çš„æ—¶é—´æ˜¯è¾ƒæ…¢çš„é‚£ä¸ªäººå•ç‹¬è¡ŒåŠ¨æ—¶çš„æ—¶é—´ã€‚é—®ï¼šå¦‚ä½•è®¾è®¡ä¸€ä¸ªæ–¹æ¡ˆï¼Œè®©å››ä¸ªäººå°½å¿«è¿‡æ¡¥ã€‚</p><p><strong>è§£é¢˜æ€è·¯</strong></p><p>ä¸å‰é¢ä¸¤ä¸ªç›¸æ¯”ï¼Œè¿™æ¬¡ä¸ä»…è¦æ±‚æ–¹æ¡ˆï¼ŒåŒæ—¶è¦æ±‚æ—¶é—´æœ€çŸ­ã€‚ </p><p>åŒæ ·éœ€è¦å®šä¹‰çŠ¶æ€ï¼Œå››ä¸ªäºº+æ‰‹ç”µç­’çš„ä½ç½®</p><p>1ã€å®šä¹‰çŠ¶æ€</p><p><a href="https://img2018.cnblogs.com/blog/1365470/201810/1365470-20181028230252029-80793767.png"><img src="/2020/Graph-CrossRiver/1365470-20181028230252029-80793767.png"></a></p><p>2ã€å»ºå›¾</p><p>åˆ†ä¸ºæ¯æ¬¡é€šè¿‡ä¸€ä¸ªäººå’Œæ¯æ¬¡ä¸¤ä¸ªäººï¼Œéƒ½æ˜¯å¸¦æƒæ— å‘è¾¹ã€‚</p><p>(ä¸‹é¢åªè¿æ¥äº†ä¸(01111)çš„è¾¹)</p><p><a href="https://img2018.cnblogs.com/blog/1365470/201810/1365470-20181028230534537-2018916150.png"><img src="/2020/Graph-CrossRiver/1365470-20181028230534537-2018916150.png"></a></p><p>3ã€å¯»æ‰¾æœ€çŸ­è·¯</p><p>å¯»æ‰¾(L 1111)â€“&gt;(R 0000)çš„æœ€çŸ­è·¯ï¼Œå³æœ€çŸ­è·¯ç®—æ³•ä¸­(01111)â€“&gt;(10000)çš„æœ€çŸ­è·¯ï¼Œä»¥ä¸‹æ˜¯åˆ©ç”¨Dijstraç®—æ³•çš„è§£å†³æ–¹æ³•ã€‚</p><p>æœ€ç»ˆç­”æ¡ˆä¸º(2 + 1 + 10 + 2 + 2) = 17.</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br></pre></td><td class="code"><pre><span class="line">#include&lt;stdio.h&gt;</span><br><span class="line">#include&lt;iostream&gt;</span><br><span class="line">#include&lt;string&gt;</span><br><span class="line">#include&lt;queue&gt;</span><br><span class="line">#include&lt;algorithm&gt;</span><br><span class="line">using namespace std;</span><br><span class="line"></span><br><span class="line"><span class="comment">//å®šä¹‰å›¾ä¸­ç»“ç‚¹</span></span><br><span class="line">struct Node</span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">int</span> u, d;            <span class="comment">//è¯¥èŠ‚ç‚¹çš„ç¼–å·ä¸è·ç¦»</span></span><br><span class="line">    bool operator &lt; (<span class="keyword">const</span> Node x) <span class="keyword">const</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">return</span>  d &gt; x.d;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">//è¾¹ç»“æ„ä½“çš„å®šä¹‰</span></span><br><span class="line">struct Edge</span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">int</span> to;</span><br><span class="line">    <span class="keyword">int</span> w;</span><br><span class="line">    <span class="keyword">int</span> next;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> INF = <span class="number">0x3f3f3f3f</span>;</span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> V = <span class="number">32</span> + <span class="number">10</span>;</span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> E = <span class="number">32</span> * <span class="number">32</span> + <span class="number">10</span>;</span><br><span class="line"><span class="keyword">int</span> dis[V];            <span class="comment">//æºåˆ°å„é¡¶ç‚¹çš„æœ€çŸ­è·ç¦»</span></span><br><span class="line"><span class="keyword">int</span> vis[V];            <span class="comment">//è®°å½•æ˜¯å¦è¢«æ”¶å½•ï¼Œç”¨æ¥ä»£æ›¿é›†åˆS</span></span><br><span class="line"><span class="keyword">int</span> head[V];          <span class="comment">//head[i]è¡¨ç¤ºé¡¶ç‚¹içš„ç¬¬ä¸€æ¡è¾¹çš„æ•°ç»„ä¸‹æ ‡ï¼Œ&quot;-1&quot;è¡¨ç¤ºé¡¶ç‚¹iæ²¡æœ‰è¾¹</span></span><br><span class="line">Edge edge[E];</span><br><span class="line"></span><br><span class="line"><span class="function">inline <span class="keyword">void</span> <span class="title">AddEdge</span><span class="params">(<span class="keyword">int</span> a, <span class="keyword">int</span> b, <span class="keyword">int</span> w, <span class="keyword">int</span> id)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    edge[id].to = b;</span><br><span class="line">    edge[id].w = w;</span><br><span class="line">    edge[id].next = head[a];</span><br><span class="line">    head[a] = id;</span><br><span class="line">    <span class="keyword">return</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//sä¸ºèµ·ç‚¹</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">Dijsktra</span><span class="params">(<span class="keyword">int</span> s)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    priority_queue&lt;Node&gt;q;            <span class="comment">//å–å‡ºé›†åˆTä¸­çš„æœ€å°å€¼</span></span><br><span class="line">    memset(vis, <span class="number">0</span>, sizeof(vis));</span><br><span class="line">    memset(dis, INF, sizeof(dis));</span><br><span class="line"></span><br><span class="line">    dis[s] = <span class="number">0</span>;</span><br><span class="line">    q.push(Node&#123; s, dis[s] &#125;);</span><br><span class="line">    <span class="keyword">while</span> (!q.empty())</span><br><span class="line">    &#123;</span><br><span class="line">        Node x = q.top(); q.pop();</span><br><span class="line">        <span class="keyword">int</span> u = x.u;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> (vis[u])    <span class="keyword">continue</span>;</span><br><span class="line"></span><br><span class="line">        vis[u] = <span class="keyword">true</span>;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = head[u]; i != -<span class="number">1</span>; i = edge[i].next)    <span class="comment">//æ¾å¼›ä¸uç›´æ¥ç›¸é‚»çš„é¡¶ç‚¹</span></span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">int</span> v = edge[i].to;</span><br><span class="line">            <span class="keyword">int</span> w = edge[i].w;</span><br><span class="line">            <span class="keyword">if</span> (!vis[v] &amp;&amp; dis[u] + w &lt; dis[v])</span><br><span class="line">            &#123;</span><br><span class="line">                dis[v] = dis[u] + w;</span><br><span class="line">                q.push(Node&#123; v,dis[v] &#125;);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> score[] = &#123; <span class="number">1</span>,<span class="number">2</span>,<span class="number">5</span>,<span class="number">10</span> &#125;;   <span class="comment">//æ¯ä¸ªäººå•ç‹¬è¡ŒåŠ¨çš„æ—¶é—´</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="comment">//å»ºå›¾</span></span><br><span class="line">    memset(head, -<span class="number">1</span>, sizeof(head));</span><br><span class="line">    <span class="keyword">int</span> id = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; (<span class="number">1</span> &lt;&lt; <span class="number">4</span>); i++)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">int</span> bits[<span class="number">4</span>];</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> j = <span class="number">0</span>; j &lt; <span class="number">4</span>; j++)  bits[j] = (i &gt;&gt; j) &amp; <span class="number">1</span>;</span><br><span class="line">        <span class="comment">//ä¸€æ¬¡èµ°ä¸€ä¸ªäºº</span></span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> j = <span class="number">0</span>; j &lt; <span class="number">4</span>; j++)  <span class="keyword">if</span> (bits[j])</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">int</span> tmp = i - (<span class="number">1</span> &lt;&lt; j) + <span class="number">16</span>;</span><br><span class="line">            <span class="keyword">int</span> w = score[j];</span><br><span class="line">            AddEdge(i, tmp, w, id++);</span><br><span class="line">            AddEdge(tmp, i, w, id++);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">//ä¸€æ¬¡èµ°ä¸¤ä¸ªäºº</span></span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> j = <span class="number">0</span>;j &lt; <span class="number">3</span>;j++)</span><br><span class="line">            <span class="keyword">for</span> (<span class="keyword">int</span> k = j + <span class="number">1</span>; k &lt; <span class="number">4</span>; k++)   <span class="keyword">if</span> (bits[j] &amp;&amp; bits[k])</span><br><span class="line">            &#123;</span><br><span class="line">                <span class="keyword">int</span> tmp = i - (<span class="number">1</span> &lt;&lt; j) - (<span class="number">1</span> &lt;&lt; k) + <span class="number">16</span>;</span><br><span class="line">                <span class="keyword">int</span> w = max(score[j],score[k]);</span><br><span class="line">                AddEdge(i, tmp, w, id++);</span><br><span class="line">                AddEdge(tmp, i, w, id++);</span><br><span class="line">            &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    Dijsktra(<span class="number">15</span>);</span><br><span class="line">    printf(<span class="string">&quot;%d\n&quot;</span>, dis[<span class="number">16</span>]);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
    
    
    <summary type="html">&lt;p&gt;ä¸€ä¸ªå†œå¤«å¸¦ç€ä¸€å¤´ç‹¼ã€ä¸€å¤´ç¾Šã€ä¸€é¢—ç™½èœè¿‡æ²³ã€‚ä»–é¢å‰åªæœ‰ä¸€æ¡èˆ¹ï¼Œåªèƒ½å®¹çº³ä»–å’Œä¸€ä»¶ç‰©å“ï¼Œåªæœ‰å†œå¤«ä¼šåˆ’èˆ¹ã€‚å¦‚æœå†œå¤«ä¸åœ¨åœºï¼Œç‹¼ä¼šåƒç¾Šã€ç¾Šä¼šåƒç™½èœï¼Œå†œå¤«åœ¨åœºåˆ™ä¸ä¼šã€‚æ±‚å°†æ‰€æœ‰ç‰©å“è¿åˆ°å¯¹å²¸çš„æ–¹æ¡ˆã€‚&lt;/p&gt;</summary>
    
    
    
    <category term="ç®—æ³•" scheme="https://www.fvolcano.red/categories/%E7%AE%97%E6%B3%95/"/>
    
    
  </entry>
  
  <entry>
    <title>è®¡ç®—æœºç½‘ç»œæ ¸å¿ƒçŸ¥è¯†ä¸€ç½‘æ‰“å°½</title>
    <link href="https://www.fvolcano.red/2020/null/"/>
    <id>https://www.fvolcano.red/2020/null/</id>
    <published>2020-11-06T00:02:49.000Z</published>
    <updated>2020-11-06T00:02:49.000Z</updated>
    
    <content type="html"><![CDATA[<p>è½¬è‡ªå…¬ä¼—å·ï¼š<a href="https://mp.weixin.qq.com/s/6ju4j_ffLuOBuoO53ZhcOA">JavaGuide:å¤§äºŒé€ƒè¯¾æ€»ç»“1.2wå­—çš„è®¡ç®—æœºç½‘ç»œçŸ¥è¯†</a> ã€‚ä¾›ä¹‹åå¤ä¹ ç”¨ã€‚<a id="more"></a></p><h2 id="1-è®¡ç®—æœºç½‘ç»œæ¦‚è¿°"><a href="#1-è®¡ç®—æœºç½‘ç»œæ¦‚è¿°" class="headerlink" title="1. è®¡ç®—æœºç½‘ç»œæ¦‚è¿°"></a>1. è®¡ç®—æœºç½‘ç»œæ¦‚è¿°</h2><h3 id="1-1-åŸºæœ¬æœ¯è¯­"><a href="#1-1-åŸºæœ¬æœ¯è¯­" class="headerlink" title="1.1. åŸºæœ¬æœ¯è¯­"></a>1.1. åŸºæœ¬æœ¯è¯­</h3><ol><li><strong>ç»“ç‚¹ ï¼ˆnodeï¼‰</strong> ï¼šç½‘ç»œä¸­çš„ç»“ç‚¹å¯ä»¥æ˜¯è®¡ç®—æœºï¼Œé›†çº¿å™¨ï¼Œäº¤æ¢æœºæˆ–è·¯ç”±å™¨ç­‰ã€‚</li><li><strong>é“¾è·¯ï¼ˆlink ï¼‰</strong> : ä»ä¸€ä¸ªç»“ç‚¹åˆ°å¦ä¸€ä¸ªç»“ç‚¹çš„ä¸€æ®µç‰©ç†çº¿è·¯ã€‚ä¸­é—´æ²¡æœ‰ä»»ä½•å…¶ä»–äº¤ç‚¹ã€‚</li><li><strong>ä¸»æœºï¼ˆhostï¼‰</strong> ï¼šè¿æ¥åœ¨å› ç‰¹ç½‘ä¸Šçš„è®¡ç®—æœºã€‚</li><li><strong>ISPï¼ˆInternet Service Providerï¼‰</strong> ï¼šå› ç‰¹ç½‘æœåŠ¡æä¾›è€…ï¼ˆæä¾›å•†ï¼‰ã€‚</li></ol><p><img src="https://mmbiz.qpic.cn/mmbiz_png/iaIdQfEric9Txpk4narOnyI7xL1Im2X40KyPrXgjoZp17VBfyxqcE8KTEyFqC9ZvMBlnT5nKpd29fmBvbyX0QFKA/640?wx_fmt=png&tp=webp&wxfrom=5&wx_lazy=1&wx_co=1" alt="ISP (Internet Service Provider) Definition"></p><ol><li><strong>IXPï¼ˆInternet eXchange Pointï¼‰</strong> ï¼šäº’è”ç½‘äº¤æ¢ç‚¹ IXP çš„ä¸»è¦ä½œç”¨å°±æ˜¯å…è®¸ä¸¤ä¸ªç½‘ç»œç›´æ¥ç›¸è¿å¹¶äº¤æ¢åˆ†ç»„ï¼Œè€Œä¸éœ€è¦å†é€šè¿‡ç¬¬ä¸‰ä¸ªç½‘ç»œæ¥è½¬å‘åˆ†ç»„ã€‚</li></ol><p><img src="https://mmbiz.qpic.cn/mmbiz_png/iaIdQfEric9Txpk4narOnyI7xL1Im2X40Ko5p7DwqbmNKFGp6Tfib6HmshXw22mKoXMagJuKcRl7fqnVWRf6q5lGA/640?wx_fmt=png&tp=webp&wxfrom=5&wx_lazy=1&wx_co=1" alt="IXP Traffic Levels During the Stratos Skydive â€” RIPE Labs"></p><p><a href="https://labs.ripe.net/Members/fergalc/ixp-traffic-during-stratos-skydive">https://labs.ripe.net/Members/fergalc/ixp-traffic-during-stratos-skydive</a></p><ol><li><strong>RFC(Request For Comments)</strong> ï¼šæ„æ€æ˜¯â€œè¯·æ±‚è¯„è®®â€ï¼ŒåŒ…å«äº†å…³äº Internet å‡ ä¹æ‰€æœ‰çš„é‡è¦çš„æ–‡å­—èµ„æ–™ã€‚</li><li><strong>å¹¿åŸŸç½‘ WANï¼ˆWide Area Networkï¼‰</strong> ï¼šä»»åŠ¡æ˜¯é€šè¿‡é•¿è·ç¦»è¿é€ä¸»æœºå‘é€çš„æ•°æ®ã€‚</li><li><strong>åŸåŸŸç½‘ MANï¼ˆMetropolitan Area Networkï¼‰</strong>ï¼šç”¨æ¥å°†å¤šä¸ªå±€åŸŸç½‘è¿›è¡Œäº’è¿ã€‚</li><li><strong>å±€åŸŸç½‘ LANï¼ˆLocal Area Networkï¼‰</strong> ï¼šå­¦æ ¡æˆ–ä¼ä¸šå¤§å¤šæ‹¥æœ‰å¤šä¸ªäº’è¿çš„å±€åŸŸç½‘ã€‚</li></ol><p><img src="https://mmbiz.qpic.cn/mmbiz_png/iaIdQfEric9Txpk4narOnyI7xL1Im2X40KrcbeiaicrHWViab1Y1CpIL7HCRPkDU9krlC4LLNE7ZFd1OichDpTHpAWdg/640?wx_fmt=png&tp=webp&wxfrom=5&wx_lazy=1&wx_co=1" alt="WMAN | Red de Ã¡rea metropolitana, Redes informaticas, Par trenzado">MAN &amp; </p><p><a href="http://conexionesmanwman.blogspot.com/">http://conexionesmanwman.blogspot.com/</a></p><ol><li><strong>ä¸ªäººåŒºåŸŸç½‘ PANï¼ˆPersonal Area Networkï¼‰</strong> ï¼šåœ¨ä¸ªäººå·¥ä½œçš„åœ°æ–¹æŠŠå±äºä¸ªäººä½¿ç”¨çš„ç”µå­è®¾å¤‡ç”¨æ— çº¿æŠ€æœ¯è¿æ¥èµ·æ¥çš„ç½‘ç»œ ã€‚</li></ol><p><img src="https://mmbiz.qpic.cn/mmbiz_png/iaIdQfEric9Txpk4narOnyI7xL1Im2X40K17hIicYcjUMEWOXggkLW94Jyj7iayq3yEXnQJ42JYD0sawosic7Olz8vA/640?wx_fmt=png&tp=webp&wxfrom=5&wx_lazy=1&wx_co=1" alt="Advantages and disadvantages of personal area network (PAN) - IT Release"></p><p><a href="https://www.itrelease.com/2018/07/advantages-and-disadvantages-of-personal-area-network-pan/">https://www.itrelease.com/2018/07/advantages-and-disadvantages-of-personal-area-network-pan/</a></p><ol><li><strong>åˆ†ç»„ï¼ˆpacket ï¼‰</strong> ï¼šå› ç‰¹ç½‘ä¸­ä¼ é€çš„æ•°æ®å•å…ƒã€‚ç”±é¦–éƒ¨ header å’Œæ•°æ®æ®µç»„æˆã€‚åˆ†ç»„åˆç§°ä¸ºåŒ…ï¼Œé¦–éƒ¨å¯ç§°ä¸ºåŒ…å¤´ã€‚</li><li><strong>å­˜å‚¨è½¬å‘ï¼ˆstore and forward ï¼‰</strong> ï¼šè·¯ç”±å™¨æ”¶åˆ°ä¸€ä¸ªåˆ†ç»„ï¼Œå…ˆæ£€æŸ¥åˆ†ç»„æ˜¯å¦æ­£ç¡®ï¼Œå¹¶è¿‡æ»¤æ‰å†²çªåŒ…é”™è¯¯ã€‚ç¡®å®šåŒ…æ­£ç¡®åï¼Œå–å‡ºç›®çš„åœ°å€ï¼Œé€šè¿‡æŸ¥æ‰¾è¡¨æ‰¾åˆ°æƒ³è¦å‘é€çš„è¾“å‡ºç«¯å£åœ°å€ï¼Œç„¶åå°†è¯¥åŒ…å‘é€å‡ºå»ã€‚</li></ol><p><img src="https://mmbiz.qpic.cn/mmbiz_gif/iaIdQfEric9Txpk4narOnyI7xL1Im2X40KAGYPOOZYnccAPtoIe5wwSaTP9vlaJxgyLyISqBtjzkoLMWtB7miabrQ/640?wx_fmt=gif&tp=webp&wxfrom=5&wx_lazy=1"></p><ol><li><strong>å¸¦å®½ï¼ˆbandwidthï¼‰</strong> ï¼šåœ¨è®¡ç®—æœºç½‘ç»œä¸­ï¼Œè¡¨ç¤ºåœ¨å•ä½æ—¶é—´å†…ä»ç½‘ç»œä¸­çš„æŸä¸€ç‚¹åˆ°å¦ä¸€ç‚¹æ‰€èƒ½é€šè¿‡çš„â€œæœ€é«˜æ•°æ®ç‡â€ã€‚å¸¸ç”¨æ¥è¡¨ç¤ºç½‘ç»œçš„é€šä¿¡çº¿è·¯æ‰€èƒ½ä¼ é€æ•°æ®çš„èƒ½åŠ›ã€‚å•ä½æ˜¯â€œæ¯”ç‰¹æ¯ç§’â€ï¼Œè®°ä¸º b/sã€‚</li><li><strong>ååé‡ï¼ˆthroughput ï¼‰</strong> ï¼šè¡¨ç¤ºåœ¨å•ä½æ—¶é—´å†…é€šè¿‡æŸä¸ªç½‘ç»œï¼ˆæˆ–ä¿¡é“ã€æ¥å£ï¼‰çš„æ•°æ®é‡ã€‚ååé‡æ›´ç»å¸¸åœ°ç”¨äºå¯¹ç°å®ä¸–ç•Œä¸­çš„ç½‘ç»œçš„ä¸€ç§æµ‹é‡ï¼Œä»¥ä¾¿çŸ¥é“å®é™…ä¸Šåˆ°åº•æœ‰å¤šå°‘æ•°æ®é‡èƒ½å¤Ÿé€šè¿‡ç½‘ç»œã€‚ååé‡å—ç½‘ç»œçš„å¸¦å®½æˆ–ç½‘ç»œçš„é¢å®šé€Ÿç‡çš„é™åˆ¶ã€‚</li></ol><h3 id="1-2-é‡è¦çŸ¥è¯†ç‚¹æ€»ç»“"><a href="#1-2-é‡è¦çŸ¥è¯†ç‚¹æ€»ç»“" class="headerlink" title="1.2. é‡è¦çŸ¥è¯†ç‚¹æ€»ç»“"></a>1.2. é‡è¦çŸ¥è¯†ç‚¹æ€»ç»“</h3><ol><li><strong>è®¡ç®—æœºç½‘ç»œï¼ˆç®€ç§°ç½‘ç»œï¼‰æŠŠè®¸å¤šè®¡ç®—æœºè¿æ¥åœ¨ä¸€èµ·ï¼Œè€Œäº’è”ç½‘æŠŠè®¸å¤šç½‘ç»œè¿æ¥åœ¨ä¸€èµ·ï¼Œæ˜¯ç½‘ç»œçš„ç½‘ç»œã€‚</strong></li><li>å°å†™å­—æ¯ i å¼€å¤´çš„ internetï¼ˆäº’è”ç½‘ï¼‰æ˜¯é€šç”¨åè¯ï¼Œå®ƒæ³›æŒ‡ç”±å¤šä¸ªè®¡ç®—æœºç½‘ç»œç›¸äº’è¿æ¥è€Œæˆçš„ç½‘ç»œã€‚åœ¨è¿™äº›ç½‘ç»œä¹‹é—´çš„é€šä¿¡åè®®ï¼ˆå³é€šä¿¡è§„åˆ™ï¼‰å¯ä»¥æ˜¯ä»»æ„çš„ã€‚å¤§å†™å­—æ¯ I å¼€å¤´çš„ Internetï¼ˆäº’è”ç½‘ï¼‰æ˜¯ä¸“ç”¨åè¯ï¼Œå®ƒæŒ‡å…¨çƒæœ€å¤§çš„ï¼Œå¼€æ”¾çš„ï¼Œç”±ä¼—å¤šç½‘ç»œç›¸äº’è¿æ¥è€Œæˆçš„ç‰¹å®šçš„äº’è”ç½‘ï¼Œå¹¶é‡‡ç”¨ TCP/IP åè®®ä½œä¸ºé€šä¿¡è§„åˆ™ï¼Œå…¶å‰èº«ä¸º ARPANETã€‚Internet çš„æ¨èè¯‘åä¸ºå› ç‰¹ç½‘ï¼Œç°åœ¨ä¸€èˆ¬æµè¡Œç§°ä¸ºäº’è”ç½‘ã€‚</li><li>è·¯ç”±å™¨æ˜¯å®ç°åˆ†ç»„äº¤æ¢çš„å…³é”®æ„ä»¶ï¼Œå…¶ä»»åŠ¡æ˜¯è½¬å‘æ”¶åˆ°çš„åˆ†ç»„ï¼Œè¿™æ˜¯ç½‘ç»œæ ¸å¿ƒéƒ¨åˆ†æœ€é‡è¦çš„åŠŸèƒ½ã€‚åˆ†ç»„äº¤æ¢é‡‡ç”¨å­˜å‚¨è½¬å‘æŠ€æœ¯ï¼Œè¡¨ç¤ºæŠŠä¸€ä¸ªæŠ¥æ–‡ï¼ˆè¦å‘é€çš„æ•´å—æ•°æ®ï¼‰åˆ†ä¸ºå‡ ä¸ªåˆ†ç»„åå†è¿›è¡Œä¼ é€ã€‚åœ¨å‘é€æŠ¥æ–‡ä¹‹å‰ï¼Œå…ˆæŠŠè¾ƒé•¿çš„æŠ¥æ–‡åˆ’åˆ†æˆä¸ºä¸€ä¸ªä¸ªæ›´å°çš„ç­‰é•¿æ•°æ®æ®µã€‚åœ¨æ¯ä¸ªæ•°æ®ç«¯çš„å‰é¢åŠ ä¸Šä¸€äº›ç”±å¿…è¦çš„æ§åˆ¶ä¿¡æ¯ç»„æˆçš„é¦–éƒ¨åï¼Œå°±æ„æˆäº†ä¸€ä¸ªåˆ†ç»„ã€‚åˆ†ç»„åˆç§°ä¸ºåŒ…ã€‚åˆ†ç»„æ˜¯åœ¨äº’è”ç½‘ä¸­ä¼ é€çš„æ•°æ®å•å…ƒï¼Œæ­£æ˜¯ç”±äºåˆ†ç»„çš„å¤´éƒ¨åŒ…å«äº†è¯¸å¦‚ç›®çš„åœ°å€å’Œæºåœ°å€ç­‰é‡è¦æ§åˆ¶ä¿¡æ¯ï¼Œæ¯ä¸€ä¸ªåˆ†ç»„æ‰èƒ½åœ¨äº’è”ç½‘ä¸­ç‹¬ç«‹çš„é€‰æ‹©ä¼ è¾“è·¯å¾„ï¼Œå¹¶æ­£ç¡®åœ°äº¤ä»˜åˆ°åˆ†ç»„ä¼ è¾“çš„ç»ˆç‚¹ã€‚</li><li>äº’è”ç½‘æŒ‰å·¥ä½œæ–¹å¼å¯åˆ’åˆ†ä¸ºè¾¹ç¼˜éƒ¨åˆ†å’Œæ ¸å¿ƒéƒ¨åˆ†ã€‚ä¸»æœºåœ¨ç½‘ç»œçš„è¾¹ç¼˜éƒ¨åˆ†ï¼Œå…¶ä½œç”¨æ˜¯è¿›è¡Œä¿¡æ¯å¤„ç†ã€‚ç”±å¤§é‡ç½‘ç»œå’Œè¿æ¥è¿™äº›ç½‘ç»œçš„è·¯ç”±å™¨ç»„æˆæ ¸å¿ƒéƒ¨åˆ†ï¼Œå…¶ä½œç”¨æ˜¯æä¾›è¿é€šæ€§å’Œäº¤æ¢ã€‚</li><li>è®¡ç®—æœºé€šä¿¡æ˜¯è®¡ç®—æœºä¸­è¿›ç¨‹ï¼ˆå³è¿è¡Œç€çš„ç¨‹åºï¼‰ä¹‹é—´çš„é€šä¿¡ã€‚è®¡ç®—æœºç½‘ç»œé‡‡ç”¨çš„é€šä¿¡æ–¹å¼æ˜¯å®¢æˆ·-æœåŠ¡å™¨æ–¹å¼ï¼ˆC/S æ–¹å¼ï¼‰å’Œå¯¹ç­‰è¿æ¥æ–¹å¼ï¼ˆP2P æ–¹å¼ï¼‰ã€‚</li><li>å®¢æˆ·å’ŒæœåŠ¡å™¨éƒ½æ˜¯æŒ‡é€šä¿¡ä¸­æ‰€æ¶‰åŠçš„åº”ç”¨è¿›ç¨‹ã€‚å®¢æˆ·æ˜¯æœåŠ¡è¯·æ±‚æ–¹ï¼ŒæœåŠ¡å™¨æ˜¯æœåŠ¡æä¾›æ–¹ã€‚</li><li>æŒ‰ç…§ä½œç”¨èŒƒå›´çš„ä¸åŒï¼Œè®¡ç®—æœºç½‘ç»œåˆ†ä¸ºå¹¿åŸŸç½‘ WANï¼ŒåŸåŸŸç½‘ MANï¼Œå±€åŸŸç½‘ LANï¼Œä¸ªäººåŒºåŸŸç½‘ PANã€‚</li><li><strong>è®¡ç®—æœºç½‘ç»œæœ€å¸¸ç”¨çš„æ€§èƒ½æŒ‡æ ‡æ˜¯ï¼šé€Ÿç‡ï¼Œå¸¦å®½ï¼Œååé‡ï¼Œæ—¶å»¶ï¼ˆå‘é€æ—¶å»¶ï¼Œå¤„ç†æ—¶å»¶ï¼Œæ’é˜Ÿæ—¶å»¶ï¼‰ï¼Œæ—¶å»¶å¸¦å®½ç§¯ï¼Œå¾€è¿”æ—¶é—´å’Œä¿¡é“åˆ©ç”¨ç‡ã€‚</strong></li><li>ç½‘ç»œåè®®å³åè®®ï¼Œæ˜¯ä¸ºè¿›è¡Œç½‘ç»œä¸­çš„æ•°æ®äº¤æ¢è€Œå»ºç«‹çš„è§„åˆ™ã€‚è®¡ç®—æœºç½‘ç»œçš„å„å±‚ä»¥åŠå…¶åè®®é›†åˆï¼Œç§°ä¸ºç½‘ç»œçš„ä½“ç³»ç»“æ„ã€‚</li><li><strong>äº”å±‚ä½“ç³»ç»“æ„ç”±åº”ç”¨å±‚ï¼Œè¿è¾“å±‚ï¼Œç½‘ç»œå±‚ï¼ˆç½‘é™…å±‚ï¼‰ï¼Œæ•°æ®é“¾è·¯å±‚ï¼Œç‰©ç†å±‚ç»„æˆã€‚è¿è¾“å±‚æœ€ä¸»è¦çš„åè®®æ˜¯ TCP å’Œ UDP åè®®ï¼Œç½‘ç»œå±‚æœ€é‡è¦çš„åè®®æ˜¯ IP åè®®ã€‚</strong></li></ol><p><img src="https://mmbiz.qpic.cn/mmbiz_png/iaIdQfEric9Txpk4narOnyI7xL1Im2X40Kfsz72GZ1EcdaK10TEDmLicfWKA44icf6qaHtiaHfbPw2FQnaj8Ia9TMaw/640?wx_fmt=jpeg&tp=webp&wxfrom=5&wx_lazy=1&wx_co=1" alt="img"></p><p>ä¸‹é¢çš„å†…å®¹ä¼šä»‹ç»è®¡ç®—æœºç½‘ç»œçš„äº”å±‚ä½“ç³»ç»“æ„ï¼š<strong>ç‰©ç†å±‚+æ•°æ®é“¾è·¯å±‚+ç½‘ç»œå±‚ï¼ˆç½‘é™…å±‚ï¼‰+è¿è¾“å±‚+åº”ç”¨å±‚</strong>ã€‚</p><h2 id="2-ç‰©ç†å±‚ï¼ˆPhysical-Layerï¼‰"><a href="#2-ç‰©ç†å±‚ï¼ˆPhysical-Layerï¼‰" class="headerlink" title="2. ç‰©ç†å±‚ï¼ˆPhysical Layerï¼‰"></a>2. ç‰©ç†å±‚ï¼ˆPhysical Layerï¼‰</h2><p><img src="https://mmbiz.qpic.cn/mmbiz_png/iaIdQfEric9Txpk4narOnyI7xL1Im2X40KNaLqxZxFpZ39VMbFIhIco1KNmP32LgXonpxmyaCIiaicNqibF2pwqovRg/640?wx_fmt=png&tp=webp&wxfrom=5&wx_lazy=1&wx_co=1" alt="ç‰©ç†å±‚"></p><h3 id="2-1-åŸºæœ¬æœ¯è¯­"><a href="#2-1-åŸºæœ¬æœ¯è¯­" class="headerlink" title="2.1. åŸºæœ¬æœ¯è¯­"></a>2.1. åŸºæœ¬æœ¯è¯­</h3><ol><li><strong>æ•°æ®ï¼ˆdataï¼‰</strong> :è¿é€æ¶ˆæ¯çš„å®ä½“ã€‚</li><li><strong>ä¿¡å·ï¼ˆsignalï¼‰</strong> ï¼šæ•°æ®çš„ç”µæ°”çš„æˆ–ç”µç£çš„è¡¨ç°ã€‚æˆ–è€…è¯´ä¿¡å·æ˜¯é€‚åˆåœ¨ä¼ è¾“ä»‹è´¨ä¸Šä¼ è¾“çš„å¯¹è±¡ã€‚</li><li><strong>ç å…ƒï¼ˆ codeï¼‰</strong> ï¼šåœ¨ä½¿ç”¨æ—¶é—´åŸŸï¼ˆæˆ–ç®€ç§°ä¸ºæ—¶åŸŸï¼‰çš„æ³¢å½¢æ¥è¡¨ç¤ºæ•°å­—ä¿¡å·æ—¶ï¼Œä»£è¡¨ä¸åŒç¦»æ•£æ•°å€¼çš„åŸºæœ¬æ³¢å½¢ã€‚</li><li><strong>å•å·¥ï¼ˆsimplex ï¼‰</strong> : åªèƒ½æœ‰ä¸€ä¸ªæ–¹å‘çš„é€šä¿¡è€Œæ²¡æœ‰åæ–¹å‘çš„äº¤äº’ã€‚</li><li><strong>åŠåŒå·¥ï¼ˆhalf duplex ï¼‰</strong> ï¼šé€šä¿¡çš„åŒæ–¹éƒ½å¯ä»¥å‘é€ä¿¡æ¯ï¼Œä½†ä¸èƒ½åŒæ–¹åŒæ—¶å‘é€(å½“ç„¶ä¹Ÿå°±ä¸èƒ½åŒæ—¶æ¥æ”¶)ã€‚</li><li><strong>å…¨åŒå·¥ï¼ˆfull duplexï¼‰</strong> : é€šä¿¡çš„åŒæ–¹å¯ä»¥åŒæ—¶å‘é€å’Œæ¥æ”¶ä¿¡æ¯ã€‚</li></ol><p><img src="https://mmbiz.qpic.cn/mmbiz_png/iaIdQfEric9Txpk4narOnyI7xL1Im2X40Kic4S5U3DHOIqEJZPHpstnia2tKS0WEeLiaGJKfaJnbicicXDtvVoBianfAYQ/640?wx_fmt=png&tp=webp&wxfrom=5&wx_lazy=1&wx_co=1"></p><ol><li><strong>å¤±çœŸ</strong>ï¼šå¤±å»çœŸå®æ€§ï¼Œä¸»è¦æ˜¯æŒ‡æ¥å—åˆ°çš„ä¿¡å·å’Œå‘é€çš„ä¿¡å·ä¸åŒï¼Œæœ‰ç£¨æŸå’Œè¡°å‡ã€‚å½±å“å¤±çœŸç¨‹åº¦çš„å› ç´ ï¼š1.ç å…ƒä¼ è¾“é€Ÿç‡ 2.ä¿¡å·ä¼ è¾“è·ç¦» 3.å™ªå£°å¹²æ‰° 4.ä¼ è¾“åª’ä½“è´¨é‡</li></ol><p><img src="https://mmbiz.qpic.cn/mmbiz_png/iaIdQfEric9Txpk4narOnyI7xL1Im2X40KohbQkoq2McFba8v1vVys8JHhycQvNqDBn9T2kksRcIwqibtwGlK41dQ/640?wx_fmt=png&tp=webp&wxfrom=5&wx_lazy=1&wx_co=1"></p><ol><li><strong>å¥ˆæ°å‡†åˆ™</strong> : åœ¨ä»»ä½•ä¿¡é“ä¸­ï¼Œç å…ƒçš„ä¼ è¾“çš„æ•ˆç‡æ˜¯æœ‰ä¸Šé™çš„ï¼Œä¼ è¾“é€Ÿç‡è¶…è¿‡æ­¤ä¸Šé™ï¼Œå°±ä¼šå‡ºç°ä¸¥é‡çš„ç é—´ä¸²æ‰°é—®é¢˜ï¼Œä½¿æ¥æ”¶ç«¯å¯¹ç å…ƒçš„åˆ¤å†³ï¼ˆå³è¯†åˆ«ï¼‰æˆä¸ºä¸å¯èƒ½ã€‚</li><li><strong>é¦™å†œå®šç†</strong> ï¼šåœ¨å¸¦å®½å—é™ä¸”æœ‰å™ªå£°çš„ä¿¡é“ä¸­ï¼Œä¸ºäº†ä¸äº§ç”Ÿè¯¯å·®ï¼Œä¿¡æ¯çš„æ•°æ®ä¼ è¾“é€Ÿç‡æœ‰ä¸Šé™å€¼ã€‚</li><li><strong>åŸºå¸¦ä¿¡å·ï¼ˆbaseband signalï¼‰</strong> : æ¥è‡ªä¿¡æºçš„ä¿¡å·ã€‚æŒ‡æ²¡æœ‰ç»è¿‡è°ƒåˆ¶çš„æ•°å­—ä¿¡å·æˆ–æ¨¡æ‹Ÿä¿¡å·ã€‚</li><li><strong>å¸¦é€šï¼ˆé¢‘å¸¦ï¼‰ä¿¡å·ï¼ˆbandpass signalï¼‰</strong> ï¼šæŠŠåŸºå¸¦ä¿¡å·ç»è¿‡è½½æ³¢è°ƒåˆ¶åï¼ŒæŠŠä¿¡å·çš„é¢‘ç‡èŒƒå›´æ¬ç§»åˆ°è¾ƒé«˜çš„é¢‘æ®µä»¥ä¾¿åœ¨ä¿¡é“ä¸­ä¼ è¾“ï¼ˆå³ä»…åœ¨ä¸€æ®µé¢‘ç‡èŒƒå›´å†…èƒ½å¤Ÿé€šè¿‡ä¿¡é“ï¼‰ï¼Œè¿™é‡Œè°ƒåˆ¶è¿‡åçš„ä¿¡å·å°±æ˜¯å¸¦é€šä¿¡å·ã€‚</li><li><strong>è°ƒåˆ¶ï¼ˆmodulation ï¼‰</strong> : å¯¹ä¿¡å·æºçš„ä¿¡æ¯è¿›è¡Œå¤„ç†ååŠ åˆ°è½½æ³¢ä¿¡å·ä¸Šï¼Œä½¿å…¶å˜ä¸ºé€‚åˆåœ¨ä¿¡é“ä¼ è¾“çš„å½¢å¼çš„è¿‡ç¨‹ã€‚</li><li><strong>ä¿¡å™ªæ¯”ï¼ˆsignal-to-noise ratio ï¼‰</strong> : æŒ‡ä¿¡å·çš„å¹³å‡åŠŸç‡å’Œå™ªå£°çš„å¹³å‡åŠŸç‡ä¹‹æ¯”ï¼Œè®°ä¸º S/Nã€‚ä¿¡å™ªæ¯”ï¼ˆdBï¼‰=10*log10ï¼ˆS/Nï¼‰ã€‚</li><li><strong>ä¿¡é“å¤ç”¨ï¼ˆchannel multiplexing ï¼‰</strong> ï¼šæŒ‡å¤šä¸ªç”¨æˆ·å…±äº«åŒä¸€ä¸ªä¿¡é“ã€‚ï¼ˆå¹¶ä¸ä¸€å®šæ˜¯åŒæ—¶ï¼‰ã€‚</li></ol><p><img src="https://mmbiz.qpic.cn/mmbiz_png/iaIdQfEric9Txpk4narOnyI7xL1Im2X40KbnVTuNkLQX0B1mYiamxa2pA4WL5mxiakq2oBsXYzXjac0kofNmg44L3A/640?wx_fmt=png&tp=webp&wxfrom=5&wx_lazy=1&wx_co=1" alt="ä¿¡é“å¤ç”¨æŠ€æœ¯"></p><ol><li><strong>æ¯”ç‰¹ç‡ï¼ˆbit rate ï¼‰</strong> ï¼šå•ä½æ—¶é—´ï¼ˆæ¯ç§’ï¼‰å†…ä¼ é€çš„æ¯”ç‰¹æ•°ã€‚</li><li><strong>æ³¢ç‰¹ç‡ï¼ˆbaud rateï¼‰</strong> ï¼šå•ä½æ—¶é—´è½½æ³¢è°ƒåˆ¶çŠ¶æ€æ”¹å˜çš„æ¬¡æ•°ã€‚é’ˆå¯¹æ•°æ®ä¿¡å·å¯¹è½½æ³¢çš„è°ƒåˆ¶é€Ÿç‡ã€‚</li><li><strong>å¤ç”¨ï¼ˆmultiplexingï¼‰</strong> ï¼šå…±äº«ä¿¡é“çš„æ–¹æ³•ã€‚</li><li><strong>ADSLï¼ˆAsymmetric Digital Subscriber Line ï¼‰</strong> ï¼šéå¯¹ç§°æ•°å­—ç”¨æˆ·çº¿ã€‚</li><li><strong>å…‰çº¤åŒè½´æ··åˆç½‘ï¼ˆHFC ç½‘ï¼‰</strong> :åœ¨ç›®å‰è¦†ç›–èŒƒå›´å¾ˆå¹¿çš„æœ‰çº¿ç”µè§†ç½‘çš„åŸºç¡€ä¸Šå¼€å‘çš„ä¸€ç§å±…æ°‘å®½å¸¦æ¥å…¥ç½‘</li></ol><h3 id="2-2-é‡è¦çŸ¥è¯†ç‚¹æ€»ç»“"><a href="#2-2-é‡è¦çŸ¥è¯†ç‚¹æ€»ç»“" class="headerlink" title="2.2. é‡è¦çŸ¥è¯†ç‚¹æ€»ç»“"></a>2.2. é‡è¦çŸ¥è¯†ç‚¹æ€»ç»“</h3><ol><li><strong>ç‰©ç†å±‚çš„ä¸»è¦ä»»åŠ¡å°±æ˜¯ç¡®å®šä¸ä¼ è¾“åª’ä½“æ¥å£æœ‰å…³çš„ä¸€äº›ç‰¹æ€§ï¼Œå¦‚æœºæ¢°ç‰¹æ€§ï¼Œç”µæ°”ç‰¹æ€§ï¼ŒåŠŸèƒ½ç‰¹æ€§ï¼Œè¿‡ç¨‹ç‰¹æ€§ã€‚</strong></li><li>ä¸€ä¸ªæ•°æ®é€šä¿¡ç³»ç»Ÿå¯åˆ’åˆ†ä¸ºä¸‰å¤§éƒ¨åˆ†ï¼Œå³æºç³»ç»Ÿï¼Œä¼ è¾“ç³»ç»Ÿï¼Œç›®çš„ç³»ç»Ÿã€‚æºç³»ç»ŸåŒ…æ‹¬æºç‚¹ï¼ˆæˆ–æºç«™ï¼Œä¿¡æºï¼‰å’Œå‘é€å™¨ï¼Œç›®çš„ç³»ç»ŸåŒ…æ‹¬æ¥æ”¶å™¨å’Œç»ˆç‚¹ã€‚</li><li><strong>é€šä¿¡çš„ç›®çš„æ˜¯ä¼ é€æ¶ˆæ¯ã€‚å¦‚è¯éŸ³ï¼Œæ–‡å­—ï¼Œå›¾åƒç­‰éƒ½æ˜¯æ¶ˆæ¯ï¼Œæ•°æ®æ˜¯è¿é€æ¶ˆæ¯çš„å®ä½“ã€‚ä¿¡å·åˆ™æ˜¯æ•°æ®çš„ç”µå™¨æˆ–ç”µç£çš„è¡¨ç°ã€‚</strong></li><li>æ ¹æ®ä¿¡å·ä¸­ä»£è¡¨æ¶ˆæ¯çš„å‚æ•°çš„å–å€¼æ–¹å¼ä¸åŒï¼Œä¿¡å·å¯åˆ†ä¸ºæ¨¡æ‹Ÿä¿¡å·ï¼ˆæˆ–è¿ç»­ä¿¡å·ï¼‰å’Œæ•°å­—ä¿¡å·ï¼ˆæˆ–ç¦»æ•£ä¿¡å·ï¼‰ã€‚åœ¨ä½¿ç”¨æ—¶é—´åŸŸï¼ˆç®€ç§°æ—¶åŸŸï¼‰çš„æ³¢å½¢è¡¨ç¤ºæ•°å­—ä¿¡å·æ—¶ï¼Œä»£è¡¨ä¸åŒç¦»æ•£æ•°å€¼çš„åŸºæœ¬æ³¢å½¢ç§°ä¸ºç å…ƒã€‚</li><li>æ ¹æ®åŒæ–¹ä¿¡æ¯äº¤äº’çš„æ–¹å¼ï¼Œé€šä¿¡å¯åˆ’åˆ†ä¸ºå•å‘é€šä¿¡ï¼ˆæˆ–å•å·¥é€šä¿¡ï¼‰ï¼ŒåŒå‘äº¤æ›¿é€šä¿¡ï¼ˆæˆ–åŠåŒå·¥é€šä¿¡ï¼‰ï¼ŒåŒå‘åŒæ—¶é€šä¿¡ï¼ˆå…¨åŒå·¥é€šä¿¡ï¼‰ã€‚</li><li>æ¥è‡ªä¿¡æºçš„ä¿¡å·ç§°ä¸ºåŸºå¸¦ä¿¡å·ã€‚ä¿¡å·è¦åœ¨ä¿¡é“ä¸Šä¼ è¾“å°±è¦ç»è¿‡è°ƒåˆ¶ã€‚è°ƒåˆ¶æœ‰åŸºå¸¦è°ƒåˆ¶å’Œå¸¦é€šè°ƒåˆ¶ä¹‹åˆ†ã€‚æœ€åŸºæœ¬çš„å¸¦é€šè°ƒåˆ¶æ–¹æ³•æœ‰è°ƒå¹…ï¼Œè°ƒé¢‘å’Œè°ƒç›¸ã€‚è¿˜æœ‰æ›´å¤æ‚çš„è°ƒåˆ¶æ–¹æ³•ï¼Œå¦‚æ­£äº¤æŒ¯å¹…è°ƒåˆ¶ã€‚</li><li>è¦æé«˜æ•°æ®åœ¨ä¿¡é“ä¸Šçš„ä¼ é€’é€Ÿç‡ï¼Œå¯ä»¥ä½¿ç”¨æ›´å¥½çš„ä¼ è¾“åª’ä½“ï¼Œæˆ–ä½¿ç”¨å…ˆè¿›çš„è°ƒåˆ¶æŠ€æœ¯ã€‚ä½†æ•°æ®ä¼ è¾“é€Ÿç‡ä¸å¯èƒ½ä»»æ„è¢«æé«˜ã€‚</li><li>ä¼ è¾“åª’ä½“å¯åˆ†ä¸ºä¸¤å¤§ç±»ï¼Œå³å¯¼å¼•å‹ä¼ è¾“åª’ä½“ï¼ˆåŒç»çº¿ï¼ŒåŒè½´ç”µç¼†ï¼Œå…‰çº¤ï¼‰å’Œéå¯¼å¼•å‹ä¼ è¾“åª’ä½“ï¼ˆæ— çº¿ï¼Œçº¢å¤–ï¼Œå¤§æ°”æ¿€å…‰ï¼‰ã€‚</li><li>äº†æœ‰æ•ˆåˆ©ç”¨å…‰çº¤èµ„æºï¼Œåœ¨å…‰çº¤å¹²çº¿å’Œç”¨æˆ·ä¹‹é—´å¹¿æ³›ä½¿ç”¨æ— æºå…‰ç½‘ç»œ PONã€‚æ— æºå…‰ç½‘ç»œæ— éœ€é…å¤‡ç”µæºï¼Œå…¶é•¿æœŸè¿è¥æˆæœ¬å’Œç®¡ç†æˆæœ¬éƒ½å¾ˆä½ã€‚æœ€æµè¡Œçš„æ— æºå…‰ç½‘ç»œæ˜¯ä»¥å¤ªç½‘æ— æºå…‰ç½‘ç»œ EPON å’Œå‰æ¯”ç‰¹æ— æºå…‰ç½‘ç»œ GPONã€‚</li></ol><h3 id="2-3-è¡¥å……"><a href="#2-3-è¡¥å……" class="headerlink" title="2.3. è¡¥å……"></a>2.3. è¡¥å……</h3><h4 id="2-3-1-ç‰©ç†å±‚ä¸»è¦åšå•¥ï¼Ÿ"><a href="#2-3-1-ç‰©ç†å±‚ä¸»è¦åšå•¥ï¼Ÿ" class="headerlink" title="2.3.1. ç‰©ç†å±‚ä¸»è¦åšå•¥ï¼Ÿ"></a>2.3.1. ç‰©ç†å±‚ä¸»è¦åšå•¥ï¼Ÿ</h4><p>ç‰©ç†å±‚ä¸»è¦åšçš„äº‹æƒ…å°±æ˜¯ <strong>é€æ˜åœ°ä¼ é€æ¯”ç‰¹æµ</strong>ã€‚ä¹Ÿå¯ä»¥å°†ç‰©ç†å±‚çš„ä¸»è¦ä»»åŠ¡æè¿°ä¸ºç¡®å®šä¸ä¼ è¾“åª’ä½“çš„æ¥å£çš„ä¸€äº›ç‰¹æ€§ï¼Œå³ï¼šæœºæ¢°ç‰¹æ€§ï¼ˆæ¥å£æ‰€ç”¨æ¥çº¿å™¨çš„ä¸€äº›ç‰©ç†å±æ€§å¦‚å½¢çŠ¶å°ºå¯¸ï¼‰ï¼Œç”µæ°”ç‰¹æ€§ï¼ˆæ¥å£ç”µç¼†çš„å„æ¡çº¿ä¸Šå‡ºç°çš„ç”µå‹çš„èŒƒå›´ï¼‰ï¼ŒåŠŸèƒ½ç‰¹æ€§ï¼ˆæŸæ¡çº¿ä¸Šå‡ºç°çš„æŸä¸€ç”µå¹³çš„ç”µå‹çš„æ„ä¹‰ï¼‰ï¼Œè¿‡ç¨‹ç‰¹æ€§ï¼ˆå¯¹äºä¸åŒåŠŸèƒ½èƒ½çš„å„ç§å¯èƒ½äº‹ä»¶çš„å‡ºç°é¡ºåºï¼‰ã€‚</p><p><strong>ç‰©ç†å±‚è€ƒè™‘çš„æ˜¯æ€æ ·æ‰èƒ½åœ¨è¿æ¥å„ç§è®¡ç®—æœºçš„ä¼ è¾“åª’ä½“ä¸Šä¼ è¾“æ•°æ®æ¯”ç‰¹æµï¼Œè€Œä¸æ˜¯æŒ‡å…·ä½“çš„ä¼ è¾“åª’ä½“ã€‚</strong> ç°æœ‰çš„è®¡ç®—æœºç½‘ç»œä¸­çš„ç¡¬ä»¶è®¾å¤‡å’Œä¼ è¾“åª’ä½“çš„ç§ç±»éå¸¸ç¹å¤šï¼Œè€Œä¸”é€šä¿¡æ‰‹æ®µä¹Ÿæœ‰è®¸å¤šä¸åŒçš„æ–¹å¼ã€‚ç‰©ç†å±‚çš„ä½œç”¨æ­£æ˜¯å°½å¯èƒ½åœ°å±è”½æ‰è¿™äº›ä¼ è¾“åª’ä½“å’Œé€šä¿¡æ‰‹æ®µçš„å·®å¼‚ï¼Œä½¿ç‰©ç†å±‚ä¸Šé¢çš„æ•°æ®é“¾è·¯å±‚æ„Ÿè§‰ä¸åˆ°è¿™äº›å·®å¼‚ï¼Œè¿™æ ·å°±å¯ä»¥ä½¿æ•°æ®é“¾è·¯å±‚åªè€ƒè™‘å®Œæˆæœ¬å±‚çš„åè®®å’ŒæœåŠ¡ï¼Œè€Œä¸å¿…è€ƒè™‘ç½‘ç»œçš„å…·ä½“ä¼ è¾“åª’ä½“å’Œé€šä¿¡æ‰‹æ®µæ˜¯ä»€ä¹ˆã€‚</p><h4 id="2-3-2-å‡ ç§å¸¸ç”¨çš„ä¿¡é“å¤ç”¨æŠ€æœ¯"><a href="#2-3-2-å‡ ç§å¸¸ç”¨çš„ä¿¡é“å¤ç”¨æŠ€æœ¯" class="headerlink" title="2.3.2. å‡ ç§å¸¸ç”¨çš„ä¿¡é“å¤ç”¨æŠ€æœ¯"></a>2.3.2. å‡ ç§å¸¸ç”¨çš„ä¿¡é“å¤ç”¨æŠ€æœ¯</h4><ol><li><strong>é¢‘åˆ†å¤ç”¨(FDM)</strong> ï¼šæ‰€æœ‰ç”¨æˆ·åœ¨åŒæ ·çš„æ—¶é—´å ç”¨ä¸åŒçš„å¸¦å®½èµ„æºã€‚</li><li><strong>æ—¶åˆ†å¤ç”¨ï¼ˆTDMï¼‰</strong> ï¼šæ‰€æœ‰ç”¨æˆ·åœ¨ä¸åŒçš„æ—¶é—´å ç”¨åŒæ ·çš„é¢‘å¸¦å®½åº¦ï¼ˆåˆ†æ—¶ä¸åˆ†é¢‘ï¼‰ã€‚</li><li><strong>ç»Ÿè®¡æ—¶åˆ†å¤ç”¨ (Statistic TDM)</strong> ï¼šæ”¹è¿›çš„æ—¶åˆ†å¤ç”¨ï¼Œèƒ½å¤Ÿæ˜æ˜¾æé«˜ä¿¡é“çš„åˆ©ç”¨ç‡ã€‚</li><li><strong>ç åˆ†å¤ç”¨(CDM)</strong> ï¼šç”¨æˆ·ä½¿ç”¨ç»è¿‡ç‰¹æ®ŠæŒ‘é€‰çš„ä¸åŒç å‹ï¼Œå› æ­¤å„ç”¨æˆ·ä¹‹é—´ä¸ä¼šé€ æˆå¹²æ‰°ã€‚è¿™ç§ç³»ç»Ÿå‘é€çš„ä¿¡å·æœ‰å¾ˆå¼ºçš„æŠ—å¹²æ‰°èƒ½åŠ›ï¼Œå…¶é¢‘è°±ç±»ä¼¼äºç™½å™ªå£°ï¼Œä¸æ˜“è¢«æ•Œäººå‘ç°ã€‚</li><li><strong>æ³¢åˆ†å¤ç”¨( WDM)</strong> ï¼šæ³¢åˆ†å¤ç”¨å°±æ˜¯å…‰çš„é¢‘åˆ†å¤ç”¨ã€‚</li></ol><h4 id="2-3-3-å‡ ç§å¸¸ç”¨çš„å®½å¸¦æ¥å…¥æŠ€æœ¯ï¼Œä¸»è¦æ˜¯-ADSL-å’Œ-FTTx"><a href="#2-3-3-å‡ ç§å¸¸ç”¨çš„å®½å¸¦æ¥å…¥æŠ€æœ¯ï¼Œä¸»è¦æ˜¯-ADSL-å’Œ-FTTx" class="headerlink" title="2.3.3. å‡ ç§å¸¸ç”¨çš„å®½å¸¦æ¥å…¥æŠ€æœ¯ï¼Œä¸»è¦æ˜¯ ADSL å’Œ FTTx"></a>2.3.3. å‡ ç§å¸¸ç”¨çš„å®½å¸¦æ¥å…¥æŠ€æœ¯ï¼Œä¸»è¦æ˜¯ ADSL å’Œ FTTx</h4><p>ç”¨æˆ·åˆ°äº’è”ç½‘çš„å®½å¸¦æ¥å…¥æ–¹æ³•æœ‰éå¯¹ç§°æ•°å­—ç”¨æˆ·çº¿ ADSLï¼ˆç”¨æ•°å­—æŠ€æœ¯å¯¹ç°æœ‰çš„æ¨¡æ‹Ÿç”µè¯çº¿è¿›è¡Œæ”¹é€ ï¼Œè€Œä¸éœ€è¦é‡æ–°å¸ƒçº¿ã€‚ASDL çš„å¿«é€Ÿç‰ˆæœ¬æ˜¯ç”šé«˜é€Ÿæ•°å­—ç”¨æˆ·çº¿ VDSLã€‚ï¼‰ï¼Œå…‰çº¤åŒè½´æ··åˆç½‘ HFCï¼ˆæ˜¯åœ¨ç›®å‰è¦†ç›–èŒƒå›´å¾ˆå¹¿çš„æœ‰çº¿ç”µè§†ç½‘çš„åŸºç¡€ä¸Šå¼€å‘çš„ä¸€ç§å±…æ°‘å®½å¸¦æ¥å…¥ç½‘ï¼‰å’Œ FTTxï¼ˆå³å…‰çº¤åˆ°Â·Â·Â·Â·Â·Â·ï¼‰ã€‚</p><h2 id="3-æ•°æ®é“¾è·¯å±‚ï¼ˆData-Link-Layerï¼‰"><a href="#3-æ•°æ®é“¾è·¯å±‚ï¼ˆData-Link-Layerï¼‰" class="headerlink" title="3. æ•°æ®é“¾è·¯å±‚ï¼ˆData Link Layerï¼‰"></a>3. æ•°æ®é“¾è·¯å±‚ï¼ˆData Link Layerï¼‰</h2><p><img src="https://mmbiz.qpic.cn/mmbiz_png/iaIdQfEric9Txpk4narOnyI7xL1Im2X40KyfdFTVYKazEFHWlq5TjQ1nrXKNibicB8Rnl0CWpxjwdZMy7NQ3BicA5Uw/640?wx_fmt=png&tp=webp&wxfrom=5&wx_lazy=1&wx_co=1" alt="æ•°æ®é“¾è·¯å±‚"></p><h3 id="3-1-åŸºæœ¬æœ¯è¯­"><a href="#3-1-åŸºæœ¬æœ¯è¯­" class="headerlink" title="3.1. åŸºæœ¬æœ¯è¯­"></a>3.1. åŸºæœ¬æœ¯è¯­</h3><ol><li><p><strong>é“¾è·¯ï¼ˆlinkï¼‰</strong> ï¼šä¸€ä¸ªç»“ç‚¹åˆ°ç›¸é‚»ç»“ç‚¹çš„ä¸€æ®µç‰©ç†é“¾è·¯ã€‚</p></li><li><p><strong>æ•°æ®é“¾è·¯ï¼ˆdata linkï¼‰</strong> ï¼šæŠŠå®ç°æ§åˆ¶æ•°æ®è¿è¾“çš„åè®®çš„ç¡¬ä»¶å’Œè½¯ä»¶åŠ åˆ°é“¾è·¯ä¸Šå°±æ„æˆäº†æ•°æ®é“¾è·¯ã€‚</p></li><li><p><strong>å¾ªç¯å†—ä½™æ£€éªŒ CRCï¼ˆCyclic Redundancy Checkï¼‰</strong> ï¼šä¸ºäº†ä¿è¯æ•°æ®ä¼ è¾“çš„å¯é æ€§ï¼ŒCRC æ˜¯æ•°æ®é“¾è·¯å±‚å¹¿æ³›ä½¿ç”¨çš„ä¸€ç§æ£€é”™æŠ€æœ¯ã€‚</p></li><li><p><strong>å¸§ï¼ˆframeï¼‰</strong> ï¼šä¸€ä¸ªæ•°æ®é“¾è·¯å±‚çš„ä¼ è¾“å•å…ƒï¼Œç”±ä¸€ä¸ªæ•°æ®é“¾è·¯å±‚é¦–éƒ¨å’Œå…¶æºå¸¦çš„å°åŒ…æ‰€ç»„æˆåè®®æ•°æ®å•å…ƒã€‚</p></li><li><p><strong>MTUï¼ˆMaximum Transfer Uint ï¼‰</strong> ï¼šæœ€å¤§ä¼ é€å•å…ƒã€‚å¸§çš„æ•°æ®éƒ¨åˆ†çš„çš„é•¿åº¦ä¸Šé™ã€‚</p></li><li><p><strong>è¯¯ç ç‡ BERï¼ˆBit Error Rate ï¼‰</strong> ï¼šåœ¨ä¸€æ®µæ—¶é—´å†…ï¼Œä¼ è¾“é”™è¯¯çš„æ¯”ç‰¹å æ‰€ä¼ è¾“æ¯”ç‰¹æ€»æ•°çš„æ¯”ç‡ã€‚</p></li><li><p><strong>PPPï¼ˆPoint-to-Point Protocol ï¼‰</strong> ï¼šç‚¹å¯¹ç‚¹åè®®ã€‚å³ç”¨æˆ·è®¡ç®—æœºå’Œ ISP è¿›è¡Œé€šä¿¡æ—¶æ‰€ä½¿ç”¨çš„æ•°æ®é“¾è·¯å±‚åè®®ã€‚ä»¥ä¸‹æ˜¯ PPP å¸§çš„ç¤ºæ„å›¾ï¼š</p><p><img src="https://mmbiz.qpic.cn/mmbiz_jpg/iaIdQfEric9Txpk4narOnyI7xL1Im2X40KcgHcrb0eBKhQpqeYh333QnQWqv9iaicmsibRoWNmZJjXLmaQamIpUicymw/640?wx_fmt=jpeg&tp=webp&wxfrom=5&wx_lazy=1&wx_co=1"></p></li><li><p><strong>MAC åœ°å€ï¼ˆMedia Access Control æˆ–è€… Medium Access Controlï¼‰</strong> ï¼šæ„è¯‘ä¸ºåª’ä½“è®¿é—®æ§åˆ¶ï¼Œæˆ–ç§°ä¸ºç‰©ç†åœ°å€ã€ç¡¬ä»¶åœ°å€ï¼Œç”¨æ¥å®šä¹‰ç½‘ç»œè®¾å¤‡çš„ä½ç½®ã€‚åœ¨ OSI æ¨¡å‹ä¸­ï¼Œç¬¬ä¸‰å±‚ç½‘ç»œå±‚è´Ÿè´£ IP åœ°å€ï¼Œç¬¬äºŒå±‚æ•°æ®é“¾è·¯å±‚åˆ™è´Ÿè´£ MAC åœ°å€ã€‚å› æ­¤ä¸€ä¸ªä¸»æœºä¼šæœ‰ä¸€ä¸ª MAC åœ°å€ï¼Œè€Œæ¯ä¸ªç½‘ç»œä½ç½®ä¼šæœ‰ä¸€ä¸ªä¸“å±äºå®ƒçš„ IP åœ°å€ ã€‚åœ°å€æ˜¯è¯†åˆ«æŸä¸ªç³»ç»Ÿçš„é‡è¦æ ‡è¯†ç¬¦ï¼Œâ€œåå­—æŒ‡å‡ºæˆ‘ä»¬æ‰€è¦å¯»æ‰¾çš„èµ„æºï¼Œåœ°å€æŒ‡å‡ºèµ„æºæ‰€åœ¨çš„åœ°æ–¹ï¼Œè·¯ç”±å‘Šè¯‰æˆ‘ä»¬å¦‚ä½•åˆ°è¾¾è¯¥å¤„ã€‚</p></li></ol><p><img src="https://mmbiz.qpic.cn/mmbiz_png/iaIdQfEric9Txpk4narOnyI7xL1Im2X40KbbMOaYPic0dt4kjLMVrZicwRGkAlcQZvH84PdvKAeBecXh0u0dkzAhibA/640?wx_fmt=png&tp=webp&wxfrom=5&wx_lazy=1&wx_co=1" alt="ARP (Address Resolution Protocol) explained"></p><ol><li><strong>ç½‘æ¡¥ï¼ˆbridgeï¼‰</strong> ï¼šä¸€ç§ç”¨äºæ•°æ®é“¾è·¯å±‚å®ç°ä¸­ç»§ï¼Œè¿æ¥ä¸¤ä¸ªæˆ–å¤šä¸ªå±€åŸŸç½‘çš„ç½‘ç»œäº’è¿è®¾å¤‡ã€‚</li><li><strong>äº¤æ¢æœºï¼ˆswitch ï¼‰</strong> ï¼šå¹¿ä¹‰çš„æ¥è¯´ï¼Œäº¤æ¢æœºæŒ‡çš„æ˜¯ä¸€ç§é€šä¿¡ç³»ç»Ÿä¸­å®Œæˆä¿¡æ¯äº¤æ¢çš„è®¾å¤‡ã€‚è¿™é‡Œå·¥ä½œåœ¨æ•°æ®é“¾è·¯å±‚çš„äº¤æ¢æœºæŒ‡çš„æ˜¯äº¤æ¢å¼é›†çº¿å™¨ï¼Œå…¶å®è´¨æ˜¯ä¸€ä¸ªå¤šæ¥å£çš„ç½‘æ¡¥</li></ol><h3 id="3-2-é‡è¦çŸ¥è¯†ç‚¹æ€»ç»“"><a href="#3-2-é‡è¦çŸ¥è¯†ç‚¹æ€»ç»“" class="headerlink" title="3.2. é‡è¦çŸ¥è¯†ç‚¹æ€»ç»“"></a>3.2. é‡è¦çŸ¥è¯†ç‚¹æ€»ç»“</h3><ol><li>é“¾è·¯æ˜¯ä»ä¸€ä¸ªç»“ç‚¹åˆ°ç›¸é‚»èŠ‚ç‚¹çš„ä¸€æ®µç‰©ç†é“¾è·¯ï¼Œæ•°æ®é“¾è·¯åˆ™åœ¨é“¾è·¯çš„åŸºç¡€ä¸Šå¢åŠ äº†ä¸€äº›å¿…è¦çš„ç¡¬ä»¶ï¼ˆå¦‚ç½‘ç»œé€‚é…å™¨ï¼‰å’Œè½¯ä»¶ï¼ˆå¦‚åè®®çš„å®ç°ï¼‰</li><li>æ•°æ®é“¾è·¯å±‚ä½¿ç”¨çš„ä¸»è¦æ˜¯<strong>ç‚¹å¯¹ç‚¹ä¿¡é“</strong>å’Œ<strong>å¹¿æ’­ä¿¡é“</strong>ä¸¤ç§ã€‚</li><li>æ•°æ®é“¾è·¯å±‚ä¼ è¾“çš„åè®®æ•°æ®å•å…ƒæ˜¯å¸§ã€‚æ•°æ®é“¾è·¯å±‚çš„ä¸‰ä¸ªåŸºæœ¬é—®é¢˜æ˜¯ï¼š<strong>å°è£…æˆå¸§</strong>ï¼Œ<strong>é€æ˜ä¼ è¾“</strong>å’Œ<strong>å·®é”™æ£€æµ‹</strong></li><li><strong>å¾ªç¯å†—ä½™æ£€éªŒ CRC</strong> æ˜¯ä¸€ç§æ£€é”™æ–¹æ³•ï¼Œè€Œå¸§æ£€éªŒåºåˆ— FCS æ˜¯æ·»åŠ åœ¨æ•°æ®åé¢çš„å†—ä½™ç </li><li><strong>ç‚¹å¯¹ç‚¹åè®® PPP</strong> æ˜¯æ•°æ®é“¾è·¯å±‚ä½¿ç”¨æœ€å¤šçš„ä¸€ç§åè®®ï¼Œå®ƒçš„ç‰¹ç‚¹æ˜¯ï¼šç®€å•ï¼Œåªæ£€æµ‹å·®é”™è€Œä¸å»çº æ­£å·®é”™ï¼Œä¸ä½¿ç”¨åºå·ï¼Œä¹Ÿä¸è¿›è¡Œæµé‡æ§åˆ¶ï¼Œå¯åŒæ—¶æ”¯æŒå¤šç§ç½‘ç»œå±‚åè®®</li><li>PPPoE æ˜¯ä¸ºå®½å¸¦ä¸Šç½‘çš„ä¸»æœºä½¿ç”¨çš„é“¾è·¯å±‚åè®®</li><li><strong>å±€åŸŸç½‘çš„ä¼˜ç‚¹æ˜¯ï¼šå…·æœ‰å¹¿æ’­åŠŸèƒ½ï¼Œä»ä¸€ä¸ªç«™ç‚¹å¯æ–¹ä¾¿åœ°è®¿é—®å…¨ç½‘ï¼›ä¾¿äºç³»ç»Ÿçš„æ‰©å±•å’Œé€æ¸æ¼”å˜ï¼›æé«˜äº†ç³»ç»Ÿçš„å¯é æ€§ï¼Œå¯ç”¨æ€§å’Œç”Ÿå­˜æ€§ã€‚</strong></li><li>è®¡ç®—æœºä¸å¤–æ¥å±€åŸŸç½‘é€šä¿¡éœ€è¦é€šè¿‡é€šä¿¡é€‚é…å™¨ï¼ˆæˆ–ç½‘ç»œé€‚é…å™¨ï¼‰ï¼Œå®ƒåˆç§°ä¸ºç½‘ç»œæ¥å£å¡æˆ–ç½‘å¡ã€‚<strong>è®¡ç®—å™¨çš„ç¡¬ä»¶åœ°å€å°±åœ¨é€‚é…å™¨çš„ ROM ä¸­</strong>ã€‚</li><li>ä»¥å¤ªç½‘é‡‡ç”¨çš„æ— è¿æ¥çš„å·¥ä½œæ–¹å¼ï¼Œå¯¹å‘é€çš„æ•°æ®å¸§ä¸è¿›è¡Œç¼–å·ï¼Œä¹Ÿä¸è¦æ±‚å¯¹æ–¹å‘å›ç¡®è®¤ã€‚ç›®çš„ç«™æ”¶åˆ°æœ‰å·®é”™å¸§å°±æŠŠå®ƒä¸¢æ‰ï¼Œå…¶ä»–ä»€ä¹ˆä¹Ÿä¸åš</li><li>ä»¥å¤ªç½‘é‡‡ç”¨çš„åè®®æ˜¯å…·æœ‰å†²çªæ£€æµ‹çš„<strong>è½½æ³¢ç›‘å¬å¤šç‚¹æ¥å…¥ CSMA/CD</strong>ã€‚åè®®çš„ç‰¹ç‚¹æ˜¯ï¼š<strong>å‘é€å‰å…ˆç›‘å¬ï¼Œè¾¹å‘é€è¾¹ç›‘å¬ï¼Œä¸€æ—¦å‘ç°æ€»çº¿ä¸Šå‡ºç°äº†ç¢°æ’ï¼Œå°±ç«‹å³åœæ­¢å‘é€ã€‚ç„¶åæŒ‰ç…§é€€é¿ç®—æ³•ç­‰å¾…ä¸€æ®µéšæœºæ—¶é—´åå†æ¬¡å‘é€ã€‚</strong> å› æ­¤ï¼Œæ¯ä¸€ä¸ªç«™ç‚¹åœ¨è‡ªå·±å‘é€æ•°æ®ä¹‹åçš„ä¸€å°æ®µæ—¶é—´å†…ï¼Œå­˜åœ¨è¿™é­é‡ç¢°æ’çš„å¯èƒ½æ€§ã€‚ä»¥å¤ªç½‘ä¸Šçš„å„ç«™ç‚¹å¹³ç­‰çš„äº‰ç”¨ä»¥å¤ªç½‘ä¿¡é“</li><li>ä»¥å¤ªç½‘çš„é€‚é…å™¨å…·æœ‰è¿‡æ»¤åŠŸèƒ½ï¼Œå®ƒåªæ¥æ”¶å•æ’­å¸§ï¼Œå¹¿æ’­å¸§å’Œå¤šæ’­å¸§ã€‚</li><li>ä½¿ç”¨é›†çº¿å™¨å¯ä»¥åœ¨ç‰©ç†å±‚æ‰©å±•ä»¥å¤ªç½‘ï¼ˆæ‰©å±•åçš„ä»¥å¤ªç½‘ä»ç„¶æ˜¯ä¸€ä¸ªç½‘ç»œï¼‰</li></ol><h3 id="3-3-è¡¥å……"><a href="#3-3-è¡¥å……" class="headerlink" title="3.3. è¡¥å……"></a>3.3. è¡¥å……</h3><ol><li>æ•°æ®é“¾è·¯å±‚çš„ç‚¹å¯¹ç‚¹ä¿¡é“å’Œå¹¿æ’­ä¿¡é“çš„ç‰¹ç‚¹ï¼Œä»¥åŠè¿™ä¸¤ç§ä¿¡é“æ‰€ä½¿ç”¨çš„åè®®ï¼ˆPPP åè®®ä»¥åŠ CSMA/CD åè®®ï¼‰çš„ç‰¹ç‚¹</li><li>æ•°æ®é“¾è·¯å±‚çš„ä¸‰ä¸ªåŸºæœ¬é—®é¢˜ï¼š<strong>å°è£…æˆå¸§</strong>ï¼Œ<strong>é€æ˜ä¼ è¾“</strong>ï¼Œ<strong>å·®é”™æ£€æµ‹</strong></li><li>ä»¥å¤ªç½‘çš„ MAC å±‚ç¡¬ä»¶åœ°å€</li><li>é€‚é…å™¨ï¼Œè½¬å‘å™¨ï¼Œé›†çº¿å™¨ï¼Œç½‘æ¡¥ï¼Œä»¥å¤ªç½‘äº¤æ¢æœºçš„ä½œç”¨ä»¥åŠé€‚ç”¨åœºåˆ</li></ol><h2 id="4-ç½‘ç»œå±‚ï¼ˆNetwork-Layerï¼‰"><a href="#4-ç½‘ç»œå±‚ï¼ˆNetwork-Layerï¼‰" class="headerlink" title="4. ç½‘ç»œå±‚ï¼ˆNetwork Layerï¼‰"></a>4. ç½‘ç»œå±‚ï¼ˆNetwork Layerï¼‰</h2><p><img src="https://mmbiz.qpic.cn/mmbiz_png/iaIdQfEric9Txpk4narOnyI7xL1Im2X40KheCDa24wZ5XBmYdgegDSbnHUib2cFcYr6CEYVyzzMNLJFYzttzFCzIQ/640?wx_fmt=png&tp=webp&wxfrom=5&wx_lazy=1&wx_co=1" alt="ç½‘ç»œå±‚"></p><h3 id="4-1-åŸºæœ¬æœ¯è¯­"><a href="#4-1-åŸºæœ¬æœ¯è¯­" class="headerlink" title="4.1. åŸºæœ¬æœ¯è¯­"></a>4.1. åŸºæœ¬æœ¯è¯­</h3><ol><li><strong>è™šç”µè·¯ï¼ˆVirtual Circuitï¼‰</strong> : åœ¨ä¸¤ä¸ªç»ˆç«¯è®¾å¤‡çš„é€»è¾‘æˆ–ç‰©ç†ç«¯å£ä¹‹é—´ï¼Œé€šè¿‡å»ºç«‹çš„åŒå‘çš„é€æ˜ä¼ è¾“é€šé“ã€‚è™šç”µè·¯è¡¨ç¤ºè¿™åªæ˜¯ä¸€æ¡é€»è¾‘ä¸Šçš„è¿æ¥ï¼Œåˆ†ç»„éƒ½æ²¿ç€è¿™æ¡é€»è¾‘è¿æ¥æŒ‰ç…§å­˜å‚¨è½¬å‘æ–¹å¼ä¼ é€ï¼Œè€Œå¹¶ä¸æ˜¯çœŸæ­£å»ºç«‹äº†ä¸€æ¡ç‰©ç†è¿æ¥ã€‚</li><li><strong>IPï¼ˆInternet Protocol ï¼‰</strong> : ç½‘é™…åè®® IP æ˜¯ TCP/IP ä½“ç³»ä¸­ä¸¤ä¸ªæœ€ä¸»è¦çš„åè®®ä¹‹ä¸€ï¼Œæ˜¯ TCP/IP ä½“ç³»ç»“æ„ç½‘é™…å±‚çš„æ ¸å¿ƒã€‚é…å¥—çš„æœ‰ ARPï¼ŒRARPï¼ŒICMPï¼ŒIGMPã€‚</li><li><strong>ARPï¼ˆAddress Resolution Protocolï¼‰</strong> : åœ°å€è§£æåè®®ã€‚åœ°å€è§£æåè®® ARP æŠŠ IP åœ°å€è§£æä¸ºç¡¬ä»¶åœ°å€ã€‚</li><li><strong>ICMPï¼ˆInternet Control Message Protocol ï¼‰</strong> ï¼šç½‘é™…æ§åˆ¶æŠ¥æ–‡åè®® ï¼ˆICMP å…è®¸ä¸»æœºæˆ–è·¯ç”±å™¨æŠ¥å‘Šå·®é”™æƒ…å†µå’Œæä¾›æœ‰å…³å¼‚å¸¸æƒ…å†µçš„æŠ¥å‘Šï¼‰ã€‚</li><li><strong>å­ç½‘æ©ç ï¼ˆsubnet mask ï¼‰</strong> ï¼šå®ƒæ˜¯ä¸€ç§ç”¨æ¥æŒ‡æ˜ä¸€ä¸ª IP åœ°å€çš„å“ªäº›ä½æ ‡è¯†çš„æ˜¯ä¸»æœºæ‰€åœ¨çš„å­ç½‘ä»¥åŠå“ªäº›ä½æ ‡è¯†çš„æ˜¯ä¸»æœºçš„ä½æ©ç ã€‚å­ç½‘æ©ç ä¸èƒ½å•ç‹¬å­˜åœ¨ï¼Œå®ƒå¿…é¡»ç»“åˆ IP åœ°å€ä¸€èµ·ä½¿ç”¨ã€‚</li><li>**CIDRï¼ˆ Classless Inter-Domain Routing ï¼‰ **ï¼šæ— åˆ†ç±»åŸŸé—´è·¯ç”±é€‰æ‹© ï¼ˆç‰¹ç‚¹æ˜¯æ¶ˆé™¤äº†ä¼ ç»Ÿçš„ A ç±»ã€B ç±»å’Œ C ç±»åœ°å€ä»¥åŠåˆ’åˆ†å­ç½‘çš„æ¦‚å¿µï¼Œå¹¶ä½¿ç”¨å„ç§é•¿åº¦çš„â€œç½‘ç»œå‰ç¼€â€(network-prefix)æ¥ä»£æ›¿åˆ†ç±»åœ°å€ä¸­çš„ç½‘ç»œå·å’Œå­ç½‘å·ï¼‰ã€‚</li><li><strong>é»˜è®¤è·¯ç”±ï¼ˆdefault routeï¼‰</strong> ï¼šå½“åœ¨è·¯ç”±è¡¨ä¸­æŸ¥ä¸åˆ°èƒ½åˆ°è¾¾ç›®çš„åœ°å€çš„è·¯ç”±æ—¶ï¼Œè·¯ç”±å™¨é€‰æ‹©çš„è·¯ç”±ã€‚é»˜è®¤è·¯ç”±è¿˜å¯ä»¥å‡å°è·¯ç”±è¡¨æ‰€å ç”¨çš„ç©ºé—´å’Œæœç´¢è·¯ç”±è¡¨æ‰€ç”¨çš„æ—¶é—´ã€‚</li><li><strong>è·¯ç”±é€‰æ‹©ç®—æ³•ï¼ˆVirtual Circuitï¼‰</strong> ï¼šè·¯ç”±é€‰æ‹©åè®®çš„æ ¸å¿ƒéƒ¨åˆ†ã€‚å› ç‰¹ç½‘é‡‡ç”¨è‡ªé€‚åº”çš„ï¼Œåˆ†å±‚æ¬¡çš„è·¯ç”±é€‰æ‹©åè®®ã€‚</li></ol><h3 id="4-2-é‡è¦çŸ¥è¯†ç‚¹æ€»ç»“"><a href="#4-2-é‡è¦çŸ¥è¯†ç‚¹æ€»ç»“" class="headerlink" title="4.2. é‡è¦çŸ¥è¯†ç‚¹æ€»ç»“"></a>4.2. é‡è¦çŸ¥è¯†ç‚¹æ€»ç»“</h3><ol><li><strong>TCP/IP åè®®ä¸­çš„ç½‘ç»œå±‚å‘ä¸Šåªæä¾›ç®€å•çµæ´»çš„ï¼Œæ— è¿æ¥çš„ï¼Œå°½æœ€å¤§åŠªåŠ›äº¤ä»˜çš„æ•°æ®æŠ¥æœåŠ¡ã€‚ç½‘ç»œå±‚ä¸æä¾›æœåŠ¡è´¨é‡çš„æ‰¿è¯ºï¼Œä¸ä¿è¯åˆ†ç»„äº¤ä»˜çš„æ—¶é™æ‰€ä¼ é€çš„åˆ†ç»„å¯èƒ½å‡ºé”™ï¼Œä¸¢å¤±ï¼Œé‡å¤å’Œå¤±åºã€‚è¿›ç¨‹ä¹‹é—´é€šä¿¡çš„å¯é æ€§ç”±è¿è¾“å±‚è´Ÿè´£</strong></li><li>åœ¨äº’è”ç½‘çš„äº¤ä»˜æœ‰ä¸¤ç§ï¼Œä¸€æ˜¯åœ¨æœ¬ç½‘ç»œç›´æ¥äº¤ä»˜ä¸ç”¨ç»è¿‡è·¯ç”±å™¨ï¼Œå¦ä¸€ç§æ˜¯å’Œå…¶ä»–ç½‘ç»œçš„é—´æ¥äº¤ä»˜ï¼Œè‡³å°‘ç»è¿‡ä¸€ä¸ªè·¯ç”±å™¨ï¼Œä½†æœ€åä¸€æ¬¡ä¸€å®šæ˜¯ç›´æ¥äº¤ä»˜</li><li>åˆ†ç±»çš„ IP åœ°å€ç”±ç½‘ç»œå·å­—æ®µï¼ˆæŒ‡æ˜ç½‘ç»œï¼‰å’Œä¸»æœºå·å­—æ®µï¼ˆæŒ‡æ˜ä¸»æœºï¼‰ç»„æˆã€‚ç½‘ç»œå·å­—æ®µæœ€å‰é¢çš„ç±»åˆ«æŒ‡æ˜ IP åœ°å€çš„ç±»åˆ«ã€‚IP åœ°å€æ˜¯ä¸€ç§åˆ†ç­‰çº§çš„åœ°å€ç»“æ„ã€‚IP åœ°å€ç®¡ç†æœºæ„åˆ†é… IP åœ°å€æ—¶åªåˆ†é…ç½‘ç»œå·ï¼Œä¸»æœºå·ç”±å¾—åˆ°è¯¥ç½‘ç»œå·çš„å•ä½è‡ªè¡Œåˆ†é…ã€‚è·¯ç”±å™¨æ ¹æ®ç›®çš„ä¸»æœºæ‰€è¿æ¥çš„ç½‘ç»œå·æ¥è½¬å‘åˆ†ç»„ã€‚ä¸€ä¸ªè·¯ç”±å™¨è‡³å°‘è¿æ¥åˆ°ä¸¤ä¸ªç½‘ç»œï¼Œæ‰€ä»¥ä¸€ä¸ªè·¯ç”±å™¨è‡³å°‘åº”å½“æœ‰ä¸¤ä¸ªä¸åŒçš„ IP åœ°å€</li><li>IP æ•°æ®æŠ¥åˆ†ä¸ºé¦–éƒ¨å’Œæ•°æ®ä¸¤éƒ¨åˆ†ã€‚é¦–éƒ¨çš„å‰ä¸€éƒ¨åˆ†æ˜¯å›ºå®šé•¿åº¦ï¼Œå…± 20 å­—èŠ‚ï¼Œæ˜¯æ‰€æœ‰ IP æ•°æ®åŒ…å¿…é¡»å…·æœ‰çš„ï¼ˆæºåœ°å€ï¼Œç›®çš„åœ°å€ï¼Œæ€»é•¿åº¦ç­‰é‡è¦åœ°æ®µéƒ½å›ºå®šåœ¨é¦–éƒ¨ï¼‰ã€‚ä¸€äº›é•¿åº¦å¯å˜çš„å¯é€‰å­—æ®µå›ºå®šåœ¨é¦–éƒ¨çš„åé¢ã€‚IP é¦–éƒ¨ä¸­çš„ç”Ÿå­˜æ—¶é—´ç»™å‡ºäº† IP æ•°æ®æŠ¥åœ¨äº’è”ç½‘ä¸­æ‰€èƒ½ç»è¿‡çš„æœ€å¤§è·¯ç”±å™¨æ•°ã€‚å¯é˜²æ­¢ IP æ•°æ®æŠ¥åœ¨äº’è”ç½‘ä¸­æ— é™åˆ¶çš„å…œåœˆå­ã€‚</li><li><strong>åœ°å€è§£æåè®® ARP æŠŠ IP åœ°å€è§£æä¸ºç¡¬ä»¶åœ°å€ã€‚ARP çš„é«˜é€Ÿç¼“å­˜å¯ä»¥å¤§å¤§å‡å°‘ç½‘ç»œä¸Šçš„é€šä¿¡é‡ã€‚å› ä¸ºè¿™æ ·å¯ä»¥ä½¿ä¸»æœºä¸‹æ¬¡å†ä¸åŒæ ·åœ°å€çš„ä¸»æœºé€šä¿¡æ—¶ï¼Œå¯ä»¥ç›´æ¥ä»é«˜é€Ÿç¼“å­˜ä¸­æ‰¾åˆ°æ‰€éœ€è¦çš„ç¡¬ä»¶åœ°å€è€Œä¸éœ€è¦å†å»å¹¿æ’­æ–¹å¼å‘é€ ARP è¯·æ±‚åˆ†ç»„</strong></li><li>æ— åˆ†ç±»åŸŸé—´è·¯ç”±é€‰æ‹© CIDR æ˜¯è§£å†³ç›®å‰ IP åœ°å€ç´§ç¼ºçš„ä¸€ä¸ªå¥½åŠæ³•ã€‚CIDR è®°æ³•æŠŠ IP åœ°å€åé¢åŠ ä¸Šæ–œçº¿â€œ/â€ï¼Œç„¶åå†™ä¸Šå‰ç¼€æ‰€æ‰€å çš„ä½æ•°ã€‚å‰ç¼€ï¼ˆæˆ–ç½‘ç»œå‰ç¼€ç”¨æ¥æŒ‡æ˜ç½‘ç»œï¼‰ï¼Œå‰ç¼€åé¢çš„éƒ¨åˆ†æ˜¯åç¼€ï¼Œç”¨æ¥æŒ‡æ˜ä¸»æœºã€‚CIDR æŠŠå‰ç¼€éƒ½ç›¸åŒçš„è¿ç»­çš„ IP åœ°å€ç»„æˆä¸€ä¸ªâ€œCIDR åœ°å€å—â€ï¼ŒIP åœ°å€åˆ†é…éƒ½ä»¥ CIDR åœ°å€å—ä¸ºå•ä½ã€‚</li><li>ç½‘é™…æ§åˆ¶æŠ¥æ–‡åè®®æ˜¯ IP å±‚çš„åè®®ã€‚ICMP æŠ¥æ–‡ä½œä¸º IP æ•°æ®æŠ¥çš„æ•°æ®ï¼ŒåŠ ä¸Šé¦–éƒ¨åç»„æˆ IP æ•°æ®æŠ¥å‘é€å‡ºå»ã€‚ä½¿ç”¨ ICMP æ•°æ®æŠ¥å¹¶ä¸æ˜¯ä¸ºäº†å®ç°å¯é ä¼ è¾“ã€‚ICMP å…è®¸ä¸»æœºæˆ–è·¯ç”±å™¨æŠ¥å‘Šå·®é”™æƒ…å†µå’Œæä¾›æœ‰å…³å¼‚å¸¸æƒ…å†µçš„æŠ¥å‘Šã€‚ICMP æŠ¥æ–‡çš„ç§ç±»æœ‰ä¸¤ç§ ICMP å·®é”™æŠ¥å‘ŠæŠ¥æ–‡å’Œ ICMP è¯¢é—®æŠ¥æ–‡ã€‚</li><li><strong>è¦è§£å†³ IP åœ°å€è€—å°½çš„é—®é¢˜ï¼Œæœ€æ ¹æœ¬çš„åŠæ³•æ˜¯é‡‡ç”¨å…·æœ‰æ›´å¤§åœ°å€ç©ºé—´çš„æ–°ç‰ˆæœ¬ IP åè®®-IPv6ã€‚</strong> IPv6 æ‰€å¸¦æ¥çš„å˜åŒ–æœ‰ â‘  æ›´å¤§çš„åœ°å€ç©ºé—´ï¼ˆé‡‡ç”¨ 128 ä½åœ°å€ï¼‰â‘¡ çµæ´»çš„é¦–éƒ¨æ ¼å¼ â‘¢ æ”¹è¿›çš„é€‰é¡¹ â‘£ æ”¯æŒå³æ’å³ç”¨ â‘¤ æ”¯æŒèµ„æºçš„é¢„åˆ†é… â‘¥IPv6 çš„é¦–éƒ¨æ”¹ä¸º 8 å­—èŠ‚å¯¹é½ã€‚</li><li><strong>è™šæ‹Ÿä¸“ç”¨ç½‘ç»œ VPN åˆ©ç”¨å…¬ç”¨çš„äº’è”ç½‘ä½œä¸ºæœ¬æœºæ„ä¸“ç”¨ç½‘ä¹‹é—´çš„é€šä¿¡è½½ä½“ã€‚VPN å†…ä½¿ç”¨äº’è”ç½‘çš„ä¸“ç”¨åœ°å€ã€‚ä¸€ä¸ª VPN è‡³å°‘è¦æœ‰ä¸€ä¸ªè·¯ç”±å™¨å…·æœ‰åˆæ³•çš„å…¨çƒ IP åœ°å€ï¼Œè¿™æ ·æ‰èƒ½å’Œæœ¬ç³»ç»Ÿçš„å¦ä¸€ä¸ª VPN é€šè¿‡äº’è”ç½‘è¿›è¡Œé€šä¿¡ã€‚æ‰€æœ‰é€šè¿‡äº’è”ç½‘ä¼ é€çš„æ•°æ®éƒ½éœ€è¦åŠ å¯†ã€‚</strong></li><li>MPLS çš„ç‰¹ç‚¹æ˜¯ï¼šâ‘  æ”¯æŒé¢å‘è¿æ¥çš„æœåŠ¡è´¨é‡ â‘¡ æ”¯æŒæµé‡å·¥ç¨‹ï¼Œå¹³è¡¡ç½‘ç»œè´Ÿè½½ â‘¢ æœ‰æ•ˆçš„æ”¯æŒè™šæ‹Ÿä¸“ç”¨ç½‘ VPNã€‚MPLS åœ¨å…¥å£èŠ‚ç‚¹ç»™æ¯ä¸€ä¸ª IP æ•°æ®æŠ¥æ‰“ä¸Šå›ºå®šé•¿åº¦çš„â€œæ ‡è®°â€ï¼Œç„¶åæ ¹æ®æ ‡è®°åœ¨ç¬¬äºŒå±‚ï¼ˆé“¾è·¯å±‚ï¼‰ç”¨ç¡¬ä»¶è¿›è¡Œè½¬å‘ï¼ˆåœ¨æ ‡è®°äº¤æ¢è·¯ç”±å™¨ä¸­è¿›è¡Œæ ‡è®°äº¤æ¢ï¼‰ï¼Œå› è€Œè½¬å‘é€Ÿç‡å¤§å¤§åŠ å¿«ã€‚</li></ol><h2 id="5-ä¼ è¾“å±‚ï¼ˆTransport-Layerï¼‰"><a href="#5-ä¼ è¾“å±‚ï¼ˆTransport-Layerï¼‰" class="headerlink" title="5. ä¼ è¾“å±‚ï¼ˆTransport Layerï¼‰"></a>5. ä¼ è¾“å±‚ï¼ˆTransport Layerï¼‰</h2><p><img src="https://mmbiz.qpic.cn/mmbiz_png/iaIdQfEric9Txpk4narOnyI7xL1Im2X40KoHBD0X9EMw9t3oPz1tDEHiaSqibTibJNfOicXfEZiaib61WSMLuP4smoiaB6g/640?wx_fmt=png&tp=webp&wxfrom=5&wx_lazy=1&wx_co=1" alt="ä¼ è¾“å±‚"></p><h3 id="5-1-åŸºæœ¬æœ¯è¯­"><a href="#5-1-åŸºæœ¬æœ¯è¯­" class="headerlink" title="5.1. åŸºæœ¬æœ¯è¯­"></a>5.1. åŸºæœ¬æœ¯è¯­</h3><ol><li><strong>è¿›ç¨‹ï¼ˆprocessï¼‰</strong> ï¼šæŒ‡è®¡ç®—æœºä¸­æ­£åœ¨è¿è¡Œçš„ç¨‹åºå®ä½“ã€‚</li><li><strong>åº”ç”¨è¿›ç¨‹äº’ç›¸é€šä¿¡</strong> ï¼šä¸€å°ä¸»æœºçš„è¿›ç¨‹å’Œå¦ä¸€å°ä¸»æœºä¸­çš„ä¸€ä¸ªè¿›ç¨‹äº¤æ¢æ•°æ®çš„è¿‡ç¨‹ï¼ˆå¦å¤–æ³¨æ„é€šä¿¡çœŸæ­£çš„ç«¯ç‚¹ä¸æ˜¯ä¸»æœºè€Œæ˜¯ä¸»æœºä¸­çš„è¿›ç¨‹ï¼Œä¹Ÿå°±æ˜¯è¯´ç«¯åˆ°ç«¯çš„é€šä¿¡æ˜¯åº”ç”¨è¿›ç¨‹ä¹‹é—´çš„é€šä¿¡ï¼‰ã€‚</li><li><strong>ä¼ è¾“å±‚çš„å¤ç”¨ä¸åˆ†ç”¨</strong> ï¼šå¤ç”¨æŒ‡å‘é€æ–¹ä¸åŒçš„è¿›ç¨‹éƒ½å¯ä»¥é€šè¿‡ç»Ÿä¸€ä¸ªè¿è¾“å±‚åè®®ä¼ é€æ•°æ®ã€‚åˆ†ç”¨æŒ‡æ¥æ”¶æ–¹çš„è¿è¾“å±‚åœ¨å‰¥å»æŠ¥æ–‡çš„é¦–éƒ¨åèƒ½æŠŠè¿™äº›æ•°æ®æ­£ç¡®çš„äº¤ä»˜åˆ°ç›®çš„åº”ç”¨è¿›ç¨‹ã€‚</li><li><strong>TCPï¼ˆTransmission Control Protocolï¼‰</strong> ï¼šä¼ è¾“æ§åˆ¶åè®®ã€‚</li><li><strong>UDPï¼ˆUser Datagram Protocolï¼‰</strong> ï¼šç”¨æˆ·æ•°æ®æŠ¥åè®®ã€‚</li></ol><p><img src="https://mmbiz.qpic.cn/mmbiz_png/iaIdQfEric9Txpk4narOnyI7xL1Im2X40K5WSJtMImibp4CUwlNA0rsoSUrYe0DsBwWic3FiaYKjO9meXcB2tT0qiblQ/640?wx_fmt=png&tp=webp&wxfrom=5&wx_lazy=1&wx_co=1" alt="TCPå’ŒUDP"></p><ol><li>**ç«¯å£ï¼ˆportï¼‰ ** ï¼šç«¯å£çš„ç›®çš„æ˜¯ä¸ºäº†ç¡®è®¤å¯¹æ–¹æœºå™¨æ˜¯é‚£ä¸ªè¿›ç¨‹åœ¨äºè‡ªå·±è¿›è¡Œäº¤äº’ï¼Œæ¯”å¦‚ MSN å’Œ QQ çš„ç«¯å£ä¸åŒï¼Œå¦‚æœæ²¡æœ‰ç«¯å£å°±å¯èƒ½å‡ºç° QQ è¿›ç¨‹å’Œ MSN äº¤äº’é”™è¯¯ã€‚ç«¯å£åˆç§°åè®®ç«¯å£å·ã€‚</li><li><strong>åœæ­¢ç­‰å¾…åè®®ï¼ˆstop-and-waitï¼‰</strong> ï¼šæŒ‡å‘é€æ–¹æ¯å‘é€å®Œä¸€ä¸ªåˆ†ç»„å°±åœæ­¢å‘é€ï¼Œç­‰å¾…å¯¹æ–¹ç¡®è®¤ï¼Œåœ¨æ”¶åˆ°ç¡®è®¤ä¹‹ååœ¨å‘é€ä¸‹ä¸€ä¸ªåˆ†ç»„ã€‚</li><li><strong>æµé‡æ§åˆ¶</strong> : å°±æ˜¯è®©å‘é€æ–¹çš„å‘é€é€Ÿç‡ä¸è¦å¤ªå¿«ï¼Œæ—¢è¦è®©æ¥æ”¶æ–¹æ¥å¾—åŠæ¥æ”¶ï¼Œä¹Ÿä¸è¦ä½¿ç½‘ç»œå‘ç”Ÿæ‹¥å¡ã€‚</li><li><strong>æ‹¥å¡æ§åˆ¶</strong> ï¼šé˜²æ­¢è¿‡å¤šçš„æ•°æ®æ³¨å…¥åˆ°ç½‘ç»œä¸­ï¼Œè¿™æ ·å¯ä»¥ä½¿ç½‘ç»œä¸­çš„è·¯ç”±å™¨æˆ–é“¾è·¯ä¸è‡´è¿‡è½½ã€‚æ‹¥å¡æ§åˆ¶æ‰€è¦åšçš„éƒ½æœ‰ä¸€ä¸ªå‰æï¼Œå°±æ˜¯ç½‘ç»œèƒ½å¤Ÿæ‰¿å—ç°æœ‰çš„ç½‘ç»œè´Ÿè·ã€‚</li></ol><h3 id="5-2-é‡è¦çŸ¥è¯†ç‚¹æ€»ç»“"><a href="#5-2-é‡è¦çŸ¥è¯†ç‚¹æ€»ç»“" class="headerlink" title="5.2. é‡è¦çŸ¥è¯†ç‚¹æ€»ç»“"></a>5.2. é‡è¦çŸ¥è¯†ç‚¹æ€»ç»“</h3><ol><li><strong>è¿è¾“å±‚æä¾›åº”ç”¨è¿›ç¨‹ä¹‹é—´çš„é€»è¾‘é€šä¿¡ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œè¿è¾“å±‚ä¹‹é—´çš„é€šä¿¡å¹¶ä¸æ˜¯çœŸæ­£åœ¨ä¸¤ä¸ªè¿è¾“å±‚ä¹‹é—´ç›´æ¥ä¼ è¾“æ•°æ®ã€‚è¿è¾“å±‚å‘åº”ç”¨å±‚å±è”½äº†ä¸‹é¢ç½‘ç»œçš„ç»†èŠ‚ï¼ˆå¦‚ç½‘ç»œæ‹“è¡¥ï¼Œæ‰€é‡‡ç”¨çš„è·¯ç”±é€‰æ‹©åè®®ç­‰ï¼‰ï¼Œå®ƒä½¿åº”ç”¨è¿›ç¨‹ä¹‹é—´çœ‹èµ·æ¥å¥½åƒä¸¤ä¸ªè¿è¾“å±‚å®ä½“ä¹‹é—´æœ‰ä¸€æ¡ç«¯åˆ°ç«¯çš„é€»è¾‘é€šä¿¡ä¿¡é“ã€‚</strong></li><li><strong>ç½‘ç»œå±‚ä¸ºä¸»æœºæä¾›é€»è¾‘é€šä¿¡ï¼Œè€Œè¿è¾“å±‚ä¸ºåº”ç”¨è¿›ç¨‹ä¹‹é—´æä¾›ç«¯åˆ°ç«¯çš„é€»è¾‘é€šä¿¡ã€‚</strong></li><li>è¿è¾“å±‚çš„ä¸¤ä¸ªé‡è¦åè®®æ˜¯ç”¨æˆ·æ•°æ®æŠ¥åè®® UDP å’Œä¼ è¾“æ§åˆ¶åè®® TCPã€‚æŒ‰ç…§ OSI çš„æœ¯è¯­ï¼Œä¸¤ä¸ªå¯¹ç­‰è¿è¾“å®ä½“åœ¨é€šä¿¡æ—¶ä¼ é€çš„æ•°æ®å•ä½å«åšè¿è¾“åè®®æ•°æ®å•å…ƒ TPDUï¼ˆTransport Protocol Data Unitï¼‰ã€‚ä½†åœ¨ TCP/IP ä½“ç³»ä¸­ï¼Œåˆ™æ ¹æ®æ‰€ä½¿ç”¨çš„åè®®æ˜¯ TCP æˆ– UDPï¼Œåˆ†åˆ«ç§°ä¹‹ä¸º TCP æŠ¥æ–‡æ®µæˆ– UDP ç”¨æˆ·æ•°æ®æŠ¥ã€‚</li><li><strong>UDP åœ¨ä¼ é€æ•°æ®ä¹‹å‰ä¸éœ€è¦å…ˆå»ºç«‹è¿æ¥ï¼Œè¿œåœ°ä¸»æœºåœ¨æ”¶åˆ° UDP æŠ¥æ–‡åï¼Œä¸éœ€è¦ç»™å‡ºä»»ä½•ç¡®è®¤ã€‚è™½ç„¶ UDP ä¸æä¾›å¯é äº¤ä»˜ï¼Œä½†åœ¨æŸäº›æƒ…å†µä¸‹ UDP ç¡®æ˜¯ä¸€ç§æœ€æœ‰æ•ˆçš„å·¥ä½œæ–¹å¼ã€‚TCP æä¾›é¢å‘è¿æ¥çš„æœåŠ¡ã€‚åœ¨ä¼ é€æ•°æ®ä¹‹å‰å¿…é¡»å…ˆå»ºç«‹è¿æ¥ï¼Œæ•°æ®ä¼ é€ç»“æŸåè¦é‡Šæ”¾è¿æ¥ã€‚TCP ä¸æä¾›å¹¿æ’­æˆ–å¤šæ’­æœåŠ¡ã€‚ç”±äº TCP è¦æä¾›å¯é çš„ï¼Œé¢å‘è¿æ¥çš„ä¼ è¾“æœåŠ¡ï¼Œè¿™ä¸€éš¾ä»¥é¿å…å¢åŠ äº†è®¸å¤šå¼€é”€ï¼Œå¦‚ç¡®è®¤ï¼Œæµé‡æ§åˆ¶ï¼Œè®¡æ—¶å™¨ä»¥åŠè¿æ¥ç®¡ç†ç­‰ã€‚è¿™ä¸ä»…ä½¿åè®®æ•°æ®å•å…ƒçš„é¦–éƒ¨å¢å¤§å¾ˆå¤šï¼Œè¿˜è¦å ç”¨è®¸å¤šå¤„ç†æœºèµ„æºã€‚</strong></li><li>ç¡¬ä»¶ç«¯å£æ˜¯ä¸åŒç¡¬ä»¶è®¾å¤‡è¿›è¡Œäº¤äº’çš„æ¥å£ï¼Œè€Œè½¯ä»¶ç«¯å£æ˜¯åº”ç”¨å±‚å„ç§åè®®è¿›ç¨‹ä¸è¿è¾“å®ä½“è¿›è¡Œå±‚é—´äº¤äº’çš„ä¸€ç§åœ°å€ã€‚UDP å’Œ TCP çš„é¦–éƒ¨æ ¼å¼ä¸­éƒ½æœ‰æºç«¯å£å’Œç›®çš„ç«¯å£è¿™ä¸¤ä¸ªé‡è¦å­—æ®µã€‚å½“è¿è¾“å±‚æ”¶åˆ° IP å±‚äº¤ä¸Šæ¥çš„è¿è¾“å±‚æŠ¥æ–‡æ—¶ï¼Œå°±èƒ½å¤Ÿ æ ¹æ®å…¶é¦–éƒ¨ä¸­çš„ç›®çš„ç«¯å£å·æŠŠæ•°æ®äº¤ä»˜åº”ç”¨å±‚çš„ç›®çš„åº”ç”¨å±‚ã€‚ï¼ˆä¸¤ä¸ªè¿›ç¨‹ä¹‹é—´è¿›è¡Œé€šä¿¡ä¸å…‰è¦çŸ¥é“å¯¹æ–¹ IP åœ°å€è€Œä¸”è¦çŸ¥é“å¯¹æ–¹çš„ç«¯å£å·(ä¸ºäº†æ‰¾åˆ°å¯¹æ–¹è®¡ç®—æœºä¸­çš„åº”ç”¨è¿›ç¨‹)ï¼‰</li><li>è¿è¾“å±‚ç”¨ä¸€ä¸ª 16 ä½ç«¯å£å·æ ‡å¿—ä¸€ä¸ªç«¯å£ã€‚ç«¯å£å·åªæœ‰æœ¬åœ°æ„ä¹‰ï¼Œå®ƒåªæ˜¯ä¸ºäº†æ ‡å¿—è®¡ç®—æœºåº”ç”¨å±‚ä¸­çš„å„ä¸ªè¿›ç¨‹åœ¨å’Œè¿è¾“å±‚äº¤äº’æ—¶çš„å±‚é—´æ¥å£ã€‚åœ¨äº’è”ç½‘çš„ä¸åŒè®¡ç®—æœºä¸­ï¼Œç›¸åŒçš„ç«¯å£å·æ˜¯æ²¡æœ‰å…³è”çš„ã€‚åè®®ç«¯å£å·ç®€ç§°ç«¯å£ã€‚è™½ç„¶é€šä¿¡çš„ç»ˆç‚¹æ˜¯åº”ç”¨è¿›ç¨‹ï¼Œä½†åªè¦æŠŠæ‰€å‘é€çš„æŠ¥æ–‡äº¤åˆ°ç›®çš„ä¸»æœºçš„æŸä¸ªåˆé€‚ç«¯å£ï¼Œå‰©ä¸‹çš„å·¥ä½œï¼ˆæœ€åäº¤ä»˜ç›®çš„è¿›ç¨‹ï¼‰å°±ç”± TCP å’Œ UDP æ¥å®Œæˆã€‚</li><li>è¿è¾“å±‚çš„ç«¯å£å·åˆ†ä¸ºæœåŠ¡å™¨ç«¯ä½¿ç”¨çš„ç«¯å£å·ï¼ˆ0<del>1023 æŒ‡æ´¾ç»™ç†ŸçŸ¥ç«¯å£ï¼Œ1024</del>49151 æ˜¯ç™»è®°ç«¯å£å·ï¼‰å’Œå®¢æˆ·ç«¯æš‚æ—¶ä½¿ç”¨çš„ç«¯å£å·ï¼ˆ49152~65535ï¼‰</li><li><strong>UDP çš„ä¸»è¦ç‰¹ç‚¹æ˜¯ â‘  æ— è¿æ¥ â‘¡ å°½æœ€å¤§åŠªåŠ›äº¤ä»˜ â‘¢ é¢å‘æŠ¥æ–‡ â‘£ æ— æ‹¥å¡æ§åˆ¶ â‘¤ æ”¯æŒä¸€å¯¹ä¸€ï¼Œä¸€å¯¹å¤šï¼Œå¤šå¯¹ä¸€å’Œå¤šå¯¹å¤šçš„äº¤äº’é€šä¿¡ â‘¥ é¦–éƒ¨å¼€é”€å°ï¼ˆåªæœ‰å››ä¸ªå­—æ®µï¼šæºç«¯å£ï¼Œç›®çš„ç«¯å£ï¼Œé•¿åº¦å’Œæ£€éªŒå’Œï¼‰</strong></li><li><strong>TCP çš„ä¸»è¦ç‰¹ç‚¹æ˜¯ â‘  é¢å‘è¿æ¥ â‘¡ æ¯ä¸€æ¡ TCP è¿æ¥åªèƒ½æ˜¯ä¸€å¯¹ä¸€çš„ â‘¢ æä¾›å¯é äº¤ä»˜ â‘£ æä¾›å…¨åŒå·¥é€šä¿¡ â‘¤ é¢å‘å­—èŠ‚æµ</strong></li><li><strong>TCP ç”¨ä¸»æœºçš„ IP åœ°å€åŠ ä¸Šä¸»æœºä¸Šçš„ç«¯å£å·ä½œä¸º TCP è¿æ¥çš„ç«¯ç‚¹ã€‚è¿™æ ·çš„ç«¯ç‚¹å°±å«åšå¥—æ¥å­—ï¼ˆsocketï¼‰æˆ–æ’å£ã€‚å¥—æ¥å­—ç”¨ï¼ˆIP åœ°å€ï¼šç«¯å£å·ï¼‰æ¥è¡¨ç¤ºã€‚æ¯ä¸€æ¡ TCP è¿æ¥å”¯ä¸€è¢«é€šä¿¡ä¸¤ç«¯çš„ä¸¤ä¸ªç«¯ç‚¹æ‰€ç¡®å®šã€‚</strong></li><li>åœæ­¢ç­‰å¾…åè®®æ˜¯ä¸ºäº†å®ç°å¯é ä¼ è¾“çš„ï¼Œå®ƒçš„åŸºæœ¬åŸç†å°±æ˜¯æ¯å‘å®Œä¸€ä¸ªåˆ†ç»„å°±åœæ­¢å‘é€ï¼Œç­‰å¾…å¯¹æ–¹ç¡®è®¤ã€‚åœ¨æ”¶åˆ°ç¡®è®¤åå†å‘ä¸‹ä¸€ä¸ªåˆ†ç»„ã€‚</li><li>ä¸ºäº†æé«˜ä¼ è¾“æ•ˆç‡ï¼Œå‘é€æ–¹å¯ä»¥ä¸ä½¿ç”¨ä½æ•ˆç‡çš„åœæ­¢ç­‰å¾…åè®®ï¼Œè€Œæ˜¯é‡‡ç”¨æµæ°´çº¿ä¼ è¾“ã€‚æµæ°´çº¿ä¼ è¾“å°±æ˜¯å‘é€æ–¹å¯è¿ç»­å‘é€å¤šä¸ªåˆ†ç»„ï¼Œä¸å¿…æ¯å‘å®Œä¸€ä¸ªåˆ†ç»„å°±åœä¸‹æ¥ç­‰å¾…å¯¹æ–¹ç¡®è®¤ã€‚è¿™æ ·å¯ä½¿ä¿¡é“ä¸Šä¸€ç›´æœ‰æ•°æ®ä¸é—´æ–­çš„åœ¨ä¼ é€ã€‚è¿™ç§ä¼ è¾“æ–¹å¼å¯ä»¥æ˜æ˜¾æé«˜ä¿¡é“åˆ©ç”¨ç‡ã€‚</li><li>åœæ­¢ç­‰å¾…åè®®ä¸­è¶…æ—¶é‡ä¼ æ˜¯æŒ‡åªè¦è¶…è¿‡ä¸€æ®µæ—¶é—´ä»ç„¶æ²¡æœ‰æ”¶åˆ°ç¡®è®¤ï¼Œå°±é‡ä¼ å‰é¢å‘é€è¿‡çš„åˆ†ç»„ï¼ˆè®¤ä¸ºåˆšæ‰å‘é€è¿‡çš„åˆ†ç»„ä¸¢å¤±äº†ï¼‰ã€‚å› æ­¤æ¯å‘é€å®Œä¸€ä¸ªåˆ†ç»„éœ€è¦è®¾ç½®ä¸€ä¸ªè¶…æ—¶è®¡æ—¶å™¨ï¼Œå…¶é‡è½¬æ—¶é—´åº”æ¯”æ•°æ®åœ¨åˆ†ç»„ä¼ è¾“çš„å¹³å‡å¾€è¿”æ—¶é—´æ›´é•¿ä¸€äº›ã€‚è¿™ç§è‡ªåŠ¨é‡ä¼ æ–¹å¼å¸¸ç§°ä¸ºè‡ªåŠ¨é‡ä¼ è¯·æ±‚ ARQã€‚å¦å¤–åœ¨åœæ­¢ç­‰å¾…åè®®ä¸­è‹¥æ”¶åˆ°é‡å¤åˆ†ç»„ï¼Œå°±ä¸¢å¼ƒè¯¥åˆ†ç»„ï¼Œä½†åŒæ—¶è¿˜è¦å‘é€ç¡®è®¤ã€‚è¿ç»­ ARQ åè®®å¯æé«˜ä¿¡é“åˆ©ç”¨ç‡ã€‚å‘é€ç»´æŒä¸€ä¸ªå‘é€çª—å£ï¼Œå‡¡ä½äºå‘é€çª—å£å†…çš„åˆ†ç»„å¯è¿ç»­å‘é€å‡ºå»ï¼Œè€Œä¸éœ€è¦ç­‰å¾…å¯¹æ–¹ç¡®è®¤ã€‚æ¥æ”¶æ–¹ä¸€èˆ¬é‡‡ç”¨ç´¯ç§¯ç¡®è®¤ï¼Œå¯¹æŒ‰åºåˆ°è¾¾çš„æœ€åä¸€ä¸ªåˆ†ç»„å‘é€ç¡®è®¤ï¼Œè¡¨æ˜åˆ°è¿™ä¸ªåˆ†ç»„ä½ç½®çš„æ‰€æœ‰åˆ†ç»„éƒ½å·²ç»æ­£ç¡®æ”¶åˆ°äº†ã€‚</li><li>TCP æŠ¥æ–‡æ®µçš„å‰ 20 ä¸ªå­—èŠ‚æ˜¯å›ºå®šçš„ï¼Œåé¢æœ‰ 4n å­—èŠ‚æ˜¯æ ¹æ®éœ€è¦å¢åŠ çš„é€‰é¡¹ã€‚å› æ­¤ï¼ŒTCP é¦–éƒ¨çš„æœ€å°é•¿åº¦æ˜¯ 20 å­—èŠ‚ã€‚</li><li><strong>TCP ä½¿ç”¨æ»‘åŠ¨çª—å£æœºåˆ¶ã€‚å‘é€çª—å£é‡Œé¢çš„åºå·è¡¨ç¤ºå…è®¸å‘é€çš„åºå·ã€‚å‘é€çª—å£åæ²¿çš„åé¢éƒ¨åˆ†è¡¨ç¤ºå·²å‘é€ä¸”å·²æ”¶åˆ°ç¡®è®¤ï¼Œè€Œå‘é€çª—å£å‰æ²¿çš„å‰é¢éƒ¨åˆ†è¡¨ç¤ºä¸å…è®¸å‘é€ã€‚å‘é€çª—å£åæ²¿çš„å˜åŒ–æƒ…å†µæœ‰ä¸¤ç§å¯èƒ½ï¼Œå³ä¸åŠ¨ï¼ˆæ²¡æœ‰æ”¶åˆ°æ–°çš„ç¡®è®¤ï¼‰å’Œå‰ç§»ï¼ˆæ”¶åˆ°äº†æ–°çš„ç¡®è®¤ï¼‰ã€‚å‘é€çª—å£çš„å‰æ²¿é€šå¸¸æ˜¯ä¸æ–­å‘å‰ç§»åŠ¨çš„ã€‚ä¸€èˆ¬æ¥è¯´ï¼Œæˆ‘ä»¬æ€»æ˜¯å¸Œæœ›æ•°æ®ä¼ è¾“æ›´å¿«ä¸€äº›ã€‚ä½†å¦‚æœå‘é€æ–¹æŠŠæ•°æ®å‘é€çš„è¿‡å¿«ï¼Œæ¥æ”¶æ–¹å°±å¯èƒ½æ¥ä¸åŠæ¥æ”¶ï¼Œè¿™å°±ä¼šé€ æˆæ•°æ®çš„ä¸¢å¤±ã€‚æ‰€è°“æµé‡æ§åˆ¶å°±æ˜¯è®©å‘é€æ–¹çš„å‘é€é€Ÿç‡ä¸è¦å¤ªå¿«ï¼Œè¦è®©æ¥æ”¶æ–¹æ¥å¾—åŠæ¥æ”¶ã€‚</strong></li><li>åœ¨æŸæ®µæ—¶é—´ï¼Œè‹¥å¯¹ç½‘ç»œä¸­æŸä¸€èµ„æºçš„éœ€æ±‚è¶…è¿‡äº†è¯¥èµ„æºæ‰€èƒ½æä¾›çš„å¯ç”¨éƒ¨åˆ†ï¼Œç½‘ç»œçš„æ€§èƒ½å°±è¦å˜åã€‚è¿™ç§æƒ…å†µå°±å«æ‹¥å¡ã€‚æ‹¥å¡æ§åˆ¶å°±æ˜¯ä¸ºäº†é˜²æ­¢è¿‡å¤šçš„æ•°æ®æ³¨å…¥åˆ°ç½‘ç»œä¸­ï¼Œè¿™æ ·å°±å¯ä»¥ä½¿ç½‘ç»œä¸­çš„è·¯ç”±å™¨æˆ–é“¾è·¯ä¸è‡´è¿‡è½½ã€‚æ‹¥å¡æ§åˆ¶æ‰€è¦åšçš„éƒ½æœ‰ä¸€ä¸ªå‰æï¼Œå°±æ˜¯ç½‘ç»œèƒ½å¤Ÿæ‰¿å—ç°æœ‰çš„ç½‘ç»œè´Ÿè·ã€‚æ‹¥å¡æ§åˆ¶æ˜¯ä¸€ä¸ªå…¨å±€æ€§çš„è¿‡ç¨‹ï¼Œæ¶‰åŠåˆ°æ‰€æœ‰çš„ä¸»æœºï¼Œæ‰€æœ‰çš„è·¯ç”±å™¨ï¼Œä»¥åŠä¸é™ä½ç½‘ç»œä¼ è¾“æ€§èƒ½æœ‰å…³çš„æ‰€æœ‰å› ç´ ã€‚ç›¸åï¼Œæµé‡æ§åˆ¶å¾€å¾€æ˜¯ç‚¹å¯¹ç‚¹é€šä¿¡é‡çš„æ§åˆ¶ï¼Œæ˜¯ä¸ªç«¯åˆ°ç«¯çš„é—®é¢˜ã€‚æµé‡æ§åˆ¶æ‰€è¦åšåˆ°çš„å°±æ˜¯æŠ‘åˆ¶å‘é€ç«¯å‘é€æ•°æ®çš„é€Ÿç‡ï¼Œä»¥ä¾¿ä½¿æ¥æ”¶ç«¯æ¥å¾—åŠæ¥æ”¶ã€‚</li><li><strong>ä¸ºäº†è¿›è¡Œæ‹¥å¡æ§åˆ¶ï¼ŒTCP å‘é€æ–¹è¦ç»´æŒä¸€ä¸ªæ‹¥å¡çª—å£ cwnd çš„çŠ¶æ€å˜é‡ã€‚æ‹¥å¡æ§åˆ¶çª—å£çš„å¤§å°å–å†³äºç½‘ç»œçš„æ‹¥å¡ç¨‹åº¦ï¼Œå¹¶ä¸”åŠ¨æ€å˜åŒ–ã€‚å‘é€æ–¹è®©è‡ªå·±çš„å‘é€çª—å£å–ä¸ºæ‹¥å¡çª—å£å’Œæ¥æ”¶æ–¹çš„æ¥å—çª—å£ä¸­è¾ƒå°çš„ä¸€ä¸ªã€‚</strong></li><li><strong>TCP çš„æ‹¥å¡æ§åˆ¶é‡‡ç”¨äº†å››ç§ç®—æ³•ï¼Œå³æ…¢å¼€å§‹ï¼Œæ‹¥å¡é¿å…ï¼Œå¿«é‡ä¼ å’Œå¿«æ¢å¤ã€‚åœ¨ç½‘ç»œå±‚ä¹Ÿå¯ä»¥ä½¿è·¯ç”±å™¨é‡‡ç”¨é€‚å½“çš„åˆ†ç»„ä¸¢å¼ƒç­–ç•¥ï¼ˆå¦‚ä¸»åŠ¨é˜Ÿåˆ—ç®¡ç† AQMï¼‰ï¼Œä»¥å‡å°‘ç½‘ç»œæ‹¥å¡çš„å‘ç”Ÿã€‚</strong></li><li>è¿è¾“è¿æ¥çš„ä¸‰ä¸ªé˜¶æ®µï¼Œå³ï¼šè¿æ¥å»ºç«‹ï¼Œæ•°æ®ä¼ é€å’Œè¿æ¥é‡Šæ”¾ã€‚</li><li><strong>ä¸»åŠ¨å‘èµ· TCP è¿æ¥å»ºç«‹çš„åº”ç”¨è¿›ç¨‹å«åšå®¢æˆ·ï¼Œè€Œè¢«åŠ¨ç­‰å¾…è¿æ¥å»ºç«‹çš„åº”ç”¨è¿›ç¨‹å«åšæœåŠ¡å™¨ã€‚TCP è¿æ¥é‡‡ç”¨ä¸‰æŠ¥æ–‡æ¡æ‰‹æœºåˆ¶ã€‚æœåŠ¡å™¨è¦ç¡®è®¤ç”¨æˆ·çš„è¿æ¥è¯·æ±‚ï¼Œç„¶åå®¢æˆ·è¦å¯¹æœåŠ¡å™¨çš„ç¡®è®¤è¿›è¡Œç¡®è®¤ã€‚</strong></li><li>TCP çš„è¿æ¥é‡Šæ”¾é‡‡ç”¨å››æŠ¥æ–‡æ¡æ‰‹æœºåˆ¶ã€‚ä»»ä½•ä¸€æ–¹éƒ½å¯ä»¥åœ¨æ•°æ®ä¼ é€ç»“æŸåå‘å‡ºè¿æ¥é‡Šæ”¾çš„é€šçŸ¥ï¼Œå¾…å¯¹æ–¹ç¡®è®¤åè¿›å…¥åŠå…³é—­çŠ¶æ€ã€‚å½“å¦ä¸€æ–¹ä¹Ÿæ²¡æœ‰æ•°æ®å†å‘é€æ—¶ï¼Œåˆ™å‘é€è¿æ¥é‡Šæ”¾é€šçŸ¥ï¼Œå¯¹æ–¹ç¡®è®¤åå°±å®Œå…¨å…³é—­äº† TCP è¿æ¥</li></ol><h3 id="5-3-è¡¥å……ï¼ˆé‡è¦ï¼‰"><a href="#5-3-è¡¥å……ï¼ˆé‡è¦ï¼‰" class="headerlink" title="5.3. è¡¥å……ï¼ˆé‡è¦ï¼‰"></a>5.3. è¡¥å……ï¼ˆé‡è¦ï¼‰</h3><p>ä»¥ä¸‹çŸ¥è¯†ç‚¹éœ€è¦é‡ç‚¹å…³æ³¨ï¼š</p><ol><li>ç«¯å£å’Œå¥—æ¥å­—çš„æ„ä¹‰</li><li>UDP å’Œ TCP çš„åŒºåˆ«ä»¥åŠä¸¤è€…çš„åº”ç”¨åœºæ™¯</li><li>åœ¨ä¸å¯é çš„ç½‘ç»œä¸Šå®ç°å¯é ä¼ è¾“çš„å·¥ä½œåŸç†ï¼Œåœæ­¢ç­‰å¾…åè®®å’Œ ARQ åè®®</li><li>TCP çš„æ»‘åŠ¨çª—å£ï¼Œæµé‡æ§åˆ¶ï¼Œæ‹¥å¡æ§åˆ¶å’Œè¿æ¥ç®¡ç†</li><li>TCP çš„ä¸‰æ¬¡æ¡æ‰‹ï¼Œå››æ¬¡æŒ¥æ‰‹æœºåˆ¶</li></ol><h2 id="6-åº”ç”¨å±‚ï¼ˆApplication-Layerï¼‰"><a href="#6-åº”ç”¨å±‚ï¼ˆApplication-Layerï¼‰" class="headerlink" title="6. åº”ç”¨å±‚ï¼ˆApplication Layerï¼‰"></a>6. åº”ç”¨å±‚ï¼ˆApplication Layerï¼‰</h2><p><img src="https://mmbiz.qpic.cn/mmbiz_png/iaIdQfEric9Txpk4narOnyI7xL1Im2X40Ke33HT18JEZTyPFrStiaMHdWs7a7T07CIbdLryJoCJMZ5f83Ltug9Mlw/640?wx_fmt=png&tp=webp&wxfrom=5&wx_lazy=1&wx_co=1" alt="åº”ç”¨å±‚"></p><h3 id="6-1-åŸºæœ¬æœ¯è¯­"><a href="#6-1-åŸºæœ¬æœ¯è¯­" class="headerlink" title="6.1. åŸºæœ¬æœ¯è¯­"></a>6.1. åŸºæœ¬æœ¯è¯­</h3><ol><li><strong>åŸŸåç³»ç»Ÿï¼ˆDNSï¼‰</strong> ï¼šåŸŸåç³»ç»Ÿï¼ˆDNSï¼ŒDomain Name Systemï¼‰å°†äººç±»å¯è¯»çš„åŸŸå (ä¾‹å¦‚ï¼Œ<a href="http://www.baidu.com/">www.baidu.com</a>) è½¬æ¢ä¸ºæœºå™¨å¯è¯»çš„ IP åœ°å€ (ä¾‹å¦‚ï¼Œ220.181.38.148)ã€‚æˆ‘ä»¬å¯ä»¥å°†å…¶ç†è§£ä¸ºä¸“ä¸ºäº’è”ç½‘è®¾è®¡çš„ç”µè¯è–„ã€‚</li></ol><p><img src="https://mmbiz.qpic.cn/mmbiz_png/iaIdQfEric9Txpk4narOnyI7xL1Im2X40KGmT3bbwRxUcDUnW3FGTuJyDFJeQoztiaqdafsrxVr6QmmcU6UnngIEA/640?wx_fmt=png&tp=webp&wxfrom=5&wx_lazy=1&wx_co=1" alt="img"></p><p><a href="https://www.seobility.net/en/wiki/HTTP_headers">https://www.seobility.net/en/wiki/HTTP_headers</a></p><ol><li><strong>æ–‡ä»¶ä¼ è¾“åè®®ï¼ˆFTPï¼‰</strong> ï¼šFTP æ˜¯ File TransferProtocolï¼ˆæ–‡ä»¶ä¼ è¾“åè®®ï¼‰çš„è‹±æ–‡ç®€ç§°ï¼Œè€Œä¸­æ–‡ç®€ç§°ä¸ºâ€œæ–‡ä¼ åè®®â€ã€‚ç”¨äº Internet ä¸Šçš„æ§åˆ¶æ–‡ä»¶çš„åŒå‘ä¼ è¾“ã€‚åŒæ—¶ï¼Œå®ƒä¹Ÿæ˜¯ä¸€ä¸ªåº”ç”¨ç¨‹åºï¼ˆApplicationï¼‰ã€‚åŸºäºä¸åŒçš„æ“ä½œç³»ç»Ÿæœ‰ä¸åŒçš„ FTP åº”ç”¨ç¨‹åºï¼Œè€Œæ‰€æœ‰è¿™äº›åº”ç”¨ç¨‹åºéƒ½éµå®ˆåŒä¸€ç§åè®®ä»¥ä¼ è¾“æ–‡ä»¶ã€‚åœ¨ FTP çš„ä½¿ç”¨å½“ä¸­ï¼Œç”¨æˆ·ç»å¸¸é‡åˆ°ä¸¤ä¸ªæ¦‚å¿µï¼šâ€ä¸‹è½½â€ï¼ˆDownloadï¼‰å’Œâ€ä¸Šä¼ â€ï¼ˆUploadï¼‰ã€‚â€ä¸‹è½½â€æ–‡ä»¶å°±æ˜¯ä»è¿œç¨‹ä¸»æœºæ‹·è´æ–‡ä»¶è‡³è‡ªå·±çš„è®¡ç®—æœºä¸Šï¼›â€ä¸Šä¼ â€æ–‡ä»¶å°±æ˜¯å°†æ–‡ä»¶ä»è‡ªå·±çš„è®¡ç®—æœºä¸­æ‹·è´è‡³è¿œç¨‹ä¸»æœºä¸Šã€‚ç”¨ Internet è¯­è¨€æ¥è¯´ï¼Œç”¨æˆ·å¯é€šè¿‡å®¢æˆ·æœºç¨‹åºå‘ï¼ˆä»ï¼‰è¿œç¨‹ä¸»æœºä¸Šä¼ ï¼ˆä¸‹è½½ï¼‰æ–‡ä»¶ã€‚</li></ol><p><img src="https://mmbiz.qpic.cn/mmbiz_png/iaIdQfEric9Txpk4narOnyI7xL1Im2X40KoyZl04PDhEBgdCSWUVej9SCYvnJEufWlZBIwOAtm5Jlzs54ficyU5WA/640?wx_fmt=png&tp=webp&wxfrom=5&wx_lazy=1&wx_co=1" alt="FTPå·¥ä½œè¿‡ç¨‹"></p><ol><li><strong>ç®€å•æ–‡ä»¶ä¼ è¾“åè®®ï¼ˆTFTPï¼‰</strong> ï¼šTFTPï¼ˆTrivial File Transfer Protocol,ç®€å•æ–‡ä»¶ä¼ è¾“åè®®ï¼‰æ˜¯ TCP/IP åè®®æ—ä¸­çš„ä¸€ä¸ªç”¨æ¥åœ¨å®¢æˆ·æœºä¸æœåŠ¡å™¨ä¹‹é—´è¿›è¡Œç®€å•æ–‡ä»¶ä¼ è¾“çš„åè®®ï¼Œæä¾›ä¸å¤æ‚ã€å¼€é”€ä¸å¤§çš„æ–‡ä»¶ä¼ è¾“æœåŠ¡ã€‚ç«¯å£å·ä¸º 69ã€‚</li><li><strong>è¿œç¨‹ç»ˆç«¯åè®®ï¼ˆTELENETï¼‰</strong> ï¼šTelnet åè®®æ˜¯ TCP/IP åè®®æ—ä¸­çš„ä¸€å‘˜ï¼Œæ˜¯ Internet è¿œç¨‹ç™»é™†æœåŠ¡çš„æ ‡å‡†åè®®å’Œä¸»è¦æ–¹å¼ã€‚å®ƒä¸ºç”¨æˆ·æä¾›äº†åœ¨æœ¬åœ°è®¡ç®—æœºä¸Šå®Œæˆè¿œç¨‹ä¸»æœºå·¥ä½œçš„èƒ½åŠ›ã€‚åœ¨ç»ˆç«¯ä½¿ç”¨è€…çš„ç”µè„‘ä¸Šä½¿ç”¨ telnet ç¨‹åºï¼Œç”¨å®ƒè¿æ¥åˆ°æœåŠ¡å™¨ã€‚ç»ˆç«¯ä½¿ç”¨è€…å¯ä»¥åœ¨ telnet ç¨‹åºä¸­è¾“å…¥å‘½ä»¤ï¼Œè¿™äº›å‘½ä»¤ä¼šåœ¨æœåŠ¡å™¨ä¸Šè¿è¡Œï¼Œå°±åƒç›´æ¥åœ¨æœåŠ¡å™¨çš„æ§åˆ¶å°ä¸Šè¾“å…¥ä¸€æ ·ã€‚å¯ä»¥åœ¨æœ¬åœ°å°±èƒ½æ§åˆ¶æœåŠ¡å™¨ã€‚è¦å¼€å§‹ä¸€ä¸ª telnet ä¼šè¯ï¼Œå¿…é¡»è¾“å…¥ç”¨æˆ·åå’Œå¯†ç æ¥ç™»å½•æœåŠ¡å™¨ã€‚Telnet æ˜¯å¸¸ç”¨çš„è¿œç¨‹æ§åˆ¶ Web æœåŠ¡å™¨çš„æ–¹æ³•ã€‚</li><li><strong>ä¸‡ç»´ç½‘ï¼ˆWWWï¼‰</strong> ï¼šWWW æ˜¯ç¯çƒä¿¡æ¯ç½‘çš„ç¼©å†™ï¼Œï¼ˆäº¦ä½œâ€œWebâ€ã€â€œWWWâ€ã€â€œâ€™W3â€™â€ï¼Œè‹±æ–‡å…¨ç§°ä¸ºâ€œWorld Wide Webâ€ï¼‰ï¼Œä¸­æ–‡åå­—ä¸ºâ€œä¸‡ç»´ç½‘â€ï¼Œâ€ç¯çƒç½‘â€ç­‰ï¼Œå¸¸ç®€ç§°ä¸º Webã€‚åˆ†ä¸º Web å®¢æˆ·ç«¯å’Œ Web æœåŠ¡å™¨ç¨‹åºã€‚WWW å¯ä»¥è®© Web å®¢æˆ·ç«¯ï¼ˆå¸¸ç”¨æµè§ˆå™¨ï¼‰è®¿é—®æµè§ˆ Web æœåŠ¡å™¨ä¸Šçš„é¡µé¢ã€‚æ˜¯ä¸€ä¸ªç”±è®¸å¤šäº’ç›¸é“¾æ¥çš„è¶…æ–‡æœ¬ç»„æˆçš„ç³»ç»Ÿï¼Œé€šè¿‡äº’è”ç½‘è®¿é—®ã€‚åœ¨è¿™ä¸ªç³»ç»Ÿä¸­ï¼Œæ¯ä¸ªæœ‰ç”¨çš„äº‹ç‰©ï¼Œç§°ä¸ºä¸€æ ·â€œèµ„æºâ€ï¼›å¹¶ä¸”ç”±ä¸€ä¸ªå…¨å±€â€œç»Ÿä¸€èµ„æºæ ‡è¯†ç¬¦â€ï¼ˆURIï¼‰æ ‡è¯†ï¼›è¿™äº›èµ„æºé€šè¿‡è¶…æ–‡æœ¬ä¼ è¾“åè®®ï¼ˆHypertext Transfer Protocolï¼‰ä¼ é€ç»™ç”¨æˆ·ï¼Œè€Œåè€…é€šè¿‡ç‚¹å‡»é“¾æ¥æ¥è·å¾—èµ„æºã€‚ä¸‡ç»´ç½‘è”ç›Ÿï¼ˆè‹±è¯­ï¼šWorld Wide Web Consortiumï¼Œç®€ç§° W3Cï¼‰ï¼Œåˆç§° W3C ç†äº‹ä¼šã€‚1994 å¹´ 10 æœˆåœ¨éº»çœç†å·¥å­¦é™¢ï¼ˆMITï¼‰è®¡ç®—æœºç§‘å­¦å®éªŒå®¤æˆç«‹ã€‚ä¸‡ç»´ç½‘è”ç›Ÿçš„åˆ›å»ºè€…æ˜¯ä¸‡ç»´ç½‘çš„å‘æ˜è€…è’‚å§†Â·ä¼¯çº³æ–¯-æã€‚ä¸‡ç»´ç½‘å¹¶ä¸ç­‰åŒäº’è”ç½‘ï¼Œä¸‡ç»´ç½‘åªæ˜¯äº’è”ç½‘æ‰€èƒ½æä¾›çš„æœåŠ¡å…¶ä¸­ä¹‹ä¸€ï¼Œæ˜¯é ç€äº’è”ç½‘è¿è¡Œçš„ä¸€é¡¹æœåŠ¡ã€‚</li><li><strong>ä¸‡ç»´ç½‘çš„å¤§è‡´å·¥ä½œå·¥ç¨‹ï¼š</strong></li></ol><p><img src="https://mmbiz.qpic.cn/mmbiz_jpg/iaIdQfEric9Txpk4narOnyI7xL1Im2X40KtdIowP6M0tWZhaRlF8icddPztoaDnXhGDJXP0Q13e3lG0wmepfU7AQQ/640?wx_fmt=jpeg&tp=webp&wxfrom=5&wx_lazy=1&wx_co=1" alt="ä¸‡ç»´ç½‘çš„å¤§è‡´å·¥ä½œå·¥ç¨‹"></p><ol><li><strong>ç»Ÿä¸€èµ„æºå®šä½ç¬¦ï¼ˆURLï¼‰</strong> ï¼šç»Ÿä¸€èµ„æºå®šä½ç¬¦æ˜¯å¯¹å¯ä»¥ä»äº’è”ç½‘ä¸Šå¾—åˆ°çš„èµ„æºçš„ä½ç½®å’Œè®¿é—®æ–¹æ³•çš„ä¸€ç§ç®€æ´çš„è¡¨ç¤ºï¼Œæ˜¯äº’è”ç½‘ä¸Šæ ‡å‡†èµ„æºçš„åœ°å€ã€‚äº’è”ç½‘ä¸Šçš„æ¯ä¸ªæ–‡ä»¶éƒ½æœ‰ä¸€ä¸ªå”¯ä¸€çš„ URLï¼Œå®ƒåŒ…å«çš„ä¿¡æ¯æŒ‡å‡ºæ–‡ä»¶çš„ä½ç½®ä»¥åŠæµè§ˆå™¨åº”è¯¥æ€ä¹ˆå¤„ç†å®ƒã€‚</li><li><strong>è¶…æ–‡æœ¬ä¼ è¾“åè®®ï¼ˆHTTPï¼‰</strong> ï¼šè¶…æ–‡æœ¬ä¼ è¾“åè®®ï¼ˆHTTPï¼ŒHyperText Transfer Protocol)æ˜¯äº’è”ç½‘ä¸Šåº”ç”¨æœ€ä¸ºå¹¿æ³›çš„ä¸€ç§ç½‘ç»œåè®®ã€‚æ‰€æœ‰çš„ WWW æ–‡ä»¶éƒ½å¿…é¡»éµå®ˆè¿™ä¸ªæ ‡å‡†ã€‚è®¾è®¡ HTTP æœ€åˆçš„ç›®çš„æ˜¯ä¸ºäº†æä¾›ä¸€ç§å‘å¸ƒå’Œæ¥æ”¶ HTML é¡µé¢çš„æ–¹æ³•ã€‚1960 å¹´ç¾å›½äºº Ted Nelson æ„æ€äº†ä¸€ç§é€šè¿‡è®¡ç®—æœºå¤„ç†æ–‡æœ¬ä¿¡æ¯çš„æ–¹æ³•ï¼Œå¹¶ç§°ä¹‹ä¸ºè¶…æ–‡æœ¬ï¼ˆhypertextï¼‰,è¿™æˆä¸ºäº† HTTP è¶…æ–‡æœ¬ä¼ è¾“åè®®æ ‡å‡†æ¶æ„çš„å‘å±•æ ¹åŸºã€‚</li></ol><p>HTTP åè®®çš„æœ¬è´¨å°±æ˜¯ä¸€ç§æµè§ˆå™¨ä¸æœåŠ¡å™¨ä¹‹é—´çº¦å®šå¥½çš„é€šä¿¡æ ¼å¼ã€‚HTTP çš„åŸç†å¦‚ä¸‹å›¾æ‰€ç¤ºï¼š</p><p><img src="https://mmbiz.qpic.cn/mmbiz_jpg/iaIdQfEric9Txpk4narOnyI7xL1Im2X40K5y5tH02HtyI4D0icvNjlcoH9qxOiaMibjdgkVu8YB6ZXl7BoslFic7l5sQ/640?wx_fmt=jpeg&tp=webp&wxfrom=5&wx_lazy=1&wx_co=1"></p><ol><li><strong>ä»£ç†æœåŠ¡å™¨ï¼ˆProxy Serverï¼‰</strong> ï¼šä»£ç†æœåŠ¡å™¨ï¼ˆProxy Serverï¼‰æ˜¯ä¸€ç§ç½‘ç»œå®ä½“ï¼Œå®ƒåˆç§°ä¸ºä¸‡ç»´ç½‘é«˜é€Ÿç¼“å­˜ã€‚ä»£ç†æœåŠ¡å™¨æŠŠæœ€è¿‘çš„ä¸€äº›è¯·æ±‚å’Œå“åº”æš‚å­˜åœ¨æœ¬åœ°ç£ç›˜ä¸­ã€‚å½“æ–°è¯·æ±‚åˆ°è¾¾æ—¶ï¼Œè‹¥ä»£ç†æœåŠ¡å™¨å‘ç°è¿™ä¸ªè¯·æ±‚ä¸æš‚æ—¶å­˜æ”¾çš„çš„è¯·æ±‚ç›¸åŒï¼Œå°±è¿”å›æš‚å­˜çš„å“åº”ï¼Œè€Œä¸éœ€è¦æŒ‰ URL çš„åœ°å€å†æ¬¡å»äº’è”ç½‘è®¿é—®è¯¥èµ„æºã€‚ä»£ç†æœåŠ¡å™¨å¯åœ¨å®¢æˆ·ç«¯æˆ–æœåŠ¡å™¨å·¥ä½œï¼Œä¹Ÿå¯ä»¥åœ¨ä¸­é—´ç³»ç»Ÿå·¥ä½œã€‚</li><li><strong>ç®€å•é‚®ä»¶ä¼ è¾“åè®®(SMTP)</strong> : SMTPï¼ˆSimple Mail Transfer Protocolï¼‰å³ç®€å•é‚®ä»¶ä¼ è¾“åè®®,å®ƒæ˜¯ä¸€ç»„ç”¨äºç”±æºåœ°å€åˆ°ç›®çš„åœ°å€ä¼ é€é‚®ä»¶çš„è§„åˆ™ï¼Œç”±å®ƒæ¥æ§åˆ¶ä¿¡ä»¶çš„ä¸­è½¬æ–¹å¼ã€‚SMTP åè®®å±äº TCP/IP åè®®ç°‡ï¼Œå®ƒå¸®åŠ©æ¯å°è®¡ç®—æœºåœ¨å‘é€æˆ–ä¸­è½¬ä¿¡ä»¶æ—¶æ‰¾åˆ°ä¸‹ä¸€ä¸ªç›®çš„åœ°ã€‚é€šè¿‡ SMTP åè®®æ‰€æŒ‡å®šçš„æœåŠ¡å™¨,å°±å¯ä»¥æŠŠ E-mail å¯„åˆ°æ”¶ä¿¡äººçš„æœåŠ¡å™¨ä¸Šäº†ï¼Œæ•´ä¸ªè¿‡ç¨‹åªè¦å‡ åˆ†é’Ÿã€‚SMTP æœåŠ¡å™¨åˆ™æ˜¯éµå¾ª SMTP åè®®çš„å‘é€é‚®ä»¶æœåŠ¡å™¨ï¼Œç”¨æ¥å‘é€æˆ–ä¸­è½¬å‘å‡ºçš„ç”µå­é‚®ä»¶ã€‚</li></ol><p><img src="https://mmbiz.qpic.cn/mmbiz_png/iaIdQfEric9Txpk4narOnyI7xL1Im2X40KibGIaIUian9kArCrxV65TBdbWeY7w3rgtlroia7KhtRbic3e8GlyYsZHbg/640?wx_fmt=png&tp=webp&wxfrom=5&wx_lazy=1&wx_co=1" alt="ä¸€ä¸ªç”µå­é‚®ä»¶è¢«å‘é€çš„è¿‡ç¨‹"></p><p><a href="https://www.campaignmonitor.com/resources/knowledge-base/what-is-the-code-that-makes-bcc-or-cc-operate-in-an-email/">https://www.campaignmonitor.com/resources/knowledge-base/what-is-the-code-that-makes-bcc-or-cc-operate-in-an-email/</a></p><ol><li><strong>æœç´¢å¼•æ“</strong> :æœç´¢å¼•æ“ï¼ˆSearch Engineï¼‰æ˜¯æŒ‡æ ¹æ®ä¸€å®šçš„ç­–ç•¥ã€è¿ç”¨ç‰¹å®šçš„è®¡ç®—æœºç¨‹åºä»äº’è”ç½‘ä¸Šæœé›†ä¿¡æ¯ï¼Œåœ¨å¯¹ä¿¡æ¯è¿›è¡Œç»„ç»‡å’Œå¤„ç†åï¼Œä¸ºç”¨æˆ·æä¾›æ£€ç´¢æœåŠ¡ï¼Œå°†ç”¨æˆ·æ£€ç´¢ç›¸å…³çš„ä¿¡æ¯å±•ç¤ºç»™ç”¨æˆ·çš„ç³»ç»Ÿã€‚æœç´¢å¼•æ“åŒ…æ‹¬å…¨æ–‡ç´¢å¼•ã€ç›®å½•ç´¢å¼•ã€å…ƒæœç´¢å¼•æ“ã€å‚ç›´æœç´¢å¼•æ“ã€é›†åˆå¼æœç´¢å¼•æ“ã€é—¨æˆ·æœç´¢å¼•æ“ä¸å…è´¹é“¾æ¥åˆ—è¡¨ç­‰ã€‚</li></ol><p><img src="https://mmbiz.qpic.cn/mmbiz_jpg/iaIdQfEric9Txpk4narOnyI7xL1Im2X40KAdo3NwVkz5KOWB2Pht1bVO74ltib8C29xqHiabCYJiaUIJehjLsVI4r9w/640?wx_fmt=jpeg&tp=webp&wxfrom=5&wx_lazy=1&wx_co=1" alt="æœç´¢å¼•æ“"></p><ol><li><strong>å‚ç›´æœç´¢å¼•æ“</strong> ï¼šå‚ç›´æœç´¢å¼•æ“æ˜¯é’ˆå¯¹æŸä¸€ä¸ªè¡Œä¸šçš„ä¸“ä¸šæœç´¢å¼•æ“ï¼Œæ˜¯æœç´¢å¼•æ“çš„ç»†åˆ†å’Œå»¶ä¼¸ï¼Œæ˜¯å¯¹ç½‘é¡µåº“ä¸­çš„æŸç±»ä¸“é—¨çš„ä¿¡æ¯è¿›è¡Œä¸€æ¬¡æ•´åˆï¼Œå®šå‘åˆ†å­—æ®µæŠ½å–å‡ºéœ€è¦çš„æ•°æ®è¿›è¡Œå¤„ç†åå†ä»¥æŸç§å½¢å¼è¿”å›ç»™ç”¨æˆ·ã€‚å‚ç›´æœç´¢æ˜¯ç›¸å¯¹é€šç”¨æœç´¢å¼•æ“çš„ä¿¡æ¯é‡å¤§ã€æŸ¥è¯¢ä¸å‡†ç¡®ã€æ·±åº¦ä¸å¤Ÿç­‰æå‡ºæ¥çš„æ–°çš„æœç´¢å¼•æ“æœåŠ¡æ¨¡å¼ï¼Œé€šè¿‡é’ˆå¯¹æŸä¸€ç‰¹å®šé¢†åŸŸã€æŸä¸€ç‰¹å®šäººç¾¤æˆ–æŸä¸€ç‰¹å®šéœ€æ±‚æä¾›çš„æœ‰ä¸€å®šä»·å€¼çš„ä¿¡æ¯å’Œç›¸å…³æœåŠ¡ã€‚å…¶ç‰¹ç‚¹å°±æ˜¯â€œä¸“ã€ç²¾ã€æ·±â€ï¼Œä¸”å…·æœ‰è¡Œä¸šè‰²å½©ï¼Œç›¸æ¯”è¾ƒé€šç”¨æœç´¢å¼•æ“çš„æµ·é‡ä¿¡æ¯æ— åºåŒ–ï¼Œå‚ç›´æœç´¢å¼•æ“åˆ™æ˜¾å¾—æ›´åŠ ä¸“æ³¨ã€å…·ä½“å’Œæ·±å…¥ã€‚</li><li><strong>å…¨æ–‡ç´¢å¼•</strong> :å…¨æ–‡ç´¢å¼•æŠ€æœ¯æ˜¯ç›®å‰æœç´¢å¼•æ“çš„å…³é”®æŠ€æœ¯ã€‚è¯•æƒ³åœ¨ 1M å¤§å°çš„æ–‡ä»¶ä¸­æœç´¢ä¸€ä¸ªè¯ï¼Œå¯èƒ½éœ€è¦å‡ ç§’ï¼Œåœ¨ 100M çš„æ–‡ä»¶ä¸­å¯èƒ½éœ€è¦å‡ åç§’ï¼Œå¦‚æœåœ¨æ›´å¤§çš„æ–‡ä»¶ä¸­æœç´¢é‚£ä¹ˆå°±éœ€è¦æ›´å¤§çš„ç³»ç»Ÿå¼€é”€ï¼Œè¿™æ ·çš„å¼€é”€æ˜¯ä¸ç°å®çš„ã€‚æ‰€ä»¥åœ¨è¿™æ ·çš„çŸ›ç›¾ä¸‹å‡ºç°äº†å…¨æ–‡ç´¢å¼•æŠ€æœ¯ï¼Œæœ‰æ—¶å€™æœ‰äººå«å€’æ’æ–‡æ¡£æŠ€æœ¯ã€‚</li><li><strong>ç›®å½•ç´¢å¼•</strong> ï¼šç›®å½•ç´¢å¼•ï¼ˆ search index/directory)ï¼Œé¡¾åæ€ä¹‰å°±æ˜¯å°†ç½‘ç«™åˆ†é—¨åˆ«ç±»åœ°å­˜æ”¾åœ¨ç›¸åº”çš„ç›®å½•ä¸­ï¼Œå› æ­¤ç”¨æˆ·åœ¨æŸ¥è¯¢ä¿¡æ¯æ—¶ï¼Œå¯é€‰æ‹©å…³é”®è¯æœç´¢ï¼Œä¹Ÿå¯æŒ‰åˆ†ç±»ç›®å½•é€å±‚æŸ¥æ‰¾ã€‚</li></ol><h3 id="6-2-é‡è¦çŸ¥è¯†ç‚¹æ€»ç»“"><a href="#6-2-é‡è¦çŸ¥è¯†ç‚¹æ€»ç»“" class="headerlink" title="6.2. é‡è¦çŸ¥è¯†ç‚¹æ€»ç»“"></a>6.2. é‡è¦çŸ¥è¯†ç‚¹æ€»ç»“</h3><ol><li>æ–‡ä»¶ä¼ è¾“åè®®ï¼ˆFTPï¼‰ä½¿ç”¨ TCP å¯é çš„è¿è¾“æœåŠ¡ã€‚FTP ä½¿ç”¨å®¢æˆ·æœåŠ¡å™¨æ–¹å¼ã€‚ä¸€ä¸ª FTP æœåŠ¡å™¨è¿›ç¨‹å¯ä»¥åŒæ—¶ä¸ºå¤šä¸ªç”¨æˆ·æä¾›æœåŠ¡ã€‚åœ¨è¿›è¿›è¡Œæ–‡ä»¶ä¼ è¾“æ—¶ï¼ŒFTP çš„å®¢æˆ·å’ŒæœåŠ¡å™¨ä¹‹é—´è¦å…ˆå»ºç«‹ä¸¤ä¸ªå¹¶è¡Œçš„ TCP è¿æ¥:æ§åˆ¶è¿æ¥å’Œæ•°æ®è¿æ¥ã€‚å®é™…ç”¨äºä¼ è¾“æ–‡ä»¶çš„æ˜¯æ•°æ®è¿æ¥ã€‚</li><li>ä¸‡ç»´ç½‘å®¢æˆ·ç¨‹åºä¸æœåŠ¡å™¨ä¹‹é—´è¿›è¡Œäº¤äº’ä½¿ç”¨çš„åè®®æ˜¯è¶…æ–‡æœ¬ä¼ è¾“åè®® HTTPã€‚HTTP ä½¿ç”¨ TCP è¿æ¥è¿›è¡Œå¯é ä¼ è¾“ã€‚ä½† HTTP æœ¬èº«æ˜¯æ— è¿æ¥ã€æ— çŠ¶æ€çš„ã€‚HTTP/1.1 åè®®ä½¿ç”¨äº†æŒç»­è¿æ¥ï¼ˆåˆ†ä¸ºéæµæ°´çº¿æ–¹å¼å’Œæµæ°´çº¿æ–¹å¼ï¼‰</li><li>ç”µå­é‚®ä»¶æŠŠé‚®ä»¶å‘é€åˆ°æ”¶ä»¶äººä½¿ç”¨çš„é‚®ä»¶æœåŠ¡å™¨ï¼Œå¹¶æ”¾åœ¨å…¶ä¸­çš„æ”¶ä»¶äººé‚®ç®±ä¸­ï¼Œæ”¶ä»¶äººå¯éšæ—¶ä¸Šç½‘åˆ°è‡ªå·±ä½¿ç”¨çš„é‚®ä»¶æœåŠ¡å™¨è¯»å–ï¼Œç›¸å½“äºç”µå­é‚®ç®±ã€‚</li><li>ä¸€ä¸ªç”µå­é‚®ä»¶ç³»ç»Ÿæœ‰ä¸‰ä¸ªé‡è¦ç»„æˆæ„ä»¶ï¼šç”¨æˆ·ä»£ç†ã€é‚®ä»¶æœåŠ¡å™¨ã€é‚®ä»¶åè®®ï¼ˆåŒ…æ‹¬é‚®ä»¶å‘é€åè®®ï¼Œå¦‚ SMTPï¼Œå’Œé‚®ä»¶è¯»å–åè®®ï¼Œå¦‚ POP3 å’Œ IMAPï¼‰ã€‚ç”¨æˆ·ä»£ç†å’Œé‚®ä»¶æœåŠ¡å™¨éƒ½è¦è¿è¡Œè¿™äº›åè®®ã€‚</li></ol><h3 id="6-3-è¡¥å……ï¼ˆé‡è¦ï¼‰"><a href="#6-3-è¡¥å……ï¼ˆé‡è¦ï¼‰" class="headerlink" title="6.3. è¡¥å……ï¼ˆé‡è¦ï¼‰"></a>6.3. è¡¥å……ï¼ˆé‡è¦ï¼‰</h3><p>ä»¥ä¸‹çŸ¥è¯†ç‚¹éœ€è¦é‡ç‚¹å…³æ³¨ï¼š</p><ol><li>åº”ç”¨å±‚çš„å¸¸è§åè®®ï¼ˆé‡ç‚¹å…³æ³¨ HTTP åè®®ï¼‰</li><li>åŸŸåç³»ç»Ÿ-ä»åŸŸåè§£æå‡º IP åœ°å€</li><li>è®¿é—®ä¸€ä¸ªç½‘ç«™å¤§è‡´çš„è¿‡ç¨‹</li><li>ç³»ç»Ÿè°ƒç”¨å’Œåº”ç”¨ç¼–ç¨‹æ¥å£æ¦‚å¿µ</li></ol>]]></content>
    
    
    <summary type="html">&lt;p&gt;è½¬è‡ªå…¬ä¼—å·ï¼š&lt;a href=&quot;https://mp.weixin.qq.com/s/6ju4j_ffLuOBuoO53ZhcOA&quot;&gt;JavaGuide:å¤§äºŒé€ƒè¯¾æ€»ç»“1.2wå­—çš„è®¡ç®—æœºç½‘ç»œçŸ¥è¯†&lt;/a&gt; ã€‚ä¾›ä¹‹åå¤ä¹ ç”¨ã€‚&lt;/p&gt;</summary>
    
    
    
    <category term="ç½‘ç»œ" scheme="https://www.fvolcano.red/categories/%E7%BD%91%E7%BB%9C/"/>
    
    
    <category term="æ•´ç†" scheme="https://www.fvolcano.red/tags/%E6%95%B4%E7%90%86/"/>
    
  </entry>
  
  <entry>
    <title>if-elseçš„ä¼˜åŒ–</title>
    <link href="https://www.fvolcano.red/2020/ultimazation-of-ifelse/"/>
    <id>https://www.fvolcano.red/2020/ultimazation-of-ifelse/</id>
    <published>2020-11-05T12:27:43.000Z</published>
    <updated>2020-11-05T12:27:43.000Z</updated>
    
    <content type="html"><![CDATA[<p>é’ˆå¯¹ if-else çš„å„ç§ä¸åŒä¼˜åŒ–æ–¹æ¡ˆã€‚<a id="more"></a></p><h1 id="æ¶ˆç­if-elseåµŒå¥—"><a href="#æ¶ˆç­if-elseåµŒå¥—" class="headerlink" title="æ¶ˆç­if-elseåµŒå¥—"></a>æ¶ˆç­if-elseåµŒå¥—</h1><p><a href="https://juejin.im/post/6844904080104488967">å‚è€ƒå‡ºå¤„1</a>ï¼šä½¿ç”¨è®¾è®¡æ¨¡å¼ä¸­çš„<strong>ç­–ç•¥æ¨¡å¼</strong>æ¥ä¼˜åŒ–é’ˆå¯¹ä¸åŒæ¡ä»¶è¿›è¡Œä¸åŒæ“ä½œçš„éœ€æ±‚ã€‚</p><p><a href="https://blog.csdn.net/fzy629442466/article/details/85762748">å‚è€ƒå‡ºå¤„2</a>ï¼šä¼˜åŒ–å¤§é‡çš„if else çš„ä¸åŒæ–¹æ³•</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> (<span class="keyword">true</span>) &#123;</span><br><span class="line">    <span class="keyword">if</span> (<span class="keyword">true</span>) &#123;</span><br><span class="line">        <span class="keyword">if</span> (<span class="keyword">true</span>) &#123;</span><br><span class="line">            <span class="keyword">if</span> (<span class="keyword">true</span>) &#123;</span><br><span class="line">                <span class="keyword">if</span> (<span class="keyword">true</span>) &#123;</span><br><span class="line">                    <span class="keyword">if</span> (<span class="keyword">true</span>) &#123;</span><br><span class="line">                        ...</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><code>if-else</code>ä¸€èˆ¬ä¸å»ºè®®åµŒå¥—è¶…è¿‡ä¸‰å±‚ï¼Œå¦‚æœä¸€æ®µä»£ç å­˜åœ¨è¿‡å¤šçš„<code>if-else</code>åµŒå¥—ï¼Œä»£ç çš„å¯è¯»æ€§å°±ä¼šæ€¥é€Ÿä¸‹é™ï¼ŒåæœŸç»´æŠ¤éš¾åº¦ä¹Ÿå¤§å¤§æé«˜ã€‚</p><h1 id="å¤šæ¡ä»¶åˆ¤æ–­æ—¶çš„if-elseé€‰æ‹©ä¸æ’åº"><a href="#å¤šæ¡ä»¶åˆ¤æ–­æ—¶çš„if-elseé€‰æ‹©ä¸æ’åº" class="headerlink" title="å¤šæ¡ä»¶åˆ¤æ–­æ—¶çš„if-elseé€‰æ‹©ä¸æ’åº"></a>å¤šæ¡ä»¶åˆ¤æ–­æ—¶çš„if-elseé€‰æ‹©ä¸æ’åº</h1><p><a href="https://www.cnblogs.com/rwg-xs/articles/6213168.html">å‚è€ƒå‡ºå¤„</a></p><h2 id="åŸåˆ™"><a href="#åŸåˆ™" class="headerlink" title="åŸåˆ™"></a>åŸåˆ™</h2><h3 id="if-else-è¯­å¥å—çš„é¡ºåº"><a href="#if-else-è¯­å¥å—çš„é¡ºåº" class="headerlink" title="if/else è¯­å¥å—çš„é¡ºåº"></a>if/else è¯­å¥å—çš„é¡ºåº</h3><ul><li>é¦–å…ˆå¤„ç†æ­£é€»è¾‘è€Œä¸æ˜¯è´Ÿé€»è¾‘</li><li>å…ˆå¤„ç†ç®€å•çš„æƒ…å†µ</li><li>å…ˆå¤„ç†æœ‰è¶£çš„æˆ–è€…æ˜¯å¯ç–‘çš„æƒ…å†µ</li></ul><h3 id="é€šè¿‡ææ—©è¿”å›å‡å°‘åµŒå¥—"><a href="#é€šè¿‡ææ—©è¿”å›å‡å°‘åµŒå¥—" class="headerlink" title="é€šè¿‡ææ—©è¿”å›å‡å°‘åµŒå¥—"></a>é€šè¿‡ææ—©è¿”å›å‡å°‘åµŒå¥—</h3><h3 id="æ€»ç»“å˜é‡"><a href="#æ€»ç»“å˜é‡" class="headerlink" title="æ€»ç»“å˜é‡"></a>æ€»ç»“å˜é‡</h3><ul><li>ç”¨ä¸€ä¸ªçŸ­å¾ˆå¤šçš„åå­—æ¥ä»£æ›¿ä¸€å¤§å—ä»£ç ï¼Œè¿™å°±æ˜¯æ€»ç»“å˜é‡ã€‚</li><li>ä½¿ç”¨å¾·æ‘©æ ¹å®šç†,åˆ†è§£å¤åˆ¶çš„åˆ¤æ–­é€»è¾‘</li><li>æ‹†åˆ†å·¨å¤§çš„è¯­å¥ï¼Œè®©è¯­å¥æ›´å®¹æ˜“å¿«é€Ÿé˜…è¯»</li></ul><h3 id="åˆ†æå‡½æ•°ï¼ˆæˆ–ä»£ç å—ï¼‰ç”»å‡ºé€»è¾‘æ ‘"><a href="#åˆ†æå‡½æ•°ï¼ˆæˆ–ä»£ç å—ï¼‰ç”»å‡ºé€»è¾‘æ ‘" class="headerlink" title="åˆ†æå‡½æ•°ï¼ˆæˆ–ä»£ç å—ï¼‰ç”»å‡ºé€»è¾‘æ ‘"></a>åˆ†æå‡½æ•°ï¼ˆæˆ–ä»£ç å—ï¼‰ç”»å‡ºé€»è¾‘æ ‘</h3><p>é€»è¾‘æ ‘æ˜¯ä¸ºäº†ç†æ¸…å¤æ‚ifè¯­å¥é€»è¾‘äºŒäº§ç”Ÿçš„ï¼Œç»“æ„ä¸å“ˆå¤«æ›¼æ ‘ç±»ä¼¼ï¼š</p><p><img src="/2020/ultimazation-of-ifelse/1013328-20161222224548995-776032877.png"> </p><p>é€»è¾‘æ ‘è§„åˆ™ï¼šï¼ˆæ¨¡å—çš„å®šä¹‰ï¼šæ¯ä¸€ä¸ªif/elseçš„åˆ†æ”¯å³ä¸ºä¸€ä¸ªæ¨¡å—ï¼‰</p><p>1.æ¯ä¸ªæ¨¡å—éƒ½æ˜¯ä¸€ä¸ªæ ¹ç»“ç‚¹ï¼Œæ¯ä¸€ä¸ªæ ¹ç»“ç‚¹éƒ½ä¼šç»“æŸå‡½æ•°è¿è¡Œã€‚</p><p>2.åŒç­‰çº§çš„æ¨¡å—ï¼ˆå³ifè¯­å¥çš„æ­£åä¸¤é¢ï¼‰ï¼Œæ— å­æ¨¡å—çš„æ¨¡å—ï¼ˆå†…éƒ¨æ— ifè¯­å¥ï¼‰ä¼˜å…ˆçº§é«˜äºæ‹¥æœ‰å­æ¨¡å—çš„æ¨¡å—ï¼ˆå†…éƒ¨åµŒå¥—ifè¯­å¥ï¼‰</p><p>3.åŒç­‰çº§å’ŒåŒæ¡ä»¶ï¼ˆä¸¤ä¸ªæ¨¡å—éƒ½æ‹¥æœ‰å­æ¨¡å—æˆ–è€…éƒ½æ²¡æœ‰å­æ¨¡å—ï¼‰çš„æƒ…å†µä¸‹ï¼Œä½¿ç”¨ç‡é«˜çš„æ¨¡å—ä¼˜å…ˆçº§é«˜äºä½¿ç”¨ç‡ä½çš„</p><p>4.è‹¥æ¨¡å—ä¸­åŒ…å«å­æ¨¡å—ï¼Œå­æ¨¡å—çš„ä¼˜å…ˆçº§é«˜äºçˆ¶æ¨¡å—ã€‚</p><p><strong>ä¾‹ï¼š</strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 1</span></span><br><span class="line"><span class="keyword">if</span>(user_result == SUCCESS )&#123;</span><br><span class="line">    <span class="comment">// 2</span></span><br><span class="line">ã€€ã€€<span class="keyword">if</span>( permission_result != SUCCESS)&#123;</span><br><span class="line">      <span class="comment">// 3</span></span><br><span class="line">ã€€ã€€ã€€ã€€reply.WriteErrors(<span class="string">&quot;error reading permissions&quot;</span>);</span><br><span class="line">ã€€ã€€ã€€ã€€reply.Done();</span><br><span class="line">ã€€ã€€ã€€ã€€<span class="keyword">return</span>;</span><br><span class="line">   <span class="comment">// 2   </span></span><br><span class="line">ã€€ã€€&#125;</span><br><span class="line">ã€€ã€€reply.WriteErrors(<span class="string">&quot;&quot;</span>);</span><br><span class="line"><span class="comment">// 1    </span></span><br><span class="line">&#125;<span class="keyword">else</span>&#123;</span><br><span class="line">    <span class="comment">// 4</span></span><br><span class="line">ã€€ã€€reply.WriteErrors(user_result);</span><br><span class="line">    </span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// å…±æœ‰</span></span><br><span class="line">reply.Done();</span><br><span class="line"><span class="keyword">return</span>;</span><br></pre></td></tr></table></figure><p>æ ¹æ®åŸåˆ™ä¼˜åŒ–ï¼š</p><ol><li><p>2ã€4ä¸¤ä¸ªå±äºåŒç­‰çº§æ¨¡å—ï¼Œä½†æ˜¯ç”±äºçº¢è‰²æ¨¡å—ä¸­åŒ…å«ä¸€ä¸ªå­æ¨¡å—ï¼Œæ‰€ä»¥çº¢è‰²æ¨¡å—ä¼˜å…ˆçº§ä½äºç´«è‰²æ¨¡å—</p></li><li><p>3æ¨¡å—å±äº2æ¨¡å—å­æ¨¡å—ï¼Œæ‰€ä»¥3æ¨¡å—ä¼˜å…ˆçº§é«˜äº2æ¨¡å—</p></li><li><p>å‡½æ•°çš„ä¼˜å…ˆçº§æ’åˆ—ç”±é«˜åˆ°ä½ä¸ºï¼š4  &gt; 3 &gt; 2</p></li></ol><p>å¾—ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span>(user_result != SUCCESS)&#123;</span><br><span class="line">ã€€ã€€reply.WriteErrors(user_result);</span><br><span class="line">ã€€ã€€reply.Done();</span><br><span class="line">ã€€ã€€<span class="keyword">return</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"> </span><br><span class="line"><span class="keyword">if</span>(permission_result != SUCCESS)&#123;</span><br><span class="line">ã€€ã€€reply.WriteErrors(permission_result);</span><br><span class="line">ã€€ã€€reply.Done();</span><br><span class="line">ã€€ã€€<span class="keyword">return</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">reply.WriteErrors(<span class="string">&quot;&quot;</span>);</span><br><span class="line"></span><br><span class="line">reply.Done();</span><br><span class="line"><span class="keyword">return</span>;</span><br></pre></td></tr></table></figure><h1 id="å“ˆå¤«æ›¼æ ‘åœ¨å¤šé‡åˆ¤å®šç¨‹åºä¸­çš„è¿ç”¨"><a href="#å“ˆå¤«æ›¼æ ‘åœ¨å¤šé‡åˆ¤å®šç¨‹åºä¸­çš„è¿ç”¨" class="headerlink" title="å“ˆå¤«æ›¼æ ‘åœ¨å¤šé‡åˆ¤å®šç¨‹åºä¸­çš„è¿ç”¨"></a>å“ˆå¤«æ›¼æ ‘åœ¨å¤šé‡åˆ¤å®šç¨‹åºä¸­çš„è¿ç”¨</h1><p><a href="https://www.docin.com/p-764063178.html">å‚è€ƒè®ºæ–‡</a></p><p><img src="/2020/ultimazation-of-ifelse/%E5%93%88%E5%A4%AB%E6%9B%BC.png" alt="å“ˆå¤«æ›¼"></p><h1 id="å°æŠ€å·§"><a href="#å°æŠ€å·§" class="headerlink" title="å°æŠ€å·§"></a>å°æŠ€å·§</h1><h2 id="å¤šä¸ªã€Œæˆ–ã€ç­‰å€¼åˆ¤æ–­"><a href="#å¤šä¸ªã€Œæˆ–ã€ç­‰å€¼åˆ¤æ–­" class="headerlink" title="å¤šä¸ªã€Œæˆ–ã€ç­‰å€¼åˆ¤æ–­"></a>å¤šä¸ªã€Œæˆ–ã€ç­‰å€¼åˆ¤æ–­</h2><p><a href="https://www.toutiao.com/i6535677221640602125/">å‚è€ƒå‡ºå¤„</a></p><p>reg.equals(â€œ1â€) || reg.equals(â€œ2â€) || reg.equals(â€œ3â€)||â€¦çœå»nä¸ª</p><p>å¯ä»¥å€ŸåŠ©mapæˆ–setæ¥è¿›è¡Œåˆ¤æ–­ï¼Œå› ä¸ºhashmapæ˜¯ä¸€ä¸ªhashæ¡¶ï¼ŒæŸ¥æ‰¾çš„æ•ˆç‡æ˜¯æ¯”è¾ƒå¿«çš„ï¼Œä¸ç®¡åˆ¤æ–­ä»»ä½•å€¼ï¼ŒæŸ¥è¯¢æ•ˆç‡åŸºæœ¬å¾ˆç¨³å®šã€‚</p><p>æ¨èæŒ‡å®šhashmapçš„é•¿åº¦å’Œéœ€è¦åˆ¤æ–­çš„å…ƒç´ ä¸€æ ·å¤šï¼Œè¿™æ ·å°±é¿å…å¯¹æŸä¸€ä¸ªæ¡¶å†…è¡ç”Ÿå‡ºå¤šä½™é“¾è¡¨äº†ã€‚</p><p><img src="/2020/ultimazation-of-ifelse/1521705513450288676a8a8" alt="Javaé€»è¾‘æ¡ä»¶å¤šä¸ªã€Œæˆ–ã€åˆ¤æ–­æ—¶ï¼Œæ€§èƒ½ä¼˜åŒ–å°æŠ€å·§ï¼Œå€¼å¾—ä¸€è¯•"></p><p><img src="/2020/ultimazation-of-ifelse/15217055457025d21af6336" alt="Javaé€»è¾‘æ¡ä»¶å¤šä¸ªã€Œæˆ–ã€åˆ¤æ–­æ—¶ï¼Œæ€§èƒ½ä¼˜åŒ–å°æŠ€å·§ï¼Œå€¼å¾—ä¸€è¯•"></p><h2 id="æå‰åˆ¤æ–­è¿”å›"><a href="#æå‰åˆ¤æ–­è¿”å›" class="headerlink" title="æå‰åˆ¤æ–­è¿”å›"></a>æå‰åˆ¤æ–­è¿”å›</h2><p>å¦‚ä¸‹è¯­å¥</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span>(condition)&#123;</span><br><span class="line">   <span class="comment">//dost</span></span><br><span class="line">&#125;<span class="keyword">else</span>&#123;</span><br><span class="line">   <span class="keyword">return</span> ;</span><br><span class="line">&#125;</span><br><span class="line"><span class="number">12345</span></span><br></pre></td></tr></table></figure><p>æ”¹ä¸º</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span>(!condition)&#123;</span><br><span class="line">   <span class="keyword">return</span> ;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//dost</span></span><br><span class="line"><span class="number">1234</span></span><br></pre></td></tr></table></figure><p>é¿å…ä¸€äº›ä¸å¿…è¦çš„åˆ†æ”¯ï¼Œè®©ä»£ç æ›´ç²¾ç‚¼ã€‚</p>]]></content>
    
    
    <summary type="html">&lt;p&gt;é’ˆå¯¹ if-else çš„å„ç§ä¸åŒä¼˜åŒ–æ–¹æ¡ˆã€‚&lt;/p&gt;</summary>
    
    
    
    
  </entry>
  
  <entry>
    <title>FileInputStream read()ä¸readline()</title>
    <link href="https://www.fvolcano.red/2020/FileInputStream-read-and-readline/"/>
    <id>https://www.fvolcano.red/2020/FileInputStream-read-and-readline/</id>
    <published>2020-10-24T06:16:10.000Z</published>
    <updated>2020-10-24T06:16:10.000Z</updated>
    
    <content type="html"><![CDATA[<p>FileInputStreamä¸­æ–¹æ³•read()ä¸readline()è¾¨æã€‚<a id="more"></a></p><h3 id="read-ä¸-read-byte-b"><a href="#read-ä¸-read-byte-b" class="headerlink" title="read() ä¸ read(byte[] b)"></a>read() ä¸ read(byte[] b)</h3><p>è¯»å–å•ä¸ªå­—ç¬¦çš„ä¸ªæ•°ï¼Œå¦‚æœå·²ç»è¯»å®Œçš„è¯ä¼šè¿”å›-1 (å…¶èŒƒå›´ä» 0 åˆ° 65535 )ï¼Œè¿™ä¸ªæ–¹æ³•æ˜¯å¯¹è¿™ä¸ªæµä¸€ä¸ªä¸€ä¸ªå­—èŠ‚çš„è¯»ï¼Œè¿”å›çš„intå°±æ˜¯è¿™ä¸ªå­—èŠ‚çš„intè¡¨ç¤ºæ–¹å¼ã€‚</p><p>å‚è€ƒ<a href="https://blog.csdn.net/wymrdjm/article/details/78758986">FileInputStreamä¹‹readæ–¹æ³•</a></p><h2 id="readLine"><a href="#readLine" class="headerlink" title="readLine()"></a>readLine()</h2><p>è¯»å–ä¸€ä¸ªæ–‡æœ¬è¡Œã€‚</p><ol><li>è¯»å…¥çš„æ•°æ®è¦æ³¨æ„æœ‰/ræˆ–/næˆ–/r/n, readLineè¿”å›çš„å­—ç¬¦ä¸²ä¸­ä¸åŒ…å«ç»“å°¾çš„â€\râ€,â€\nâ€ã€‚</li><li>æ²¡æœ‰æ•°æ®æ—¶ä¼šé˜»å¡ï¼Œåœ¨æ•°æ®æµå¼‚å¸¸æˆ–æ–­å¼€æ—¶æ‰ä¼šè¿”å›nullã€‚</li><li>ä½¿ç”¨socketä¹‹ç±»çš„æ•°æ®æµæ—¶ï¼Œè¦é¿å…ä½¿ç”¨readLine()ï¼Œä»¥å…ä¸ºäº†ç­‰å¾…ä¸€ä¸ªæ¢è¡Œ/å›è½¦ç¬¦è€Œä¸€ç›´é˜»å¡ã€‚</li><li>readLine()æ˜¯ä¸€ä¸ªé˜»å¡å‡½æ•°ï¼Œå½“æ²¡æœ‰æ•°æ®è¯»å–æ—¶ï¼Œå°±ä¸€ç›´ä¼šé˜»å¡åœ¨é‚£ï¼Œè€Œä¸æ˜¯è¿”å›nullã€‚</li><li>readLine()åªæœ‰åœ¨æ•°æ®æµå‘ç”Ÿå¼‚å¸¸æˆ–è€…å¦ä¸€ç«¯è¢«close()æ‰æ—¶ï¼Œæ‰ä¼šè¿”å›nullå€¼ã€‚</li><li>å¦‚æœä¸æŒ‡å®šbufferå¤§å°ï¼Œåˆ™readLine()ä½¿ç”¨çš„bufferæœ‰8192ä¸ªå­—ç¬¦ã€‚åœ¨è¾¾åˆ°bufferå¤§å°ä¹‹å‰ï¼Œåªæœ‰é‡åˆ°â€/râ€ã€â€/nâ€ã€â€/r/nâ€æ‰ä¼šè¿”å›ã€‚</li><li>è¯¥æ–¹æ³•è¯»å–ä¸€è¡Œæ–‡æœ¬ï¼Œå½“é‡åˆ°æ¢è¡Œç¬¦â€\nâ€,å›è½¦ç¬¦â€\râ€æˆ–è€…å›è½¦ç¬¦åé¢ç´§è·Ÿç€æ¢è¡Œç¬¦æ—¶ï¼Œè¯¥è¡Œç»“æŸå¹¶è¿”å›ã€‚æ²¡æœ‰æ•°æ®æ—¶ï¼Œå°†ä¼šä¸€ç›´å¤„äºç­‰å¾…çŠ¶æ€ã€‚å› æ­¤åœ¨è¿›è¡Œç½‘ç»œè¿æ¥æ—¶ï¼Œåº”è¯¥é¿å…ä½¿ç”¨è¯¥æ–¹æ³•ã€‚</li></ol>]]></content>
    
    
    <summary type="html">&lt;p&gt;FileInputStreamä¸­æ–¹æ³•read()ä¸readline()è¾¨æã€‚&lt;/p&gt;</summary>
    
    
    
    <category term="Java" scheme="https://www.fvolcano.red/categories/Java/"/>
    
    
    <category term="æ•´ç†" scheme="https://www.fvolcano.red/tags/%E6%95%B4%E7%90%86/"/>
    
  </entry>
  
  <entry>
    <title>æ ‘çš„éå†éé€’å½’ç®—æ³•åŠåº”ç”¨</title>
    <link href="https://www.fvolcano.red/2020/tree-traverse/"/>
    <id>https://www.fvolcano.red/2020/tree-traverse/</id>
    <published>2020-10-16T00:40:24.000Z</published>
    <updated>2020-10-16T00:40:24.000Z</updated>
    
    <content type="html"><![CDATA[<p>ä»‹ç»æ ‘çš„ä¸‰ç§éé€’å½’éå†ä»£ç çš„Javaå®ç°åŠåº”ç”¨ã€‚<a id="more"></a></p><h1 id="ç®—æ³•"><a href="#ç®—æ³•" class="headerlink" title="ç®—æ³•"></a>ç®—æ³•</h1><p>åˆ›å»ºå†…éƒ¨æ¥å£ Visitor ï¼Œé€šè¿‡ä¼ å…¥æ–¹æ³•æ¥å®ç°å¯¹éå†å…ƒç´ çš„å®šåˆ¶æ“ä½œã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">Visitor</span>&lt;<span class="title">E</span>&gt;</span>&#123;</span><br><span class="line">    <span class="keyword">boolean</span> stop = <span class="keyword">false</span>; <span class="comment">// æ ‡è®°åœæ­¢ä½ç½®ï¼Œè®¾ç½®ä¸ºtrueä»£è¡¨åœæ­¢éå†</span></span><br><span class="line">    <span class="function"><span class="keyword">boolean</span> <span class="title">visit</span><span class="params">(TreeNode&lt;E&gt; node)</span></span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">protected</span> Visitor visitor = (node) -&gt; &#123;  <span class="comment">// é»˜è®¤visitorï¼Œè‹¥æ²¡æœ‰ä¼ å…¥åˆ™ä½¿ç”¨</span></span><br><span class="line">    System.out.print(node.element + <span class="string">&quot; &quot;</span>);</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">false</span>;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><p>ä½¿ç”¨ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">BinaryTree&lt;Integer&gt; tree = <span class="keyword">new</span> BinaryTree&lt;&gt;();</span><br><span class="line">tree.preorder((node) -&gt; &#123;  </span><br><span class="line">    <span class="keyword">if</span>(node.element == <span class="number">2</span>) <span class="keyword">return</span> <span class="keyword">true</span>;</span><br><span class="line">    node.element ++;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">false</span>;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><h2 id="å…ˆåºéå†"><a href="#å…ˆåºéå†" class="headerlink" title="å…ˆåºéå†"></a>å…ˆåºéå†</h2><p>é€’å½’ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">preorder1</span><span class="params">(Visitor visitor)</span></span>&#123;  <span class="comment">//è®¾ç½®ä¸ºprivateï¼Œåœ¨publicæ–¹æ³•ä¸­æœ‰å¯¹visitorä¸ºç©ºçš„åˆ¤æ–­</span></span><br><span class="line">    <span class="keyword">if</span>(root==<span class="keyword">null</span> || visitor.stop) <span class="keyword">return</span>;</span><br><span class="line"></span><br><span class="line">    visitor.visit(root); <span class="comment">// å…ˆå¯¹çˆ¶èŠ‚ç‚¹è¿›è¡Œæ“ä½œ</span></span><br><span class="line">    preorder1(root.left,visitor);</span><br><span class="line">    preorder1(root.right,visitor);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>éé€’å½’ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">preorder2</span><span class="params">(Visitor visitor)</span> </span>&#123;</span><br><span class="line">    TreeNode&lt;E&gt; node = root;</span><br><span class="line">    Stack&lt;TreeNode&lt;E&gt;&gt; stack = <span class="keyword">new</span> LinkedStack&lt;TreeNode&lt;E&gt;&gt;();</span><br><span class="line">    List&lt;TreeNode&lt;E&gt;&gt; visited = <span class="keyword">new</span> LinkedList&lt;TreeNode&lt;E&gt;&gt;(); <span class="comment">//è®°å½•è®¿é—®è¿‡çš„èŠ‚ç‚¹</span></span><br><span class="line">    <span class="keyword">if</span>(visitor.stop) <span class="keyword">return</span>;</span><br><span class="line">    visitor.visit(node);</span><br><span class="line">    visited.add(node);</span><br><span class="line">    stack.push(node);</span><br><span class="line">    <span class="keyword">while</span>(visited.size() &lt; size) &#123;  <span class="comment">//sizeæ˜¯treeçš„èŠ‚ç‚¹ä¸ªæ•°</span></span><br><span class="line">        <span class="keyword">if</span>(visitor.stop) <span class="keyword">return</span>;</span><br><span class="line">        <span class="comment">// æ¥åˆ°è¿™é‡Œï¼Œnodeå·²ç»è¢«è®¿é—®äº†ï¼Œæœ‰leftå°±ç«‹å³è®¿é—®ï¼Œæ”¾å…¥æ ˆä¸­ï¼Œæˆä¸ºä¸‹ä¸€æ¬¡è®¿é—®çš„çˆ¶èŠ‚ç‚¹ï¼ˆè¿”å›å¤„ï¼‰</span></span><br><span class="line">        <span class="keyword">if</span>(node.left != <span class="keyword">null</span> &amp;&amp; !visited.contains(node.left)) &#123;</span><br><span class="line">            visitor.visit(node.left);</span><br><span class="line">            visited.add(node.left);</span><br><span class="line">            stack.push(node.left);</span><br><span class="line">            node = node.left;</span><br><span class="line">        &#125; <span class="keyword">else</span> </span><br><span class="line">            <span class="comment">// æœ‰rightå°±ç«‹å³è®¿é—®ï¼Œæ”¾å…¥æ ˆä¸­ï¼Œæˆä¸ºä¸‹ä¸€æ¬¡è®¿é—®çš„çˆ¶èŠ‚ç‚¹ï¼ˆè¿”å›å¤„ï¼‰</span></span><br><span class="line">            <span class="keyword">if</span> (node.right != <span class="keyword">null</span> &amp;&amp; !visited.contains(node.right)) &#123;</span><br><span class="line">            visitor.visit(node.right);</span><br><span class="line">            visited.add(node.right);</span><br><span class="line">            stack.push(node.right);</span><br><span class="line">            node = node.right;</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123; <span class="comment">// å·¦å³èŠ‚ç‚¹éƒ½æ²¡æœ‰äº†å°±å¼¹æ ˆï¼ŒæŸ¥çœ‹çˆ¶èŠ‚ç‚¹çš„å³èŠ‚ç‚¹</span></span><br><span class="line">            node = stack.pop();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="ä¸­åºéå†"><a href="#ä¸­åºéå†" class="headerlink" title="ä¸­åºéå†"></a>ä¸­åºéå†</h2><p>é€’å½’ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">inorder1</span><span class="params">(Visitor visitor)</span></span>&#123; </span><br><span class="line">    <span class="keyword">if</span>(root==<span class="keyword">null</span> || visitor.stop) <span class="keyword">return</span>;</span><br><span class="line"></span><br><span class="line">    inorder1(root.left,visitor);</span><br><span class="line">    <span class="keyword">if</span>(visitor.stop) <span class="keyword">return</span>;</span><br><span class="line">    visitor.visit(root);</span><br><span class="line">    inorder1(root.right,visitor);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>éé€’å½’ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">inorder2</span><span class="params">(Visitor visitor)</span></span>&#123;</span><br><span class="line">    TreeNode&lt;E&gt; node = root;</span><br><span class="line">    List&lt;TreeNode&lt;E&gt;&gt; visited = <span class="keyword">new</span> LinkedList&lt;TreeNode&lt;E&gt;&gt;();</span><br><span class="line">    Stack&lt;TreeNode&lt;E&gt;&gt; stack = <span class="keyword">new</span> LinkedStack&lt;TreeNode&lt;E&gt;&gt;();</span><br><span class="line">    stack.push(node);</span><br><span class="line">    <span class="keyword">while</span>(node.left != <span class="keyword">null</span>) &#123; <span class="comment">//ä¸€ç›´æ‰¾åˆ°æœ€å·¦èŠ‚ç‚¹</span></span><br><span class="line">        stack.push(node.left);</span><br><span class="line">        node = node.left;</span><br><span class="line">    &#125;</span><br><span class="line">    node = stack.pop();</span><br><span class="line">    <span class="keyword">while</span>(visited.size() &lt; size) &#123;</span><br><span class="line">        <span class="keyword">if</span>(node.left != <span class="keyword">null</span> &amp;&amp; !visited.contains(node.left)) &#123;</span><br><span class="line">            stack.push(node); <span class="comment">//æœ‰å·¦èŠ‚ç‚¹æ‰éœ€è¦æŠŠè¯¥èŠ‚ç‚¹ä½ç½®ä¿å­˜ï¼Œå¦åˆ™ç›´æ¥è®¿é—®</span></span><br><span class="line">            node = node.left;</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="keyword">if</span>(visitor.stop) <span class="keyword">return</span>;</span><br><span class="line">            visitor.visit(node);</span><br><span class="line">            visited.add(node);  <span class="comment">//å…ˆè®¿é—®çˆ¶èŠ‚ç‚¹ï¼Œååˆ¤æ–­æ˜¯å¦æœ‰å³èŠ‚ç‚¹</span></span><br><span class="line">            <span class="keyword">if</span>(node.right != <span class="keyword">null</span> &amp;&amp; !visited.contains(node.right)) &#123;</span><br><span class="line">                node = node.right;</span><br><span class="line">            &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                node = stack.pop();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="ååºéå†"><a href="#ååºéå†" class="headerlink" title="ååºéå†"></a>ååºéå†</h2><p>é€’å½’ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">postorder1</span><span class="params">(Visitor visitor)</span></span>&#123;</span><br><span class="line">    <span class="keyword">if</span>(root==<span class="keyword">null</span> || visitor.stop) <span class="keyword">return</span>;</span><br><span class="line"></span><br><span class="line">    postorder1(root.left,visitor);</span><br><span class="line">    postorder1(root.right,visitor);</span><br><span class="line">    <span class="keyword">if</span>(visitor.stop) <span class="keyword">return</span>;</span><br><span class="line">    visitor.visit(root);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>éé€’å½’ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">postorder2</span><span class="params">(TreeNode&lt;E&gt; root,Visitor visitor)</span></span>&#123;</span><br><span class="line">    TreeNode&lt;E&gt; node = root;</span><br><span class="line">    List&lt;TreeNode&lt;E&gt;&gt; visited = <span class="keyword">new</span> LinkedList&lt;TreeNode&lt;E&gt;&gt;();</span><br><span class="line">    Stack&lt;TreeNode&lt;E&gt;&gt; stack = <span class="keyword">new</span> LinkedStack&lt;TreeNode&lt;E&gt;&gt;();</span><br><span class="line">    stack.push(node);</span><br><span class="line">    <span class="keyword">while</span>(node.left != <span class="keyword">null</span>) &#123;</span><br><span class="line">        stack.push(node.left);</span><br><span class="line">        node = node.left;</span><br><span class="line">    &#125;</span><br><span class="line">    node = stack.pop();</span><br><span class="line">    <span class="keyword">while</span>(visited.size() &lt; size) &#123;</span><br><span class="line">        <span class="keyword">if</span>((node.left != <span class="keyword">null</span> &amp;&amp; !visited.contains(node.left)) ||</span><br><span class="line">           (node.right != <span class="keyword">null</span> &amp;&amp; !visited.contains(node.right))) &#123;  <span class="comment">//åªæœ‰æœ‰éœ€è¦è®¿é—®çš„å­èŠ‚ç‚¹</span></span><br><span class="line">            stack.push(node);  <span class="comment">//è¦è®¿é—®å­èŠ‚ç‚¹äº†ï¼Œå…ˆæŠŠè¿™ä¸ªèŠ‚ç‚¹ä¿å­˜èµ·æ¥</span></span><br><span class="line">            <span class="keyword">if</span>(node.left != <span class="keyword">null</span> &amp;&amp; !visited.contains(node.left)) &#123;</span><br><span class="line">                node = node.left;</span><br><span class="line">            &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                node = node.right;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="keyword">if</span>(visitor.stop) <span class="keyword">return</span>;</span><br><span class="line">            visitor.visit(node);</span><br><span class="line">            visited.add(node); <span class="comment">//å½“å·¦å³èŠ‚ç‚¹è®¿é—®å®Œäº†ï¼Œå†è®¿é—®çˆ¶èŠ‚ç‚¹</span></span><br><span class="line">            node = stack.pop(); <span class="comment">//è®¿é—®å®Œè¿™æ£µå­æ ‘ï¼Œå¼¹æ ˆ</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="å±‚åºéå†"><a href="#å±‚åºéå†" class="headerlink" title="å±‚åºéå†"></a>å±‚åºéå†</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">levelorder</span><span class="params">(Visitor visitor)</span></span>&#123;</span><br><span class="line">    Queue&lt;TreeNode&lt;E&gt;&gt; queue = <span class="keyword">new</span> LinkedQueue&lt;TreeNode&lt;E&gt;&gt;();</span><br><span class="line">    queue.offer(root);</span><br><span class="line">    <span class="keyword">while</span>(!queue.isEmpty())&#123;</span><br><span class="line">        TreeNode&lt;E&gt; node = queue.poll();</span><br><span class="line">        <span class="keyword">if</span>(visitor.stop) <span class="keyword">break</span>;</span><br><span class="line">        visitor.visit(node);</span><br><span class="line">        <span class="keyword">if</span>(node.left!=<span class="keyword">null</span>) queue.offer(node.left);</span><br><span class="line">        <span class="keyword">if</span>(node.right!=<span class="keyword">null</span>) queue.offer(node.right);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1 id="åº”ç”¨"><a href="#åº”ç”¨" class="headerlink" title="åº”ç”¨"></a>åº”ç”¨</h1><h2 id="è®¡ç®—æ ‘çš„é«˜åº¦"><a href="#è®¡ç®—æ ‘çš„é«˜åº¦" class="headerlink" title="è®¡ç®—æ ‘çš„é«˜åº¦"></a>è®¡ç®—æ ‘çš„é«˜åº¦</h2><h2 id="è®¡ç®—æ ‘çš„èŠ‚ç‚¹æ•°é‡"><a href="#è®¡ç®—æ ‘çš„èŠ‚ç‚¹æ•°é‡" class="headerlink" title="è®¡ç®—æ ‘çš„èŠ‚ç‚¹æ•°é‡"></a>è®¡ç®—æ ‘çš„èŠ‚ç‚¹æ•°é‡</h2><h2 id="å¤åˆ¶æ ‘"><a href="#å¤åˆ¶æ ‘" class="headerlink" title="å¤åˆ¶æ ‘"></a>å¤åˆ¶æ ‘</h2><p>éé€’å½’ï¼š(å…ˆåºéå†)</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> BinaryTree&lt;E&gt; <span class="title">copy</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    TreeNode&lt;E&gt; newRoot = <span class="keyword">new</span> TreeNode&lt;&gt;(root.element);</span><br><span class="line">    TreeNode&lt;E&gt; p = newRoot;</span><br><span class="line">    TreeNode&lt;E&gt; node = root;</span><br><span class="line">    List&lt;TreeNode&lt;E&gt;&gt; visited = <span class="keyword">new</span> LinkedList&lt;TreeNode&lt;E&gt;&gt;();</span><br><span class="line">    Stack&lt;TreeNode&lt;E&gt;&gt; stack = <span class="keyword">new</span> LinkedStack&lt;TreeNode&lt;E&gt;&gt;();</span><br><span class="line">    visited.add(newRoot);</span><br><span class="line">    <span class="keyword">while</span> (visited.size() != size) &#123;</span><br><span class="line">        <span class="keyword">if</span>(node.left != <span class="keyword">null</span> &amp;&amp; !visited.contains(node.left)) &#123;</span><br><span class="line">            stack.push(node);</span><br><span class="line">            TreeNode&lt;E&gt; newNode = <span class="keyword">new</span> TreeNode&lt;E&gt;(node.left.element);</span><br><span class="line">            visited.add(node.left);</span><br><span class="line">            p.left = newNode;</span><br><span class="line">            newNode.parent = p;</span><br><span class="line">            node = node.left;</span><br><span class="line">            p = p.left;</span><br><span class="line">        &#125; <span class="keyword">else</span> <span class="keyword">if</span>(node.right != <span class="keyword">null</span> &amp;&amp; !visited.contains(node.right)) &#123;</span><br><span class="line">            stack.push(node);  <span class="comment">// påªèƒ½æŒ‰ç…§parentçš„é¡ºåºè¿”å›ï¼Œå› æ­¤è¿™é‡Œå³ä½¿å·²ç»è®¿é—®å®Œè¿™æ£µå­æ ‘ï¼Œä»éœ€è¦å°†nodeå‹å…¥æ ˆä¸­ä¿å­˜ä½ç½®ï¼Œå¦åˆ™nodeä¼šä¸pä¸åŒæ­¥</span></span><br><span class="line">            TreeNode&lt;E&gt; newNode = <span class="keyword">new</span> TreeNode&lt;E&gt;(node.right.element);</span><br><span class="line">            visited.add(node.right);</span><br><span class="line">            p.right = newNode;</span><br><span class="line">            newNode.parent = p;</span><br><span class="line">            node = node.right;</span><br><span class="line">            p = p.right;</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            node = stack.pop();</span><br><span class="line">            p = p.parent;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    BinaryTree&lt;E&gt; newTree = <span class="keyword">new</span> BinaryTree&lt;&gt;();</span><br><span class="line">    newTree.size = size;</span><br><span class="line">    newTree.root = newRoot;</span><br><span class="line">    <span class="keyword">return</span> newTree;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
    
    
    <summary type="html">&lt;p&gt;ä»‹ç»æ ‘çš„ä¸‰ç§éé€’å½’éå†ä»£ç çš„Javaå®ç°åŠåº”ç”¨ã€‚&lt;/p&gt;</summary>
    
    
    
    <category term="ç®—æ³•" scheme="https://www.fvolcano.red/categories/%E7%AE%97%E6%B3%95/"/>
    
    
    <category term="æ ‘" scheme="https://www.fvolcano.red/tags/%E6%A0%91/"/>
    
  </entry>
  
  <entry>
    <title>KMPå­—ç¬¦ä¸²åŒ¹é…ç®—æ³•å›¾è§£</title>
    <link href="https://www.fvolcano.red/2020/KMP-elaboration/"/>
    <id>https://www.fvolcano.red/2020/KMP-elaboration/</id>
    <published>2020-10-02T00:56:17.000Z</published>
    <updated>2020-10-02T00:56:17.000Z</updated>
    
    <content type="html"><![CDATA[<p>KMPç®—æ³•æ˜¯å­—ç¬¦ä¸²åŒ¹é…ç®—æ³•ä¸­å¯¹æš´åŠ›åŒ¹é…ç®—æ³•çš„ä¼˜åŒ–ã€‚æˆ‘å°½é‡ç”¨å®¹æ˜“ç†è§£çš„æ–¹æ³•æŠŠå®ƒå†™ &amp; ç”»æ¸…æ¥šã€‚<a id="more"></a></p><h1 id="BF"><a href="#BF" class="headerlink" title="BF"></a>BF</h1><p>æš´åŠ›ç ´è§£ã€‚è¿™æ˜¯æœ€æœ´ç´ çš„ä¸€ç§è§£å†³æ–¹æ¡ˆï¼šä»æ–‡æœ¬ä¸²ï¼ˆå³è¢«åŒ¹é…çš„å¤§å­—ç¬¦ä¸²ï¼Œä»¥ä¸‹éƒ½æ˜¯ï¼‰çš„ç¬¬ä¸€ä¸ªå­—ç¬¦å¼€å§‹ï¼Œä¸€ä½ä¸€ä½åœ°ä¸æ¨¡å¼ä¸²ï¼ˆå³æœç´¢çš„å…³é”®å­—ï¼Œä»¥ä¸‹éƒ½æ˜¯ï¼‰çš„å¯¹åº”ä½ç½®ç›¸æ¯”è¾ƒã€‚</p><p><img src="/2020/KMP-elaboration/%E5%8C%B9%E9%85%8D%E7%AE%97%E6%B3%951.png" alt="æš´åŠ›ç®—æ³•"></p><p>è®¾æ–‡æœ¬ä¸²(p)çš„é•¿åº¦ä¸ºmï¼Œæ¨¡å¼ä¸²(s)çš„é•¿åº¦ä¸ºnã€‚iï¼Œjåˆ†åˆ«æ˜¯æŒ‡å‘æ–‡æœ¬ä¸²ã€æ¨¡å¼ä¸²çš„æ¸¸æ ‡ã€‚</p><p>whileï¼ˆi &lt; m) {</p><p>â€‹    if (p[i] != s[j]) {</p><p>â€‹        i++;  j = 0;</p><p>â€‹    } else {</p><p>â€‹        i++;  j++;</p><p>â€‹    }</p><p>}</p><p>ä½†å¯æƒ³è€ŒçŸ¥ï¼Œè¿™æ ·çš„åŒ¹é…ç®—æ³•æ—¶é—´å¤æ‚åº¦å‡ ä¹ä¸ºO(mn)ã€‚ä½†ä»”ç»†æƒ³æƒ³ï¼Œæˆ‘ä»¬ç¡®å®æ²¡å¿…è¦å†æ¯”è¾ƒä¸Šå›¾ä¸­ç¬¬äºŒæ­¥çš„aä¸bï¼Œå› ä¸ºåœ¨ç¬¬ä¸€æ­¥å·²ç»æ¯”è¾ƒåˆ°äº†æ–‡æœ¬ä¸²çš„bï¼Œæˆ‘ä»¬åº”è¯¥è®©ç¨‹åºâ€œè®°ä½â€å®ƒæ¯”è¾ƒè¿‡äº†çš„ä¸œè¥¿ï¼Œåœ¨æ˜æ˜¾ä¸æ¨¡å¼ä¸²çš„ç¬¬ä¸€ä¸ªå­—ç¬¦ä¸ç›¸åŒåï¼Œå°±åº”è¯¥å»æ‰ç¬¬äºŒæ­¥ã€‚</p><p>ä½†æˆ‘ä»¬ä¸èƒ½çœŸçš„å»æŠŠä¹‹å‰æ¯”è¾ƒè¿‡çš„æ•°æ®ä¿å­˜èµ·æ¥ï¼Œé‚£æ ·æ—¢å¢åŠ äº†ç©ºé—´å¼€é”€ï¼Œåˆæ²¡èƒ½è¾¾åˆ°ä¼˜åŒ–çš„ç›®çš„ã€‚äºæ˜¯ï¼ŒKMPå°±è¦ç™»åœºäº†ï¼Œå®ƒèƒ½å¸®ç¨‹åºä¸ç”¨åƒå‚»å­ä¸€æ ·ï¼ˆè™½ç„¶å®ƒå°±æ˜¯ï¼‰ä¸€ä¸ªä¸€ä¸ªåœ°æ¯”è¾ƒä¸‹å»ã€‚</p><h1 id="KMP"><a href="#KMP" class="headerlink" title="KMP"></a>KMP</h1><h2 id="æ€æƒ³"><a href="#æ€æƒ³" class="headerlink" title="æ€æƒ³"></a>æ€æƒ³</h2><p>æœ‰ä¸€ç§å·§å¦™çš„æ–¹æ³•ã€‚å› ä¸ºå‡è®¾æ¯”è¾ƒåˆ°ç¬¬kä½å°±å¤±é…äº†ï¼ˆå´©äº†ï¼‰ï¼Œé‚£ä¹ˆæœ‰ä¸€ä¸ªäº‹å®æ˜¯å¯ä»¥ç¡®å®šçš„ï¼šä¸¤ä¸ªä¸²å‰k-1ä¸ªå­—ç¬¦è‚¯å®šæ˜¯ç›¸åŒçš„ã€‚é‚£ä¹ˆï¼å› ä¸ºæ¨¡å¼ä¸²æ˜¯å·²ç»å®šå¥½çš„ï¼Œåœ¨åŒ¹é…åˆ°j == kæ—¶åœä¸‹æ¥ï¼Œæˆ‘ä»¬ï¼ˆç¨‹åºï¼‰å°±çŸ¥é“åœ¨æ–‡æœ¬ä¸²ä¸­ [i-j, i-1]çš„å­—ç¬¦æ˜¯ä»€ä¹ˆäº†ã€‚é‚£ä¹ˆçŸ¥é“äº†ä»¥åå‘¢ï¼Ÿæˆ‘ä»¬çš„ç›®çš„æ˜¯ä¸è¦åƒæš´åŠ›ç®—æ³•é‚£æ ·ä¸€ä¸ªä¸ªæ¯”ï¼Œé‚£å°±å¾—è·³è¿‡ä¸€äº›ï¼Œä½†åˆä¸èƒ½æŠŠèƒ½åŒ¹é…å¾—ä¸Šçš„ç»™è·³è¿‡äº†ï¼Œé‚£ä¹ˆæˆ‘ä»¬å°±éœ€è¦çœ‹å·²çŸ¥çš„ï¼ˆå·²ç»æ¯”è¾ƒè¿‡çš„ï¼‰æ–‡æœ¬ä¸²ä¸­æœ‰æ²¡æœ‰è·Ÿæ¨¡å¼ä¸²å¼€å¤´ç›¸åŒçš„å­—ç¬¦ï¼ˆä¸²ï¼‰äº†ã€‚<strong>æ²¡æœ‰çš„è¯å°±å¯ä»¥ç›´æ¥è·³è¿‡å‰jä¸ª</strong>ï¼Œæœ‰çš„è¯å°±è·³åˆ°ç›¸åŒçš„é‚£ä¸€éƒ¨åˆ†ç»§ç»­å¾€ä¸‹æ¯”è¾ƒã€‚</p><p>è¿™é‡Œé¢æœ‰ä¸€ä¸ªå°ç‚¹ï¼Œæ—¢ç„¶æˆ‘ä»¬å·²ç»çŸ¥é“å…¶ä¸­æœ‰è¿ç»­çš„å‡ ä¸ªæ˜¯ä¸æ¨¡å¼ä¸²çš„å‰ç¼€ï¼ˆå³å‰é¢è¿ç»­çš„å‡ ä¸ªï¼‰æ˜¯ç›¸åŒçš„ï¼Œé‚£ä¹ˆä¹Ÿæ²¡å¿…è¦å†æ¯”è¾ƒäº†ï¼Œç›´æ¥ä»æ–‡æœ¬ä¸²ä¸­ç¨‹åºâ€œæœªçŸ¥çš„â€é‚£ä¸€ä¸ªä½ç½®ç»§ç»­ä¸‹å»ã€‚</p><p>å¦‚ä¸‹å›¾ï¼Œå‰é¢ä¸‰ä¸ªabaå·²çŸ¥ï¼ŒåŒæ—¶æ¨¡å¼ä¸²aåˆèƒ½ä¸abaä¸­ç¬¬äºŒä¸ªaåŒ¹é…ï¼Œé‚£ä¹ˆå°±ç›´æ¥æŠŠæ¨¡å¼ä¸²ç§»åˆ°<strong>æ¨¡å¼ä¸²å¼€å¤´çš„aä¸abaä¸­ç¬¬äºŒä¸ªa</strong>åŒ¹é…çš„ä½ç½®ï¼ŒåŒæ—¶æŠŠæ¨¡å¼ä¸²çš„æ¸¸æ ‡jç§»åˆ°aåé¢çš„bï¼Œä»å®ƒå¼€å§‹æ¯”è¾ƒã€‚</p><p><img src="/2020/KMP-elaboration/KMP.png" alt="KMP"></p><p>å¯æ˜¯ï¼Œé—®é¢˜åˆæ¥äº†ã€‚æ€ä¹ˆè¦è®©ç¨‹åºçŸ¥é“åº”è¯¥è·³è¿‡å…¶ä¸­çš„å¤šå°‘æ­¥å‘¢ï¼Ÿ</p><p>è¿™å°±åˆè¦å½’åŠŸäºæ¨¡å¼ä¸²çš„<u>å·²çŸ¥</u>å’Œ<u>ä¸å˜</u>äº†ï¼Œæˆ‘ä»¬ç°åœ¨çš„ä»»åŠ¡æ˜¯ä»€ä¹ˆï¼Ÿæˆ‘ä»¬ç°åœ¨çš„ä»»åŠ¡å°±æ˜¯åœ¨ä¸€æ®µå·²çŸ¥çš„å­—ç¬¦ä¸²ï¼ˆå³å·²ç»æ¯”è¾ƒè¿‡çš„é‚£ä¸€æ®µï¼Œä¹Ÿå³æ¨¡å¼ä¸²çš„ä¸€ä¸ªå‰ç¼€ï¼Œä¸Šå›¾ä¸­çš„abaï¼‰ä¸­æ‰¾æ˜¯ä¸æ˜¯æœ‰ï¼ˆ<strong>å®ƒçš„</strong>ï¼‰å‰ç¼€åç¼€ç›¸åŒçš„åœ°æ–¹å•Šã€‚å¦‚ä¸Šå›¾ï¼Œå‰åç¼€ç›¸åŒçš„å°±æ˜¯aã€‚</p><p>ç›¸åŒæœ‰ä»€ä¹ˆç”¨å‘¢ï¼Ÿå› ä¸ºæˆ‘ä»¬è¦æ‰¾ç›¸åŒçš„è¿™ä¸€æ®µæ°å¥½å°±æ˜¯æ¨¡å¼ä¸²çš„å‰ç¼€ï¼Œä¸”æˆ‘ä»¬æ˜¯åœ¨è¿™ä¸€æ®µå­—ç¬¦çš„ä¸‹ä¸€ä¸ªå­—ç¬¦å¤±é…çš„ï¼Œæˆ‘ä»¬æ‰¾åˆ°è¿™ä¸€ä¸ªå­—ç¬¦ä¸²ä¸­åé¢æŸå‡ ä½æ˜¯å¦ä¸å‰é¢çš„æŸå‡ ä½ç›¸åŒï¼Œå°±å¯ä»¥çŸ¥é“è¿™é‡Œé¢æœ‰æ²¡æœ‰æˆ‘ä»¬éœ€è¦ç§»åŠ¨æ¨¡å¼ä¸²çš„ä½ç½®å†åŒ¹é…ä¸€ä¸‹çš„åœ°æ–¹äº†ã€‚</p><p>é‚£ä¹ˆï¼Œæˆ‘ä»¬å¯ä»¥é’ˆå¯¹æ¨¡å¼ä¸²å»ºç«‹ä¸€ä¸ªæ•°ç»„ next[]ã€‚next[m]é‡Œé¢å­˜å‚¨çš„æ˜¯è‹¥åœ¨ï¼ˆæ¨¡å¼ä¸²ï¼‰ç¬¬mä½å¤±é…ï¼Œä¸‹ä¸€æ¬¡æ¯”è¾ƒä¸­æ¨¡å¼ä¸²çš„æ¸¸æ ‡åº”è¯¥è¦æŒ‡å‘çš„ä½ç½®ã€‚<strong>æ–‡æœ¬ä¸²çš„æ¸¸æ ‡ä¸å˜</strong>ã€‚å½“éœ€è¦ç”¨åˆ°next[i]æ—¶ï¼Œè¯´æ˜å‰é¢i-1ä¸ªå­—ç¬¦éƒ½æ˜¯åŒ¹é…çš„ï¼Œåˆ°äº†ç¬¬iä¸ªä¸ç›¸åŒï¼Œé‚£ä¹ˆå°±éœ€è¦åœ¨<strong>å‰i-1ä¸ªå­—ç¬¦ç»„æˆçš„å­—ç¬¦ä¸²ä¸­</strong>æ‰¾æ˜¯å¦æœ‰ç›¸åŒçš„å‰åç¼€ã€‚</p><h3 id="ä»£ç "><a href="#ä»£ç " class="headerlink" title="ä»£ç "></a>ä»£ç </h3><p>ç”±æ­¤å¯ä»¥å†™å‡ºkmpåŸºæœ¬ä»£ç ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">int</span> <span class="title">kmp</span><span class="params">(String p, String s)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">if</span>(s == <span class="keyword">null</span> || s.length() == <span class="number">0</span>) <span class="keyword">return</span> -<span class="number">1</span>;</span><br><span class="line">    <span class="keyword">int</span>[] next = <span class="keyword">new</span> <span class="keyword">int</span>[s.length()];</span><br><span class="line">    <span class="comment">//initNext1(s, next);</span></span><br><span class="line">    initNext2(s, next);</span><br><span class="line">    <span class="keyword">int</span> i=<span class="number">0</span>, j=<span class="number">0</span>;</span><br><span class="line">    <span class="keyword">while</span>(i&lt;p.length() &amp;&amp; j&lt;s.length()) &#123;</span><br><span class="line">        <span class="keyword">if</span>(p.charAt(i) == s.charAt(j)) &#123;</span><br><span class="line">            i++;</span><br><span class="line">            j++;</span><br><span class="line">        &#125; <span class="keyword">else</span> <span class="keyword">if</span> (j == <span class="number">0</span>) &#123;  </span><br><span class="line">            <span class="comment">// å› ä¸ºå°†next[0]è®¾ç½®ä¸º-1ï¼Œä»£è¡¨éœ€è¦ç§»åŠ¨æ–‡æœ¬ä¸²æ¸¸æ ‡</span></span><br><span class="line">            <span class="comment">// å› æ­¤éœ€è¦å°†j==0çš„æƒ…å†µå•ç‹¬æŠ½ç¦»å‡ºæ¥ï¼Œé˜²æ­¢ä¸‹æ ‡è¶Šç•Œï¼ˆjè¢«èµ‹å€¼ä¸º-1ï¼‰</span></span><br><span class="line">            i++;</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            j = next[j];</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span>(j == s.length()) <span class="keyword">return</span> i - j + <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">return</span> -<span class="number">1</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>initNextï¼ˆç”Ÿæˆnextæ•°ç»„ï¼‰æœ‰ä¸¤ç§æ–¹æ³•ï¼šæ•°å­¦å½’çº³æ³•å’Œå…ˆå‰æœç´¢æ³•ã€‚</p><h2 id="ç”Ÿæˆnextæ•°ç»„"><a href="#ç”Ÿæˆnextæ•°ç»„" class="headerlink" title="ç”Ÿæˆnextæ•°ç»„"></a>ç”Ÿæˆnextæ•°ç»„</h2><p>å°†next[0]è®¾ç½®ä¸º-1ï¼Œä»£è¡¨éœ€è¦ç§»åŠ¨æ–‡æœ¬ä¸²æ¸¸æ ‡ã€‚è‹¥è®¾ç½®ä¸º0ï¼Œåˆ™åœ¨ç¬¬ä¸€ä¸ªå­—ç¬¦å°±å¤±é…çš„æƒ…å†µä¸‹ä¼šé™·å…¥æ­»å¾ªç¯ã€‚next[1] = 0ï¼šè‹¥ç¬¬äºŒä¸ªå­—ç¬¦å¤±é…ï¼Œåˆ™å°†æ¨¡å¼ä¸²å‘åç§»1ä½ï¼Œå³æ¸¸æ ‡æŒ‡å‘0ï¼Œä»å¤´å¼€å§‹ã€‚</p><h3 id="æ•°å­¦å½’çº³æ³•"><a href="#æ•°å­¦å½’çº³æ³•" class="headerlink" title="æ•°å­¦å½’çº³æ³•"></a>æ•°å­¦å½’çº³æ³•</h3><p>å‡è®¾next[j]å·²çŸ¥ï¼Œæ±‚å‡ºnext[j+1]çš„å€¼ã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">   * ç”Ÿæˆnextæ•°ç»„ï¼ˆæ•°å­¦å½’çº³æ³•ï¼‰</span></span><br><span class="line"><span class="comment">   */</span></span><br><span class="line"><span class="function"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">initNext1</span><span class="params">(String s, <span class="keyword">int</span>[] next)</span> </span>&#123;</span><br><span class="line">    next[<span class="number">0</span>] = -<span class="number">1</span>;</span><br><span class="line">    <span class="keyword">if</span>(next.length == <span class="number">1</span>) <span class="keyword">return</span>;</span><br><span class="line">    <span class="keyword">int</span> j = <span class="number">1</span>, k = next[j];  <span class="comment">// next[0]å·²ç»ç¡®å®šï¼Œä»next[1]å¼€å§‹ç”Ÿæˆï¼Œj=1</span></span><br><span class="line">    <span class="keyword">while</span>(j + <span class="number">1</span> &lt; next.length) &#123;  <span class="comment">// ç¡®å®šjåé¢è¿˜æœ‰å­—ç¬¦ï¼ˆå­˜åœ¨å¤±é…å¯èƒ½ï¼‰</span></span><br><span class="line">        <span class="keyword">while</span>(k != -<span class="number">1</span>) &#123;</span><br><span class="line">            <span class="keyword">if</span>(s.charAt(j) == s.charAt(k)) &#123; </span><br><span class="line">                next[j+<span class="number">1</span>] = k + <span class="number">1</span>;   <span class="comment">// k=next[j]</span></span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">            &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                k = next[k];</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span>(k == -<span class="number">1</span>) next[j+<span class="number">1</span>] = <span class="number">0</span>;  <span class="comment">// è¯´æ˜S0 != Sj</span></span><br><span class="line">        j++;</span><br><span class="line">        k = next[j];</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><img src="/2020/KMP-elaboration/next.jpg" alt="next"></p><h3 id="å‘å‰æœç´¢æ³•"><a href="#å‘å‰æœç´¢æ³•" class="headerlink" title="å‘å‰æœç´¢æ³•"></a>å‘å‰æœç´¢æ³•</h3><p>æœ´ç´ è§£æ³•ã€‚ä»å‰ç¼€ &amp; åç¼€çš„åé¢å¼€å§‹æ¯”è¾ƒã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">   * ç”Ÿæˆnextæ•°ç»„ï¼ˆå‘å‰æœç´¢ï¼‰</span></span><br><span class="line"><span class="comment">   */</span></span><br><span class="line"><span class="function"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">initNext2</span><span class="params">(String s, <span class="keyword">int</span>[] next)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">if</span>(next.length == <span class="number">1</span>) &#123;</span><br><span class="line">        next[<span class="number">0</span>] = -<span class="number">1</span>;</span><br><span class="line">        <span class="keyword">return</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    next[<span class="number">1</span>] = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">2</span>; i&lt;s.length(); i++) &#123;</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> j=i-<span class="number">1</span>; j&gt;=<span class="number">0</span>; j--) &#123;</span><br><span class="line">            <span class="keyword">boolean</span> find = <span class="keyword">true</span>;</span><br><span class="line">            <span class="keyword">if</span>(s.charAt(i) == s.charAt(j)) &#123;</span><br><span class="line">                <span class="keyword">int</span> i1 = i, j1 = j;</span><br><span class="line">                <span class="keyword">while</span>(j1 &gt;= <span class="number">0</span>) &#123;</span><br><span class="line">                    <span class="keyword">if</span>(s.charAt(i1) == s.charAt(j1)) &#123;</span><br><span class="line">                        i1--;</span><br><span class="line">                        j1--;</span><br><span class="line">                    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                        find = <span class="keyword">false</span>;</span><br><span class="line">                        <span class="keyword">break</span>;</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;</span><br><span class="line">                <span class="keyword">if</span>(find) &#123;</span><br><span class="line">                    next[i] = j;</span><br><span class="line">                    <span class="keyword">break</span>;</span><br><span class="line">                &#125; <span class="keyword">else</span> <span class="keyword">continue</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">if</span>(j == <span class="number">0</span>) next[i] = <span class="number">0</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><img src="/2020/KMP-elaboration/next2.jpg" alt="next2"></p>]]></content>
    
    
    <summary type="html">&lt;p&gt;KMPç®—æ³•æ˜¯å­—ç¬¦ä¸²åŒ¹é…ç®—æ³•ä¸­å¯¹æš´åŠ›åŒ¹é…ç®—æ³•çš„ä¼˜åŒ–ã€‚æˆ‘å°½é‡ç”¨å®¹æ˜“ç†è§£çš„æ–¹æ³•æŠŠå®ƒå†™ &amp;amp; ç”»æ¸…æ¥šã€‚&lt;/p&gt;</summary>
    
    
    
    <category term="ç®—æ³•" scheme="https://www.fvolcano.red/categories/%E7%AE%97%E6%B3%95/"/>
    
    
    <category term="å›¾è§£" scheme="https://www.fvolcano.red/tags/%E5%9B%BE%E8%A7%A3/"/>
    
  </entry>
  
  <entry>
    <title>Java CollectionåŠå…¶å®ç°æºç </title>
    <link href="https://www.fvolcano.red/2020/Java-Collection-sourcecode/"/>
    <id>https://www.fvolcano.red/2020/Java-Collection-sourcecode/</id>
    <published>2020-10-02T00:56:17.000Z</published>
    <updated>2020-10-02T00:56:17.000Z</updated>
    
    <content type="html"><![CDATA[<p><img src="/2020/Java-Collection-sourcecode/Collection.jpg" alt="Collection"></p><a id="more"></a><p>å„æ¥å£ã€æŠ½è±¡ç±»ä½œç”¨ï¼š</p><ul><li><p><strong>RandomAccess</strong> æ˜¯ä¸€ä¸ªæ ‡è®°æ¥å£ï¼Œç”¨äºæ ‡è®°å®ç°è¯¥æ¥å£çš„é›†åˆæ”¯æŒå¿«é€Ÿéšæœºè®¿é—®ã€‚</p></li><li><p><strong>Serializable</strong> æ˜¯ä¸€ä¸ªæ ‡è®°æ¥å£ï¼Œç”¨äºæ ‡è®°å®ç°è¯¥æ¥å£çš„ç±»å¯ä»¥åºåˆ—åŒ–ã€‚</p></li><li><p><strong>Cloneable</strong> æ˜¯ä¸€ä¸ªæ ‡è®°æ¥å£ï¼Œç”¨äºæ ‡è®°å®ç°è¯¥æ¥å£çš„ç±»å¯ä»¥è°ƒç”¨ clone æ–¹æ³•ï¼Œå¦åˆ™ä¼šæŠ›å¼‚å¸¸ã€‚</p></li><li><p><strong>Iterable</strong> æ˜¯ä¸€ä¸ªéå†æ¥å£ï¼Œå†…éƒ¨æä¾›äº†æ”¯æŒä¸åŒéå†æ–¹å¼çš„æ–¹æ³•ï¼Œæ¯”å¦‚é¡ºåºéå†è¿­ä»£å™¨ã€å‡½æ•°å¼çš„ foreach éå†ã€å¹¶è¡Œéå†è¿­ä»£å™¨ã€‚</p></li><li><p><strong>Collection</strong> æ˜¯ java é›†åˆä½“ç³»çš„æ ¹æ¥å£ï¼ŒåŒ…å«äº†é€šç”¨çš„éå†ã€ä¿®æ”¹æ–¹æ³•ï¼Œä¾‹å¦‚ addAllã€removeAllã€‚</p></li><li><p><strong>AbstractCollection</strong> æ˜¯ä¸€ä¸ªæŠ½è±¡ç±»ï¼Œé‡å†™äº† Collection ä¸­æœ€åŸºç¡€çš„æ–¹æ³•ï¼Œå‡å°‘å…·ä½“é›†åˆç±»çš„å®ç°æˆæœ¬ï¼Œæ¯”å¦‚ containsã€isEmptyã€toArrayï¼Œiteratorï¼Œä½†æ˜¯ add ç­‰éœ€è¦å…·ä½“é›†åˆç±»è‡ªæˆ‘å®ç°ã€‚</p></li><li><p><strong>List</strong> æ˜¯ java æœ‰åºé›†åˆçš„åŸºç¡€æ¥å£ï¼Œé™¤äº† Collection çš„æ–¹æ³•ï¼Œè¿˜æœ‰æ”¯æŒå€’åºéå†çš„ listIterator æ–¹æ³•ã€å­åˆ—è¡¨ subList æ–¹æ³•ï¼Œå¦å¤–é‡å†™ spliterator æ–¹æ³•çš„å®ç°ã€‚</p></li><li><p><strong>AbstractList</strong> æ˜¯ä¸€ä¸ªæŠ½è±¡ç±»ï¼Œé‡å†™äº† List çš„å¤§éƒ¨åˆ†æ–¹æ³•ï¼Œä½œç”¨è·Ÿ AbstractCollection ç±»ä¼¼ã€‚</p></li></ul><h1 id="List"><a href="#List" class="headerlink" title="List"></a>List</h1><p>List æ˜¯ä¸€ä¸ªæ¥å£ï¼Œå®šä¹‰ä¸€ç»„æœ‰åºã€å¯é‡å¤çš„å…ƒç´ é›†åˆã€‚</p><p><img src="/2020/Java-Collection-sourcecode/List%E6%96%B9%E6%B3%95.jpg" alt="Listæ–¹æ³•"></p><p>è¾ƒä¹‹ Collectionï¼ŒList è¿˜æ·»åŠ äº†ä»¥ä¸‹æ“ä½œæ–¹æ³•</p><ul><li>ä½ç½®ç›¸å…³ï¼šList çš„å…ƒç´ æ˜¯æœ‰åºçš„ï¼Œå› æ­¤æœ‰get(index)ã€set(index,object)ã€add(index,object)ã€remove(index) æ–¹æ³•ã€‚</li><li>æœç´¢ï¼šindexOf()ï¼ŒlastIndexOf();</li><li>è¿­ä»£ï¼šä½¿ç”¨ Iterator çš„åŠŸèƒ½æ¿è¿­ä»£å™¨</li><li>èŒƒå›´æ€§æ“ä½œï¼šä½¿ç”¨ subList æ–¹æ³•å¯¹ list è¿›è¡Œä»»æ„èŒƒå›´æ“ä½œã€‚</li></ul><h2 id="å®ç°ç±»"><a href="#å®ç°ç±»" class="headerlink" title="å®ç°ç±»"></a>å®ç°ç±»</h2><h3 id="AbstractList"><a href="#AbstractList" class="headerlink" title="AbstractList"></a>AbstractList</h3><p>æ˜¯Listçš„æŠ½è±¡å®ç°ç±»ï¼Œç»§æ‰¿è‡ª AbstractCollection ç±»ã€‚æ•´ä¸ªç±»çš„è®¾è®¡ç±»ä¼¼äºAbstractCollection,å®ç°äº†å¤§å¤šæ•°æ–¹æ³•ï¼ŒæŠ½è±¡äº†å¯¹äºéœ€è¦æ ¹æ®æ•°æ®æ“ä½œçš„æ–¹æ³•ã€‚</p><h3 id="ArrayList"><a href="#ArrayList" class="headerlink" title="ArrayList"></a>ArrayList</h3><p>ArrayList æ˜¯æˆ‘ä»¬æœ€å¸¸ç”¨çš„ä¸€ä¸ªç±»ï¼Œå®ƒå…·æœ‰å¦‚ä¸‹ç‰¹ç‚¹ï¼š</p><ul><li>å¯ä»¥åŠ¨æ€æ‰©å®¹</li><li>æœ‰åº</li><li>å…ƒç´ å¯ä»¥ä¸º null</li><li>æ•ˆç‡é«˜<ul><li>æŸ¥æ‰¾æ“ä½œçš„æ—¶é—´å¤æ‚åº¦æ˜¯ O(1)</li><li>å¢åˆ æ“ä½œçš„æ—¶é—´å¤æ‚åº¦æ˜¯ O(n)</li><li>å…¶ä»–æ“ä½œåŸºæœ¬ä¹Ÿéƒ½æ˜¯ O(n)</li></ul></li><li>å ç”¨ç©ºé—´å°‘ï¼Œç›¸æ¯” LinkedListï¼Œä¸ç”¨å ç”¨é¢å¤–ç©ºé—´ç»´æŠ¤è¡¨ç»“æ„</li></ul><p><img src="/2020/Java-Collection-sourcecode/ArrayList.jpg" alt="ArrayList"></p><h4 id="add"><a href="#add" class="headerlink" title="add"></a>add</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">add</span><span class="params">(E var1)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">this</span>.ensureCapacityInternal(<span class="keyword">this</span>.size + <span class="number">1</span>); <span class="comment">// Increments modCount!!</span></span><br><span class="line">    <span class="keyword">this</span>.elementData[<span class="keyword">this</span>.size++] = var1;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">true</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">ensureCapacityInternal</span><span class="params">(<span class="keyword">int</span> minCapacity)</span> </span>&#123;</span><br><span class="line">    ensureExplicitCapacity(calculateCapacity(elementData, minCapacity));</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">ensureExplicitCapacity</span><span class="params">(<span class="keyword">int</span> minCapacity)</span> </span>&#123;</span><br><span class="line">    modCount++;</span><br><span class="line">    <span class="comment">// overflow-conscious code</span></span><br><span class="line">    <span class="keyword">if</span> (minCapacity - elementData.length &gt; <span class="number">0</span>)</span><br><span class="line">        grow(minCapacity);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">grow</span><span class="params">(<span class="keyword">int</span> minCapacity)</span> </span>&#123;</span><br><span class="line">    <span class="comment">// overflow-conscious code</span></span><br><span class="line">    <span class="keyword">int</span> oldCapacity = elementData.length;</span><br><span class="line">    <span class="keyword">int</span> newCapacity = oldCapacity + (oldCapacity &gt;&gt; <span class="number">1</span>);</span><br><span class="line">    <span class="keyword">if</span> (newCapacity - minCapacity &lt; <span class="number">0</span>)</span><br><span class="line">        newCapacity = minCapacity;</span><br><span class="line">    <span class="keyword">if</span> (newCapacity - MAX_ARRAY_SIZE &gt; <span class="number">0</span>)</span><br><span class="line">        newCapacity = hugeCapacity(minCapacity);</span><br><span class="line">    <span class="comment">// minCapacity is usually close to size, so this is a win:</span></span><br><span class="line">    elementData = Arrays.copyOf(elementData, newCapacity);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">int</span> <span class="title">hugeCapacity</span><span class="params">(<span class="keyword">int</span> minCapacity)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (minCapacity &lt; <span class="number">0</span>) <span class="comment">// overflow</span></span><br><span class="line">        <span class="keyword">throw</span> <span class="keyword">new</span> OutOfMemoryError();</span><br><span class="line">    <span class="keyword">return</span> (minCapacity &gt; MAX_ARRAY_SIZE) ?</span><br><span class="line">        Integer.MAX_VALUE :</span><br><span class="line">    MAX_ARRAY_SIZE;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="remove"><a href="#remove" class="headerlink" title="remove"></a>remove</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> E <span class="title">remove</span><span class="params">(<span class="keyword">int</span> index)</span> </span>&#123;</span><br><span class="line">    rangeCheck(index);<span class="comment">//åˆ¤æ–­æ˜¯å¦è¶Šç•Œ</span></span><br><span class="line">    modCount++;<span class="comment">//ä¿®æ”¹modeCount å› ä¸ºç»“æ„æ”¹å˜äº†</span></span><br><span class="line">    E oldValue = elementData(index);<span class="comment">//è¯»å‡ºè¦åˆ é™¤çš„å€¼</span></span><br><span class="line">    <span class="keyword">int</span> numMoved = size - index - <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">if</span> (numMoved &gt; <span class="number">0</span>)</span><br><span class="line">        System.arraycopy(elementData, index+<span class="number">1</span>, elementData, index,</span><br><span class="line">                         numMoved);<span class="comment">//ç”¨å¤åˆ¶ è¦†ç›–æ•°ç»„æ•°æ®</span></span><br><span class="line">    elementData[--size] = <span class="keyword">null</span>; <span class="comment">// clear to let GC do its work  //ç½®ç©ºåŸå°¾éƒ¨æ•°æ® ä¸å†å¼ºå¼•ç”¨ï¼Œ å¯ä»¥GCæ‰</span></span><br><span class="line">    <span class="keyword">return</span> oldValue;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//æ ¹æ®ä¸‹æ ‡ä»æ•°ç»„å–å€¼ å¹¶å¼ºè½¬</span></span><br><span class="line"><span class="function">E <span class="title">elementData</span><span class="params">(<span class="keyword">int</span> index)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> (E) elementData[index];</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//åˆ é™¤è¯¥å…ƒç´ åœ¨æ•°ç»„ä¸­ç¬¬ä¸€æ¬¡å‡ºç°çš„ä½ç½®ä¸Šçš„æ•°æ®ã€‚ å¦‚æœæœ‰è¯¥å…ƒç´ è¿”å›trueï¼Œå¦‚æœfalseã€‚</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">remove</span><span class="params">(Object o)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (o == <span class="keyword">null</span>) &#123;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> index = <span class="number">0</span>; index &lt; size; index++)</span><br><span class="line">            <span class="keyword">if</span> (elementData[index] == <span class="keyword">null</span>) &#123;</span><br><span class="line">                fastRemove(index);<span class="comment">//æ ¹æ®indexåˆ é™¤å…ƒç´ </span></span><br><span class="line">                <span class="keyword">return</span> <span class="keyword">true</span>;</span><br><span class="line">            &#125;</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> index = <span class="number">0</span>; index &lt; size; index++)</span><br><span class="line">            <span class="keyword">if</span> (o.equals(elementData[index])) &#123;</span><br><span class="line">                fastRemove(index);</span><br><span class="line">                <span class="keyword">return</span> <span class="keyword">true</span>;</span><br><span class="line">            &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">false</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//ä¸ä¼šè¶Šç•Œ ä¸ç”¨åˆ¤æ–­ ï¼Œä¹Ÿä¸éœ€è¦å–å‡ºè¯¥å…ƒç´ ã€‚</span></span><br><span class="line"><span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">fastRemove</span><span class="params">(<span class="keyword">int</span> index)</span> </span>&#123;</span><br><span class="line">    modCount++;<span class="comment">//ä¿®æ”¹modCount</span></span><br><span class="line">    <span class="keyword">int</span> numMoved = size - index - <span class="number">1</span>;<span class="comment">//è®¡ç®—è¦ç§»åŠ¨çš„å…ƒç´ æ•°é‡</span></span><br><span class="line">    <span class="keyword">if</span> (numMoved &gt; <span class="number">0</span>)</span><br><span class="line">        System.arraycopy(elementData, index+<span class="number">1</span>, elementData, index,</span><br><span class="line">                         numMoved);<span class="comment">//ä»¥å¤åˆ¶è¦†ç›–å…ƒç´  å®Œæˆåˆ é™¤</span></span><br><span class="line">    elementData[--size] = <span class="keyword">null</span>; <span class="comment">// clear to let GC do its work  //ç½®ç©º ä¸å†å¼ºå¼•ç”¨</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//æ‰¹é‡åˆ é™¤</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">removeAll</span><span class="params">(Collection&lt;?&gt; c)</span> </span>&#123;</span><br><span class="line">    Objects.requireNonNull(c);<span class="comment">//åˆ¤ç©º</span></span><br><span class="line">    <span class="keyword">return</span> batchRemove(c, <span class="keyword">false</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//æ‰¹é‡ç§»åŠ¨</span></span><br><span class="line"><span class="function"><span class="keyword">private</span> <span class="keyword">boolean</span> <span class="title">batchRemove</span><span class="params">(Collection&lt;?&gt; c, <span class="keyword">boolean</span> complement)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">final</span> Object[] elementData = <span class="keyword">this</span>.elementData;</span><br><span class="line">    <span class="keyword">int</span> r = <span class="number">0</span>, w = <span class="number">0</span>;<span class="comment">//w ä»£è¡¨æ‰¹é‡åˆ é™¤å æ•°ç»„è¿˜å‰©å¤šå°‘å…ƒç´ </span></span><br><span class="line">    <span class="keyword">boolean</span> modified = <span class="keyword">false</span>;</span><br><span class="line">    <span class="keyword">try</span> &#123;</span><br><span class="line">        <span class="comment">//é«˜æ•ˆçš„ä¿å­˜ä¸¤ä¸ªé›†åˆå…¬æœ‰å…ƒç´ çš„ç®—æ³•</span></span><br><span class="line">        <span class="keyword">for</span> (; r &lt; size; r++)</span><br><span class="line">            <span class="keyword">if</span> (c.contains(elementData[r]) == complement) <span class="comment">// å¦‚æœ cé‡Œä¸åŒ…å«å½“å‰ä¸‹æ ‡å…ƒç´ ï¼Œ </span></span><br><span class="line">                elementData[w++] = elementData[r];<span class="comment">//åˆ™ä¿ç•™</span></span><br><span class="line">    &#125; <span class="keyword">finally</span> &#123;</span><br><span class="line">        <span class="comment">// Preserve behavioral compatibility with AbstractCollection,</span></span><br><span class="line">        <span class="comment">// even if c.contains() throws.</span></span><br><span class="line">        <span class="keyword">if</span> (r != size) &#123; <span class="comment">//å‡ºç°å¼‚å¸¸ä¼šå¯¼è‡´ r !=size , åˆ™å°†å‡ºç°å¼‚å¸¸å¤„åé¢çš„æ•°æ®å…¨éƒ¨å¤åˆ¶è¦†ç›–åˆ°æ•°ç»„é‡Œã€‚</span></span><br><span class="line">            System.arraycopy(elementData, r,</span><br><span class="line">                             elementData, w,</span><br><span class="line">                             size - r);</span><br><span class="line">            w += size - r;<span class="comment">//ä¿®æ”¹ wæ•°é‡</span></span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span> (w != size) &#123;<span class="comment">//ç½®ç©ºæ•°ç»„åé¢çš„å…ƒç´ </span></span><br><span class="line">            <span class="comment">// clear to let GC do its work</span></span><br><span class="line">            <span class="keyword">for</span> (<span class="keyword">int</span> i = w; i &lt; size; i++)</span><br><span class="line">                elementData[i] = <span class="keyword">null</span>;</span><br><span class="line">            modCount += size - w;<span class="comment">//ä¿®æ”¹modCount</span></span><br><span class="line">            size = w;<span class="comment">// ä¿®æ”¹size</span></span><br><span class="line">            modified = <span class="keyword">true</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> modified;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>==æ³¨==ï¼šå¢åˆ æ”¹æŸ¥ä¸­ï¼Œ å¢å¯¼è‡´æ‰©å®¹ï¼Œåˆ™ä¼šä¿®æ”¹modCountï¼Œåˆ ä¹Ÿä¸€å®šä¼šä¿®æ”¹ã€‚ æ”¹å’ŒæŸ¥ä¸€å®šä¸ä¼šä¿®æ”¹modCountã€‚</p><h4 id="contains"><a href="#contains" class="headerlink" title="contains"></a>contains</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//æ™®é€šçš„forå¾ªç¯å¯»æ‰¾å€¼ï¼Œåªä¸è¿‡ä¼šæ ¹æ®ç›®æ ‡å¯¹è±¡æ˜¯å¦ä¸ºnullåˆ†åˆ«å¾ªç¯æŸ¥æ‰¾ã€‚</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">contains</span><span class="params">(Object o)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> indexOf(o) &gt;= <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//æ™®é€šçš„forå¾ªç¯å¯»æ‰¾å€¼ï¼Œåªä¸è¿‡ä¼šæ ¹æ®ç›®æ ‡å¯¹è±¡æ˜¯å¦ä¸ºnullåˆ†åˆ«å¾ªç¯æŸ¥æ‰¾ã€‚</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">indexOf</span><span class="params">(Object o)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (o == <span class="keyword">null</span>) &#123;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; size; i++)</span><br><span class="line">            <span class="keyword">if</span> (elementData[i]==<span class="keyword">null</span>)</span><br><span class="line">                <span class="keyword">return</span> i;</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; size; i++)</span><br><span class="line">            <span class="keyword">if</span> (o.equals(elementData[i]))</span><br><span class="line">                <span class="keyword">return</span> i;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> -<span class="number">1</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="Iterator"><a href="#Iterator" class="headerlink" title="Iterator"></a>Iterator</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> Iterator&lt;E&gt; <span class="title">iterator</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">new</span> Itr();</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * An optimized version of AbstractList.Itr</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">private</span> <span class="class"><span class="keyword">class</span> <span class="title">Itr</span> <span class="keyword">implements</span> <span class="title">Iterator</span>&lt;<span class="title">E</span>&gt; </span>&#123;</span><br><span class="line">    <span class="keyword">int</span> cursor;       <span class="comment">// index of next element to return //é»˜è®¤æ˜¯0</span></span><br><span class="line">    <span class="keyword">int</span> lastRet = -<span class="number">1</span>; <span class="comment">// index of last element returned; -1 if no such  //ä¸Šä¸€æ¬¡è¿”å›çš„å…ƒç´  (åˆ é™¤çš„æ ‡å¿—ä½)</span></span><br><span class="line">    <span class="keyword">int</span> expectedModCount = modCount; <span class="comment">//ç”¨äºåˆ¤æ–­é›†åˆæ˜¯å¦ä¿®æ”¹è¿‡ç»“æ„çš„ æ ‡å¿—</span></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">hasNext</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> cursor != size;<span class="comment">//æ¸¸æ ‡æ˜¯å¦ç§»åŠ¨è‡³å°¾éƒ¨</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@SuppressWarnings(&quot;unchecked&quot;)</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> E <span class="title">next</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        checkForComodification();</span><br><span class="line">        <span class="keyword">int</span> i = cursor;</span><br><span class="line">        <span class="keyword">if</span> (i &gt;= size)<span class="comment">//åˆ¤æ–­æ˜¯å¦è¶Šç•Œ</span></span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> NoSuchElementException();</span><br><span class="line">        Object[] elementData = ArrayList.<span class="keyword">this</span>.elementData;</span><br><span class="line">        <span class="keyword">if</span> (i &gt;= elementData.length)<span class="comment">//å†æ¬¡åˆ¤æ–­æ˜¯å¦è¶Šç•Œï¼Œåœ¨ æˆ‘ä»¬è¿™é‡Œçš„æ“ä½œæ—¶ï¼Œæœ‰å¼‚æ­¥çº¿ç¨‹ä¿®æ”¹äº†List</span></span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> ConcurrentModificationException();</span><br><span class="line">        cursor = i + <span class="number">1</span>;<span class="comment">//æ¸¸æ ‡+1</span></span><br><span class="line">        <span class="keyword">return</span> (E) elementData[lastRet = i];<span class="comment">//è¿”å›å…ƒç´  ï¼Œå¹¶è®¾ç½®ä¸Šä¸€æ¬¡è¿”å›çš„å…ƒç´ çš„ä¸‹æ ‡</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">remove</span><span class="params">()</span> </span>&#123;<span class="comment">//remove æ‰ ä¸Šä¸€æ¬¡nextçš„å…ƒç´ </span></span><br><span class="line">        <span class="keyword">if</span> (lastRet &lt; <span class="number">0</span>)<span class="comment">//å…ˆåˆ¤æ–­æ˜¯å¦nextè¿‡</span></span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> IllegalStateException();</span><br><span class="line">        checkForComodification();<span class="comment">//åˆ¤æ–­æ˜¯å¦ä¿®æ”¹è¿‡</span></span><br><span class="line"></span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            ArrayList.<span class="keyword">this</span>.remove(lastRet);<span class="comment">//åˆ é™¤å…ƒç´  removeæ–¹æ³•å†…ä¼šä¿®æ”¹ modCount æ‰€ä»¥åé¢è¦æ›´æ–°Iteratoré‡Œçš„è¿™ä¸ªæ ‡å¿—å€¼</span></span><br><span class="line">            cursor = lastRet; <span class="comment">//è¦åˆ é™¤çš„æ¸¸æ ‡</span></span><br><span class="line">            lastRet = -<span class="number">1</span>; <span class="comment">//ä¸èƒ½é‡å¤åˆ é™¤ æ‰€ä»¥ä¿®æ”¹åˆ é™¤çš„æ ‡å¿—ä½</span></span><br><span class="line">            expectedModCount = modCount;<span class="comment">//æ›´æ–° åˆ¤æ–­é›†åˆæ˜¯å¦ä¿®æ”¹çš„æ ‡å¿—ï¼Œ</span></span><br><span class="line">        &#125; <span class="keyword">catch</span> (IndexOutOfBoundsException ex) &#123;</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> ConcurrentModificationException();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"><span class="comment">//åˆ¤æ–­æ˜¯å¦ä¿®æ”¹è¿‡äº†Listçš„ç»“æ„ï¼Œå¦‚æœæœ‰ä¿®æ”¹ï¼ŒæŠ›å‡ºå¼‚å¸¸</span></span><br><span class="line">    <span class="function"><span class="keyword">final</span> <span class="keyword">void</span> <span class="title">checkForComodification</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (modCount != expectedModCount)</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> ConcurrentModificationException();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="åºåˆ—åŒ–"><a href="#åºåˆ—åŒ–" class="headerlink" title="åºåˆ—åŒ–"></a>åºåˆ—åŒ–</h4><p>ArrayList çš„åºåˆ—åŒ–æ²¡æœ‰ç›´æ¥åºåˆ—åŒ– elementDataï¼Œè€Œæ˜¯æ ¹æ® size åºåˆ—åŒ–åŒ…å«çš„å…ƒç´ ï¼Œå¿½ç•¥æ•°ç»„ä¸­çš„å…¶å®ƒä½ç½®ï¼Œæé«˜æ•ˆç‡å¹¶èŠ‚çœç©ºé—´ã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">writeObject</span><span class="params">(java.io.ObjectOutputStream s)</span></span></span><br><span class="line"><span class="function">    <span class="keyword">throws</span> java.io.IOException</span>&#123;</span><br><span class="line">    <span class="comment">// fail-fastï¼Œåç»­åˆ¤æ–­æ˜¯å¦æœ‰å¹¶å‘å¤„ç†</span></span><br><span class="line">    <span class="keyword">int</span> expectedModCount = modCount;</span><br><span class="line">    <span class="comment">// åºåˆ—åŒ–æ²¡æœ‰æ ‡è®°ä¸º staticã€transient çš„å­—æ®µï¼ŒåŒ…æ‹¬ size ç­‰ã€‚</span></span><br><span class="line">    s.defaultWriteObject();</span><br><span class="line"></span><br><span class="line">    <span class="comment">// æ²¡æœ‰æ„ä¹‰ï¼Œå¯ä»¥å¿½ç•¥</span></span><br><span class="line">    s.writeInt(size);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// åºåˆ—åŒ–å…ƒç´ </span></span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i=<span class="number">0</span>; i&lt;size; i++) &#123;</span><br><span class="line">        s.writeObject(elementData[i]);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (modCount != expectedModCount) &#123;</span><br><span class="line">        <span class="comment">// ArrayList è¢«å¹¶å‘å¤„ç†ï¼Œå‘ç”Ÿç»“æ„æ€§ä¿®æ”¹</span></span><br><span class="line">        <span class="keyword">throw</span> <span class="keyword">new</span> ConcurrentModificationException();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">readObject</span><span class="params">(java.io.ObjectInputStream s)</span></span></span><br><span class="line"><span class="function">    <span class="keyword">throws</span> java.io.IOException, ClassNotFoundException </span>&#123;</span><br><span class="line">    elementData = EMPTY_ELEMENTDATA;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// ååºåˆ—åŒ–æ²¡æœ‰æ ‡è®°ä¸º staticã€transient çš„å­—æ®µï¼ŒåŒ…æ‹¬ size ç­‰</span></span><br><span class="line">    s.defaultReadObject();</span><br><span class="line"></span><br><span class="line">    <span class="comment">// å¯ä»¥å¿½ç•¥ï¼Œè·Ÿ writeObject é‡Œé¢çš„æ–¹æ³•å¯¹åº”</span></span><br><span class="line">    s.readInt(); </span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (size &gt; <span class="number">0</span>) &#123;</span><br><span class="line">        <span class="comment">// æ•°ç»„æ‰©å®¹</span></span><br><span class="line">        ensureCapacityInternal(size);</span><br><span class="line"></span><br><span class="line">        Object[] a = elementData;</span><br><span class="line">        <span class="comment">// ååºåˆ—åŒ–å…ƒç´ å¹¶å¡«å……åˆ°æ•°ç»„ä¸­</span></span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i=<span class="number">0</span>; i&lt;size; i++) &#123;</span><br><span class="line">            a[i] = s.readObject();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="LinkedList"><a href="#LinkedList" class="headerlink" title="LinkedList"></a>LinkedList</h3><p>LinkedList ç»§æ‰¿è‡ª AbstractSequentialListã€‚AbstractSequentialList åˆç»§æ‰¿è‡ªAbstractListï¼Œå¹¶ä¸”åŸºäº iterator å®ç°äº†é»˜è®¤å¢åˆ æ”¹æŸ¥æ“ä½œã€‚</p><p><img src="/2020/Java-Collection-sourcecode/LinkedList.jpg" alt="LinkedList"></p><p>æ–‡æœ«é™„å®Œæ•´æºç ã€‚</p><h3 id="Vector"><a href="#Vector" class="headerlink" title="Vector"></a>Vector</h3><p>çº¿ç¨‹å®‰å…¨çš„ ArrayListã€‚Vector å’Œ ArrayList ä¸€æ ·éƒ½ç»§æ‰¿è‡ª AbstractListï¼Œé™¤äº† Vector çš„æ–¹æ³•ä¸Šå¤šäº†ä¸ª synchronized å¤–ï¼Œä»£ç éƒ½æ˜¯ä¸€æ ·çš„ã€‚æ•ˆç‡ç›¸å¯¹ä¼šæ¯”è¾ƒä½ã€‚</p><h3 id="Stack"><a href="#Stack" class="headerlink" title="Stack"></a>Stack</h3><p>Stack ç»§æ‰¿è‡ªVectorï¼Œä¹Ÿæ˜¯ä¸€ä¸ªçº¿ç¨‹å®‰å…¨çš„é›†åˆã€‚åŸºäºæ•°ç»„å®ç°æ ˆç»“æ„é›†åˆã€‚</p><p><img src="/2020/Java-Collection-sourcecode/Stack.jpg" alt="Stack"></p><p>LinkedList å®Œæ•´æºç ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br><span class="line">244</span><br><span class="line">245</span><br><span class="line">246</span><br><span class="line">247</span><br><span class="line">248</span><br><span class="line">249</span><br><span class="line">250</span><br><span class="line">251</span><br><span class="line">252</span><br><span class="line">253</span><br><span class="line">254</span><br><span class="line">255</span><br><span class="line">256</span><br><span class="line">257</span><br><span class="line">258</span><br><span class="line">259</span><br><span class="line">260</span><br><span class="line">261</span><br><span class="line">262</span><br><span class="line">263</span><br><span class="line">264</span><br><span class="line">265</span><br><span class="line">266</span><br><span class="line">267</span><br><span class="line">268</span><br><span class="line">269</span><br><span class="line">270</span><br><span class="line">271</span><br><span class="line">272</span><br><span class="line">273</span><br><span class="line">274</span><br><span class="line">275</span><br><span class="line">276</span><br><span class="line">277</span><br><span class="line">278</span><br><span class="line">279</span><br><span class="line">280</span><br><span class="line">281</span><br><span class="line">282</span><br><span class="line">283</span><br><span class="line">284</span><br><span class="line">285</span><br><span class="line">286</span><br><span class="line">287</span><br><span class="line">288</span><br><span class="line">289</span><br><span class="line">290</span><br><span class="line">291</span><br><span class="line">292</span><br><span class="line">293</span><br><span class="line">294</span><br><span class="line">295</span><br><span class="line">296</span><br><span class="line">297</span><br><span class="line">298</span><br><span class="line">299</span><br><span class="line">300</span><br><span class="line">301</span><br><span class="line">302</span><br><span class="line">303</span><br><span class="line">304</span><br><span class="line">305</span><br><span class="line">306</span><br><span class="line">307</span><br><span class="line">308</span><br><span class="line">309</span><br><span class="line">310</span><br><span class="line">311</span><br><span class="line">312</span><br><span class="line">313</span><br><span class="line">314</span><br><span class="line">315</span><br><span class="line">316</span><br><span class="line">317</span><br><span class="line">318</span><br><span class="line">319</span><br><span class="line">320</span><br><span class="line">321</span><br><span class="line">322</span><br><span class="line">323</span><br><span class="line">324</span><br><span class="line">325</span><br><span class="line">326</span><br><span class="line">327</span><br><span class="line">328</span><br><span class="line">329</span><br><span class="line">330</span><br><span class="line">331</span><br><span class="line">332</span><br><span class="line">333</span><br><span class="line">334</span><br><span class="line">335</span><br><span class="line">336</span><br><span class="line">337</span><br><span class="line">338</span><br><span class="line">339</span><br><span class="line">340</span><br><span class="line">341</span><br><span class="line">342</span><br><span class="line">343</span><br><span class="line">344</span><br><span class="line">345</span><br><span class="line">346</span><br><span class="line">347</span><br><span class="line">348</span><br><span class="line">349</span><br><span class="line">350</span><br><span class="line">351</span><br><span class="line">352</span><br><span class="line">353</span><br><span class="line">354</span><br><span class="line">355</span><br><span class="line">356</span><br><span class="line">357</span><br><span class="line">358</span><br><span class="line">359</span><br><span class="line">360</span><br><span class="line">361</span><br><span class="line">362</span><br><span class="line">363</span><br><span class="line">364</span><br><span class="line">365</span><br><span class="line">366</span><br><span class="line">367</span><br><span class="line">368</span><br><span class="line">369</span><br><span class="line">370</span><br><span class="line">371</span><br><span class="line">372</span><br><span class="line">373</span><br><span class="line">374</span><br><span class="line">375</span><br><span class="line">376</span><br><span class="line">377</span><br><span class="line">378</span><br><span class="line">379</span><br><span class="line">380</span><br><span class="line">381</span><br><span class="line">382</span><br><span class="line">383</span><br><span class="line">384</span><br><span class="line">385</span><br><span class="line">386</span><br><span class="line">387</span><br><span class="line">388</span><br><span class="line">389</span><br><span class="line">390</span><br><span class="line">391</span><br><span class="line">392</span><br><span class="line">393</span><br><span class="line">394</span><br><span class="line">395</span><br><span class="line">396</span><br><span class="line">397</span><br><span class="line">398</span><br><span class="line">399</span><br><span class="line">400</span><br><span class="line">401</span><br><span class="line">402</span><br><span class="line">403</span><br><span class="line">404</span><br><span class="line">405</span><br><span class="line">406</span><br><span class="line">407</span><br><span class="line">408</span><br><span class="line">409</span><br><span class="line">410</span><br><span class="line">411</span><br><span class="line">412</span><br><span class="line">413</span><br><span class="line">414</span><br><span class="line">415</span><br><span class="line">416</span><br><span class="line">417</span><br><span class="line">418</span><br><span class="line">419</span><br><span class="line">420</span><br><span class="line">421</span><br><span class="line">422</span><br><span class="line">423</span><br><span class="line">424</span><br><span class="line">425</span><br><span class="line">426</span><br><span class="line">427</span><br><span class="line">428</span><br><span class="line">429</span><br><span class="line">430</span><br><span class="line">431</span><br><span class="line">432</span><br><span class="line">433</span><br><span class="line">434</span><br><span class="line">435</span><br><span class="line">436</span><br><span class="line">437</span><br><span class="line">438</span><br><span class="line">439</span><br><span class="line">440</span><br><span class="line">441</span><br><span class="line">442</span><br><span class="line">443</span><br><span class="line">444</span><br><span class="line">445</span><br><span class="line">446</span><br><span class="line">447</span><br><span class="line">448</span><br><span class="line">449</span><br><span class="line">450</span><br><span class="line">451</span><br><span class="line">452</span><br><span class="line">453</span><br><span class="line">454</span><br><span class="line">455</span><br><span class="line">456</span><br><span class="line">457</span><br><span class="line">458</span><br><span class="line">459</span><br><span class="line">460</span><br><span class="line">461</span><br><span class="line">462</span><br><span class="line">463</span><br><span class="line">464</span><br><span class="line">465</span><br><span class="line">466</span><br><span class="line">467</span><br><span class="line">468</span><br><span class="line">469</span><br><span class="line">470</span><br><span class="line">471</span><br><span class="line">472</span><br><span class="line">473</span><br><span class="line">474</span><br><span class="line">475</span><br><span class="line">476</span><br><span class="line">477</span><br><span class="line">478</span><br><span class="line">479</span><br><span class="line">480</span><br><span class="line">481</span><br><span class="line">482</span><br><span class="line">483</span><br><span class="line">484</span><br><span class="line">485</span><br><span class="line">486</span><br><span class="line">487</span><br><span class="line">488</span><br><span class="line">489</span><br><span class="line">490</span><br><span class="line">491</span><br><span class="line">492</span><br><span class="line">493</span><br><span class="line">494</span><br><span class="line">495</span><br><span class="line">496</span><br><span class="line">497</span><br><span class="line">498</span><br><span class="line">499</span><br><span class="line">500</span><br><span class="line">501</span><br><span class="line">502</span><br><span class="line">503</span><br><span class="line">504</span><br><span class="line">505</span><br><span class="line">506</span><br><span class="line">507</span><br><span class="line">508</span><br><span class="line">509</span><br><span class="line">510</span><br><span class="line">511</span><br><span class="line">512</span><br><span class="line">513</span><br><span class="line">514</span><br><span class="line">515</span><br><span class="line">516</span><br><span class="line">517</span><br><span class="line">518</span><br><span class="line">519</span><br><span class="line">520</span><br><span class="line">521</span><br><span class="line">522</span><br><span class="line">523</span><br><span class="line">524</span><br><span class="line">525</span><br><span class="line">526</span><br><span class="line">527</span><br><span class="line">528</span><br><span class="line">529</span><br><span class="line">530</span><br><span class="line">531</span><br><span class="line">532</span><br><span class="line">533</span><br><span class="line">534</span><br><span class="line">535</span><br><span class="line">536</span><br><span class="line">537</span><br><span class="line">538</span><br><span class="line">539</span><br><span class="line">540</span><br><span class="line">541</span><br><span class="line">542</span><br><span class="line">543</span><br><span class="line">544</span><br><span class="line">545</span><br><span class="line">546</span><br><span class="line">547</span><br><span class="line">548</span><br><span class="line">549</span><br><span class="line">550</span><br><span class="line">551</span><br><span class="line">552</span><br><span class="line">553</span><br><span class="line">554</span><br><span class="line">555</span><br><span class="line">556</span><br><span class="line">557</span><br><span class="line">558</span><br><span class="line">559</span><br><span class="line">560</span><br><span class="line">561</span><br><span class="line">562</span><br><span class="line">563</span><br><span class="line">564</span><br><span class="line">565</span><br><span class="line">566</span><br><span class="line">567</span><br><span class="line">568</span><br><span class="line">569</span><br><span class="line">570</span><br><span class="line">571</span><br><span class="line">572</span><br><span class="line">573</span><br><span class="line">574</span><br><span class="line">575</span><br><span class="line">576</span><br><span class="line">577</span><br><span class="line">578</span><br><span class="line">579</span><br><span class="line">580</span><br><span class="line">581</span><br><span class="line">582</span><br><span class="line">583</span><br><span class="line">584</span><br><span class="line">585</span><br><span class="line">586</span><br><span class="line">587</span><br><span class="line">588</span><br><span class="line">589</span><br><span class="line">590</span><br><span class="line">591</span><br><span class="line">592</span><br><span class="line">593</span><br><span class="line">594</span><br><span class="line">595</span><br><span class="line">596</span><br><span class="line">597</span><br><span class="line">598</span><br><span class="line">599</span><br><span class="line">600</span><br><span class="line">601</span><br><span class="line">602</span><br><span class="line">603</span><br><span class="line">604</span><br><span class="line">605</span><br><span class="line">606</span><br><span class="line">607</span><br><span class="line">608</span><br><span class="line">609</span><br><span class="line">610</span><br><span class="line">611</span><br><span class="line">612</span><br><span class="line">613</span><br><span class="line">614</span><br><span class="line">615</span><br><span class="line">616</span><br><span class="line">617</span><br><span class="line">618</span><br><span class="line">619</span><br><span class="line">620</span><br><span class="line">621</span><br><span class="line">622</span><br><span class="line">623</span><br><span class="line">624</span><br><span class="line">625</span><br><span class="line">626</span><br><span class="line">627</span><br><span class="line">628</span><br><span class="line">629</span><br><span class="line">630</span><br><span class="line">631</span><br><span class="line">632</span><br><span class="line">633</span><br><span class="line">634</span><br><span class="line">635</span><br><span class="line">636</span><br><span class="line">637</span><br><span class="line">638</span><br><span class="line">639</span><br><span class="line">640</span><br><span class="line">641</span><br><span class="line">642</span><br><span class="line">643</span><br><span class="line">644</span><br><span class="line">645</span><br><span class="line">646</span><br><span class="line">647</span><br><span class="line">648</span><br><span class="line">649</span><br><span class="line">650</span><br><span class="line">651</span><br><span class="line">652</span><br><span class="line">653</span><br><span class="line">654</span><br><span class="line">655</span><br><span class="line">656</span><br><span class="line">657</span><br><span class="line">658</span><br><span class="line">659</span><br><span class="line">660</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">LinkedList</span>&lt;<span class="title">E</span>&gt; <span class="keyword">extends</span> <span class="title">AbstractSequentialList</span>&lt;<span class="title">E</span>&gt;</span></span><br><span class="line"><span class="class">        <span class="keyword">implements</span> <span class="title">List</span>&lt;<span class="title">E</span>&gt;, <span class="title">Deque</span>&lt;<span class="title">E</span>&gt;, <span class="title">Cloneable</span>, <span class="title">java</span>.<span class="title">io</span>.<span class="title">Serializable</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//LinkedListçš„å…ƒç´ ä¸ªæ•°ï¼š</span></span><br><span class="line">    <span class="keyword">transient</span> <span class="keyword">int</span> size = <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//LinkedListçš„å¤´ç»“ç‚¹ï¼šNodeå†…éƒ¨ç±»</span></span><br><span class="line">    <span class="keyword">transient</span> java.util.LinkedList.Node&lt;E&gt; first;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//LinkedListå°¾ç»“ç‚¹ï¼šNodeå†…éƒ¨ç±»</span></span><br><span class="line">    <span class="keyword">transient</span> java.util.LinkedList.Node&lt;E&gt; last;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//ç©ºå®ç°ï¼š</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">LinkedList</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//è°ƒç”¨æ·»åŠ æ–¹æ³•ï¼š</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">LinkedList</span><span class="params">(Collection&lt;? extends E&gt; c)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>();</span><br><span class="line">        addAll(c);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//LinkedListæ·»åŠ é¦–ç»“ç‚¹ firstï¼š</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">addFirst</span><span class="params">(E e)</span> </span>&#123;</span><br><span class="line">        linkFirst(e);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//firstèŠ‚ç‚¹æ’å…¥æ–°å…ƒç´ ï¼šaddFirst()è°ƒç”¨</span></span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">linkFirst</span><span class="params">(E e)</span> </span>&#123;</span><br><span class="line">        <span class="comment">//å¤´ç»“ç‚¹ï¼š</span></span><br><span class="line">        <span class="keyword">final</span> java.util.LinkedList.Node&lt;E&gt; f = first;</span><br><span class="line">        <span class="comment">//åˆ›å»ºä¸€ä¸ªæ–°èŠ‚ç‚¹ï¼Œå¹¶æŒ‡å‘å¤´ç»“ç‚¹fï¼š</span></span><br><span class="line">        <span class="keyword">final</span> java.util.LinkedList.Node&lt;E&gt; newNode = <span class="keyword">new</span> java.util.LinkedList.Node&lt;&gt;(<span class="keyword">null</span>, e, f);</span><br><span class="line">        <span class="comment">//å°†æ–°èŠ‚ç‚¹èµ‹å€¼ç»™å¤´å‡ ç‚¹ï¼š</span></span><br><span class="line">        first = newNode;</span><br><span class="line">        <span class="comment">//å¦‚æœå¤´èŠ‚ç‚¹ä¸ºnullï¼Œåˆ™æ˜¯ç¬¬ä¸€ä¸ªå…ƒç´ æ’å…¥ï¼Œå°†æ–°èŠ‚ç‚¹ä¹Ÿè®¾ç½®ä¸ºå°¾ç»“ç‚¹ï¼›</span></span><br><span class="line">        <span class="keyword">if</span> (f == <span class="keyword">null</span>)</span><br><span class="line">            last = newNode;</span><br><span class="line">        <span class="keyword">else</span></span><br><span class="line">            <span class="comment">//å°†ä¹‹å‰çš„å¤´ç»“ç‚¹çš„å‰æŒ‡é’ˆæŒ‡å‘æ–°çš„ç»“ç‚¹ï¼š</span></span><br><span class="line">            f.prev = newNode;</span><br><span class="line">        <span class="comment">//é•¿åº¦+1</span></span><br><span class="line">        size++;</span><br><span class="line">        <span class="comment">//æ“ä½œæ•°+1</span></span><br><span class="line">        modCount++;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//æ·»åŠ å…ƒç´ ï¼šæ·»åŠ åˆ°æœ€åä¸€ä¸ªç»“ç‚¹ï¼›</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">add</span><span class="params">(E e)</span> </span>&#123;</span><br><span class="line">        linkLast(e);</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">true</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//æ·»åŠ æœ€åä¸€ä¸ªç»“ç‚¹ lastï¼š</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">addLast</span><span class="params">(E e)</span> </span>&#123;</span><br><span class="line">        linkLast(e);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//lastèŠ‚ç‚¹æ’å…¥æ–°å…ƒç´ ï¼šaddLast()è°ƒç”¨</span></span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">linkLast</span><span class="params">(E e)</span> </span>&#123;</span><br><span class="line">        <span class="comment">//å°†å°¾ç»“ç‚¹èµ‹å€¼ä¸ªä½“L:</span></span><br><span class="line">        <span class="keyword">final</span> java.util.LinkedList.Node&lt;E&gt; l = last;</span><br><span class="line">        <span class="comment">//åˆ›å»ºæ–°çš„ç»“ç‚¹ï¼Œå°†æ–°èŠ‚ç‚¹çš„å‰æŒ‡é’ˆæŒ‡å‘l:</span></span><br><span class="line">        <span class="keyword">final</span> java.util.LinkedList.Node&lt;E&gt; newNode = <span class="keyword">new</span> java.util.LinkedList.Node&lt;&gt;(l, e, <span class="keyword">null</span>);</span><br><span class="line">        <span class="comment">//æ–°èŠ‚ç‚¹ç½®ä¸ºå°¾ç»“ç‚¹ï¼š</span></span><br><span class="line">        last = newNode;</span><br><span class="line">        <span class="comment">//å¦‚æœå°¾ç»“ç‚¹lä¸ºnullï¼šåˆ™æ˜¯ç©ºé›†åˆæ–°æ’å…¥</span></span><br><span class="line">        <span class="keyword">if</span> (l == <span class="keyword">null</span>)</span><br><span class="line">            <span class="comment">//å¤´ç»“ç‚¹ä¹Ÿç½®ä¸º æ–°èŠ‚ç‚¹ï¼š</span></span><br><span class="line">            first = newNode;</span><br><span class="line">        <span class="keyword">else</span></span><br><span class="line">            <span class="comment">//lèŠ‚ç‚¹çš„åæŒ‡é’ˆæŒ‡å‘æ–°èŠ‚ç‚¹ï¼š</span></span><br><span class="line">            l.next = newNode;</span><br><span class="line">        <span class="comment">//é•¿åº¦+1</span></span><br><span class="line">        size++;</span><br><span class="line">        <span class="comment">//æ“ä½œæ•°+1</span></span><br><span class="line">        modCount++;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//å‘å¯¹åº”è§’æ ‡æ·»åŠ å…ƒç´ ï¼š</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">add</span><span class="params">(<span class="keyword">int</span> index, E element)</span> </span>&#123;</span><br><span class="line">        <span class="comment">//æ£€æŸ¥ä¼ å…¥çš„è§’æ ‡ æ˜¯å¦æ­£ç¡®ï¼š</span></span><br><span class="line">        checkPositionIndex(index);</span><br><span class="line">        <span class="comment">//å¦‚æœæ’å…¥è§’æ ‡==é›†åˆé•¿åº¦ï¼Œåˆ™æ’å…¥åˆ°é›†åˆçš„æœ€åé¢ï¼š</span></span><br><span class="line">        <span class="keyword">if</span> (index == size)</span><br><span class="line">            linkLast(element);</span><br><span class="line">        <span class="keyword">else</span></span><br><span class="line">            <span class="comment">//æ’å…¥åˆ°å¯¹åº”è§’æ ‡çš„ä½ç½®ï¼šè·å–æ­¤è§’æ ‡ä¸‹çš„å…ƒç´ å…ˆ</span></span><br><span class="line">            linkBefore(element, node(index));</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//åœ¨succå‰æ’å…¥ æ–°å…ƒç´ eï¼š</span></span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">linkBefore</span><span class="params">(E e, java.util.LinkedList.Node&lt;E&gt; succ)</span> </span>&#123;</span><br><span class="line">        <span class="comment">//è·å–è¢«æ’å…¥å…ƒç´ succçš„å‰æŒ‡é’ˆå…ƒç´ ï¼š</span></span><br><span class="line">        <span class="keyword">final</span> java.util.LinkedList.Node&lt;E&gt; pred = succ.prev;</span><br><span class="line">        <span class="comment">//åˆ›å»ºæ–°å¢å…ƒç´ èŠ‚ç‚¹ï¼Œå‰æŒ‡é’ˆ å’Œ åæŒ‡é’ˆåˆ†åˆ«æŒ‡å‘å¯¹åº”å…ƒç´ ï¼š</span></span><br><span class="line">        <span class="keyword">final</span> java.util.LinkedList.Node&lt;E&gt; newNode = <span class="keyword">new</span> java.util.LinkedList.Node&lt;&gt;(pred, e, succ);</span><br><span class="line">        succ.prev = newNode;</span><br><span class="line">        <span class="comment">//succçš„å‰æŒ‡é’ˆå…ƒç´ å¯èƒ½ä¸ºnullï¼Œä¸ºnullçš„è¯è¯´æ˜succæ˜¯å¤´ç»“ç‚¹ï¼Œåˆ™æŠŠæ–°å»ºç«‹çš„ç»“ç‚¹ç½®ä¸ºå¤´ç»“ç‚¹ï¼š</span></span><br><span class="line">        <span class="keyword">if</span> (pred == <span class="keyword">null</span>)</span><br><span class="line">            first = newNode;</span><br><span class="line">        <span class="keyword">else</span></span><br><span class="line">            <span class="comment">//succå‰æŒ‡é’ˆä¸ä¸ºnullï¼Œåˆ™å°†å‰æŒ‡é’ˆçš„ç»“ç‚¹çš„åæŒ‡é’ˆæŒ‡å‘æ–°èŠ‚ç‚¹ï¼š</span></span><br><span class="line">            pred.next = newNode;</span><br><span class="line">        <span class="comment">//é•¿åº¦+1</span></span><br><span class="line">        size++;</span><br><span class="line">        <span class="comment">//æ“ä½œæ•°+1</span></span><br><span class="line">        modCount++;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//ç§»é™¤é¦–ä¸ªç»“ç‚¹ï¼šå¦‚æœé›†åˆè¿˜æ²¡æœ‰å…ƒç´ åˆ™æŠ¥é”™</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> E <span class="title">removeFirst</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">final</span> java.util.LinkedList.Node&lt;E&gt; f = first;</span><br><span class="line">        <span class="comment">//é¦–èŠ‚ç‚¹ä¸ºnullï¼Œåˆ™æŠ›å‡ºå¼‚å¸¸ï¼›</span></span><br><span class="line">        <span class="keyword">if</span> (f == <span class="keyword">null</span>)</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> NoSuchElementException();</span><br><span class="line">        <span class="keyword">return</span> unlinkFirst(f);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//åˆ é™¤LinkedListçš„å¤´ç»“ç‚¹ï¼šremoveFirst()æ–¹æ³•è°ƒç”¨</span></span><br><span class="line">    <span class="function"><span class="keyword">private</span> E <span class="title">unlinkFirst</span><span class="params">(java.util.LinkedList.Node&lt;E&gt; f)</span> </span>&#123;</span><br><span class="line">        <span class="comment">//fä¸ºå¤´ç»“ç‚¹ï¼šè·å–å¤´ç»“ç‚¹å…ƒç´ E</span></span><br><span class="line">        <span class="keyword">final</span> E element = f.item;</span><br><span class="line">        <span class="comment">//è·å–å¤´ç»“ç‚¹çš„å°¾æŒ‡é’ˆç»“ç‚¹ï¼š</span></span><br><span class="line">        <span class="keyword">final</span> java.util.LinkedList.Node&lt;E&gt; next = f.next;</span><br><span class="line">        <span class="comment">//å°†å¤´ç»“ç‚¹å…ƒç´ ç½®ä¸ºnullï¼š</span></span><br><span class="line">        f.item = <span class="keyword">null</span>;</span><br><span class="line">        <span class="comment">//å¤´ç»“ç‚¹å°¾æŒ‡é’ˆç½®ä¸ºnullï¼š</span></span><br><span class="line">        f.next = <span class="keyword">null</span>;</span><br><span class="line">        <span class="comment">//å°†å¤´ç»“ç‚¹çš„å°¾æŒ‡é’ˆæŒ‡å‘çš„ç»“ç‚¹nextç½®ä¸ºfirst</span></span><br><span class="line">        first = next;</span><br><span class="line">        <span class="comment">//å°¾æŒ‡é’ˆæŒ‡å‘ç»“ç‚¹nextä¸ºnullçš„è¯ï¼Œå°±å°†å°¾ç»“ç‚¹ä¹Ÿç½®ä¸ºnullï¼ˆLinkedListä¸­åªæœ‰ä¸€ä¸ªå…ƒç´ æ—¶å‡ºç°ï¼‰</span></span><br><span class="line">        <span class="keyword">if</span> (next == <span class="keyword">null</span>)</span><br><span class="line">            last = <span class="keyword">null</span>;</span><br><span class="line">        <span class="keyword">else</span></span><br><span class="line">            <span class="comment">//å°†å°¾æŒ‡é’ˆæŒ‡å‘ç»“ç‚¹nextçš„ å‰æŒ‡é’ˆç½®ä¸ºnullï¼›</span></span><br><span class="line">            next.prev = <span class="keyword">null</span>;</span><br><span class="line">        <span class="comment">// é•¿åº¦å‡1</span></span><br><span class="line">        size--;</span><br><span class="line">        <span class="comment">//æ“ä½œæ•°+1</span></span><br><span class="line">        modCount++;</span><br><span class="line">        <span class="comment">//è¿”å›è¢«åˆ é™¤çš„å…ƒç´ ï¼š</span></span><br><span class="line">        <span class="keyword">return</span> element;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//ç§»é™¤æœ€åä¸€ä¸ªç»“ç‚¹ï¼šå¦‚æœé›†åˆè¿˜æ²¡æœ‰å…ƒç´ åˆ™æŠ¥é”™</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> E <span class="title">removeLast</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="comment">//è·å–æœ€åä¸€ä¸ªç»“ç‚¹ï¼š</span></span><br><span class="line">        <span class="keyword">final</span> java.util.LinkedList.Node&lt;E&gt; l = last;</span><br><span class="line">        <span class="keyword">if</span> (l == <span class="keyword">null</span>)</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> NoSuchElementException();</span><br><span class="line">        <span class="comment">//åˆ é™¤å°¾ç»“ç‚¹ï¼š</span></span><br><span class="line">        <span class="keyword">return</span> unlinkLast(l);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//åˆ é™¤LinkedListçš„å°¾ç»“ç‚¹ï¼šremoveLast()æ–¹æ³•è°ƒç”¨</span></span><br><span class="line">    <span class="function"><span class="keyword">private</span> E <span class="title">unlinkLast</span><span class="params">(java.util.LinkedList.Node&lt;E&gt; l)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">final</span> E element = l.item;</span><br><span class="line">        <span class="keyword">final</span> java.util.LinkedList.Node&lt;E&gt; prev = l.prev;</span><br><span class="line">        l.item = <span class="keyword">null</span>;</span><br><span class="line">        l.prev = <span class="keyword">null</span>; <span class="comment">// help GC</span></span><br><span class="line">        last = prev;</span><br><span class="line">        <span class="keyword">if</span> (prev == <span class="keyword">null</span>)</span><br><span class="line">            first = <span class="keyword">null</span>;</span><br><span class="line">        <span class="keyword">else</span></span><br><span class="line">            prev.next = <span class="keyword">null</span>;</span><br><span class="line">        size--;</span><br><span class="line">        modCount++;</span><br><span class="line">        <span class="keyword">return</span> element;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//åˆ é™¤LinkedListä¸­çš„å…ƒç´ ï¼Œå¯ä»¥åˆ é™¤ä¸ºnullçš„å…ƒç´ ï¼Œé€ä¸ªéå†LinkedListçš„å…ƒç´ ï¼›</span></span><br><span class="line">    <span class="comment">//é‡å¤å…ƒç´ åªåˆ é™¤ç¬¬ä¸€ä¸ªï¼š</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">remove</span><span class="params">(Object o)</span> </span>&#123;</span><br><span class="line">        <span class="comment">//å¦‚æœåˆ é™¤å…ƒç´ ä¸ºnullï¼š</span></span><br><span class="line">        <span class="keyword">if</span> (o == <span class="keyword">null</span>) &#123;</span><br><span class="line">            <span class="keyword">for</span> (java.util.LinkedList.Node&lt;E&gt; x = first; x != <span class="keyword">null</span>; x = x.next) &#123;</span><br><span class="line">                <span class="keyword">if</span> (x.item == <span class="keyword">null</span>) &#123;</span><br><span class="line">                    unlink(x);</span><br><span class="line">                    <span class="keyword">return</span> <span class="keyword">true</span>;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="comment">//å¦‚æœåˆ é™¤å…ƒç´ ä¸ä¸ºnullï¼š</span></span><br><span class="line">            <span class="keyword">for</span> (java.util.LinkedList.Node&lt;E&gt; x = first; x != <span class="keyword">null</span>; x = x.next) &#123;</span><br><span class="line">                <span class="keyword">if</span> (o.equals(x.item)) &#123;</span><br><span class="line">                    unlink(x);</span><br><span class="line">                    <span class="keyword">return</span> <span class="keyword">true</span>;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">false</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//ç§»é™¤LinkedListç»“ç‚¹ï¼šremove()æ–¹æ³•ä¸­è°ƒç”¨</span></span><br><span class="line">    <span class="function">E <span class="title">unlink</span><span class="params">(java.util.LinkedList.Node&lt;E&gt; x)</span> </span>&#123;</span><br><span class="line">        <span class="comment">//è·å–è¢«åˆ é™¤ç»“ç‚¹çš„å…ƒç´ Eï¼š</span></span><br><span class="line">        <span class="keyword">final</span> E element = x.item;</span><br><span class="line">        <span class="comment">//è·å–è¢«åˆ é™¤å…ƒç´ çš„åæŒ‡é’ˆç»“ç‚¹ï¼š</span></span><br><span class="line">        <span class="keyword">final</span> java.util.LinkedList.Node&lt;E&gt; next = x.next;</span><br><span class="line">        <span class="comment">//è·å–è¢«åˆ é™¤å…ƒç´ çš„å‰æŒ‡é’ˆç»“ç‚¹ï¼š</span></span><br><span class="line">        <span class="keyword">final</span> java.util.LinkedList.Node&lt;E&gt; prev = x.prev;</span><br><span class="line"></span><br><span class="line">        <span class="comment">//è¢«åˆ é™¤ç»“ç‚¹çš„ å‰ç»“ç‚¹ä¸ºnullçš„è¯ï¼š</span></span><br><span class="line">        <span class="keyword">if</span> (prev == <span class="keyword">null</span>) &#123;</span><br><span class="line">            <span class="comment">//å°†åæŒ‡é’ˆæŒ‡å‘çš„ç»“ç‚¹ç½®ä¸ºå¤´ç»“ç‚¹</span></span><br><span class="line">            first = next;</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="comment">//å‰ç½®ç»“ç‚¹çš„  å°¾ç»“ç‚¹æŒ‡å‘è¢«åˆ é™¤çš„nextç»“ç‚¹ï¼›</span></span><br><span class="line">            prev.next = next;</span><br><span class="line">            <span class="comment">//è¢«åˆ é™¤ç»“ç‚¹å‰æŒ‡é’ˆç½®ä¸ºnull:</span></span><br><span class="line">            x.prev = <span class="keyword">null</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">//å¯¹å°¾ç»“ç‚¹åŒæ ·å¤„ç†ï¼š</span></span><br><span class="line">        <span class="keyword">if</span> (next == <span class="keyword">null</span>) &#123;</span><br><span class="line">            last = prev;</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            next.prev = prev;</span><br><span class="line">            x.next = <span class="keyword">null</span>;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        x.item = <span class="keyword">null</span>;</span><br><span class="line">        size--;</span><br><span class="line">        modCount++;</span><br><span class="line">        <span class="keyword">return</span> element;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//å¾—åˆ°é¦–ä¸ªç»“ç‚¹ï¼šé›†åˆæ²¡æœ‰å…ƒç´ æŠ¥é”™</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> E <span class="title">getFirst</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="comment">//è·å–firstç»“ç‚¹ï¼š</span></span><br><span class="line">        <span class="keyword">final</span> java.util.LinkedList.Node&lt;E&gt; f = first;</span><br><span class="line">        <span class="keyword">if</span> (f == <span class="keyword">null</span>)</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> NoSuchElementException();</span><br><span class="line">        <span class="keyword">return</span> f.item;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//å¾—åˆ°æœ€åä¸€ä¸ªç»“ç‚¹ï¼šé›†åˆæ²¡æœ‰å…ƒç´ æŠ¥é”™</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> E <span class="title">getLast</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="comment">//è·å–lastç»“ç‚¹ï¼š</span></span><br><span class="line">        <span class="keyword">final</span> java.util.LinkedList.Node&lt;E&gt; l = last;</span><br><span class="line">        <span class="keyword">if</span> (l == <span class="keyword">null</span>)</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> NoSuchElementException();</span><br><span class="line">        <span class="keyword">return</span> l.item;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//åˆ¤æ–­obj æ˜¯å¦å­˜åœ¨ï¼š</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">contains</span><span class="params">(Object o)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> indexOf(o) != -<span class="number">1</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//LinkedListé•¿åº¦ï¼š</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">size</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> size;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//æ·»åŠ é›†åˆï¼šä»æœ€åsizeæ‰€åœ¨çš„indexå¼€å§‹ï¼š</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">addAll</span><span class="params">(Collection&lt;? extends E&gt; c)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> addAll(size, c);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//LinkedListæ·»åŠ é›†åˆï¼š</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">addAll</span><span class="params">(<span class="keyword">int</span> index, Collection&lt;? extends E&gt; c)</span> </span>&#123;</span><br><span class="line">        <span class="comment">//æ£€æŸ¥è§’æ ‡æ˜¯å¦æ­£ç¡®ï¼š</span></span><br><span class="line">        checkPositionIndex(index);</span><br><span class="line">        Object[] a = c.toArray();</span><br><span class="line">        <span class="keyword">int</span> numNew = a.length;</span><br><span class="line">        <span class="keyword">if</span> (numNew == <span class="number">0</span>)</span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">false</span>;</span><br><span class="line">        java.util.LinkedList.Node&lt;E&gt; pred, succ;</span><br><span class="line">        <span class="keyword">if</span> (index == size) &#123;</span><br><span class="line">            succ = <span class="keyword">null</span>;</span><br><span class="line">            pred = last;</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            succ = node(index);</span><br><span class="line">            pred = succ.prev;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">for</span> (Object o : a) &#123;</span><br><span class="line">            E e = (E) o;</span><br><span class="line">            java.util.LinkedList.Node&lt;E&gt; newNode = <span class="keyword">new</span> java.util.LinkedList.Node&lt;&gt;(pred, e, <span class="keyword">null</span>);</span><br><span class="line">            <span class="keyword">if</span> (pred == <span class="keyword">null</span>)</span><br><span class="line">                first = newNode;</span><br><span class="line">            <span class="keyword">else</span></span><br><span class="line">                pred.next = newNode;</span><br><span class="line">            pred = newNode;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span> (succ == <span class="keyword">null</span>) &#123;</span><br><span class="line">            last = pred;</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            pred.next = succ;</span><br><span class="line">            succ.prev = pred;</span><br><span class="line">        &#125;</span><br><span class="line">        size += numNew;</span><br><span class="line">        modCount++;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">true</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//æ¸…ç©ºLinkedListï¼š</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">clear</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="comment">//éå†LinedListé›†åˆï¼š</span></span><br><span class="line">        <span class="keyword">for</span> (java.util.LinkedList.Node&lt;E&gt; x = first; x != <span class="keyword">null</span>; ) &#123;</span><br><span class="line">            <span class="comment">//å°†æ¯ä¸ªç»“ç‚¹çš„å‰æŒ‡é’ˆ å°¾æŒ‡é’ˆ  å…ƒç´ éƒ½ç½®ä¸ºnullï¼š</span></span><br><span class="line">            java.util.LinkedList.Node&lt;E&gt; next = x.next;</span><br><span class="line">            x.item = <span class="keyword">null</span>;</span><br><span class="line">            x.next = <span class="keyword">null</span>;</span><br><span class="line">            x.prev = <span class="keyword">null</span>;</span><br><span class="line">            x = next;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">//å¤´å°¾ç»“ç‚¹ éƒ½ç½®ä¸ºnullï¼š</span></span><br><span class="line">        first = last = <span class="keyword">null</span>;</span><br><span class="line">        <span class="comment">//é•¿åº¦ç½®ä¸º0</span></span><br><span class="line">        size = <span class="number">0</span>;</span><br><span class="line">        <span class="comment">//æ“ä½œæ•°+1ï¼š</span></span><br><span class="line">        modCount++;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//è·å–ç›¸åº”è§’æ ‡çš„å…ƒç´ ï¼š</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> E <span class="title">get</span><span class="params">(<span class="keyword">int</span> index)</span> </span>&#123;</span><br><span class="line">        <span class="comment">//æ£€æŸ¥è§’æ ‡æ˜¯å¦æ­£ç¡®ï¼š</span></span><br><span class="line">        checkElementIndex(index);</span><br><span class="line">        <span class="comment">//è·å–è§’æ ‡æ‰€å±ç»“ç‚¹çš„ å…ƒç´ å€¼ï¼š</span></span><br><span class="line">        <span class="keyword">return</span> node(index).item;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//è®¾ç½®å¯¹åº”è§’æ ‡çš„å…ƒç´ ï¼š</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> E <span class="title">set</span><span class="params">(<span class="keyword">int</span> index, E element)</span> </span>&#123;</span><br><span class="line">        checkElementIndex(index);</span><br><span class="line">        java.util.LinkedList.Node&lt;E&gt; x = node(index);</span><br><span class="line">        E oldVal = x.item;</span><br><span class="line">        x.item = element;</span><br><span class="line">        <span class="keyword">return</span> oldVal;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//åˆ é™¤å¯¹åº”è§’æ ‡çš„å…ƒç´ ï¼š</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> E <span class="title">remove</span><span class="params">(<span class="keyword">int</span> index)</span> </span>&#123;</span><br><span class="line">        checkElementIndex(index);</span><br><span class="line">        <span class="keyword">return</span> unlink(node(index));</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//è·å–å¯¹åº”è§’æ ‡æ‰€å±äºçš„ç»“ç‚¹ï¼š</span></span><br><span class="line">    java.util.LinkedList.<span class="function">Node&lt;E&gt; <span class="title">node</span><span class="params">(<span class="keyword">int</span> index)</span> </span>&#123;</span><br><span class="line">        <span class="comment">//ä½è¿ç®—ï¼šå¦‚æœä½ç½®ç´¢å¼•å°äºåˆ—è¡¨é•¿åº¦çš„ä¸€åŠï¼Œä»å‰é¢å¼€å§‹éå†ï¼›å¦åˆ™ï¼Œä»åé¢å¼€å§‹éå†ï¼›</span></span><br><span class="line">        <span class="keyword">if</span> (index &lt; (size &gt;&gt; <span class="number">1</span>)) &#123;</span><br><span class="line">            java.util.LinkedList.Node&lt;E&gt; x = first;</span><br><span class="line">            <span class="comment">//ä»å¤´ç»“ç‚¹å¼€å§‹éå†ï¼šéå†çš„é•¿åº¦å°±æ˜¯indexçš„é•¿åº¦ï¼Œè·å–å¯¹åº”çš„indexçš„å…ƒç´ </span></span><br><span class="line">            <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; index; i++)</span><br><span class="line">                x = x.next;</span><br><span class="line">            <span class="keyword">return</span> x;</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="comment">//ä»é›†åˆå°¾ç»“ç‚¹éå†ï¼š</span></span><br><span class="line">            java.util.LinkedList.Node&lt;E&gt; x = last;</span><br><span class="line">            <span class="comment">//åŒæ ·é“ç†ï¼š</span></span><br><span class="line">            <span class="keyword">for</span> (<span class="keyword">int</span> i = size - <span class="number">1</span>; i &gt; index; i--)</span><br><span class="line">                x = x.prev;</span><br><span class="line">            <span class="keyword">return</span> x;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// å·¦ç§»ç›¸å½“äº*2ï¼Œåªæ˜¯è¦æ³¨æ„è¾¹ç•Œé—®é¢˜ã€‚å¦‚char a = 65ï¼› a&lt;&lt;1 æŒ‰ç…§*2æ¥ç®—ä¸º130;</span></span><br><span class="line">    <span class="comment">// ä½†æœ‰ç¬¦å·charçš„å–å€¼èŒƒå›´-128~127ï¼Œå·²ç»è¶Šç•Œï¼Œå¤šè¶…å‡ºäº†3ä¸ªæ•°å€¼ï¼Œ</span></span><br><span class="line">    <span class="comment">// æ‰€ä»¥ä»-128ç®—èµ·çš„ç¬¬ä¸‰ä¸ªæ•°å€¼-126æ‰æ˜¯a&lt;&lt;1çš„æ­£ç¡®ç»“æœã€‚</span></span><br><span class="line">    <span class="comment">//è€Œå³ç§»ç›¸å½“äºé™¤ä»¥2ï¼Œåªæ˜¯è¦æ³¨æ„ç§»ä½æ¯”è¾ƒå¤šçš„æ—¶å€™ç»“æœä¼šè¶‹è¿‘å»ä¸€ä¸ªéå¸¸å°çš„æ•°ï¼Œå¦‚ä¸Šé¢ç»“æœä¸­çš„-1ï¼Œ0ã€‚</span></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">boolean</span> <span class="title">isElementIndex</span><span class="params">(<span class="keyword">int</span> index)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> index &gt;= <span class="number">0</span> &amp;&amp; index &lt; size;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//åˆ¤æ–­ä¼ å…¥çš„indexæ˜¯å¦æ­£ç¡®ï¼š</span></span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">boolean</span> <span class="title">isPositionIndex</span><span class="params">(<span class="keyword">int</span> index)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> index &gt;= <span class="number">0</span> &amp;&amp; index &lt;= size;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">private</span> String <span class="title">outOfBoundsMsg</span><span class="params">(<span class="keyword">int</span> index)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;Index: &quot;</span>+index+<span class="string">&quot;, Size: &quot;</span>+size;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">checkElementIndex</span><span class="params">(<span class="keyword">int</span> index)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (!isElementIndex(index))</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> IndexOutOfBoundsException(outOfBoundsMsg(index));</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//æ£€æŸ¥ä¼ å…¥çš„è§’æ ‡ æ˜¯å¦æ­£ç¡®ï¼š</span></span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">checkPositionIndex</span><span class="params">(<span class="keyword">int</span> index)</span> </span>&#123;</span><br><span class="line">        <span class="comment">//å¿…é¡»å¤§äº0 ï¼Œå¹¶ä¸”ä¸èƒ½å¤§äºå½“å‰sizeï¼š</span></span><br><span class="line">        <span class="keyword">if</span> (!isPositionIndex(index))</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> IndexOutOfBoundsException(outOfBoundsMsg(index));</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">indexOf</span><span class="params">(Object o)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">int</span> index = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">if</span> (o == <span class="keyword">null</span>) &#123;</span><br><span class="line">            <span class="keyword">for</span> (java.util.LinkedList.Node&lt;E&gt; x = first; x != <span class="keyword">null</span>; x = x.next) &#123;</span><br><span class="line">                <span class="keyword">if</span> (x.item == <span class="keyword">null</span>)</span><br><span class="line">                    <span class="keyword">return</span> index;</span><br><span class="line">                index++;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="keyword">for</span> (java.util.LinkedList.Node&lt;E&gt; x = first; x != <span class="keyword">null</span>; x = x.next) &#123;</span><br><span class="line">                <span class="keyword">if</span> (o.equals(x.item))</span><br><span class="line">                    <span class="keyword">return</span> index;</span><br><span class="line">                index++;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> -<span class="number">1</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">lastIndexOf</span><span class="params">(Object o)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">int</span> index = size;</span><br><span class="line">        <span class="keyword">if</span> (o == <span class="keyword">null</span>) &#123;</span><br><span class="line">            <span class="keyword">for</span> (java.util.LinkedList.Node&lt;E&gt; x = last; x != <span class="keyword">null</span>; x = x.prev) &#123;</span><br><span class="line">                index--;</span><br><span class="line">                <span class="keyword">if</span> (x.item == <span class="keyword">null</span>)</span><br><span class="line">                    <span class="keyword">return</span> index;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="keyword">for</span> (java.util.LinkedList.Node&lt;E&gt; x = last; x != <span class="keyword">null</span>; x = x.prev) &#123;</span><br><span class="line">                index--;</span><br><span class="line">                <span class="keyword">if</span> (o.equals(x.item))</span><br><span class="line">                    <span class="keyword">return</span> index;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> -<span class="number">1</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//è·å–ç¬¬ä¸€ä¸ªå…ƒç´ ï¼Œä¸å­˜åœ¨åˆ™æŠ›å¼‚å¸¸</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> E <span class="title">element</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> getFirst();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//å‡ºé˜Ÿï¼Œè·å–ç¬¬ä¸€ä¸ªå…ƒç´ ï¼Œä¸å‡ºé˜Ÿåˆ—ï¼Œåªæ˜¯è·å–</span></span><br><span class="line">    <span class="comment">// é˜Ÿåˆ—å…ˆè¿›å…ˆå‡ºï¼›ä¸å­˜åœ¨ä¸æŠ›å¼‚å¸¸ï¼Œè¿”å›null</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> E <span class="title">peek</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="comment">//è·å–å¤´ç»“ç‚¹ï¼š</span></span><br><span class="line">        <span class="keyword">final</span> java.util.LinkedList.Node&lt;E&gt; f = first;</span><br><span class="line">        <span class="comment">//å­˜åœ¨è·å–å¤´ç»“ç‚¹å…ƒç´ ï¼Œä¸å­˜åœ¨è¿”å›null</span></span><br><span class="line">        <span class="keyword">return</span> (f == <span class="keyword">null</span>) ? <span class="keyword">null</span> : f.item;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//å‡ºé˜Ÿï¼Œå¹¶ç§»é™¤ç¬¬ä¸€ä¸ªå…ƒç´ ï¼›ä¸å­˜åœ¨ä¸æŠ›å¼‚å¸¸ã€‚</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> E <span class="title">poll</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">final</span> java.util.LinkedList.Node&lt;E&gt; f = first;</span><br><span class="line">        <span class="keyword">return</span> (f == <span class="keyword">null</span>) ? <span class="keyword">null</span> : unlinkFirst(f);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//å‡ºé˜Ÿï¼ˆåˆ é™¤ç¬¬ä¸€ä¸ªç»“ç‚¹ï¼‰ï¼Œå¦‚æœä¸å­˜åœ¨ä¼šæŠ›å‡ºå¼‚å¸¸è€Œä¸æ˜¯è¿”å›nullï¼Œå­˜åœ¨çš„è¯ä¼šè¿”å›å€¼å¹¶ç§»é™¤è¿™ä¸ªå…ƒç´ ï¼ˆèŠ‚ç‚¹ï¼‰</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> E <span class="title">remove</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> removeFirst();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//å…¥é˜Ÿ(æ’å…¥æœ€åä¸€ä¸ªç»“ç‚¹)ä»æœ€åä¸€ä¸ªå…ƒç´ </span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">offer</span><span class="params">(E e)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> add(e);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//å…¥é˜Ÿï¼ˆæ’å…¥å¤´ç»“ç‚¹ï¼‰ï¼Œå§‹ç»ˆè¿”å›true</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">offerFirst</span><span class="params">(E e)</span> </span>&#123;</span><br><span class="line">        addFirst(e);</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">true</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//å…¥é˜Ÿï¼ˆæ’å…¥å°¾ç»“ç‚¹ï¼‰ï¼Œå§‹ç»ˆè¿”å›true</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">offerLast</span><span class="params">(E e)</span> </span>&#123;</span><br><span class="line">        addLast(e);</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">true</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//å‡ºé˜Ÿï¼ˆä»å‰ç«¯ï¼‰ï¼Œè·å¾—ç¬¬ä¸€ä¸ªå…ƒç´ ï¼Œä¸å­˜åœ¨ä¼šè¿”å›nullï¼Œä¸ä¼šåˆ é™¤å…ƒç´ ï¼ˆèŠ‚ç‚¹ï¼‰</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> E <span class="title">peekFirst</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">final</span> java.util.LinkedList.Node&lt;E&gt; f = first;</span><br><span class="line">        <span class="keyword">return</span> (f == <span class="keyword">null</span>) ? <span class="keyword">null</span> : f.item;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//å‡ºé˜Ÿï¼ˆä»åç«¯ï¼‰ï¼Œè·å¾—æœ€åä¸€ä¸ªå…ƒç´ ï¼Œä¸å­˜åœ¨ä¼šè¿”å›nullï¼Œä¸ä¼šåˆ é™¤å…ƒç´ ï¼ˆèŠ‚ç‚¹ï¼‰</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> E <span class="title">peekLast</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">final</span> java.util.LinkedList.Node&lt;E&gt; l = last;</span><br><span class="line">        <span class="keyword">return</span> (l == <span class="keyword">null</span>) ? <span class="keyword">null</span> : l.item;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//å‡ºé˜Ÿï¼ˆä»å‰ç«¯ï¼‰ï¼Œè·å¾—ç¬¬ä¸€ä¸ªå…ƒç´ ï¼Œä¸å­˜åœ¨ä¼šè¿”å›nullï¼Œä¼šåˆ é™¤å…ƒç´ ï¼ˆèŠ‚ç‚¹ï¼‰</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> E <span class="title">pollFirst</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">final</span> java.util.LinkedList.Node&lt;E&gt; f = first;</span><br><span class="line">        <span class="keyword">return</span> (f == <span class="keyword">null</span>) ? <span class="keyword">null</span> : unlinkFirst(f);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//å‡ºé˜Ÿï¼ˆä»åç«¯ï¼‰ï¼Œè·å¾—æœ€åä¸€ä¸ªå…ƒç´ ï¼Œä¸å­˜åœ¨ä¼šè¿”å›nullï¼Œä¼šåˆ é™¤å…ƒç´ ï¼ˆèŠ‚ç‚¹ï¼‰</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> E <span class="title">pollLast</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">final</span> java.util.LinkedList.Node&lt;E&gt; l = last;</span><br><span class="line">        <span class="keyword">return</span> (l == <span class="keyword">null</span>) ? <span class="keyword">null</span> : unlinkLast(l);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//å…¥æ ˆï¼Œä»å‰é¢æ·»åŠ   æ ˆ åè¿›å…ˆå‡º</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">push</span><span class="params">(E e)</span> </span>&#123;</span><br><span class="line">        addFirst(e);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//å‡ºæ ˆï¼Œè¿”å›æ ˆé¡¶å…ƒç´ ï¼Œä»å‰é¢ç§»é™¤ï¼ˆä¼šåˆ é™¤ï¼‰</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> E <span class="title">pop</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> removeFirst();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//èŠ‚ç‚¹çš„æ•°æ®ç»“æ„ï¼ŒåŒ…å«å‰åèŠ‚ç‚¹çš„å¼•ç”¨å’Œå½“å‰èŠ‚ç‚¹</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="class"><span class="keyword">class</span> <span class="title">Node</span>&lt;<span class="title">E</span>&gt; </span>&#123;</span><br><span class="line">        <span class="comment">//ç»“ç‚¹å…ƒç´ ï¼š</span></span><br><span class="line">        E item;</span><br><span class="line">        <span class="comment">//ç»“ç‚¹åæŒ‡é’ˆ</span></span><br><span class="line">        java.util.LinkedList.Node&lt;E&gt; next;</span><br><span class="line">        <span class="comment">//ç»“ç‚¹å‰æŒ‡é’ˆ</span></span><br><span class="line">        java.util.LinkedList.Node&lt;E&gt; prev;</span><br><span class="line"></span><br><span class="line">        Node(java.util.LinkedList.Node&lt;E&gt; prev, E element, java.util.LinkedList.Node&lt;E&gt; next) &#123;</span><br><span class="line">            <span class="keyword">this</span>.item = element;</span><br><span class="line">            <span class="keyword">this</span>.next = next;</span><br><span class="line">            <span class="keyword">this</span>.prev = prev;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">        </span><br><span class="line">    <span class="comment">//è¿­ä»£å™¨ï¼š</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> ListIterator&lt;E&gt; <span class="title">listIterator</span><span class="params">(<span class="keyword">int</span> index)</span> </span>&#123;</span><br><span class="line">        checkPositionIndex(index);</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> java.util.LinkedList.ListItr(index);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">private</span> <span class="class"><span class="keyword">class</span> <span class="title">ListItr</span> <span class="keyword">implements</span> <span class="title">ListIterator</span>&lt;<span class="title">E</span>&gt; </span>&#123;</span><br><span class="line">        <span class="keyword">private</span> java.util.LinkedList.Node&lt;E&gt; lastReturned = <span class="keyword">null</span>;</span><br><span class="line">        <span class="keyword">private</span> java.util.LinkedList.Node&lt;E&gt; next;</span><br><span class="line">        <span class="keyword">private</span> <span class="keyword">int</span> nextIndex;</span><br><span class="line">        <span class="keyword">private</span> <span class="keyword">int</span> expectedModCount = modCount;</span><br><span class="line"></span><br><span class="line">        ListItr(<span class="keyword">int</span> index) &#123;</span><br><span class="line">            next = (index == size) ? <span class="keyword">null</span> : node(index);</span><br><span class="line">            nextIndex = index;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">hasNext</span><span class="params">()</span> </span>&#123;</span><br><span class="line">            <span class="keyword">return</span> nextIndex &lt; size;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="function"><span class="keyword">public</span> E <span class="title">next</span><span class="params">()</span> </span>&#123;</span><br><span class="line">            checkForComodification();</span><br><span class="line">            <span class="keyword">if</span> (!hasNext())</span><br><span class="line">                <span class="keyword">throw</span> <span class="keyword">new</span> NoSuchElementException();</span><br><span class="line"></span><br><span class="line">            lastReturned = next;</span><br><span class="line">            next = next.next;</span><br><span class="line">            nextIndex++;</span><br><span class="line">            <span class="keyword">return</span> lastReturned.item;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">hasPrevious</span><span class="params">()</span> </span>&#123;</span><br><span class="line">            <span class="keyword">return</span> nextIndex &gt; <span class="number">0</span>;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="function"><span class="keyword">public</span> E <span class="title">previous</span><span class="params">()</span> </span>&#123;</span><br><span class="line">            checkForComodification();</span><br><span class="line">            <span class="keyword">if</span> (!hasPrevious())</span><br><span class="line">                <span class="keyword">throw</span> <span class="keyword">new</span> NoSuchElementException();</span><br><span class="line"></span><br><span class="line">            lastReturned = next = (next == <span class="keyword">null</span>) ? last : next.prev;</span><br><span class="line">            nextIndex--;</span><br><span class="line">            <span class="keyword">return</span> lastReturned.item;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">nextIndex</span><span class="params">()</span> </span>&#123;</span><br><span class="line">            <span class="keyword">return</span> nextIndex;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">previousIndex</span><span class="params">()</span> </span>&#123;</span><br><span class="line">            <span class="keyword">return</span> nextIndex - <span class="number">1</span>;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">remove</span><span class="params">()</span> </span>&#123;</span><br><span class="line">            checkForComodification();</span><br><span class="line">            <span class="keyword">if</span> (lastReturned == <span class="keyword">null</span>)</span><br><span class="line">                <span class="keyword">throw</span> <span class="keyword">new</span> IllegalStateException();</span><br><span class="line"></span><br><span class="line">            java.util.LinkedList.Node&lt;E&gt; lastNext = lastReturned.next;</span><br><span class="line">            unlink(lastReturned);</span><br><span class="line">            <span class="keyword">if</span> (next == lastReturned)</span><br><span class="line">                next = lastNext;</span><br><span class="line">            <span class="keyword">else</span></span><br><span class="line">                nextIndex--;</span><br><span class="line">            lastReturned = <span class="keyword">null</span>;</span><br><span class="line">            expectedModCount++;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">set</span><span class="params">(E e)</span> </span>&#123;</span><br><span class="line">            <span class="keyword">if</span> (lastReturned == <span class="keyword">null</span>)</span><br><span class="line">                <span class="keyword">throw</span> <span class="keyword">new</span> IllegalStateException();</span><br><span class="line">            checkForComodification();</span><br><span class="line">            lastReturned.item = e;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">add</span><span class="params">(E e)</span> </span>&#123;</span><br><span class="line">            checkForComodification();</span><br><span class="line">            lastReturned = <span class="keyword">null</span>;</span><br><span class="line">            <span class="keyword">if</span> (next == <span class="keyword">null</span>)</span><br><span class="line">                linkLast(e);</span><br><span class="line">            <span class="keyword">else</span></span><br><span class="line">                linkBefore(e, next);</span><br><span class="line">            nextIndex++;</span><br><span class="line">            expectedModCount++;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="function"><span class="keyword">final</span> <span class="keyword">void</span> <span class="title">checkForComodification</span><span class="params">()</span> </span>&#123;</span><br><span class="line">            <span class="keyword">if</span> (modCount != expectedModCount)</span><br><span class="line">                <span class="keyword">throw</span> <span class="keyword">new</span> ConcurrentModificationException();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">   </span><br><span class="line">    <span class="keyword">private</span> java.util.<span class="function">LinkedList&lt;E&gt; <span class="title">superClone</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="keyword">return</span> (java.util.LinkedList&lt;E&gt;) <span class="keyword">super</span>.clone();</span><br><span class="line">        &#125; <span class="keyword">catch</span> (CloneNotSupportedException e) &#123;</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> InternalError();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> Object <span class="title">clone</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        java.util.LinkedList&lt;E&gt; clone = superClone();</span><br><span class="line">        clone.first = clone.last = <span class="keyword">null</span>;</span><br><span class="line">        clone.size = <span class="number">0</span>;</span><br><span class="line">        clone.modCount = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">for</span> (java.util.LinkedList.Node&lt;E&gt; x = first; x != <span class="keyword">null</span>; x = x.next)</span><br><span class="line">            clone.add(x.item);</span><br><span class="line">        <span class="keyword">return</span> clone;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> Object[] toArray() &#123;</span><br><span class="line">        Object[] result = <span class="keyword">new</span> Object[size];</span><br><span class="line">        <span class="keyword">int</span> i = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">for</span> (java.util.LinkedList.Node&lt;E&gt; x = first; x != <span class="keyword">null</span>; x = x.next)</span><br><span class="line">            result[i++] = x.item;</span><br><span class="line">        <span class="keyword">return</span> result;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="meta">@SuppressWarnings(&quot;unchecked&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> &lt;T&gt; T[] toArray(T[] a) &#123;</span><br><span class="line">        <span class="keyword">if</span> (a.length &lt; size)</span><br><span class="line">            a = (T[])java.lang.reflect.Array.newInstance(</span><br><span class="line">                    a.getClass().getComponentType(), size);</span><br><span class="line">        <span class="keyword">int</span> i = <span class="number">0</span>;</span><br><span class="line">        Object[] result = a;</span><br><span class="line">        <span class="keyword">for</span> (java.util.LinkedList.Node&lt;E&gt; x = first; x != <span class="keyword">null</span>; x = x.next)</span><br><span class="line">            result[i++] = x.item;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> (a.length &gt; size)</span><br><span class="line">            a[size] = <span class="keyword">null</span>;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> a;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="keyword">long</span> serialVersionUID = <span class="number">876323262645176354L</span>;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">writeObject</span><span class="params">(java.io.ObjectOutputStream s)</span></span></span><br><span class="line"><span class="function">            <span class="keyword">throws</span> java.io.IOException </span>&#123;</span><br><span class="line">        s.defaultWriteObject();</span><br><span class="line"></span><br><span class="line">        s.writeInt(size);</span><br><span class="line"></span><br><span class="line">        <span class="keyword">for</span> (java.util.LinkedList.Node&lt;E&gt; x = first; x != <span class="keyword">null</span>; x = x.next)</span><br><span class="line">            s.writeObject(x.item);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="meta">@SuppressWarnings(&quot;unchecked&quot;)</span></span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">readObject</span><span class="params">(java.io.ObjectInputStream s)</span></span></span><br><span class="line"><span class="function">            <span class="keyword">throws</span> java.io.IOException, ClassNotFoundException </span>&#123;</span><br><span class="line">        s.defaultReadObject();</span><br><span class="line"></span><br><span class="line">        <span class="keyword">int</span> size = s.readInt();</span><br><span class="line"></span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; size; i++)</span><br><span class="line">            linkLast((E)s.readObject());</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
    
    
    <summary type="html">&lt;p&gt;&lt;img src=&quot;/2020/Java-Collection-sourcecode/Collection.jpg&quot; alt=&quot;Collection&quot;&gt;&lt;/p&gt;</summary>
    
    
    
    <category term="Java" scheme="https://www.fvolcano.red/categories/Java/"/>
    
    
    <category term="æ•´ç†" scheme="https://www.fvolcano.red/tags/%E6%95%B4%E7%90%86/"/>
    
    <category term="æºç " scheme="https://www.fvolcano.red/tags/%E6%BA%90%E7%A0%81/"/>
    
  </entry>
  
  <entry>
    <title>æ•™å­¦ç®¡ç†ç³»ç»Ÿwebåº”ç”¨+SSMæ­å»ºè®°å½•</title>
    <link href="https://www.fvolcano.red/2020/InfoManageSystem-webApplication-setUp-record/"/>
    <id>https://www.fvolcano.red/2020/InfoManageSystem-webApplication-setUp-record/</id>
    <published>2020-08-16T07:23:11.000Z</published>
    <updated>2020-08-16T07:23:11.000Z</updated>
    
    <content type="html"><![CDATA[<p><img src="/2020/InfoManageSystem-webApplication-setUp-record/%E9%A1%B9%E7%9B%AE%E9%A6%96%E9%A1%B5.png"></p><p>ä»ä¸€ä»½JavaWebçš„ä½œä¸šå¼€å§‹ä¸æ–­æ”¹è¿›ã€‚æœ€ç»ˆæ•ˆæœï¼šå®ç°äº†è§’è‰²åˆ†å·¥ã€ä¿¡æ¯å¢åˆ æ”¹æŸ¥ã€html+cssç•Œé¢ï¼ŒSSMæ•´åˆã€‚åº”è¯¥æ˜¯æˆ‘ç¬¬ä¸€ä¸ªç”¨ä¸Šäº†SSMçš„é¡¹ç›®ï¼Œè¾¹å­¦è¾¹æ•´åˆã€‚<a id="more"></a></p><h1 id="é¡¹ç›®åˆæœŸ"><a href="#é¡¹ç›®åˆæœŸ" class="headerlink" title="é¡¹ç›®åˆæœŸ"></a>é¡¹ç›®åˆæœŸ</h1><p>åˆšå‡†å¤‡å¼€å§‹åšæ—¶çš„æ­å»ºè®¡åˆ’ï¼š</p><p><img src="/2020/InfoManageSystem-webApplication-setUp-record/%E6%80%BB%E4%BD%93%E8%AE%A1%E5%88%92.png" alt="æ€»ä½“è®¡åˆ’"></p><p>åšäº†å…«å¤©ï¼Œå…¶ä¸­æ•´åˆç•Œé¢ï¼ˆhtml+cssï¼‰å°±èŠ±äº†ä¸€ä¸¤å¤©ã€‚ä»å‰ç«¯ç½‘ç«™æ‰¾çš„é¡µé¢ï¼Œæ•´åˆè¿‡ç¨‹ä¸­é™¤äº†è®¸è®¸å¤šå¤šå°é—®é¢˜ï¼Œå› ä¸ºè‡ªå·±å¯¹äºcsså’Œhtmlä¹Ÿä¸æ˜¯å¾ˆç†Ÿæ‚‰ï¼Œåªå¤„äºçœ‹æ‡‚çš„æ°´å¹³ï¼Œæ‰€ä»¥å„ç§å¾®è°ƒèŠ±äº†ä¸å°‘æ—¶é—´ã€‚</p><p>å…¶ä¸­æ¯”è¾ƒå€¼å¾—è®°å½•çš„åº”è¯¥å°±æ˜¯æŠ½å–å‡ºæ¥çš„<strong>åˆ†é¡µåŠŸèƒ½</strong>ï¼šï¼ˆåé¢MyBatisçš„PageHelperå·²ç»èƒ½å¤Ÿå®ç°è¿™ä¸ªåŠŸèƒ½äº†ï¼‰</p><h3 id="åˆ†é¡µåŠŸèƒ½"><a href="#åˆ†é¡µåŠŸèƒ½" class="headerlink" title="åˆ†é¡µåŠŸèƒ½"></a>åˆ†é¡µåŠŸèƒ½</h3><p>æœªå®Œå¾…ç»­ã€‚</p><h1 id="SSMæ•´åˆ"><a href="#SSMæ•´åˆ" class="headerlink" title="SSMæ•´åˆ"></a>SSMæ•´åˆ</h1><h2 id="spring"><a href="#spring" class="headerlink" title="spring"></a>spring</h2><ol><li><p>ä½¿ç”¨IoCå®¹å™¨ç®¡ç†DataSourceå¯¹è±¡</p></li><li><p>ä¾èµ–æ³¨å…¥æ–¹å¼</p></li><li><p>@controlleræ³¨è§£ä¸tomcatç®¡ç†servletå†²çª</p><p>ï¼ˆè¿™æ—¶è¿˜æ²¡æœ‰å­¦SpringMVCï¼Œä»ç„¶ç”¨çš„servletã€‚ï¼‰å› æ­¤ä¹Ÿä¸èƒ½åŠ @Autowaredæ ‡ç­¾ã€‚è½¬è€Œåœ¨WebUtilsä¸­å®ç°ä»iocå®¹å™¨ä¸­è·å–beanå¯¹è±¡çš„æ–¹æ³•ã€‚</p></li><li><p>å¼€å¯äº‹åŠ¡</p></li></ol><h2 id="SpringMVC"><a href="#SpringMVC" class="headerlink" title="SpringMVC"></a>SpringMVC</h2><ol><li>è´Ÿè´£ç®¡ç†controllerå’Œè§†å›¾å±‚</li><li>é…ç½®ä¸­å¤®åˆ†å‘å™¨</li><li>æ”¹é€ æ‰€æœ‰serveltï¼Œä»¥Stringçš„å½¢å¼è¿”å›é¡µé¢</li></ol><h2 id="MyBatis"><a href="#MyBatis" class="headerlink" title="MyBatis"></a>MyBatis</h2><ol><li>å»é™¤DAOçš„å®ç°ç±»ï¼Œç›´æ¥ä¸ºDAOæ¥å£å†™ç›¸åº”çš„sqlè¯­å¥</li><li>åŠ¨æ€sqlå®ç°æ›´åŠ å¼ºå¤§çš„åŠŸèƒ½</li><li>æ•°æ®åº“å­—æ®µä¸JavaBeanå±æ€§çš„å¯¹åº”é—®é¢˜è§£å†³</li><li>MyBatisçš„ä»£ç ç”Ÿæˆå™¨</li><li>PageHelperå¸®åŠ©å®ç°åˆ†é¡µåŠŸèƒ½</li></ol><p><strong>æ€»ç»“ï¼š</strong></p><ol><li><p>é‡åˆ°çš„æœ€å¤§çš„é—®é¢˜ï¼Ÿ</p><p>å› ä¸ºè¿™ä¸ªé¡¹ç›®åŠŸèƒ½å¾ˆç®€å•ï¼Œè™½ç„¶ç»å¸¸ä¹Ÿä¼šé‡åˆ°é…ç½®é”™è¯¯ç­‰ç­‰å„ç§å°é—®é¢˜ï¼Œä½†ä¸Šç½‘æœç´¢åä¸€èˆ¬éƒ½èƒ½å¤Ÿè§£å†³ã€‚æ‰€ä»¥åœ¨å…¶ä¸­é‡åˆ°çš„æœ€å¤§çš„å›°éš¾åº”è¯¥å°±æ˜¯å¯¼åŒ…äº†ï¼Œæ²¡æœ‰MavençœŸçš„å¾ˆéš¾ï¼Œç‰¹åˆ«æ˜¯ä¸çŸ¥é“ä¾èµ–äº›ä»€ä¹ˆåŒ…ï¼Œå¯¼å…¥çš„è¿‡ç¨‹ä¸­å› ä¸ºç‰ˆæœ¬ç­‰åŸå› é”™è¯¯ä¸æ–­ã€‚</p></li><li><p>å¦‚ä½•è§£å†³è¿™ä¸ªé—®é¢˜çš„ï¼Ÿ</p><p>é¦–å…ˆä¸Šç½‘æœç´¢ï¼Œæ— æœåæ‰¾SSMçš„é¡¹ç›®è§†é¢‘ï¼Œçœ‹åˆ«äººå¯¼äº†ä¸€äº›ä»€ä¹ˆåŒ…ï¼Œä¹‹åå»æ‰¾åŒ…ã€‚</p></li><li><p>ç¬¬ä¸€æ¬¡ä½¿ç”¨SSMçš„æ„Ÿå—ï¼Ÿ</p><p>å› ä¸ºè¿™ä¸ªé¡¹ç›®ç¡®å®å¾ˆå°ï¼Œå¯¹äºè¿™ä¸‰ä¸ªæ¡†æ¶æä¾›çš„ä¾¿åˆ©æ€§å¹¶æ²¡æœ‰å¤ªæ·±çš„æ„Ÿå—ã€‚ä½†å¯¹äºä»–ä»¬æä¾›çš„åŠŸèƒ½æœ‰äº†åˆæ­¥çš„è®¤è¯†äº†ã€‚æ¯”å¦‚Springçš„IoCã€DIè‡ªåŠ¨æ³¨å…¥ã€åŠ¨æ€ä»£ç†å’ŒAOPæ€æƒ³ï¼›SpringMVCçš„ModelAndViewã€å‰ç«¯æ§åˆ¶å™¨ã€æ‹¦æˆªå™¨å’Œåç«¯éªŒè¯ã€ä¸Šä¼ ä¸‹è½½ï¼›MyBatisçš„ç®€åŒ–çš„DAOå¼€å‘ã€åŠ¨æ€sqlã€å»¶è¿ŸåŠ è½½å’Œç¼“å­˜æœºåˆ¶ç­‰ç­‰ã€‚</p></li></ol><h1 id="å±•ç¤ºæ•ˆæœ"><a href="#å±•ç¤ºæ•ˆæœ" class="headerlink" title="å±•ç¤ºæ•ˆæœ"></a>å±•ç¤ºæ•ˆæœ</h1><p><strong>ç®¡ç†å‘˜</strong>èº«ä»½ï¼š</p><p><img src="/2020/InfoManageSystem-webApplication-setUp-record/1.jpg" alt="ç™»å½•"></p><p><img src="/2020/InfoManageSystem-webApplication-setUp-record/2.jpg" alt="ç™»é™†å¤±è´¥"></p><p><img src="/2020/InfoManageSystem-webApplication-setUp-record/3.jpg" alt="ç™»é™†æˆåŠŸï¼Œè¿›å…¥ä¸»é¡µ"></p><p><img src="/2020/InfoManageSystem-webApplication-setUp-record/4.jpg" alt="ç‚¹å‡»è¯¾ç¨‹ä¿¡æ¯"></p><p><img src="/2020/InfoManageSystem-webApplication-setUp-record/5.jpg" alt="å®ç°åˆ†é¡µ"></p><p><img src="/2020/InfoManageSystem-webApplication-setUp-record/6.jpg" alt="ç‚¹å‡»æ·»åŠ è¯¾ç¨‹"></p><p><img src="/2020/InfoManageSystem-webApplication-setUp-record/7.jpg" alt="ç‚¹å‡»ä¿®æ”¹"></p><p><img src="/2020/InfoManageSystem-webApplication-setUp-record/8.jpg" alt="ç‚¹å‡»åˆ é™¤"></p><p><img src="/2020/InfoManageSystem-webApplication-setUp-record/9.jpg" alt="ç‚¹å‡»å­¦ç”Ÿä¿¡æ¯"></p><p><img src="/2020/InfoManageSystem-webApplication-setUp-record/10.jpg" alt="ä¿®æ”¹"></p><p><img src="/2020/InfoManageSystem-webApplication-setUp-record/11.jpg" alt="ç‚¹å‡»æŸ¥çœ‹æˆç»©"></p><p><img src="/2020/InfoManageSystem-webApplication-setUp-record/12.jpg" alt="ç‚¹å‡»æ·»åŠ å­¦ç”Ÿ"></p><p><img src="/2020/InfoManageSystem-webApplication-setUp-record/13.jpg" alt="ç‚¹å‡»æ•™å¸ˆä¿¡æ¯"></p><p><img src="/2020/InfoManageSystem-webApplication-setUp-record/14.jpg" alt="æ·»åŠ "></p><p><img src="/2020/InfoManageSystem-webApplication-setUp-record/15.jpg" alt="ç‚¹å‡»ä¿®æ”¹å¯†ç "></p><p><img src="/2020/InfoManageSystem-webApplication-setUp-record/16.jpg" alt="ä¿®æ”¹å¯†ç åè·³è‡³ç™»é™†ç•Œé¢"></p><p><img src="/2020/InfoManageSystem-webApplication-setUp-record/17.jpg" alt="é€€å‡ºåï¼ˆä¹‹å‰æœ‰é€‰æ‹©â€œè®°ä½æˆ‘â€ï¼‰"></p><p><img src="/2020/InfoManageSystem-webApplication-setUp-record/18.jpg" alt="æ³¨é”€ç™»å½•ä¿¡æ¯å"></p><p><strong>å­¦ç”Ÿ</strong>èº«ä»½ç™»å½•ï¼š</p><p><img src="/2020/InfoManageSystem-webApplication-setUp-record/19.jpg" alt="å­¦ç”Ÿä¸»é¡µ"></p><p><img src="/2020/InfoManageSystem-webApplication-setUp-record/20.jpg" alt="é€‰è¯¾"></p><p><img src="/2020/InfoManageSystem-webApplication-setUp-record/21.jpg" alt="æç¤ºä¿¡æ¯"></p><p><img src="/2020/InfoManageSystem-webApplication-setUp-record/22.jpg" alt="æç¤ºä¿¡æ¯"></p><p><img src="/2020/InfoManageSystem-webApplication-setUp-record/23.jpg" alt="ç‚¹å‡»æŸ¥çœ‹æˆç»©"></p><p>ï¼ˆå…¶ä½™åŠŸèƒ½ä¸ç®¡ç†å‘˜ç›¸åŒï¼‰</p><p><strong>æ•™å¸ˆ</strong>èº«ä»½ç™»å½•ï¼š<br> <img src="/2020/InfoManageSystem-webApplication-setUp-record/24.jpg" alt="æ•™å¸ˆä¸»é¡µ"></p><p><img src="/2020/InfoManageSystem-webApplication-setUp-record/25.jpg" alt="ç‚¹å‡»å½•å…¥æˆç»©"></p><p><img src="/2020/InfoManageSystem-webApplication-setUp-record/26.jpg" alt="é€‰æ‹©æŸä¸€å­¦ç”Ÿ"></p><p><img src="/2020/InfoManageSystem-webApplication-setUp-record/27.jpg" alt="ç‚¹å‡»å½•å…¥"></p><p><img src="/2020/InfoManageSystem-webApplication-setUp-record/28.jpg" alt="å½•å…¥å"></p><p>ï¼ˆå…¶ä½™åŠŸèƒ½ä¸ç®¡ç†å‘˜ç›¸åŒï¼‰</p><h1 id="é—®é¢˜è®°å½•"><a href="#é—®é¢˜è®°å½•" class="headerlink" title="é—®é¢˜è®°å½•"></a>é—®é¢˜è®°å½•</h1><h2 id="é¡¹ç›®è·¯å¾„é—®é¢˜"><a href="#é¡¹ç›®è·¯å¾„é—®é¢˜" class="headerlink" title="é¡¹ç›®è·¯å¾„é—®é¢˜"></a>é¡¹ç›®è·¯å¾„é—®é¢˜</h2><p>åœ¨Ideaä¸­ä¿®æ”¹Contextï¼ˆé¡¹ç›®ä¸Šä¸‹æ–‡è·¯å¾„ï¼‰æ¯”è¾ƒç®€å•ï¼Œåªéœ€è¦åœ¨Tomcatä¸­é…ç½®ä¸€ä¸‹å°±å¥½äº†ï¼›ä½†è½¬åˆ°eclipseåï¼Œéœ€è¦åœ¨server.xmlä¸­ä¿®æ”¹ã€‚</p><p>å°†pathä¿®æ”¹æˆä½ æƒ³è¦è®¿é—®çš„é¡¹ç›®æ ¹è·¯å¾„ã€‚</p><p>æŒ‰ä¸‹å›¾ä¿®æ”¹åï¼Œè®¿é—®è·¯å¾„å˜ä¸º <a href="http://localhost:8080/">http://localhost:8080/</a></p><p><img src="/2020/InfoManageSystem-webApplication-setUp-record/%E9%A1%B9%E7%9B%AE%E8%B7%AF%E5%BE%84%E4%BF%AE%E6%94%B9.png" alt="é¡¹ç›®è·¯å¾„ä¿®æ”¹"></p><h2 id="beanå¯¹è±¡æ— æ³•è‡ªåŠ¨æ³¨å…¥"><a href="#beanå¯¹è±¡æ— æ³•è‡ªåŠ¨æ³¨å…¥" class="headerlink" title="beanå¯¹è±¡æ— æ³•è‡ªåŠ¨æ³¨å…¥"></a>beanå¯¹è±¡æ— æ³•è‡ªåŠ¨æ³¨å…¥</h2><p>æˆ‘åœ¨æŸä¸€ä¸ªJavaBeanä¸­ä½¿ç”¨äº†@Autowiredæ³¨è§£ï¼Œå´æ²¡æœ‰å°†è¯¥ç±»åŠ å…¥iocå®¹å™¨ï¼Œè‡ªç„¶å°±æŠ¥ç©ºæŒ‡é’ˆå¼‚å¸¸äº†ã€‚</p>]]></content>
    
    
    <summary type="html">&lt;p&gt;&lt;img src=&quot;/2020/InfoManageSystem-webApplication-setUp-record/%E9%A1%B9%E7%9B%AE%E9%A6%96%E9%A1%B5.png&quot;&gt;&lt;/p&gt;
&lt;p&gt;ä»ä¸€ä»½JavaWebçš„ä½œä¸šå¼€å§‹ä¸æ–­æ”¹è¿›ã€‚æœ€ç»ˆæ•ˆæœï¼šå®ç°äº†è§’è‰²åˆ†å·¥ã€ä¿¡æ¯å¢åˆ æ”¹æŸ¥ã€html+cssç•Œé¢ï¼ŒSSMæ•´åˆã€‚åº”è¯¥æ˜¯æˆ‘ç¬¬ä¸€ä¸ªç”¨ä¸Šäº†SSMçš„é¡¹ç›®ï¼Œè¾¹å­¦è¾¹æ•´åˆã€‚&lt;/p&gt;</summary>
    
    
    
    <category term="SSM" scheme="https://www.fvolcano.red/categories/SSM/"/>
    
    <category term="JavaWeb" scheme="https://www.fvolcano.red/categories/JavaWeb/"/>
    
    
    <category term="é¡¹ç›®" scheme="https://www.fvolcano.red/tags/%E9%A1%B9%E7%9B%AE/"/>
    
    <category term="è®°å½•" scheme="https://www.fvolcano.red/tags/%E8%AE%B0%E5%BD%95/"/>
    
  </entry>
  
  <entry>
    <title>Hexo + GitHub Pages åšå®¢æ­å»ºè®°å½•</title>
    <link href="https://www.fvolcano.red/2020/hexo-githubPages-setUp-record/"/>
    <id>https://www.fvolcano.red/2020/hexo-githubPages-setUp-record/</id>
    <published>2020-08-15T12:57:26.000Z</published>
    <updated>2020-08-15T12:57:26.000Z</updated>
    
    <content type="html"><![CDATA[<p>å¾ˆæ—©å°±æœ‰å»ºä¸€ä¸ªè‡ªå·±çš„åšå®¢ç½‘ç«™çš„æƒ³æ³•äº†ï¼Œå¯èƒ½ä¹Ÿæ˜¯æƒ³å¯ä»¥å€’é€¼è‡ªå·±å¤šå†™ç‚¹ä¸œè¥¿å§ã€‚ä»å®‰è£…hexoå¼€å§‹ã€æ›´æ¢ä¸»é¢˜ã€æ·»åŠ åŠŸèƒ½å’Œç¬¬ä¸‰æ–¹æœåŠ¡ã€éƒ¨ç½²åˆ°github pagesä¸Šï¼Œä¸€æ­¥æ­¥å®Œå–„è‡ªå·±çš„åšå®¢ã€‚æœŸé—´è¸©åˆ°äº†æ•°ä¸æ¸…çš„å‘ï¼Œå†æ—¶ä¸€ä¸ªæœˆï¼Œç»ˆäºæŠŠåšå®¢çš„é›å½¢ç»™åšå‡ºæ¥äº†ã€‚    <a id="more"></a></p><h1 id="æ­å»ºæ¡†æ¶ä¸éƒ¨ç½²"><a href="#æ­å»ºæ¡†æ¶ä¸éƒ¨ç½²" class="headerlink" title="æ­å»ºæ¡†æ¶ä¸éƒ¨ç½²"></a>æ­å»ºæ¡†æ¶ä¸éƒ¨ç½²</h1><p>å‚è€ƒ <a href="https://www.bilibili.com/video/BV1Yb411a7ty?from=search&seid=2359438930998851478">æ‰‹æŠŠæ‰‹æ•™ä½ ä»0å¼€å§‹æ­å»ºè‡ªå·±çš„ä¸ªäººåšå®¢ |æ— å‘ç‰ˆè§†é¢‘æ•™ç¨‹| hexo</a>ã€‚</p><h1 id="Hexo-é…ç½®"><a href="#Hexo-é…ç½®" class="headerlink" title="Hexo é…ç½®"></a>Hexo é…ç½®</h1><h2 id="åˆ†ç±»æ–¹æ³•"><a href="#åˆ†ç±»æ–¹æ³•" class="headerlink" title="åˆ†ç±»æ–¹æ³•"></a>åˆ†ç±»æ–¹æ³•</h2><p>å‚è€ƒ <a href="https://hexo.io/zh-cn/docs/front-matter">hexoä¸­æ–‡æ–‡æ¡£</a>ã€‚</p><p>åœ¨å…¶ä»–ç³»ç»Ÿä¸­ï¼Œåˆ†ç±»å’Œæ ‡ç­¾å¬èµ·æ¥å¾ˆæ¥è¿‘ï¼Œä½†æ˜¯åœ¨ Hexo ä¸­ä¸¤è€…æœ‰ç€æ˜æ˜¾çš„å·®åˆ«ï¼šåˆ†ç±»å…·æœ‰é¡ºåºæ€§å’Œå±‚æ¬¡æ€§ï¼Œä¹Ÿå°±æ˜¯è¯´ <code>Foo, Bar</code> ä¸ç­‰äº <code>Bar, Foo</code>ï¼›è€Œæ ‡ç­¾æ²¡æœ‰é¡ºåºå’Œå±‚æ¬¡ã€‚</p><p>WordPress æ”¯æŒå¯¹ä¸€ç¯‡æ–‡ç« è®¾ç½®å¤šä¸ªåˆ†ç±»ï¼Œè€Œä¸”è¿™äº›åˆ†ç±»å¯ä»¥æ˜¯åŒçº§çš„ï¼Œä¹Ÿå¯ä»¥æ˜¯çˆ¶å­åˆ†ç±»ã€‚ä½†æ˜¯ Hexo ä¸æ”¯æŒæŒ‡å®šå¤šä¸ªåŒçº§åˆ†ç±»ã€‚ä¸‹é¢çš„æŒ‡å®šæ–¹æ³•ï¼š</p><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">categories:</span><br><span class="line"><span class="bullet">  -</span> Diary</span><br><span class="line"><span class="bullet">  -</span> Life</span><br></pre></td></tr></table></figure><p>ä¼šä½¿åˆ†ç±»<code>Life</code>æˆä¸º<code>Diary</code>çš„å­åˆ†ç±»ï¼Œè€Œä¸æ˜¯å¹¶åˆ—åˆ†ç±»ã€‚å› æ­¤ï¼Œæœ‰å¿…è¦ä¸ºæ‚¨çš„æ–‡ç« é€‰æ‹©å°½å¯èƒ½å‡†ç¡®çš„åˆ†ç±»ã€‚</p><p>å¦‚æœä½ éœ€è¦ä¸ºæ–‡ç« æ·»åŠ å¤šä¸ªåˆ†ç±»ï¼Œå¯ä»¥å°è¯•ä»¥ä¸‹ list ä¸­çš„æ–¹æ³•ã€‚</p><figure class="highlight asciidoc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">categories:</span><br><span class="line"><span class="bullet">- </span>[Diary, PlayStation]</span><br><span class="line"><span class="bullet">- </span>[Diary, Games]</span><br><span class="line"><span class="bullet">- </span>[Life]</span><br></pre></td></tr></table></figure><p>æ­¤æ—¶è¿™ç¯‡æ–‡ç« åŒæ—¶åŒ…æ‹¬ä¸‰ä¸ªåˆ†ç±»ï¼š <code>PlayStation</code> å’Œ <code>Games</code> åˆ†åˆ«éƒ½æ˜¯çˆ¶åˆ†ç±» <code>Diary</code> çš„å­åˆ†ç±»ï¼ŒåŒæ—¶ <code>Life</code> æ˜¯ä¸€ä¸ªæ²¡æœ‰å­åˆ†ç±»çš„åˆ†ç±»ã€‚</p><h2 id="ç›¸å¯¹è·¯å¾„å¼•ç”¨çš„æ ‡ç­¾"><a href="#ç›¸å¯¹è·¯å¾„å¼•ç”¨çš„æ ‡ç­¾" class="headerlink" title="ç›¸å¯¹è·¯å¾„å¼•ç”¨çš„æ ‡ç­¾"></a>ç›¸å¯¹è·¯å¾„å¼•ç”¨çš„æ ‡ç­¾</h2><p>é€šè¿‡å¸¸è§„çš„ markdown è¯­æ³•å’Œç›¸å¯¹è·¯å¾„æ¥å¼•ç”¨å›¾ç‰‡å’Œå…¶å®ƒèµ„æºå¯èƒ½ä¼šå¯¼è‡´å®ƒä»¬åœ¨å­˜æ¡£é¡µæˆ–è€…ä¸»é¡µä¸Šæ˜¾ç¤ºä¸æ­£ç¡®ã€‚</p><p>æ­£ç¡®çš„å¼•ç”¨å›¾ç‰‡æ–¹å¼æ˜¯ä½¿ç”¨ä¸‹åˆ—çš„æ ‡ç­¾æ’ä»¶è€Œä¸æ˜¯ markdown ï¼š</p><figure class="highlight maxima"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&#123;<span class="symbol">%</span> asset_img <span class="built_in">example</span>.jpg This <span class="built_in">is</span> an <span class="built_in">example</span> <span class="built_in">image</span> <span class="symbol">%</span>&#125;</span><br></pre></td></tr></table></figure><p>é€šè¿‡è¿™ç§æ–¹å¼ï¼Œå›¾ç‰‡å°†ä¼šåŒæ—¶å‡ºç°åœ¨æ–‡ç« å’Œä¸»é¡µä»¥åŠå½’æ¡£é¡µä¸­ã€‚</p><h2 id="URL-ä¸­çš„åˆ†ç±»å’Œæ ‡ç­¾ã€Œç¿»è¯‘ã€æˆè‹±æ–‡"><a href="#URL-ä¸­çš„åˆ†ç±»å’Œæ ‡ç­¾ã€Œç¿»è¯‘ã€æˆè‹±æ–‡" class="headerlink" title="URL ä¸­çš„åˆ†ç±»å’Œæ ‡ç­¾ã€Œç¿»è¯‘ã€æˆè‹±æ–‡"></a>URL ä¸­çš„åˆ†ç±»å’Œæ ‡ç­¾ã€Œç¿»è¯‘ã€æˆè‹±æ–‡</h2><p>å‚è€ƒ <a href="https://github.com/hexojs/hexo/issues/1162">hexo issues</a>ã€‚</p><p>åœ¨<code>_config.yml</code>çš„<code># Category &amp; Tag</code>ä¸€é¡¹ä¸‹é¢çš„<code>tag_map</code>å’Œ<code>category_map</code>ä¸‹é¢è¿™æ ·é…ç½®</p><figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Category &amp; Tag</span></span><br><span class="line"><span class="attr">default_category:</span> <span class="string">uncategorized</span></span><br><span class="line"><span class="attr">category_map:</span></span><br><span class="line">    <span class="string">Linuxæ“ä½œç³»ç»Ÿ:</span> <span class="string">Linux-OS</span></span><br><span class="line">    <span class="string">ä¸­æ–‡åˆ†ç±»:</span> <span class="string">è‹±æ–‡åˆ†ç±»</span></span><br><span class="line"><span class="attr">tag_map:</span></span><br><span class="line">    <span class="string">ä¸­æ–‡æ ‡ç­¾:</span> <span class="string">è‹±æ–‡æ ‡ç­¾</span></span><br></pre></td></tr></table></figure><h2 id="æ·»åŠ ç½‘ç«™å›¾æ ‡"><a href="#æ·»åŠ ç½‘ç«™å›¾æ ‡" class="headerlink" title="æ·»åŠ ç½‘ç«™å›¾æ ‡"></a>æ·»åŠ ç½‘ç«™å›¾æ ‡</h2><ol><li><p>é€‰æ‹©å¥½è‡ªå·±çš„å›¾æ ‡ï¼Œæ²¡æœ‰çš„è¯å¯ä»¥å» <a href="https://www.iconfont.cn/">é˜¿é‡Œå·´å·´çŸ¢é‡å›¾æ ‡åº“</a> æŒ‘ä¸€ä¸ªã€‚</p></li><li><p>å°†ä¸‹è½½çš„å›¾ç‰‡åœ¨ <a href="https://www.websiteplanet.com/zh-hans/webtools/favicon-generator/">ç½‘ç«™å›¾æ ‡ç”Ÿæˆ</a> ä¸Šè½¬æ¢æ ¼å¼ã€‚</p></li><li><p>æŠŠå®ƒæ”¾å…¥ä¸»é¢˜æ–‡ä»¶å¤¹ä¸‹é¢çš„ source/images/ ä¸‹é¢</p></li><li><p>åœ¨ä¸»é¢˜é…ç½®æ–‡ä»¶ä¸­ä¿®æ”¹</p></li></ol><p><img src="/2020/hexo-githubPages-setUp-record/Snipaste_2020-08-24_20-22-36.png" alt="ä¿®æ”¹faviconé…ç½®"></p><h2 id="æ›´æ”¹æ–‡ç« urlä¸ºè‹±æ–‡"><a href="#æ›´æ”¹æ–‡ç« urlä¸ºè‹±æ–‡" class="headerlink" title="æ›´æ”¹æ–‡ç« urlä¸ºè‹±æ–‡"></a>æ›´æ”¹æ–‡ç« urlä¸ºè‹±æ–‡</h2><p>åœ¨ç«™ç‚¹çš„<code>_config.yml</code>ä¸­ï¼Œç”Ÿæˆçš„æ–‡ç« é“¾æ¥é»˜è®¤ä¸ºï¼š</p><figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">permalink:</span> <span class="string">:year/:month/:day/:title/</span></span><br><span class="line"><span class="attr">permalink_defaults:</span></span><br></pre></td></tr></table></figure><ol><li><p>å°†<code>/:title/</code>æ›¿æ¢ä¸º<code>/:urlname/</code></p></li><li><p>æ›´æ”¹<code>permalink_defaults</code></p></li></ol><figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">permalink_defaults:</span></span><br><span class="line">  <span class="attr">urlname:</span> <span class="string">index</span></span><br></pre></td></tr></table></figure><ol start="3"><li>ä¹‹åå†™æ–‡ç« æ—¶åœ¨font-matterå¤„åŠ ä¸Š<code>urlname: XXX</code>å°±å¯ä»¥äº†</li></ol><p><img src="/2020/hexo-githubPages-setUp-record/Snipaste_2020-09-06_10-31-34.png" alt="urlname"></p><p>è¿˜å¯ä»¥åœ¨<code>scaffolds/post.md</code>é‡Œé…ä¸Šè¿™ä¸ªå­—æ®µ</p><p><img src="/2020/hexo-githubPages-setUp-record/Snipaste_2020-09-06_10-33-53.png" alt="æ·»åŠ åˆ›å»ºæ¨¡æ¿å­—æ®µ"></p><p>è¿™æ ·ï¼Œä»¥å<code>hexo n post &quot;&quot;</code>çš„æ—¶å€™å°±è‡ªåŠ¨å‡ºç°åœ¨font-matteré‡Œé¢äº†ã€‚</p><p><code>ï¼</code>æ³¨æ„ï¼šä»¥å‰çš„æ–‡ç« ä¹Ÿéœ€è¦åŠ ä¸Šurlnameå­—æ®µï¼Œå†…å®¹ä¸æ–‡ç« æ ‡é¢˜ä¿æŒä¸€è‡´ï¼Œå¦åˆ™å°±æ‰¾ä¸åˆ°äº†å™¢ã€‚ï¼ˆæˆ–è€…ä½ ä¹Ÿå¯ä»¥é€‰æ‹©å…¨éƒ¨é‡å»ºï¼‰</p><h1 id="æ·»åŠ å°åŠŸèƒ½"><a href="#æ·»åŠ å°åŠŸèƒ½" class="headerlink" title="æ·»åŠ å°åŠŸèƒ½"></a>æ·»åŠ å°åŠŸèƒ½</h1><h2 id="æ·»åŠ æ–‡ç« æ—¶è‡ªåŠ¨æ‰“å¼€ç¼–è¾‘å™¨"><a href="#æ·»åŠ æ–‡ç« æ—¶è‡ªåŠ¨æ‰“å¼€ç¼–è¾‘å™¨" class="headerlink" title="æ·»åŠ æ–‡ç« æ—¶è‡ªåŠ¨æ‰“å¼€ç¼–è¾‘å™¨"></a>æ·»åŠ æ–‡ç« æ—¶è‡ªåŠ¨æ‰“å¼€ç¼–è¾‘å™¨</h2><p>å‚è€ƒ <a href="%5Bhttps://notes.doublemine.me/2015-06-29-Hexo%E6%B7%BB%E5%8A%A0%E6%96%87%E7%AB%A0%E6%97%B6%E8%87%AA%E5%8A%A8%E6%89%93%E5%BC%80%E7%BC%96%E8%BE%91%E5%99%A8.html%5D(https://notes.doublemine.me/2015-06-29-Hexo%E6%B7%BB%E5%8A%A0%E6%96%87%E7%AB%A0%E6%97%B6%E8%87%AA%E5%8A%A8%E6%89%93%E5%BC%80%E7%BC%96%E8%BE%91%E5%99%A8.html)">Hexo æ·»åŠ æ–‡ç« æ—¶è‡ªåŠ¨æ‰“å¼€ç¼–è¾‘å™¨ - Doublemine</a> ã€‚ä»¥ä¸‹ä¸ºåšå®¢å†…å®¹ï¼š</p><ul><li>é¦–å…ˆåœ¨Hexoç›®å½•ä¸‹çš„<code>scripts</code>ç›®å½•ä¸­åˆ›å»ºä¸€ä¸ªJavaScriptè„šæœ¬æ–‡ä»¶ã€‚</li><li>å¦‚æœæ²¡æœ‰è¿™ä¸ª<code>scripts</code>ç›®å½•ï¼Œåˆ™æ–°å»ºä¸€ä¸ªã€‚</li><li><code>scripts</code>ç›®å½•æ–°å»ºçš„JavaScriptè„šæœ¬æ–‡ä»¶å¯ä»¥ä»»æ„å–åã€‚</li></ul><p>é€šè¿‡è¿™ä¸ªè„šæœ¬ï¼Œæˆ‘ä»¬ç”¨å…¶æ¥ç›‘å¬<code>hexo new</code>è¿™ä¸ªåŠ¨ä½œï¼Œå¹¶åœ¨æ£€æµ‹åˆ°<code>hexo new</code>ä¹‹åï¼Œæ‰§è¡Œç¼–è¾‘å™¨æ‰“å¼€çš„å‘½ä»¤ã€‚</p><p>å¦‚æœä½ æ˜¯windowså¹³å°çš„Hexoç”¨æˆ·ï¼Œåˆ™å°†ä¸‹åˆ—å†…å®¹å†™å…¥ä½ çš„è„šæœ¬ï¼š</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> spawn = <span class="built_in">require</span>(<span class="string">&#x27;child_process&#x27;</span>).exec;</span><br><span class="line"></span><br><span class="line"><span class="comment">// Hexo 2.x ç”¨æˆ·å¤åˆ¶è¿™æ®µ</span></span><br><span class="line">hexo.on(<span class="string">&#x27;new&#x27;</span>, <span class="function"><span class="keyword">function</span>(<span class="params">path</span>)</span>&#123;</span><br><span class="line">  spawn(<span class="string">&#x27;start  &quot;markdownç¼–è¾‘å™¨ç»å¯¹è·¯å¾„.exe&quot; &#x27;</span> + path);</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="comment">// Hexo 3 ç”¨æˆ·å¤åˆ¶è¿™æ®µ</span></span><br><span class="line">hexo.on(<span class="string">&#x27;new&#x27;</span>, <span class="function"><span class="keyword">function</span>(<span class="params">data</span>)</span>&#123;</span><br><span class="line">  spawn(<span class="string">&#x27;start  &quot;markdownç¼–è¾‘å™¨ç»å¯¹è·¯å¾„.exe&quot; &#x27;</span> + data.path);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><p>å¦‚æœä½ æ˜¯Macå¹³å°Hexoç”¨æˆ·ï¼Œåˆ™å°†ä¸‹åˆ—å†…å®¹å†™å…¥ä½ çš„è„šæœ¬ï¼š</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> exec = <span class="built_in">require</span>(<span class="string">&#x27;child_process&#x27;</span>).exec;</span><br><span class="line"></span><br><span class="line"><span class="comment">// Hexo 2.x ç”¨æˆ·å¤åˆ¶è¿™æ®µ</span></span><br><span class="line">hexo.on(<span class="string">&#x27;new&#x27;</span>, <span class="function"><span class="keyword">function</span>(<span class="params">path</span>)</span>&#123;</span><br><span class="line">    exec(<span class="string">&#x27;open -a &quot;markdownç¼–è¾‘å™¨ç»å¯¹è·¯å¾„.app&quot; &#x27;</span> + path);</span><br><span class="line">&#125;);</span><br><span class="line"><span class="comment">// Hexo 3 ç”¨æˆ·å¤åˆ¶è¿™æ®µ</span></span><br><span class="line">hexo.on(<span class="string">&#x27;new&#x27;</span>, <span class="function"><span class="keyword">function</span>(<span class="params">data</span>)</span>&#123;</span><br><span class="line">    exec(<span class="string">&#x27;open -a &quot;markdownç¼–è¾‘å™¨ç»å¯¹è·¯å¾„.app&quot; &#x27;</span> + data.path);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><p>ä¿å­˜å¹¶é€€å‡ºè„šæœ¬ä¹‹åï¼Œåœ¨å‘½ä»¤è¡Œä¸­é”®å…¥ï¼š   </p><figure class="highlight cmd"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">hexo new &quot;auto open editor test&quot;</span><br></pre></td></tr></table></figure><p>å°±å¯ä»¥æ‰“å¼€ç¼–è¾‘å™¨äº†ã€‚</p><h2 id="ä¸»åŠ¨æ¨é€Hexoåšå®¢æ–°é“¾æ¥è‡³æœç´¢å¹³å°"><a href="#ä¸»åŠ¨æ¨é€Hexoåšå®¢æ–°é“¾æ¥è‡³æœç´¢å¹³å°" class="headerlink" title="ä¸»åŠ¨æ¨é€Hexoåšå®¢æ–°é“¾æ¥è‡³æœç´¢å¹³å°"></a>ä¸»åŠ¨æ¨é€Hexoåšå®¢æ–°é“¾æ¥è‡³æœç´¢å¹³å°</h2><p>ä½¿ç”¨æ’ä»¶ hexo-submit-urls-to-search-engine ï¼ŒæŸ¥çœ‹ <a href="https://cjh0613.com/20200603HexoSubmitUrlsToSearchEngine.html">ä¸­æ–‡æ–‡æ¡£</a>ã€‚</p><p>é¦–å…ˆæ˜ç¡®</p><p>1ï¼‰ç«™ç‚¹é…ç½®æ–‡ä»¶ï¼Œä½äºç«™ç‚¹æ–‡ä»¶å¤¹æ ¹ç›®å½•å†…<code>~/blog/_config.yml</code></p><p>2ï¼‰ä¸»é¢˜é…ç½®æ–‡ä»¶ï¼Œä½äºä¸»é¢˜æ–‡ä»¶å¤¹æ ¹ç›®å½•å†…<code>~/blog/themes/next/_config.yml</code></p><h2 id="è„šæ³¨"><a href="#è„šæ³¨" class="headerlink" title="è„šæ³¨"></a>è„šæ³¨</h2><p>æœ‰ä¸¤ä¸ªæ’ä»¶æˆ‘æ¯”è¾ƒå–œæ¬¢ï¼Œä¸€ä¸ªå¯ä»¥<a href="https://github.com/kchen0x/hexo-reference">æ‚¬æµ®æ˜¾ç¤º</a>ï¼Œä¸€ä¸ªæ¯”è¾ƒ<a href="https://github.com/LouisBarranqueiro/hexo-footnotes">ç®€æ´</a> ã€‚</p><p><img src="/2020/hexo-githubPages-setUp-record/Snipaste_2020-08-20_16-18-02.png" alt="hexoä¸¤ä¸ªè„šæ³¨æ’ä»¶"><img src="/2020/hexo-githubPages-setUp-record/Snipaste_2020-08-20_16-18-11.png" alt="æ‚¬æµ®æ˜¾ç¤º" style="zoom:50%;"></p><p><strong>Markdown</strong> è¯­æ³•</p><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">basic footnote[^1]</span><br><span class="line">here is an inline footnote[<span class="string">^2</span>](<span class="link">inline footnote</span>)</span><br><span class="line">and another one[^3]</span><br><span class="line">and another one[^4]</span><br><span class="line"></span><br><span class="line">[<span class="symbol">^1</span>]: <span class="link">basic footnote content</span></span><br><span class="line">[<span class="symbol">^3</span>]: <span class="link">paragraph</span></span><br><span class="line">footnote</span><br><span class="line">content</span><br><span class="line">[<span class="string">^4</span>]: footnote content with some [<span class="string">markdown</span>](<span class="link">https://en.wikipedia.org/wiki/Markdown</span>)</span><br></pre></td></tr></table></figure><h2 id="æ·»åŠ è¯„è®ºç³»ç»Ÿ"><a href="#æ·»åŠ è¯„è®ºç³»ç»Ÿ" class="headerlink" title="æ·»åŠ è¯„è®ºç³»ç»Ÿ"></a>æ·»åŠ è¯„è®ºç³»ç»Ÿ</h2><p><a href="https://www.jianshu.com/p/3e200908b9fc">å„ç§è¯„è®ºç³»ç»Ÿçš„æ¯”è¾ƒ</a> ï¼Œæˆ‘ä½¿ç”¨çš„æ˜¯ valineã€‚æ”¯æŒMarkdownï¼Œé‡ç‚¹æ˜¯å¥½çœ‹ï¼</p><p>å‚è€ƒ <a href="%5Bhttps://qianfanguojin.github.io/2019/07/23/Hexo%E5%8D%9A%E5%AE%A2%E8%BF%9B%E9%98%B6%EF%BC%9A%E4%B8%BANext%E4%B8%BB%E9%A2%98%E6%B7%BB%E5%8A%A0Valine%E8%AF%84%E8%AE%BA%E7%B3%BB%E7%BB%9F/%5D(https://qianfanguojin.github.io/2019/07/23/Hexo%E5%8D%9A%E5%AE%A2%E8%BF%9B%E9%98%B6%EF%BC%9A%E4%B8%BANext%E4%B8%BB%E9%A2%98%E6%B7%BB%E5%8A%A0Valine%E8%AF%84%E8%AE%BA%E7%B3%BB%E7%BB%9F/)">ä¸ºNextä¸»é¢˜æ·»åŠ Valineè¯„è®ºç³»ç»Ÿ</a> ã€‚</p><p>æˆ‘è¿™é‡Œè¸©äº†ä¸€ä¸ªå‘ï¼Œä¹‹å‰åœ¨LeanCloudä¸Šæ“ä½œè¿‡ï¼Œä¸çŸ¥é“æ˜¯è®¾ç½®äº†äº›ä»€ä¹ˆè´¦å·å‡ºäº†é—®é¢˜ï¼Œä¹‹åæˆ‘æ¢äº†ä¸€ä¸ªèŠ‚ç‚¹é‡æ–°æ–°å»ºä¸€ä¸ªé¡¹ç›®ï¼Œå¡«å…¥æ–°çš„appIdå’ŒappKeyåå°±å¥½äº†ã€‚</p><h1 id="ä¸»é¢˜ç¾åŒ–"><a href="#ä¸»é¢˜ç¾åŒ–" class="headerlink" title="ä¸»é¢˜ç¾åŒ–"></a>ä¸»é¢˜ç¾åŒ–</h1><h2 id="é¼ æ ‡ç‚¹å‡»ç‰¹æ•ˆ"><a href="#é¼ æ ‡ç‚¹å‡»ç‰¹æ•ˆ" class="headerlink" title="é¼ æ ‡ç‚¹å‡»ç‰¹æ•ˆ"></a>é¼ æ ‡ç‚¹å‡»ç‰¹æ•ˆ</h2><p>æ‰’è‡ª <a href="http://yearito.cn/posts/hexo-theme-beautify.html">Hexo æ­å»ºä¸ªäººåšå®¢ç³»åˆ—ï¼šä¸»é¢˜ç¾åŒ–ç¯‡</a> ã€‚</p><p>ä»¥ä¸‹ä¸ºå››ä¸ªæ¯”è¾ƒå¸¸ç”¨çš„é¼ æ ‡ç‚¹å‡»ç‰¹æ•ˆï¼š</p><ul><li><a href="http://yearito.cn/posts/hexo-theme-beautify.html#%E9%BC%A0%E6%A0%87%E7%82%B9%E5%87%BB%E7%89%B9%E6%95%88-1">ç¤¼èŠ±ç‰¹æ•ˆ</a></li><li><a href="http://yearito.cn/posts/hexo-theme-beautify.html#%E9%BC%A0%E6%A0%87%E7%82%B9%E5%87%BB%E7%89%B9%E6%95%88-2">çˆ†ç‚¸ç‰¹æ•ˆ</a></li><li><a href="http://yearito.cn/posts/hexo-theme-beautify.html#%E9%BC%A0%E6%A0%87%E7%82%B9%E5%87%BB%E7%89%B9%E6%95%88-3">æµ®å‡ºçˆ±å¿ƒ</a></li><li><a href="http://yearito.cn/posts/hexo-theme-beautify.html#%E9%BC%A0%E6%A0%87%E7%82%B9%E5%87%BB%E7%89%B9%E6%95%88-4">æµ®å‡ºæ–‡å­—</a></li></ul><p><a href="http://yearito-1256884783.image.myqcloud.com/hexo-theme-beautify/cursor-fireworks.gif"><img src="http://yearito-1256884783.image.myqcloud.com/hexo-theme-beautify/cursor-fireworks.gif" alt="img" style="zoom:50%; display:inline;"></a>   <a href="http://yearito-1256884783.image.myqcloud.com/hexo-theme-beautify/cursor-explosion.gif"> <img src="http://yearito-1256884783.image.myqcloud.com/hexo-theme-beautify/cursor-explosion.gif" alt="img" style="zoom:50%; display:inline;"></a>   </p><p>ç‚¹å‡»ä¸‹æ–¹é“¾æ¥ä¸‹è½½ç›¸åº”çš„è„šæœ¬ï¼Œå¹¶ç½®äº themes\next\source\js\cursor\ ç›®å½•ä¸‹ï¼š</p><p><a href="https://script-1256884783.file.myqcloud.com/cursor/fireworks.js">ç¤¼èŠ±ç‰¹æ•ˆ</a>                  <a href="https://script-1256884783.file.myqcloud.com/cursor/explosion.min.js">çˆ†ç‚¸ç‰¹æ•ˆ</a>                   <a href="https://script-1256884783.file.myqcloud.com/cursor/love.min.js">æµ®å‡ºçˆ±å¿ƒ</a>                  <a href="https://script-1256884783.file.myqcloud.com/cursor/text.js">æµ®å‡ºæ–‡å­—</a></p><p>åœ¨ä¸»é¢˜è‡ªå®šä¹‰å¸ƒå±€æ–‡ä»¶ä¸­æ·»åŠ ä»¥ä¸‹ä»£ç ï¼š</p><p>themes\next\layout_custom\custom.swig</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">&#123;# é¼ æ ‡ç‚¹å‡»ç‰¹æ•ˆ #&#125;</span><br><span class="line">&#123;% if theme.cursor_effect &#x3D;&#x3D; &quot;fireworks&quot; %&#125;</span><br><span class="line">  &lt;script async src&#x3D;&quot;&#x2F;js&#x2F;cursor&#x2F;fireworks.js&quot;&gt;&lt;&#x2F;script&gt;</span><br><span class="line">&#123;% elseif theme.cursor_effect &#x3D;&#x3D; &quot;explosion&quot; %&#125;</span><br><span class="line">  &lt;canvas class&#x3D;&quot;fireworks&quot; style&#x3D;&quot;position: fixed;left: 0;top: 0;z-index: 1; pointer-events: none;&quot; &gt;&lt;&#x2F;canvas&gt;</span><br><span class="line">  &lt;script src&#x3D;&quot;&#x2F;&#x2F;cdn.bootcss.com&#x2F;animejs&#x2F;2.2.0&#x2F;anime.min.js&quot;&gt;&lt;&#x2F;script&gt;</span><br><span class="line">  &lt;script async src&#x3D;&quot;&#x2F;js&#x2F;cursor&#x2F;explosion.min.js&quot;&gt;&lt;&#x2F;script&gt;</span><br><span class="line">&#123;% elseif theme.cursor_effect &#x3D;&#x3D; &quot;love&quot; %&#125;</span><br><span class="line">  &lt;script async src&#x3D;&quot;&#x2F;js&#x2F;cursor&#x2F;love.min.js&quot;&gt;&lt;&#x2F;script&gt;</span><br><span class="line">&#123;% elseif theme.cursor_effect &#x3D;&#x3D; &quot;text&quot; %&#125;</span><br><span class="line">  &lt;script async src&#x3D;&quot;&#x2F;js&#x2F;cursor&#x2F;text.js&quot;&gt;&lt;&#x2F;script&gt;</span><br><span class="line">&#123;% endif %&#125;</span><br></pre></td></tr></table></figure><p>å¦‚æœ custom.swig æ–‡ä»¶ä¸å­˜åœ¨ï¼Œéœ€è¦æ‰‹åŠ¨æ–°å»ºå¹¶åœ¨å¸ƒå±€é¡µé¢ä¸­ body æœ«å°¾å¼•å…¥ï¼š</p><p>themes\next\layout_layout.swig</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">            ...</span><br><span class="line">      &#123;% include &#39;_third-party&#x2F;exturl.swig&#39; %&#125;</span><br><span class="line">      &#123;% include &#39;_third-party&#x2F;bookmark.swig&#39; %&#125;</span><br><span class="line">      &#123;% include &#39;_third-party&#x2F;copy-code.swig&#39; %&#125;</span><br><span class="line"></span><br><span class="line">+     &#123;% include &#39;_custom&#x2F;custom.swig&#39; %&#125;</span><br><span class="line">    &lt;&#x2F;body&gt;</span><br><span class="line">  &lt;&#x2F;html&gt;</span><br></pre></td></tr></table></figure><p>åœ¨ä¸»é¢˜é…ç½®æ–‡ä»¶ä¸­æ·»åŠ ä»¥ä¸‹ä»£ç ï¼š</p><p>themes\next_config.yml</p><figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># mouse click effect: fireworks | explosion | love | text</span></span><br><span class="line"><span class="attr">cursor_effect:</span> <span class="string">fireworks</span></span><br></pre></td></tr></table></figure><p>è¿™æ ·å³å¯åœ¨é…ç½®æ–‡ä»¶ä¸­ä¸€é”®å¿«é€Ÿåˆ‡æ¢é¼ æ ‡ç‚¹å‡»ç‰¹æ•ˆã€‚</p><p>å¦‚æœä»æœ¬åœ°åŠ è½½ JS è„šæœ¬é€Ÿåº¦è¾ƒæ…¢ï¼Œå¯ä»¥è€ƒè™‘å°†è„šæœ¬æ”¾åˆ° CDN ä¸Šå†å¼•å…¥ã€‚</p><h1 id="é—®é¢˜è®°å½•"><a href="#é—®é¢˜è®°å½•" class="headerlink" title="é—®é¢˜è®°å½•"></a>é—®é¢˜è®°å½•</h1><h2 id="å®‰è£…ç½®é¡¶æ’ä»¶"><a href="#å®‰è£…ç½®é¡¶æ’ä»¶" class="headerlink" title="å®‰è£…ç½®é¡¶æ’ä»¶"></a>å®‰è£…ç½®é¡¶æ’ä»¶</h2><p>æ›¿æ¢ç»™æ–‡ç« æ’åºç´¢å¼•çš„åŸæœ‰æ’ä»¶ hexo-generator-indexä¸ºhexo-generator-indexed</p><figure class="highlight fortran"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm uni hexo-generator-<span class="built_in">index</span> --<span class="keyword">save</span> &amp;&amp; npm i hexo-generator-indexed --<span class="keyword">save</span></span><br></pre></td></tr></table></figure><p>æŠ¥é”™ï¼š</p><p><img src="/2020/hexo-githubPages-setUp-record/image-20200817162704023.png" alt="æŠ¥é”™ä¿¡æ¯"></p><p>è§£å†³æ–¹æ¡ˆï¼š</p><p>1.fseventsä¸åœ¨package.jsoné‡Œï¼Œä½†æ˜¯ä»ç„¶å®‰è£…äº†ã€‚æˆ‘çš„ç³»ç»Ÿæ˜¯Windowsç³»ç»Ÿï¼Œfseventsæ˜¯darwinçš„å¯é€‰ä¾èµ–ã€‚åšå®¢ä¸»äººåœ¨é‡Œé¢å®‰è£…äº†fseventsç›¸å…³ä¾èµ–åº“ï¼Œæ‰€ä»¥åˆ°è¿™è¾¹ä¹Ÿå°±å®‰è£…åˆ°æˆ‘çš„windowsä¸Šäº†ã€‚â€œæ£€æŸ¥ä½ çš„package.json æ–‡ä»¶ä¸­æ˜¯ä¸æ˜¯æœ‰fseventsç›¸å…³ä¾èµ–ï¼Œåˆ é™¤å³å¥½ã€‚â€ä½†æˆ‘çš„package.jsonæ–‡ä»¶ä¸­å¹¶æ²¡æœ‰ï¼Œæ‰€ä»¥é‡‡å–äº†ç¬¬äºŒç§æ–¹æ¡ˆã€‚</p><p>2.åœ¨package.jsonä¸­åŠ å…¥ä¸‹é¢ä»£ç ï¼Œå°†fseventsä¾èµ–å˜ä¸ºå¯é€‰çš„ã€‚</p><figure class="highlight 1c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">&quot;optionalDependencies&quot;</span>: &#123;</span><br><span class="line"><span class="string">&quot;fsevents&quot;</span>: <span class="string">&quot;*&quot;</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>è¿™ä¸€æ­¥ä¸­æ®è¯´æœ‰ä¸€ä¸ªå‘ï¼Œâ€œéœ€è¦åˆ é™¤package_lock.json,å¦åˆ™æ ‡è®°ä¼šå¤±æ•ˆï¼Œæ‰€æœ‰ä¾èµ–éƒ½å°†è¢«å®‰è£…ã€‚â€</p><p>â€œIâ€™m seeing this today with npm 5.3.0. npm install â€“no-optional works IIF a package-lock.json does not exist. If the package-lock.json file exists, then the flag is ignored and all dependencies get installed.â€</p><h2 id="ç”Ÿæˆé™æ€æ–‡ä»¶é”™è¯¯"><a href="#ç”Ÿæˆé™æ€æ–‡ä»¶é”™è¯¯" class="headerlink" title="ç”Ÿæˆé™æ€æ–‡ä»¶é”™è¯¯"></a>ç”Ÿæˆé™æ€æ–‡ä»¶é”™è¯¯</h2><p>æ‰§è¡Œ <code>hexo g</code> çš„æ—¶å€™å‡ºç°äº†ä¸‹é¢çš„é”™è¯¯</p><figure class="highlight cmd"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">ERROR Template render error: (Y:\Blog\hexo3\themes\next\layout\post.swig)</span><br><span class="line"></span><br><span class="line"><span class="function">Error: <span class="title">Unable</span> <span class="title">to</span> <span class="title">call</span> `<span class="title">value</span>[&quot;<span class="title">split</span>&quot;]`, <span class="title">which</span> <span class="title">is</span> <span class="title">undefined</span> <span class="title">or</span> <span class="title">falsey</span></span></span><br></pre></td></tr></table></figure><p>ç½‘ä¸Šæœäº†å¾ˆå¤šç±»ä¼¼çš„é—®é¢˜éƒ½æ²¡æœ‰è§£å†³é—®é¢˜ï¼Œåæ¥çœ‹åˆ°ä¸€ç¯‡æ–‡ç« è¯´æ˜¯åšå®¢çš„æ ¼å¼æœ‰è¯¯ï¼Œå‡ºç°äº†è¯†åˆ«ä¸äº†çš„è®°å·ã€‚æˆ‘å°†åšå®¢ç§»å‡ºåå†æ‰§è¡Œæœç„¶æ²¡æœ‰æŠ¥é”™äº†ã€‚ä½†æ˜¯å¯¹ç…§åˆ«äººå†™çš„<code>.md</code>æ–‡ä»¶ï¼Œæˆ‘çš„åšå®¢æ²¡æœ‰ä»€ä¹ˆæ ¼å¼ä¸æ­£ç¡®çš„åœ°æ–¹ã€‚</p><p>ä¹‹åæˆ‘åˆå°è¯•äº†å°†<code>ä¸»é¢˜é…ç½®æ–‡ä»¶</code>æ¢å¤æˆåˆå§‹çŠ¶æ€ï¼Œè¿™æ ·è§£å†³äº†é—®é¢˜ï¼Œä½†æˆ‘ä¸çŸ¥é“æ˜¯å“ªé‡Œé”™äº†ï¼Œå¯èƒ½æ˜¯æ”¹çš„è¿‡ç¨‹ä¸­å°†æ ¼å¼å†™é”™äº†ã€‚</p><h2 id="æœ¬åœ°ä¸éƒ¨ç½²ä¸ä¸€è‡´é—®é¢˜"><a href="#æœ¬åœ°ä¸éƒ¨ç½²ä¸ä¸€è‡´é—®é¢˜" class="headerlink" title="æœ¬åœ°ä¸éƒ¨ç½²ä¸ä¸€è‡´é—®é¢˜"></a>æœ¬åœ°ä¸éƒ¨ç½²ä¸ä¸€è‡´é—®é¢˜</h2><p>å‚è€ƒ <a href="https://blog.csdn.net/GAI159/article/details/105128186/">è§£å†³hexoæœ¬åœ°ä¸éƒ¨ç½²ä¸ä¸€è‡´é—®é¢˜</a>ã€‚</p><p>å¯èƒ½åŸå› ï¼š</p><p>1.URLé…ç½®é”™è¯¯(å†™ä¸Šè‡ªå·±çš„åšå®¢åœ°å€)</p><p><img src="/2020/hexo-githubPages-setUp-record/2020-08-19_11-33-46.png" alt="ç«™ç‚¹é…ç½®ä¿¡æ¯"></p><p>2.éƒ¨ç½²åˆ°è¿œç¨‹æœåŠ¡å™¨æ²¡æ¥å¾—åŠæ›´æ–°ï¼Œè¿‡ä¸€æ®µæ—¶é—´å†çœ‹</p><p>3.æµè§ˆå™¨ä¿å­˜äº†ä¹‹å‰çš„æ•°æ®ï¼Œæ¸…é™¤æµè§ˆå™¨ç¼“å­˜åå†å¼ºåˆ¶åˆ·æ–°Shift+F5 ï¼ˆâˆšï¼‰</p><p>4.å¦‚æœä¸Šé¢å‡ ç§éƒ½è¿˜æ²¡æœ‰è§£å†³é—®é¢˜ï¼Œä¹Ÿå¯èƒ½æ˜¯branché”™è¯¯ </p><p><img src="/2020/hexo-githubPages-setUp-record/20200326212416815.jpg" alt="æ¨åˆ°å¦ä¸€ä¸ªåˆ†æ”¯"></p><p>ä¹‹ååœ¨hexoç«™ç‚¹é…ç½®æ–‡ä»¶_config.ymlä¸­æ‰¾åˆ°branchï¼Œå°†masteræ”¹ä¸ºåˆšåˆšæ–°å»ºçš„åˆ†æ”¯åã€‚</p><h2 id="åšå®¢å›¾ç‰‡æ˜¾ç¤ºä¸å‡º"><a href="#åšå®¢å›¾ç‰‡æ˜¾ç¤ºä¸å‡º" class="headerlink" title="åšå®¢å›¾ç‰‡æ˜¾ç¤ºä¸å‡º"></a>åšå®¢å›¾ç‰‡æ˜¾ç¤ºä¸å‡º</h2><p>æˆ‘ä¸€èˆ¬æ˜¯é‡‡ç”¨æˆªå›¾åç›´æ¥å°†å›¾ç‰‡ç²˜è´´åˆ°åšå®¢ä¸­çš„åšæ³•ï¼Œè¿™æ ·å½“ç„¶æ‰¾ä¸åˆ°äº†ï¼Œå›¾ç‰‡æ–‡ä»¶éƒ½æ²¡æœ‰åˆ°githubé‡Œé¢å»ã€‚</p><p>è§£å†³åŠæ³•ï¼š</p><p>å®‰è£…æ’ä»¶ </p><figure class="highlight cmd"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install hexo-asset-image --save</span><br></pre></td></tr></table></figure><p>åœ¨ç«™ç‚¹é…ç½®æ–‡ä»¶*/_config.yml* ä¸­é…ç½®æŒ‡ä»¤ <code>post_asset_folder: true</code> è¿™æ ·åœ¨æ¯æ¬¡æ–°å»ºæ–‡ç« çš„æ—¶å€™å°±ä¼šå»ºç«‹åŒåæ–‡ä»¶å¤¹, ç›´æ¥å°†ç›¸åº”çš„æ–‡ç« å›¾ç‰‡æ”¾åœ¨æ–‡ä»¶å¤¹å†…ã€‚</p><p><img src="/2020/hexo-githubPages-setUp-record/Snipaste_2020-08-19_11-54-33.png" alt="æ–‡ä»¶ç»“æ„"></p><p>ä¹‹åå¼•ç”¨çš„æ—¶å€™å¯ä»¥ä½¿ç”¨markdownè¯­æ³•</p><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">![<span class="string">æ–‡ä»¶ç»“æ„</span>](<span class="link">hexo-github-pages-åšå®¢æ­å»ºè®°å½•/Snipaste_2020-08-19_11-54-33.png</span>)</span><br></pre></td></tr></table></figure><p>ä¹Ÿå¯ä»¥ä½¿ç”¨hexoå®šä¹‰çš„æ ‡ç­¾</p><figure class="highlight maxima"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&#123;<span class="symbol">%</span> asset_img <span class="built_in">example</span>.jpg This <span class="built_in">is</span> an <span class="built_in">example</span> <span class="built_in">image</span> <span class="symbol">%</span>&#125;</span><br></pre></td></tr></table></figure><h2 id="æ˜¾ç¤ºä¸å‡ºarchivesé¡µé¢"><a href="#æ˜¾ç¤ºä¸å‡ºarchivesé¡µé¢" class="headerlink" title="æ˜¾ç¤ºä¸å‡ºarchivesé¡µé¢"></a>æ˜¾ç¤ºä¸å‡ºarchivesé¡µé¢</h2><p>archiveså½’æ¡£é¡µé¢æ˜¾ç¤ºä¸å‡ºï¼Œä½†åªè¦åå­—ä¸æ˜¯è¿™ä¸ªå°±æ²¡æœ‰é—®é¢˜ã€‚</p><h2 id="æ–‡ç« è·¯å¾„undefined"><a href="#æ–‡ç« è·¯å¾„undefined" class="headerlink" title="æ–‡ç« è·¯å¾„undefined"></a>æ–‡ç« è·¯å¾„undefined</h2><p>å°†<code>ç«™ç‚¹é…ç½®æ–‡ä»¶</code> permalink ä¿®æ”¹åå°±å¥½äº†ã€‚</p><p><img src="/2020/hexo-githubPages-setUp-record/Snipaste_2020-08-24_22-06-11.png" alt="é…ç½®ä¿¡æ¯"></p>]]></content>
    
    
    <summary type="html">&lt;p&gt;å¾ˆæ—©å°±æœ‰å»ºä¸€ä¸ªè‡ªå·±çš„åšå®¢ç½‘ç«™çš„æƒ³æ³•äº†ï¼Œå¯èƒ½ä¹Ÿæ˜¯æƒ³å¯ä»¥å€’é€¼è‡ªå·±å¤šå†™ç‚¹ä¸œè¥¿å§ã€‚ä»å®‰è£…hexoå¼€å§‹ã€æ›´æ¢ä¸»é¢˜ã€æ·»åŠ åŠŸèƒ½å’Œç¬¬ä¸‰æ–¹æœåŠ¡ã€éƒ¨ç½²åˆ°github pagesä¸Šï¼Œä¸€æ­¥æ­¥å®Œå–„è‡ªå·±çš„åšå®¢ã€‚æœŸé—´è¸©åˆ°äº†æ•°ä¸æ¸…çš„å‘ï¼Œå†æ—¶ä¸€ä¸ªæœˆï¼Œç»ˆäºæŠŠåšå®¢çš„é›å½¢ç»™åšå‡ºæ¥äº†ã€‚&lt;/p&gt;</summary>
    
    
    
    
    <category term="è®°å½•" scheme="https://www.fvolcano.red/tags/%E8%AE%B0%E5%BD%95/"/>
    
    <category term="åšå®¢æ­å»º" scheme="https://www.fvolcano.red/tags/%E5%8D%9A%E5%AE%A2%E6%90%AD%E5%BB%BA/"/>
    
  </entry>
  
</feed>
