!function(){window.WobbleWindow=function(e,t){var o,n,i={x:0,y:0},r=!1,l={},a={},s={name:"wobblew",position:"relative",depth:-1,overflowX:"visible",overflowY:"visible",offsetX:0,offsetY:0,moveTypeIn:"move",moveTypeOut:"wobble",wobbleFactor:.95,wobbleSpeed:.1,moveSpeed:6,lineWidth:1,transplantLineColor:!1,lineColor:"",transplantBodyColor:!0,bodyColor:"",radius:50,pointCountX:7,pointCountY:5,movementLeft:!0,movementRight:!0,movementTop:!0,movementBottom:!0,autoResize:!0,debug:!1};if(void 0!==t)for(var p in t)t.hasOwnProperty(p)&&s.hasOwnProperty(p)&&(s[p]=t[p]);if(!e)throw Error("\nNo div element found");if(s.pointCountX%2==0)throw Error("\nParam pointCountX must be an odd integer");if(s.pointCountY%2==0)throw Error("\nParam pointCountY must be an odd integer");function d(){l.width=l.elementWidth+2*s.offsetX,l.height=l.elementHeight+2*s.offsetY,s.radius>0&&(s.pointCountX=Math.round(l.width/s.radius),s.pointCountY=Math.round(l.height/s.radius)),s.pointCountX%2==0&&(s.pointCountX=s.pointCountX+1),s.pointCountY%2==0&&(s.pointCountY=s.pointCountY+1),a.spaceX=Math.min(l.elementWidth,l.width/(s.pointCountX-1)),a.spaceY=Math.min(l.elementHeight,l.height/(s.pointCountY+1)),a.radius=Math.ceil(Math.max(a.spaceX,a.spaceY)),l.left=0,l.top=0,s.canvasWidth=l.elementWidth,s.movementLeft?(o.style.left=-a.radius+"px",s.canvasWidth+=a.radius,l.left=a.radius-s.offsetX):o.style.left=-s.offsetX+"px",s.movementRight&&(s.canvasWidth+=a.radius),s.canvasHeight=l.elementHeight,s.movementTop?(o.style.top=-a.radius+"px",s.canvasHeight+=a.radius,l.top=a.radius-s.offsetY):o.style.top=-s.offsetY+"px",s.movementBottom&&(s.canvasHeight+=a.radius),o.width=s.canvasWidth,o.height=s.canvasHeight}function u(){var e,t,o,n;for(a.pointHolder=[],t=!0,o=0,n=s.pointCountX;o<n;o++)s.movementTop?(t?(e=h(l.left+o*a.spaceX,l.top,0,0,0,!0,a.spaceX,"P",s.debug),t=!1):(e=h(l.left+o*a.spaceX,l.top,0,0,0,!0,a.spaceX,"C",s.debug),t=!0),0!==o&&o!==n-1||(e.color="#00FF00",e.movement=!1),a.pointHolder.push(e)):(0!==o&&o!==n-1||(e=h(l.left+o*a.spaceX,l.top,0,0,0,!1,0,"P",s.debug)),a.pointHolder.push(e));for(t=!1,o=1,n=s.pointCountY+1;o<n;o++)s.movementRight?(t?(e=h(l.left+l.width,l.top+o*a.spaceY,0,0,0,!0,a.spaceY,"P",s.debug),t=!1):(e=h(l.left+l.width,l.top+o*a.spaceY,0,0,0,!0,a.spaceY,"C",s.debug),t=!0),a.pointHolder.push(e)):(1===o?e=h(l.left+l.width,l.top+(o-1)*a.spaceY,0,0,0,!1,0,"P",s.debug):o===s.pointCountY&&(e=h(l.left+l.width,l.top+(o+1)*a.spaceY,0,0,0,!1,0,"P",s.debug)),a.pointHolder.push(e));for(t=!0,o=s.pointCountX-1,n=-1;o>n;o--)s.movementBottom?(t?(e=h(l.left+o*a.spaceX,l.top+l.height,0,0,0,!0,a.spaceX,"P",s.debug),t=!1):(e=h(l.left+o*a.spaceX,l.top+l.height,0,0,0,!0,a.spaceX,"C",s.debug),t=!0),0!==o&&o!==s.pointCountX-1||(e.color="#00FF00",e.movement=!1),a.pointHolder.push(e)):(0!==o&&o!==s.pointCountX-1||(e=h(l.left+o*a.spaceX,l.top+l.height,0,0,0,!1,0,"P",s.debug)),a.pointHolder.push(e));for(t=!1,o=s.pointCountY,n=-1;o>n;o--)s.movementLeft?(t?(e=h(l.left,l.top+o*a.spaceY,0,0,0,!0,a.spaceY,"P",s.debug),t=!1):(e=h(l.left,l.top+o*a.spaceY,0,0,0,!0,a.spaceY,"C",s.debug),t=!0),a.pointHolder.push(e)):(0===o?e=h(l.left,l.top+o*a.spaceY,0,0,0,!1,0,"P",s.debug):o===s.pointCountY&&(e=h(l.left,l.top+(o+1)*a.spaceY,0,0,0,!1,0,"P",s.debug)),a.pointHolder.push(e))}function h(e,t,o,n,i,r,l,a,s){var p={};return p.x=e,p.y=t,p.xp=e,p.yp=t,p.sx=0,p.sy=0,p.distance=i,p.movement=r,p.radius=l,p.type=a,p.visible=s,p}function m(){requestAnimFrame(m),function(){n.clearRect(0,0,s.canvasWidth,s.canvasHeight);var e,t,o=a.pointHolder;for(n.beginPath(),n.moveTo(o[0].x,o[0].y),e=1,t=o.length;e<t;e+=2){var r=o[e],l=i.x-r.xp,p=i.y-r.yp;r.distance=Math.sqrt(l*l+p*p),r.distance<r.radius?"wobble"===s.moveTypeIn?(r.sx=r.sx*s.wobbleFactor+(i.x-r.x)*s.wobbleSpeed,r.sy=r.sy*s.wobbleFactor+(i.y-r.y)*s.wobbleSpeed,r.x=r.x+r.sx,r.y=r.y+r.sy):"move"===s.moveTypeIn&&(r.x-=(r.x-i.x)/s.moveSpeed,r.y-=(r.y-i.y)/s.moveSpeed):"wobble"===s.moveTypeOut?(r.sx=r.sx*s.wobbleFactor+(r.xp-r.x)*s.wobbleSpeed,r.sy=r.sy*s.wobbleFactor+(r.yp-r.y)*s.wobbleSpeed,r.x=r.x+r.sx,r.y=r.y+r.sy):"move"===s.moveTypeOut&&(r.x-=(r.x-r.xp)/s.moveSpeed,r.y-=(r.y-r.yp)/s.moveSpeed);var d=o[e-1],u=o[e+1];e>2&&e<o.length-2&&(d.movement&&(d.x=(o[e-2].x+r.x)/2,d.y=(o[e-2].y+r.y)/2),u.movement&&(u.x=(o[e+2].x+r.x)/2,u.y=(o[e+2].y+r.y)/2)),n.quadraticCurveTo(r.x,r.y,u.x,u.y)}if(s.lineColor.length>0&&(n.lineWidth=s.lineWidth,n.strokeStyle=s.lineColor,n.stroke()),s.bodyColor.length>0&&(n.fillStyle=s.bodyColor,n.fill()),s.debug){for(e=0,t=o.length;e<t;e++){var r=o[e];r.visible&&("P"===r.type?f(r.x,r.y,3,"#FF0000"):f(r.x,r.y,6,"#FF00FF"),r.color&&f(r.x,r.y,12,r.color))}n.strokeStyle="#000000",n.strokeRect(0,0,s.canvasWidth,s.canvasHeight)}}(),s.autoResize&&(r||l.elementWidth===e.offsetWidth&&l.elementHeight===e.offsetHeight||(r=!0,l.elementWidth=e.offsetWidth,l.elementHeight=e.offsetHeight,window.setTimeout(c,10)))}function c(){d(),u(),r=!1}function f(e,t,o,i){n.beginPath(),n.arc(e,t,o,0,2*Math.PI),n.strokeStyle=i,n.stroke()}function y(e){i=function(e,t){var o=e.getBoundingClientRect();return{x:t.clientX-o.left,y:t.clientY-o.top}}(o,e)}function b(e){i.x=-1e4,i.y=-1e4}HTMLElement.prototype.__defineGetter__("currentStyle",function(){return this.ownerDocument.defaultView.getComputedStyle(this,null)}),window.requestAnimFrame=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||function(e){window.setTimeout(e,1e3/60)},(o=document.createElement("canvas")).id=s.name,o.style.position="absolute",o.style.zIndex=s.depth.toString(),o.addEventListener("mousemove",y),o.addEventListener("mouseleave",b),n=o.getContext("2d"),e.appendChild(o),e.style.position=s.position,e.style.zIndex=(s.depth+1).toString(),s.overflowX.length>0&&(e.parentElement.style.overflowX=s.overflowX),s.overflowY.length>0&&(e.parentElement.style.overflowY=s.overflowY),s.transplantBodyColor&&e.currentStyle.backgroundColor.length>0&&(s.bodyColor=e.currentStyle.backgroundColor),s.transplantLineColor&&e.currentStyle.borderColor.length>0&&(s.lineColor=e.currentStyle.borderColor),l.elementWidth=e.offsetWidth,l.elementHeight=e.offsetHeight,d(),u(),m(),s.transplantBodyColor&&e.currentStyle.backgroundColor.length>0&&(e.className.length>0?e.className+=" wobbleTransparentBK":e.className=" wobbleTransparentBK"),s.transplantLineColor&&e.currentStyle.borderColor.length>0&&(e.className.length>0?e.className+=" wobbleTransparentLine":e.className=" wobbleTransparentLine")}}(),"undefined"!=typeof jQuery&&function(e){e.fn.wobbleWindow=function(t){var o=arguments;return this.each(function(){if(e.data(this,"plugin_WobbleWindow")){var n=e.data(this,"plugin_WobbleWindow");n[t]?n[t].apply(this,Array.prototype.slice.call(o,1)):e.error("Method "+t+" does not exist on jQuery.wobbleWindow")}else e.data(this,"plugin_WobbleWindow",new WobbleWindow(this,t))})}}(jQuery);